(function(){var t=this,e=t._,n={},i=Array.prototype,o=Object.prototype,r=Function.prototype,s=i.push,a=i.slice,u=i.concat,l=o.toString,h=o.hasOwnProperty,c=i.forEach,p=i.map,d=i.reduce,f=i.reduceRight,m=i.filter,g=i.every,v=i.some,y=i.indexOf,w=i.lastIndexOf,b=Array.isArray,_=Object.keys,x=r.bind,A=function(t){return t instanceof A?t:this instanceof A?(this._wrapped=t,void 0):new A(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=A),exports._=A):t._=A,A.VERSION="1.4.4";var P=A.each=A.forEach=function(t,e,i){if(null!=t)if(c&&t.forEach===c)t.forEach(e,i);else if(t.length===+t.length){for(var o=0,r=t.length;r>o;o++)if(e.call(i,t[o],o,t)===n)return}else for(var s in t)if(A.has(t,s)&&e.call(i,t[s],s,t)===n)return};A.map=A.collect=function(t,e,n){var i=[];return null==t?i:p&&t.map===p?t.map(e,n):(P(t,function(t,o,r){i[i.length]=e.call(n,t,o,r)}),i)};var S="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(t,e,n,i){var o=arguments.length>2;if(null==t&&(t=[]),d&&t.reduce===d)return i&&(e=A.bind(e,i)),o?t.reduce(e,n):t.reduce(e);if(P(t,function(t,r,s){o?n=e.call(i,n,t,r,s):(n=t,o=!0)}),!o)throw new TypeError(S);return n},A.reduceRight=A.foldr=function(t,e,n,i){var o=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return i&&(e=A.bind(e,i)),o?t.reduceRight(e,n):t.reduceRight(e);var r=t.length;if(r!==+r){var s=A.keys(t);r=s.length}if(P(t,function(a,u,l){u=s?s[--r]:--r,o?n=e.call(i,n,t[u],u,l):(n=t[u],o=!0)}),!o)throw new TypeError(S);return n},A.find=A.detect=function(t,e,n){var i;return T(t,function(t,o,r){return e.call(n,t,o,r)?(i=t,!0):void 0}),i},A.filter=A.select=function(t,e,n){var i=[];return null==t?i:m&&t.filter===m?t.filter(e,n):(P(t,function(t,o,r){e.call(n,t,o,r)&&(i[i.length]=t)}),i)},A.reject=function(t,e,n){return A.filter(t,function(t,i,o){return!e.call(n,t,i,o)},n)},A.every=A.all=function(t,e,i){e||(e=A.identity);var o=!0;return null==t?o:g&&t.every===g?t.every(e,i):(P(t,function(t,r,s){return(o=o&&e.call(i,t,r,s))?void 0:n}),!!o)};var T=A.some=A.any=function(t,e,i){e||(e=A.identity);var o=!1;return null==t?o:v&&t.some===v?t.some(e,i):(P(t,function(t,r,s){return o||(o=e.call(i,t,r,s))?n:void 0}),!!o)};A.contains=A.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):T(t,function(t){return t===e})},A.invoke=function(t,e){var n=a.call(arguments,2),i=A.isFunction(e);return A.map(t,function(t){return(i?e:t[e]).apply(t,n)})},A.pluck=function(t,e){return A.map(t,function(t){return t[e]})},A.where=function(t,e,n){return A.isEmpty(e)?n?null:[]:A[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},A.findWhere=function(t,e){return A.where(t,e,!0)},A.max=function(t,e,n){if(!e&&A.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!e&&A.isEmpty(t))return-1/0;var i={computed:-1/0,value:-1/0};return P(t,function(t,o,r){var s=e?e.call(n,t,o,r):t;s>=i.computed&&(i={value:t,computed:s})}),i.value},A.min=function(t,e,n){if(!e&&A.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!e&&A.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return P(t,function(t,o,r){var s=e?e.call(n,t,o,r):t;i.computed>s&&(i={value:t,computed:s})}),i.value},A.shuffle=function(t){var e,n=0,i=[];return P(t,function(t){e=A.random(n++),i[n-1]=i[e],i[e]=t}),i};var C=function(t){return A.isFunction(t)?t:function(e){return e[t]}};A.sortBy=function(t,e,n){var i=C(e);return A.pluck(A.map(t,function(t,e,o){return{value:t,index:e,criteria:i.call(n,t,e,o)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index<e.index?-1:1}),"value")};var M=function(t,e,n,i){var o={},r=C(e||A.identity);return P(t,function(e,s){var a=r.call(n,e,s,t);i(o,a,e)}),o};A.groupBy=function(t,e,n){return M(t,e,n,function(t,e,n){(A.has(t,e)?t[e]:t[e]=[]).push(n)})},A.countBy=function(t,e,n){return M(t,e,n,function(t,e){A.has(t,e)||(t[e]=0),t[e]++})},A.sortedIndex=function(t,e,n,i){n=null==n?A.identity:C(n);for(var o=n.call(i,e),r=0,s=t.length;s>r;){var a=r+s>>>1;o>n.call(i,t[a])?r=a+1:s=a}return r},A.toArray=function(t){return t?A.isArray(t)?a.call(t):t.length===+t.length?A.map(t,A.identity):A.values(t):[]},A.size=function(t){return null==t?0:t.length===+t.length?t.length:A.keys(t).length},A.first=A.head=A.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:a.call(t,0,e)},A.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},A.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},A.rest=A.tail=A.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},A.compact=function(t){return A.filter(t,A.identity)};var k=function(t,e,n){return P(t,function(t){A.isArray(t)?e?s.apply(n,t):k(t,e,n):n.push(t)}),n};A.flatten=function(t,e){return k(t,e,[])},A.without=function(t){return A.difference(t,a.call(arguments,1))},A.uniq=A.unique=function(t,e,n,i){A.isFunction(e)&&(i=n,n=e,e=!1);var o=n?A.map(t,n,i):t,r=[],s=[];return P(o,function(n,i){(e?i&&s[s.length-1]===n:A.contains(s,n))||(s.push(n),r.push(t[i]))}),r},A.union=function(){return A.uniq(u.apply(i,arguments))},A.intersection=function(t){var e=a.call(arguments,1);return A.filter(A.uniq(t),function(t){return A.every(e,function(e){return A.indexOf(e,t)>=0})})},A.difference=function(t){var e=u.apply(i,a.call(arguments,1));return A.filter(t,function(t){return!A.contains(e,t)})},A.zip=function(){for(var t=a.call(arguments),e=A.max(A.pluck(t,"length")),n=Array(e),i=0;e>i;i++)n[i]=A.pluck(t,""+i);return n},A.object=function(t,e){if(null==t)return{};for(var n={},i=0,o=t.length;o>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},A.indexOf=function(t,e,n){if(null==t)return-1;var i=0,o=t.length;if(n){if("number"!=typeof n)return i=A.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,o+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;o>i;i++)if(t[i]===e)return i;return-1},A.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(w&&t.lastIndexOf===w)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var o=i?n:t.length;o--;)if(t[o]===e)return o;return-1},A.range=function(t,e,n){1>=arguments.length&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),o=0,r=Array(i);i>o;)r[o++]=t,t+=n;return r},A.bind=function(t,e){if(t.bind===x&&x)return x.apply(t,a.call(arguments,1));var n=a.call(arguments,2);return function(){return t.apply(e,n.concat(a.call(arguments)))}},A.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},A.bindAll=function(t){var e=a.call(arguments,1);return 0===e.length&&(e=A.functions(t)),P(e,function(e){t[e]=A.bind(t[e],t)}),t},A.memoize=function(t,e){var n={};return e||(e=A.identity),function(){var i=e.apply(this,arguments);return A.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},A.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},A.defer=function(t){return A.delay.apply(A,[t,1].concat(a.call(arguments,1)))},A.throttle=function(t,e){var n,i,o,r,s=0,a=function(){s=new Date,o=null,r=t.apply(n,i)};return function(){var u=new Date,l=e-(u-s);return n=this,i=arguments,0>=l?(clearTimeout(o),o=null,s=u,r=t.apply(n,i)):o||(o=setTimeout(a,l)),r}},A.debounce=function(t,e,n){var i,o;return function(){var r=this,s=arguments,a=function(){i=null,n||(o=t.apply(r,s))},u=n&&!i;return clearTimeout(i),i=setTimeout(a,e),u&&(o=t.apply(r,s)),o}},A.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},A.wrap=function(t,e){return function(){var n=[t];return s.apply(n,arguments),e.apply(this,n)}},A.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},A.after=function(t,e){return 0>=t?e():function(){return 1>--t?e.apply(this,arguments):void 0}},A.keys=_||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)A.has(t,n)&&(e[e.length]=n);return e},A.values=function(t){var e=[];for(var n in t)A.has(t,n)&&e.push(t[n]);return e},A.pairs=function(t){var e=[];for(var n in t)A.has(t,n)&&e.push([n,t[n]]);return e},A.invert=function(t){var e={};for(var n in t)A.has(t,n)&&(e[t[n]]=n);return e},A.functions=A.methods=function(t){var e=[];for(var n in t)A.isFunction(t[n])&&e.push(n);return e.sort()},A.extend=function(t){return P(a.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},A.pick=function(t){var e={},n=u.apply(i,a.call(arguments,1));return P(n,function(n){n in t&&(e[n]=t[n])}),e},A.omit=function(t){var e={},n=u.apply(i,a.call(arguments,1));for(var o in t)A.contains(n,o)||(e[o]=t[o]);return e},A.defaults=function(t){return P(a.call(arguments,1),function(e){if(e)for(var n in e)null==t[n]&&(t[n]=e[n])}),t},A.clone=function(t){return A.isObject(t)?A.isArray(t)?t.slice():A.extend({},t):t},A.tap=function(t,e){return e(t),t};var O=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof A&&(t=t._wrapped),e instanceof A&&(e=e._wrapped);var o=l.call(t);if(o!=l.call(e))return!1;switch(o){case"[object String]":return t==e+"";case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var r=n.length;r--;)if(n[r]==t)return i[r]==e;n.push(t),i.push(e);var s=0,a=!0;if("[object Array]"==o){if(s=t.length,a=s==e.length)for(;s--&&(a=O(t[s],e[s],n,i)););}else{var u=t.constructor,h=e.constructor;if(u!==h&&!(A.isFunction(u)&&u instanceof u&&A.isFunction(h)&&h instanceof h))return!1;for(var c in t)if(A.has(t,c)&&(s++,!(a=A.has(e,c)&&O(t[c],e[c],n,i))))break;if(a){for(c in e)if(A.has(e,c)&&!s--)break;a=!s}}return n.pop(),i.pop(),a};A.isEqual=function(t,e){return O(t,e,[],[])},A.isEmpty=function(t){if(null==t)return!0;if(A.isArray(t)||A.isString(t))return 0===t.length;for(var e in t)if(A.has(t,e))return!1;return!0},A.isElement=function(t){return!(!t||1!==t.nodeType)},A.isArray=b||function(t){return"[object Array]"==l.call(t)},A.isObject=function(t){return t===Object(t)},P(["Arguments","Function","String","Number","Date","RegExp"],function(t){A["is"+t]=function(e){return l.call(e)=="[object "+t+"]"}}),A.isArguments(arguments)||(A.isArguments=function(t){return!(!t||!A.has(t,"callee"))}),true&&(A.isFunction=function(t){return"function"==typeof t}),A.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},A.isNaN=function(t){return A.isNumber(t)&&t!=+t},A.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==l.call(t)},A.isNull=function(t){return null===t},A.isUndefined=function(t){return void 0===t},A.has=function(t,e){return h.call(t,e)},A.noConflict=function(){return t._=e,this},A.identity=function(t){return t},A.times=function(t,e,n){for(var i=Array(t),o=0;t>o;o++)i[o]=e.call(n,o);return i},A.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var j={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};j.unescape=A.invert(j.escape);var E={escape:RegExp("["+A.keys(j.escape).join("")+"]","g"),unescape:RegExp("("+A.keys(j.unescape).join("|")+")","g")};A.each(["escape","unescape"],function(t){A[t]=function(e){return null==e?"":(""+e).replace(E[t],function(e){return j[t][e]})}}),A.result=function(t,e){if(null==t)return null;var n=t[e];return A.isFunction(n)?n.call(t):n},A.mixin=function(t){P(A.functions(t),function(e){var n=A[e]=t[e];A.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),$.call(this,n.apply(A,t))}})};var I=0;A.uniqueId=function(t){var e=++I+"";return t?t+e:e},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(t,e,n){var i;n=A.defaults({},n,A.templateSettings);var o=RegExp([(n.escape||D).source,(n.interpolate||D).source,(n.evaluate||D).source].join("|")+"|$","g"),r=0,s="__p+='";t.replace(o,function(e,n,i,o,a){return s+=t.slice(r,a).replace(F,function(t){return"\\"+L[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),o&&(s+="';\n"+o+"\n__p+='"),r=a+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return i(e,A);var u=function(t){return i.call(this,t,A)};return u.source="function("+(n.variable||"obj")+"){\n"+s+"}",u},A.chain=function(t){return A(t).chain()};var $=function(t){return this._chain?A(t).chain():t};A.mixin(A),P(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];A.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],$.call(this,n)}}),P(["concat","join","slice"],function(t){var e=i[t];A.prototype[t]=function(){return $.call(this,e.apply(this._wrapped,arguments))}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this),!function(t,e,n){function i(t,n){var i,o=e.createElement(t||"div");for(i in n)o[i]=n[i];return o}function o(t){for(var e=1,n=arguments.length;n>e;e++)t.appendChild(arguments[e]);return t}function r(t,e,n,i){var o=["opacity",e,~~(100*t),n,i].join("-"),r=.01+100*(n/i),s=Math.max(1-(1-t)/e*(100-r),t),a=c.substring(0,c.indexOf("Animation")).toLowerCase(),u=a&&"-"+a+"-"||"";return d[o]||(f.insertRule("@"+u+"keyframes "+o+"{"+"0%{opacity:"+s+"}"+r+"%{opacity:"+t+"}"+(r+.01)+"%{opacity:1}"+(r+e)%100+"%{opacity:"+t+"}"+"100%{opacity:"+s+"}"+"}",f.cssRules.length),d[o]=1),o}function s(t,e){var i,o,r=t.style;if(r[e]!==n)return e;for(e=e.charAt(0).toUpperCase()+e.slice(1),o=0;p.length>o;o++)if(i=p[o]+e,r[i]!==n)return i}function a(t,e){for(var n in e)t.style[s(t,n)||n]=e[n];return t}function u(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var o in i)t[o]===n&&(t[o]=i[o])}return t}function l(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function h(t){return this.spin?(this.opts=u(t||{},h.defaults,m),n):new h(t)}var c,p=["webkit","Moz","ms","O"],d={},f=function(){var t=i("style",{type:"text/css"});return o(e.getElementsByTagName("head")[0],t),t.sheet||t.styleSheet}(),m={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};h.defaults={},u(h.prototype,{spin:function(t){this.stop();var e,n,o=this,r=o.opts,s=o.el=a(i(0,{className:r.className}),{position:r.position,width:0,zIndex:r.zIndex}),u=r.radius+r.length+r.width;if(t&&(t.insertBefore(s,t.firstChild||null),n=l(t),e=l(s),a(s,{left:("auto"==r.left?n.x-e.x+(t.offsetWidth>>1):parseInt(r.left,10)+u)+"px",top:("auto"==r.top?n.y-e.y+(t.offsetHeight>>1):parseInt(r.top,10)+u)+"px"})),s.setAttribute("aria-role","progressbar"),o.lines(s,o.opts),!c){var h=0,p=r.fps,d=p/r.speed,f=(1-r.opacity)/(d*r.trail/100),m=d/r.lines;(function g(){h++;for(var t=r.lines;t;t--){var e=Math.max(1-(h+t*m)%d*f,r.opacity);o.opacity(s,r.lines-t,e,r)}o.timeout=o.el&&setTimeout(g,~~(1e3/p))})()}return o},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=n),this},lines:function(t,e){function n(t,n){return a(i(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*u+e.rotate)+"deg) translate("+e.radius+"px"+",0)",borderRadius:(e.corners*e.width>>1)+"px"})}for(var s,u=0;e.lines>u;u++)s=a(i(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:c&&r(e.opacity,e.trail,u,e.lines)+" "+1/e.speed+"s linear infinite"}),e.shadow&&o(s,a(n("#000","0 0 4px #000"),{top:"2px"})),o(t,o(s,n(e.color,"0 0 1px rgba(0,0,0,.1)")));return t},opacity:function(t,e,n){t.childNodes.length>e&&(t.childNodes[e].style.opacity=n)}}),function(){function t(t,e){return i("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}var e=a(i("group"),{behavior:"url(#default#VML)"});!s(e,"transform")&&e.adj?(f.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(e,n){function i(){return a(t("group",{coordsize:l+" "+l,coordorigin:-u+" "+-u}),{width:l,height:l})}function r(e,r,s){o(c,o(a(i(),{rotation:360/n.lines*e+"deg",left:~~r}),o(a(t("roundrect",{arcsize:n.corners}),{width:u,height:n.width,left:n.radius,top:-n.width>>1,filter:s}),t("fill",{color:n.color,opacity:n.opacity}),t("stroke",{opacity:0}))))}var s,u=n.length+n.width,l=2*u,h=2*-(n.width+n.length)+"px",c=a(i(),{position:"absolute",top:h,left:h});if(n.shadow)for(s=1;n.lines>=s;s++)r(s,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(s=1;n.lines>=s;s++)r(s);return o(e,c)},h.prototype.opacity=function(t,e,n,i){var o=t.firstChild;i=i.shadow&&i.lines||0,o&&o.childNodes.length>e+i&&(o=o.childNodes[e+i],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=n))}):c=s(e,"animation")}(),"function"==typeof define&&define.amd?define(function(){return h}):t.Spinner=h}(window,document),function(t,e){function n(n,i){function o(t){return pe.preferFlash&&se&&!pe.ignoreFlash&&pe.flash[t]!==e&&pe.flash[t]}function r(t){return function(e){var n=this._s;return n&&n._a?e=t.call(this,e):(n&&n.id?pe._wD(n.id+": Ignoring "+e.type):pe._wD(me+"Ignoring "+e.type),e=null),e}}this.setupOptions={url:n||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!0,noSWFCache:!1},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=i||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20130101",this.altURL=this.movieURL=this.version=null,this.enabled=this.swfLoaded=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.didFlashBlock=this.muted=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.ignoreFlash=this.html5Only=!1;var s,a,u,l,h,c,p,d,f,m,g,v,y,w,b,_,x,A,P,S,T,C,M,k,O,j,E,I,D,L,F,$,H,R,W,N,B,q,U,z,V,G,Q,J,X,Z,K,Y,te,ee,ne,ie,oe,re,se,ae,ue,le,he,ce,pe=this,de=null,fe=null,me="HTML5::",ge=navigator.userAgent,ve=""+t.location.href,ye=document,we=[],be=!0,_e=!1,xe=!1,Ae=!1,Pe=!1,Se=!1,Te=0,Ce=["log","info","warn","error"],Me=null,ke=null,Oe=!1,je=!1,Ee=0,Ie=null,De=[],Le=null,Fe=Array.prototype.slice,$e=!1,He=ge.match(/(ipad|iphone|ipod)/i),Re=ge.match(/android/i),We=ge.match(/msie/i),Ne=ge.match(/webkit/i),Be=ge.match(/safari/i)&&!ge.match(/chrome/i),qe=ge.match(/opera/i),Ue=ge.match(/(mobile|pre\/|xoom)/i)||He||Re,ze=!ve.match(/usehtml5audio/i)&&!ve.match(/sm2\-ignorebadua/i)&&Be&&!ge.match(/silk/i)&&ge.match(/OS X 10_6_([3-7])/i),Ve=t.console!==e&&console.log!==e,Ge=ye.hasFocus!==e?ye.hasFocus():null,Qe=Be&&(ye.hasFocus===e||!ye.hasFocus()),Je=!Qe,Xe=/(mp3|mp4|mpa|m4a|m4b)/i,Ze=ye.location?ye.location.protocol.match(/http/i):null,Ke=Ze?"":"http://",Ye=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,tn="mpeg4 aac flv mov mp4 m4v f4v m4a m4b mp4v 3gp 3g2".split(" "),en=RegExp("\\.("+tn.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!Ze;var nn;try{nn=Audio!==e&&(qe&&opera!==e&&10>opera.version()?new Audio(null):new Audio).canPlayType!==e}catch(on){nn=!1}this.hasHTML5=nn,this.setup=function(t){var n=!pe.url;return t!==e&&Ae&&Le&&pe.ok()&&(t.flashVersion!==e||t.url!==e||t.html5Test!==e)&&z(R("setupLate")),g(t),n&&O&&t.url!==e&&pe.beginDelayedInit(),!O&&t.url!==e&&"complete"===ye.readyState&&setTimeout(M,1),pe},this.supported=this.ok=function(){return Le?Ae&&!Pe:pe.useHTML5Audio&&pe.hasHTML5},this.getMovie=function(e){return a(e)||ye[e]||t[e]},this.createSound=function(t,n){function i(){return r=q(r),pe.sounds[r.id]=new s(r),pe.soundIDs.push(r.id),pe.sounds[r.id]}var o,r;return o=null,o="soundManager.createSound(): "+R(Ae?"notOK":"notReady"),Ae&&pe.ok()?(n!==e&&(t={id:t,url:n}),r=m(t),r.url=X(r.url),(""+r.id).charAt(0).match(/^[0-9]$/)&&pe._wD("soundManager.createSound(): "+R("badID",r.id),2),pe._wD("soundManager.createSound(): "+r.id+" ("+r.url+")",1),V(r.id,!0)?(pe._wD("soundManager.createSound(): "+r.id+" exists",1),pe.sounds[r.id]):(K(r)?(o=i(),pe._wD(r.id+": Using HTML5"),o._setup_html5(r)):(c>8&&(null===r.isMovieStar&&(r.isMovieStar=!!(r.serverURL||r.type&&r.type.match(Ye)||r.url.match(en))),r.isMovieStar&&(pe._wD("soundManager.createSound(): using MovieStar handling"),r.loops>1&&d("noNSLoop"))),r=U(r,"soundManager.createSound(): "),o=i(),8===c?fe._createSound(r.id,r.loops||1,r.usePolicyFile):(fe._createSound(r.id,r.url,r.usePeakData,r.useWaveformData,r.useEQData,r.isMovieStar,r.isMovieStar?r.bufferTime:!1,r.loops||1,r.serverURL,r.duration||null,r.autoPlay,!0,r.autoLoad,r.usePolicyFile),r.serverURL||(o.connected=!0,r.onconnect&&r.onconnect.apply(o))),!r.serverURL&&(r.autoLoad||r.autoPlay)&&o.load(r)),!r.serverURL&&r.autoPlay&&o.play(),o)):(z(o),!1)},this.destroySound=function(t,e){if(!V(t))return!1;var n,i=pe.sounds[t];for(i._iO={},i.stop(),i.unload(),n=0;pe.soundIDs.length>n;n++)if(pe.soundIDs[n]===t){pe.soundIDs.splice(n,1);break}return e||i.destruct(!0),delete pe.sounds[t],!0},this.load=function(t,e){return V(t)?pe.sounds[t].load(e):!1},this.unload=function(t){return V(t)?pe.sounds[t].unload():!1},this.onposition=this.onPosition=function(t,e,n,i){return V(t)?pe.sounds[t].onposition(e,n,i):!1},this.clearOnPosition=function(t,e,n){return V(t)?pe.sounds[t].clearOnPosition(e,n):!1},this.start=this.play=function(t,e){var n=!1;return Ae&&pe.ok()?V(t)?pe.sounds[t].play(e):(e instanceof Object||(e={url:e}),e&&e.url&&(pe._wD('soundManager.play(): attempting to create "'+t+'"',1),e.id=t,n=pe.createSound(e).play()),n):(z("soundManager.play(): "+R(Ae?"notOK":"notReady")),n)},this.setPosition=function(t,e){return V(t)?pe.sounds[t].setPosition(e):!1},this.stop=function(t){return V(t)?(pe._wD("soundManager.stop("+t+")",1),pe.sounds[t].stop()):!1},this.stopAll=function(){var t;pe._wD("soundManager.stopAll()",1);for(t in pe.sounds)pe.sounds.hasOwnProperty(t)&&pe.sounds[t].stop()},this.pause=function(t){return V(t)?pe.sounds[t].pause():!1},this.pauseAll=function(){var t;for(t=pe.soundIDs.length-1;t>=0;t--)pe.sounds[pe.soundIDs[t]].pause()},this.resume=function(t){return V(t)?pe.sounds[t].resume():!1},this.resumeAll=function(){var t;for(t=pe.soundIDs.length-1;t>=0;t--)pe.sounds[pe.soundIDs[t]].resume()},this.togglePause=function(t){return V(t)?pe.sounds[t].togglePause():!1},this.setPan=function(t,e){return V(t)?pe.sounds[t].setPan(e):!1},this.setVolume=function(t,e){return V(t)?pe.sounds[t].setVolume(e):!1},this.mute=function(t){var e=0;if(t instanceof String&&(t=null),t)return V(t)?(pe._wD('soundManager.mute(): Muting "'+t+'"'),pe.sounds[t].mute()):!1;for(pe._wD("soundManager.mute(): Muting all sounds"),e=pe.soundIDs.length-1;e>=0;e--)pe.sounds[pe.soundIDs[e]].mute();return pe.muted=!0},this.muteAll=function(){pe.mute()},this.unmute=function(t){if(t instanceof String&&(t=null),t)return V(t)?(pe._wD('soundManager.unmute(): Unmuting "'+t+'"'),pe.sounds[t].unmute()):!1;for(pe._wD("soundManager.unmute(): Unmuting all sounds"),t=pe.soundIDs.length-1;t>=0;t--)pe.sounds[pe.soundIDs[t]].unmute();return pe.muted=!1,!0},this.unmuteAll=function(){pe.unmute()},this.toggleMute=function(t){return V(t)?pe.sounds[t].toggleMute():!1},this.getMemoryUse=function(){var t=0;return fe&&8!==c&&(t=parseInt(fe._getMemoryUse(),10)),t},this.disable=function(n){var i;if(n===e&&(n=!1),Pe)return!1;for(Pe=!0,d("shutdown",1),i=pe.soundIDs.length-1;i>=0;i--)F(pe.sounds[pe.soundIDs[i]]);return f(n),oe.remove(t,"load",b),!0},this.canPlayMIME=function(t){var e;return pe.hasHTML5&&(e=Y({type:t})),!e&&Le&&(e=t&&pe.ok()?!!(c>8&&t.match(Ye)||t.match(pe.mimePattern)):null),e},this.canPlayURL=function(t){var e;return pe.hasHTML5&&(e=Y({url:t})),!e&&Le&&(e=t&&pe.ok()?!!t.match(pe.filePattern):null),e},this.canPlayLink=function(t){return t.type!==e&&t.type&&pe.canPlayMIME(t.type)?!0:pe.canPlayURL(t.href)},this.getSoundById=function(t,e){if(!t)throw Error("soundManager.getSoundById(): sID is null/_undefined");var n=pe.sounds[t];return!n&&!e&&pe._wD('"'+t+'" is an invalid sound ID.',2),n},this.onready=function(e,n){if("function"!=typeof e)throw R("needFunction","onready");return Ae&&pe._wD(R("queue","onready")),n||(n=t),y("onready",e,n),w(),!0},this.ontimeout=function(e,n){if("function"!=typeof e)throw R("needFunction","ontimeout");return Ae&&pe._wD(R("queue","ontimeout")),n||(n=t),y("ontimeout",e,n),w({type:"ontimeout"}),!0},this._writeDebug=function(t,n){var i,o;return pe.debugMode?Ve&&pe.useConsole&&(n&&"object"==typeof n?console.log(t,n):Ce[n]!==e?console[Ce[n]](t):console.log(t),pe.consoleOnly)?!0:(i=a("soundmanager-debug"))?(o=ye.createElement("div"),0===++Te%2&&(o.className="sm2-alt"),n=n===e?0:parseInt(n,10),o.appendChild(ye.createTextNode(t)),n&&(n>=2&&(o.style.fontWeight="bold"),3===n&&(o.style.color="#ff3333")),i.insertBefore(o,i.firstChild),!0):!1:!1},-1!==ve.indexOf("sm2-debug=alert")&&(this._writeDebug=function(e){t.alert(e)}),this._wD=this._writeDebug,this._debug=function(){var t,e;for(d("currentObj",1),t=0,e=pe.soundIDs.length;e>t;t++)pe.sounds[pe.soundIDs[t]]._debug()},this.reboot=function(e,n){pe.soundIDs.length&&pe._wD("Destroying "+pe.soundIDs.length+" SMSound objects...");var i,o,r;for(i=pe.soundIDs.length-1;i>=0;i--)pe.sounds[pe.soundIDs[i]].destruct();if(fe)try{We&&(ke=fe.innerHTML),Me=fe.parentNode.removeChild(fe),d("flRemoved")}catch(s){d("badRemove",2)}if(ke=Me=Le=fe=null,pe.enabled=O=Ae=Oe=je=_e=xe=Pe=$e=pe.swfLoaded=!1,pe.soundIDs=[],pe.sounds={},e)we=[];else for(i in we)if(we.hasOwnProperty(i))for(o=0,r=we[i].length;r>o;o++)we[i][o].fired=!1;return n||pe._wD("soundManager: Rebooting..."),pe.html5={usingFlash:null},pe.flash={},pe.html5Only=!1,pe.ignoreFlash=!1,t.setTimeout(function(){C(),n||pe.beginDelayedInit()},20),pe},this.reset=function(){return d("reset"),pe.reboot(!0,!0)},this.getMoviePercent=function(){return fe&&"PercentLoaded"in fe?fe.PercentLoaded():null},this.beginDelayedInit=function(){Se=!0,M(),setTimeout(function(){return je?!1:(E(),T(),je=!0)},20),_()},this.destruct=function(){pe._wD("soundManager.destruct()"),pe.disable(!0)},s=function(t){var n,i,o,r,s,a,u,l,h,f,g=this,v=!1,y=[],w=0,b=null;i=n=null,this.sID=this.id=t.id,this.url=t.url,this._iO=this.instanceOptions=this.options=m(t),this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,this.id3={},this._debug=function(){pe._wD(g.id+": Merged options:",g.options)},this.load=function(t){var n=null;if(t!==e?g._iO=m(t,g.options):(t=g.options,g._iO=t,b&&b!==g.url&&(d("manURL"),g._iO.url=g.url,g.url=null)),g._iO.url||(g._iO.url=g.url),g._iO.url=X(g._iO.url),t=g.instanceOptions=g._iO,pe._wD(g.id+": load ("+t.url+")"),t.url===g.url&&0!==g.readyState&&2!==g.readyState)return d("onURL",1),3===g.readyState&&t.onload&&t.onload.apply(g,[!!g.duration]),g;if(g.loaded=!1,g.readyState=1,g.playState=0,g.id3={},K(t))n=g._setup_html5(t),n._called_load?pe._wD(g.id+": Ignoring request to load again"):(g._html5_canplay=!1,g.url!==t.url&&(pe._wD(d("manURL")+": "+t.url),g._a.src=t.url,g.setPosition(0)),g._a.autobuffer="auto",g._a.preload="auto",g._a._called_load=!0,t.autoPlay&&g.play());else try{g.isHTML5=!1,g._iO=U(q(t)),t=g._iO,8===c?fe._load(g.id,t.url,t.stream,t.autoPlay,t.usePolicyFile):fe._load(g.id,t.url,!!t.stream,!!t.autoPlay,t.loops||1,!!t.autoLoad,t.usePolicyFile)}catch(i){d("smError",2),p("onload",!1),I({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}return g.url=t.url,g},this.unload=function(){return 0!==g.readyState&&(pe._wD(g.id+": unload()"),g.isHTML5?(a(),g._a&&(g._a.pause(),ee(g._a,"about:blank"),b="about:blank")):8===c?fe._unload(g.id,"about:blank"):fe._unload(g.id),o()),g},this.destruct=function(t){pe._wD(g.id+": Destruct"),g.isHTML5?(a(),g._a&&(g._a.pause(),ee(g._a),$e||s(),g._a._s=null,g._a=null)):(g._iO.onfailure=null,fe._destroySound(g.id)),t||pe.destroySound(g.id,!0)},this.start=this.play=function(t,n){var i,o,r=!0,r=null;if(i=g.id+": play(): ",n=n===e?!0:n,t||(t={}),g.url&&(g._iO.url=g.url),g._iO=m(g._iO,g.options),g._iO=m(t,g._iO),g._iO.url=X(g._iO.url),g.instanceOptions=g._iO,g._iO.serverURL&&!g.connected)return g.getAutoPlay()||(pe._wD(i+" Netstream not connected yet - setting autoPlay"),g.setAutoPlay(!0)),g;if(K(g._iO)&&(g._setup_html5(g._iO),u()),1===g.playState&&!g.paused&&((o=g._iO.multiShot)?pe._wD(i+"Already playing (multi-shot)",1):(pe._wD(i+"Already playing (one-shot)",1),r=g)),null!==r)return r;if(t.url&&t.url!==g.url&&g.load(g._iO),g.loaded?pe._wD(i):0===g.readyState?(pe._wD(i+"Attempting to load"),g.isHTML5||(g._iO.autoPlay=!0),g.load(g._iO),g.instanceOptions=g._iO):2===g.readyState?(pe._wD(i+"Could not load - exiting",2),r=g):pe._wD(i+"Loading - attempting to play..."),null!==r)return r;if(!g.isHTML5&&9===c&&g.position>0&&g.position===g.duration&&(pe._wD(i+"Sound at end, resetting to position:0"),t.position=0),g.paused&&g.position>=0&&(!g._iO.serverURL||g.position>0))pe._wD(i+"Resuming from paused state",1),g.resume();else{if(g._iO=m(t,g._iO),null!==g._iO.from&&null!==g._iO.to&&0===g.instanceCount&&0===g.playState&&!g._iO.serverURL){if(o=function(){g._iO=m(t,g._iO),g.play(g._iO)},g.isHTML5&&!g._html5_canplay?(pe._wD(i+"Beginning load for from/to case"),g.load({oncanplay:o}),r=!1):g.isHTML5||g.loaded||g.readyState&&2===g.readyState||(pe._wD(i+"Preloading for from/to case"),g.load({onload:o}),r=!1),null!==r)return r;g._iO=f()}pe._wD(i+"Starting to play"),(!g.instanceCount||g._iO.multiShotEvents||!g.isHTML5&&c>8&&!g.getAutoPlay())&&g.instanceCount++,g._iO.onposition&&0===g.playState&&l(g),g.playState=1,g.paused=!1,g.position=g._iO.position===e||isNaN(g._iO.position)?0:g._iO.position,g.isHTML5||(g._iO=U(q(g._iO))),g._iO.onplay&&n&&(g._iO.onplay.apply(g),v=!0),g.setVolume(g._iO.volume,!0),g.setPan(g._iO.pan,!0),g.isHTML5?(u(),i=g._setup_html5(),g.setPosition(g._iO.position),i.play()):(r=fe._start(g.id,g._iO.loops||1,9===c?g._iO.position:g._iO.position/1e3,g._iO.multiShot),9===c&&!r&&(pe._wD(i+"No sound hardware, or 32-sound ceiling hit"),g._iO.onplayerror&&g._iO.onplayerror.apply(g)))
}return g},this.stop=function(t){var e=g._iO;return 1===g.playState&&(pe._wD(g.id+": stop()"),g._onbufferchange(0),g._resetOnPosition(0),g.paused=!1,g.isHTML5||(g.playState=0),h(),e.to&&g.clearOnPosition(e.to),g.isHTML5?g._a&&(t=g.position,g.setPosition(0),g.position=t,g._a.pause(),g.playState=0,g._onTimer(),a()):(fe._stop(g.id,t),e.serverURL&&g.unload()),g.instanceCount=0,g._iO={},e.onstop&&e.onstop.apply(g)),g},this.setAutoPlay=function(t){pe._wD(g.id+": Autoplay turned "+(t?"on":"off")),g._iO.autoPlay=t,g.isHTML5||(fe._setAutoPlay(g.id,t),t&&!g.instanceCount&&1===g.readyState&&(g.instanceCount++,pe._wD(g.id+": Incremented instance count to "+g.instanceCount)))},this.getAutoPlay=function(){return g._iO.autoPlay},this.setPosition=function(t){t===e&&(t=0);var n=g.isHTML5?Math.max(t,0):Math.min(g.duration||g._iO.duration,Math.max(t,0));if(g.position=n,t=g.position/1e3,g._resetOnPosition(g.position),g._iO.position=n,g.isHTML5){if(g._a)if(g._html5_canplay){if(g._a.currentTime!==t){pe._wD(g.id+": setPosition("+t+")");try{g._a.currentTime=t,(0===g.playState||g.paused)&&g._a.pause()}catch(i){pe._wD(g.id+": setPosition("+t+") failed: "+i.message,2)}}}else pe._wD(g.id+": setPosition("+t+"): Cannot seek yet, sound not ready")}else t=9===c?g.position:t,g.readyState&&2!==g.readyState&&fe._setPosition(g.id,t,g.paused||!g.playState,g._iO.multiShot);return g.isHTML5&&g.paused&&g._onTimer(!0),g},this.pause=function(t){return g.paused||0===g.playState&&1!==g.readyState?g:(pe._wD(g.id+": pause()"),g.paused=!0,g.isHTML5?(g._setup_html5().pause(),a()):(t||t===e)&&fe._pause(g.id,g._iO.multiShot),g._iO.onpause&&g._iO.onpause.apply(g),g)},this.resume=function(){var t=g._iO;return g.paused?(pe._wD(g.id+": resume()"),g.paused=!1,g.playState=1,g.isHTML5?(g._setup_html5().play(),u()):(t.isMovieStar&&!t.serverURL&&g.setPosition(g.position),fe._pause(g.id,t.multiShot)),!v&&t.onplay?(t.onplay.apply(g),v=!0):t.onresume&&t.onresume.apply(g),g):g},this.togglePause=function(){return pe._wD(g.id+": togglePause()"),0===g.playState?(g.play({position:9!==c||g.isHTML5?g.position/1e3:g.position}),g):(g.paused?g.resume():g.pause(),g)},this.setPan=function(t,n){return t===e&&(t=0),n===e&&(n=!1),g.isHTML5||fe._setPan(g.id,t),g._iO.pan=t,n||(g.pan=t,g.options.pan=t),g},this.setVolume=function(t,n){return t===e&&(t=100),n===e&&(n=!1),g.isHTML5?g._a&&(g._a.volume=Math.max(0,Math.min(1,t/100))):fe._setVolume(g.id,pe.muted&&!g.muted||g.muted?0:t),g._iO.volume=t,n||(g.volume=t,g.options.volume=t),g},this.mute=function(){return g.muted=!0,g.isHTML5?g._a&&(g._a.muted=!0):fe._setVolume(g.id,0),g},this.unmute=function(){g.muted=!1;var t=g._iO.volume!==e;return g.isHTML5?g._a&&(g._a.muted=!1):fe._setVolume(g.id,t?g._iO.volume:g.options.volume),g},this.toggleMute=function(){return g.muted?g.unmute():g.mute()},this.onposition=this.onPosition=function(t,n,i){return y.push({position:parseInt(t,10),method:n,scope:i!==e?i:g,fired:!1}),g},this.clearOnPosition=function(t,e){var n,t=parseInt(t,10);if(isNaN(t))return!1;for(n=0;y.length>n;n++)t!==y[n].position||e&&e!==y[n].method||(y[n].fired&&w--,y.splice(n,1))},this._processOnPosition=function(){var t,e;if(t=y.length,!t||!g.playState||w>=t)return!1;for(t-=1;t>=0;t--)e=y[t],!e.fired&&g.position>=e.position&&(e.fired=!0,w++,e.method.apply(e.scope,[e.position]));return!0},this._resetOnPosition=function(t){var e,n;if(e=y.length,!e)return!1;for(e-=1;e>=0;e--)n=y[e],n.fired&&n.position>=t&&(n.fired=!1,w--);return!0},f=function(){var t,e,n=g._iO,i=n.from,o=n.to;return e=function(){pe._wD(g.id+': "To" time of '+o+" reached."),g.clearOnPosition(o,e),g.stop()},t=function(){pe._wD(g.id+': Playing "from" '+i),null===o||isNaN(o)||g.onPosition(o,e)},null!==i&&!isNaN(i)&&(n.position=i,n.multiShot=!1,t()),n},l=function(){var t,e=g._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&g.onPosition(parseInt(t,10),e[t])},h=function(){var t,e=g._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&g.clearOnPosition(parseInt(t,10))},u=function(){g.isHTML5&&G(g)},a=function(){g.isHTML5&&Q(g)},o=function(t){t||(y=[],w=0),v=!1,g._hasTimer=null,g._a=null,g._html5_canplay=!1,g.bytesLoaded=null,g.bytesTotal=null,g.duration=g._iO&&g._iO.duration?g._iO.duration:null,g.durationEstimate=null,g.buffered=[],g.eqData=[],g.eqData.left=[],g.eqData.right=[],g.failures=0,g.isBuffering=!1,g.instanceOptions={},g.instanceCount=0,g.loaded=!1,g.metadata={},g.readyState=0,g.muted=!1,g.paused=!1,g.peakData={left:0,right:0},g.waveformData={left:[],right:[]},g.playState=0,g.position=null,g.id3={}},o(),this._onTimer=function(t){var e,o=!1,r={};return g._hasTimer||t?(g._a&&(t||(g.playState>0||1===g.readyState)&&!g.paused)&&(e=g._get_html5_duration(),e!==n&&(n=e,g.duration=e,o=!0),g.durationEstimate=g.duration,e=1e3*g._a.currentTime||0,e!==i&&(i=e,o=!0),(o||t)&&g._whileplaying(e,r,r,r,r)),o):void 0},this._get_html5_duration=function(){var t=g._iO;return(t=g._a&&g._a.duration?1e3*g._a.duration:t&&t.duration?t.duration:null)&&!isNaN(t)&&1/0!==t?t:null},this._apply_loop=function(t,e){!t.loop&&e>1&&pe._wD("Note: Native HTML5 looping is infinite.",1),t.loop=e>1?"loop":""},this._setup_html5=function(t){var e,t=m(g._iO,t),n=decodeURI,i=$e?de:g._a,s=n(t.url);if($e?s===re&&(e=!0):s===b&&(e=!0),i){if(i._s)if($e)i._s&&i._s.playState&&!e&&i._s.stop();else if(!$e&&s===n(b))return g._apply_loop(i,t.loops),i;e||(o(!1),i.src=t.url,re=b=g.url=t.url,i._called_load=!1)}else g._a=t.autoLoad||t.autoPlay?new Audio(t.url):qe&&10>opera.version()?new Audio(null):new Audio,i=g._a,i._called_load=!1,$e&&(de=i);return g.isHTML5=!0,g._a=i,i._s=g,r(),g._apply_loop(i,t.loops),t.autoLoad||t.autoPlay?g.load():(i.autobuffer=!1,i.preload="auto"),i},r=function(){if(g._a._added_events)return!1;var t;g._a._added_events=!0;for(t in le)le.hasOwnProperty(t)&&g._a&&g._a.addEventListener(t,le[t],!1);return!0},s=function(){var t;pe._wD(g.id+": Removing event listeners"),g._a._added_events=!1;for(t in le)le.hasOwnProperty(t)&&g._a&&g._a.removeEventListener(t,le[t],!1)},this._onload=function(t){var e=!!t||!g.isHTML5&&8===c&&g.duration,t=g.id+": ";return pe._wD(t+(e?"onload()":"Failed to load? - "+g.url),e?1:2),!e&&!g.isHTML5&&(!0===pe.sandbox.noRemote&&pe._wD(t+R("noNet"),1),!0===pe.sandbox.noLocal&&pe._wD(t+R("noLocal"),1)),g.loaded=e,g.readyState=e?3:2,g._onbufferchange(0),g._iO.onload&&g._iO.onload.apply(g,[e]),!0},this._onbufferchange=function(t){return 0===g.playState||t&&g.isBuffering||!t&&!g.isBuffering?!1:(g.isBuffering=1===t,g._iO.onbufferchange&&(pe._wD(g.id+": Buffer state change: "+t),g._iO.onbufferchange.apply(g)),!0)},this._onsuspend=function(){return g._iO.onsuspend&&(pe._wD(g.id+": Playback suspended"),g._iO.onsuspend.apply(g)),!0},this._onfailure=function(t,e,n){g.failures++,pe._wD(g.id+": Failures = "+g.failures),g._iO.onfailure&&1===g.failures?g._iO.onfailure(g,t,e,n):pe._wD(g.id+": Ignoring failure")},this._onfinish=function(){var t=g._iO.onfinish;g._onbufferchange(0),g._resetOnPosition(0),g.instanceCount&&(g.instanceCount--,g.instanceCount||(h(),g.playState=0,g.paused=!1,g.instanceCount=0,g.instanceOptions={},g._iO={},a(),g.isHTML5&&(g.position=0)),(!g.instanceCount||g._iO.multiShotEvents)&&t)&&(pe._wD(g.id+": onfinish()"),t.apply(g))},this._whileloading=function(t,e,n,i){var o=g._iO;g.bytesLoaded=t,g.bytesTotal=e,g.duration=Math.floor(n),g.bufferLength=i,g.durationEstimate=g.isHTML5||o.isMovieStar?g.duration:o.duration?g.duration>o.duration?g.duration:o.duration:parseInt(g.bytesTotal/g.bytesLoaded*g.duration,10),g.isHTML5||(g.buffered=[{start:0,end:g.duration}]),(3!==g.readyState||g.isHTML5)&&o.whileloading&&o.whileloading.apply(g)},this._whileplaying=function(t,n,i,o,r){var s=g._iO;return isNaN(t)||null===t?!1:(g.position=Math.max(0,t),g._processOnPosition(),!g.isHTML5&&c>8&&(s.usePeakData&&n!==e&&n&&(g.peakData={left:n.leftPeak,right:n.rightPeak}),s.useWaveformData&&i!==e&&i&&(g.waveformData={left:i.split(","),right:o.split(",")}),s.useEQData&&r!==e&&r&&r.leftEQ&&(t=r.leftEQ.split(","),g.eqData=t,g.eqData.left=t,r.rightEQ!==e&&r.rightEQ&&(g.eqData.right=r.rightEQ.split(",")))),1===g.playState&&(!g.isHTML5&&8===c&&!g.position&&g.isBuffering&&g._onbufferchange(0),s.whileplaying&&s.whileplaying.apply(g)),!0)},this._oncaptiondata=function(t){pe._wD(g.id+": Caption data received."),g.captiondata=t,g._iO.oncaptiondata&&g._iO.oncaptiondata.apply(g,[t])},this._onmetadata=function(t,e){pe._wD(g.id+": Metadata received.");var n,i,o={};for(n=0,i=t.length;i>n;n++)o[t[n]]=e[n];g.metadata=o,g._iO.onmetadata&&g._iO.onmetadata.apply(g)},this._onid3=function(t,e){pe._wD(g.id+": ID3 data received.");var n,i,o=[];for(n=0,i=t.length;i>n;n++)o[t[n]]=e[n];g.id3=m(g.id3,o),g._iO.onid3&&g._iO.onid3.apply(g)},this._onconnect=function(t){t=1===t,pe._wD(g.id+": "+(t?"Connected.":"Failed to connect? - "+g.url),t?1:2),(g.connected=t)&&(g.failures=0,V(g.id)&&(g.getAutoPlay()?g.play(e,g.getAutoPlay()):g._iO.autoLoad&&g.load()),g._iO.onconnect&&g._iO.onconnect.apply(g,[t]))},this._ondataerror=function(t){g.playState>0&&(pe._wD(g.id+": Data error: "+t),g._iO.ondataerror&&g._iO.ondataerror.apply(g))},this._debug()},j=function(){return ye.body||ye._docElement||ye.getElementsByTagName("div")[0]},a=function(t){return ye.getElementById(t)},m=function(t,n){var i,o,r=t||{};i=n===e?pe.defaultOptions:n;for(o in i)i.hasOwnProperty(o)&&r[o]===e&&(r[o]="object"!=typeof i[o]||null===i[o]?i[o]:m(r[o],i[o]));return r},v={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},g=function(t,n){var i,o=!0,r=n!==e,s=pe.setupOptions;if(t===e){o=[];for(i in s)s.hasOwnProperty(i)&&o.push(i);for(i in v)v.hasOwnProperty(i)&&("object"==typeof pe[i]?o.push(i+": {...}"):pe[i]instanceof Function?o.push(i+": function() {...}"):o.push(i));return pe._wD(R("setup",o.join(", "))),!1}for(i in t)if(t.hasOwnProperty(i))if("object"!=typeof t[i]||null===t[i]||t[i]instanceof Array||t[i]instanceof RegExp)r&&v[n]!==e?pe[n][i]=t[i]:s[i]!==e?(pe.setupOptions[i]=t[i],pe[i]=t[i]):v[i]===e?(z(R(pe[i]===e?"setupUndef":"setupError",i),2),o=!1):pe[i]instanceof Function?pe[i].apply(pe,t[i]instanceof Array?t[i]:[t[i]]):pe[i]=t[i];else{if(v[i]!==e)return g(t[i],i);z(R(pe[i]===e?"setupUndef":"setupError",i),2),o=!1}return o};var rn=function(t){var t=Fe.call(t),e=t.length;return an?(t[1]="on"+t[1],e>3&&t.pop()):3===e&&t.push(!1),t},sn=function(t,e){var n=t.shift(),i=[un[e]];an?n[i](t[0],t[1]):n[i].apply(n,t)},an=t.attachEvent,un={add:an?"attachEvent":"addEventListener",remove:an?"detachEvent":"removeEventListener"};oe={add:function(){sn(rn(arguments),"add")},remove:function(){sn(rn(arguments),"remove")}},le={abort:r(function(){pe._wD(this._s.id+": abort")}),canplay:r(function(){var t,n=this._s;if(n._html5_canplay)return!0;if(n._html5_canplay=!0,pe._wD(n.id+": canplay"),n._onbufferchange(0),t=n._iO.position===e||isNaN(n._iO.position)?null:n._iO.position/1e3,n.position&&this.currentTime!==t){pe._wD(n.id+": canplay: Setting position to "+t);try{this.currentTime=t}catch(i){pe._wD(n.id+": canplay: Setting position of "+t+" failed: "+i.message,2)}}n._iO._oncanplay&&n._iO._oncanplay()}),canplaythrough:r(function(){var t=this._s;t.loaded||(t._onbufferchange(0),t._whileloading(t.bytesLoaded,t.bytesTotal,t._get_html5_duration()),t._onload(!0))}),ended:r(function(){var t=this._s;pe._wD(t.id+": ended"),t._onfinish()}),error:r(function(){pe._wD(this._s.id+": HTML5 error, code "+this.error.code),this._s._onload(!1)}),loadeddata:r(function(){var t=this._s;pe._wD(t.id+": loadeddata"),!t._loaded&&!Be&&(t.duration=t._get_html5_duration())}),loadedmetadata:r(function(){pe._wD(this._s.id+": loadedmetadata")}),loadstart:r(function(){pe._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:r(function(){pe._wD(this._s.id+": play()"),this._s._onbufferchange(0)}),playing:r(function(){pe._wD(this._s.id+": playing"),this._s._onbufferchange(0)}),progress:r(function(t){var e,n,i,o=this._s;e=0;var r="progress"===t.type,s=t.target.buffered,a=t.loaded||0,u=t.total||1;if(o.buffered=[],s&&s.length){for(e=0,n=s.length;n>e;e++)o.buffered.push({start:1e3*s.start(e),end:1e3*s.end(e)});if(e=1e3*(s.end(0)-s.start(0)),a=e/(1e3*t.target.duration),r&&s.length>1){for(i=[],n=s.length,e=0;n>e;e++)i.push(1e3*t.target.buffered.start(e)+"-"+1e3*t.target.buffered.end(e));pe._wD(this._s.id+": progress, timeRanges: "+i.join(", "))}r&&!isNaN(a)&&pe._wD(this._s.id+": progress, "+Math.floor(100*a)+"% loaded")}isNaN(a)||(o._onbufferchange(0),o._whileloading(a,u,o._get_html5_duration()),a&&u&&a===u&&le.canplaythrough.call(this,t))}),ratechange:r(function(){pe._wD(this._s.id+": ratechange")}),suspend:r(function(t){var e=this._s;pe._wD(this._s.id+": suspend"),le.progress.call(this,t),e._onsuspend()}),stalled:r(function(){pe._wD(this._s.id+": stalled")}),timeupdate:r(function(){this._s._onTimer()}),waiting:r(function(){var t=this._s;pe._wD(this._s.id+": waiting"),t._onbufferchange(1)})},K=function(t){return t.serverURL||t.type&&o(t.type)?!1:t.type?Y({type:t.type}):Y({url:t.url})||pe.html5Only},ee=function(t,e){t&&(t.src=e,t._called_load=!1),$e&&(re=null)},Y=function(t){if(!pe.useHTML5Audio||!pe.hasHTML5)return!1;var n,i=t.url||null,t=t.type||null,r=pe.audioFormats;if(t&&pe.html5[t]!==e)return pe.html5[t]&&!o(t);if(!te){te=[];for(n in r)r.hasOwnProperty(n)&&(te.push(n),r[n].related&&(te=te.concat(r[n].related)));te=RegExp("\\.("+te.join("|")+")(\\?.*)?$","i")}return n=i?i.toLowerCase().match(te):null,n&&n.length?n=n[1]:t&&(i=t.indexOf(";"),n=(-1!==i?t.substr(0,i):t).substr(6)),n&&pe.html5[n]!==e?i=pe.html5[n]&&!o(n):(t="audio/"+n,i=pe.html5.canPlayType({type:t}),i=(pe.html5[n]=i)&&pe.html5[t]&&!o(t)),i},ie=function(){function t(t){var e,n,i=e=!1;if(!r||"function"!=typeof r.canPlayType)return e;if(t instanceof Array){for(e=0,n=t.length;n>e;e++)(pe.html5[t[e]]||r.canPlayType(t[e]).match(pe.html5Test))&&(i=!0,pe.html5[t[e]]=!0,pe.flash[t[e]]=!!t[e].match(Xe));e=i}else t=r&&"function"==typeof r.canPlayType?r.canPlayType(t):!1,e=!(!t||!t.match(pe.html5Test));return e}if(!pe.useHTML5Audio||!pe.hasHTML5)return!1;var n,i,o,r=Audio!==e?qe&&10>opera.version()?new Audio(null):new Audio:null,s={};o=pe.audioFormats;for(n in o)if(o.hasOwnProperty(n)&&(i="audio/"+n,s[n]=t(o[n].type),s[i]=s[n],n.match(Xe)?(pe.flash[n]=!0,pe.flash[i]=!0):(pe.flash[n]=!1,pe.flash[i]=!1),o[n]&&o[n].related))for(i=o[n].related.length-1;i>=0;i--)s["audio/"+o[n].related[i]]=s[n],pe.html5[o[n].related[i]]=s[n],pe.flash[o[n].related[i]]=s[n];return s.canPlayType=r?t:null,pe.html5=m(pe.html5,s),!0},S={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:"soundManagerexception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:"soundManager: Verify that %s is a valid path.",tryDebug:"Try soundManager.debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:"soundManager: Non-HTTP page ("+ye.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:"soundManager: Special case: Waiting for SWF to load with window focus...",waitForever:"soundManager: Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:"soundManager: Waiting for 100% SWF load...",needFunction:"soundManager: Function object expected for %s",badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"soundManager: _debug(): Current sound objects",waitOnload:"soundManager: Waiting for window.onload()",docLoaded:"soundManager: Document already loaded",onload:"soundManager: initComplete(): calling soundManager.onload()",onloadOK:"soundManager.onload() complete",didInit:"soundManager: init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"soundManager: Failed to remove Flash node.",shutdown:"soundManager.disable(): Shutting down",queue:"soundManager: Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying .swf_timedout CSS...",fbLoaded:"Flash loaded",flRemoved:"soundManager: Flash movie removed.",fbHandler:"soundManager: flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:"soundManager.load(): current URL already assigned.",badFV:'soundManager.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:"soundManager: Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:"soundManager: Got window focus.",policy:"Enabling usePolicyFile for data access",setup:"soundManager.setup(): allowed parameters: %s",setupError:'soundManager.setup(): "%s" cannot be assigned with this method.',setupUndef:'soundManager.setup(): Could not find option "%s"',setupLate:"soundManager.setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:"soundManager: Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready.",reset:"soundManager.reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device."},R=function(){var t,e,n=Fe.call(arguments),i=n.shift(),i=S&&S[i]?S[i]:"";if(i&&n&&n.length)for(t=0,e=n.length;e>t;t++)i=i.replace("%s",n[t]);return i},q=function(t){return 8===c&&t.loops>1&&t.stream&&(d("as2loop"),t.stream=!1),t},U=function(t,e){return t&&!t.usePolicyFile&&(t.onid3||t.usePeakData||t.useWaveformData||t.useEQData)&&(pe._wD((e||"")+R("policy")),t.usePolicyFile=!0),t},z=function(t){console!==e&&console.warn!==e?console.warn(t):pe._wD(t)},u=function(){return!1},F=function(t){for(var e in t)t.hasOwnProperty(e)&&"function"==typeof t[e]&&(t[e]=u)},$=function(t){t===e&&(t=!1),(Pe||t)&&pe.disable(t)},H=function(t){var e=null;if(t)if(t.match(/\.swf(\?.*)?$/i)){if(e=t.substr(t.toLowerCase().lastIndexOf(".swf?")+4))return t}else t.lastIndexOf("/")!==t.length-1&&(t+="/");return t=(t&&-1!==t.lastIndexOf("/")?t.substr(0,t.lastIndexOf("/")+1):"./")+pe.movieURL,pe.noSWFCache&&(t+="?ts="+(new Date).getTime()),t},A=function(){c=parseInt(pe.flashVersion,10),8!==c&&9!==c&&(pe._wD(R("badFV",c,8)),pe.flashVersion=c=8);var t=pe.debugMode||pe.debugFlash?"_debug.swf":".swf";pe.useHTML5Audio&&!pe.html5Only&&pe.audioFormats.mp4.required&&9>c&&(pe._wD(R("needfl9")),pe.flashVersion=c=9),pe.version=pe.versionNumber+(pe.html5Only?" (HTML5-only mode)":9===c?" (AS3/Flash 9)":" (AS2/Flash 8)"),c>8?(pe.defaultOptions=m(pe.defaultOptions,pe.flash9Options),pe.features.buffering=!0,pe.defaultOptions=m(pe.defaultOptions,pe.movieStarOptions),pe.filePatterns.flash9=RegExp("\\.(mp3|"+tn.join("|")+")(\\?.*)?$","i"),pe.features.movieStar=!0):pe.features.movieStar=!1,pe.filePattern=pe.filePatterns[8!==c?"flash9":"flash8"],pe.movieURL=(8===c?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",t),pe.features.peakData=pe.features.waveformData=pe.features.eqData=c>8},D=function(t,e){return fe?(fe._setPolling(t,e),void 0):!1},L=function(){if(pe.debugURLParam.test(ve)&&(pe.debugMode=!0),a(pe.debugID))return!1;var t,e,n,i;if(!(!pe.debugMode||a(pe.debugID)||Ve&&pe.useConsole&&pe.consoleOnly)){t=ye.createElement("div"),t.id=pe.debugID+"-toggle",e={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},t.appendChild(ye.createTextNode("-")),t.onclick=B,t.title="Toggle SM2 debug console",ge.match(/msie 6/i)&&(t.style.position="absolute",t.style.cursor="hand");for(i in e)e.hasOwnProperty(i)&&(t.style[i]=e[i]);if(e=ye.createElement("div"),e.id=pe.debugID,e.style.display=pe.debugMode?"block":"none",pe.debugMode&&!a(t.id)){try{n=j(),n.appendChild(t)}catch(o){throw Error(R("domError")+" \n"+(""+o))}n.appendChild(e)}}},V=this.getSoundById,d=function(t,e){return t?pe._wD(R(t),e):""},B=function(){var t=a(pe.debugID),e=a(pe.debugID+"-toggle");return t?(be?(e.innerHTML="+",t.style.display="none"):(e.innerHTML="-",t.style.display="block"),be=!be,void 0):!1},p=function(n,i,o){if(t.sm2Debugger!==e)try{sm2Debugger.handleEvent(n,i,o)}catch(r){}return!0},N=function(){var t=[];return pe.debugMode&&t.push("sm2_debug"),pe.debugFlash&&t.push("flash_debug"),pe.useHighPerformance&&t.push("high_performance"),t.join(" ")},W=function(){var t=R("fbHandler"),e=pe.getMoviePercent(),n={type:"FLASHBLOCK"};return pe.html5Only?!1:(pe.ok()?(pe.didFlashBlock&&pe._wD(t+": Unblocked"),pe.oMC&&(pe.oMC.className=[N(),"movieContainer","swf_loaded"+(pe.didFlashBlock?" swf_unblocked":"")].join(" "))):(Le&&(pe.oMC.className=N()+" movieContainer "+(null===e?"swf_timedout":"swf_error"),pe._wD(t+": "+R("fbTimeout")+(e?" ("+R("fbLoaded")+")":""))),pe.didFlashBlock=!0,w({type:"ontimeout",ignoreInit:!0,error:n}),I(n)),void 0)},y=function(t,n,i){we[t]===e&&(we[t]=[]),we[t].push({method:n,scope:i||null,fired:!1})},w=function(t){if(t||(t={type:pe.ok()?"onready":"ontimeout"}),!Ae&&t&&!t.ignoreInit||"ontimeout"===t.type&&(pe.ok()||Pe&&!t.ignoreInit))return!1;var e,n={success:t&&t.ignoreInit?pe.ok():!Pe},i=t&&t.type?we[t.type]||[]:[],o=[],n=[n],r=Le&&!pe.ok();for(t.error&&(n[0].error=t.error),t=0,e=i.length;e>t;t++)!0!==i[t].fired&&o.push(i[t]);if(o.length)for(t=0,e=o.length;e>t;t++)o[t].scope?o[t].method.apply(o[t].scope,n):o[t].method.apply(this,n),r||(o[t].fired=!0);return!0},b=function(){t.setTimeout(function(){pe.useFlashBlock&&W(),w(),"function"==typeof pe.onload&&(d("onload",1),pe.onload.apply(t),d("onloadOK",1)),pe.waitForWindowLoad&&oe.add(t,"load",b)},1)},ae=function(){if(se!==e)return se;var n,i=!1,o=navigator,r=o.plugins,s=t.ActiveXObject;if(r&&r.length)(o=o.mimeTypes)&&o["application/x-shockwave-flash"]&&o["application/x-shockwave-flash"].enabledPlugin&&o["application/x-shockwave-flash"].enabledPlugin.description&&(i=!0);else if(s!==e&&!ge.match(/MSAppHost/i)){try{n=new s("ShockwaveFlash.ShockwaveFlash")}catch(a){}i=!!n}return se=i},Z=function(){var t,e,n=pe.audioFormats;if(He&&ge.match(/os (1|2|3_0|3_1)/i)?(pe.hasHTML5=!1,pe.html5Only=!0,pe.oMC&&(pe.oMC.style.display="none")):pe.useHTML5Audio&&(pe.html5&&pe.html5.canPlayType||(pe._wD("SoundManager: No HTML5 Audio() support detected."),pe.hasHTML5=!1),ze&&pe._wD("soundManager: Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(se?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),pe.useHTML5Audio&&pe.hasHTML5)for(e in n)n.hasOwnProperty(e)&&(n[e].required&&!pe.html5.canPlayType(n[e].type)||pe.preferFlash&&(pe.flash[e]||pe.flash[n[e].type]))&&(t=!0);return pe.ignoreFlash&&(t=!1),pe.html5Only=pe.hasHTML5&&pe.useHTML5Audio&&!t,!pe.html5Only},X=function(t){var e,n,i=0;if(t instanceof Array){for(e=0,n=t.length;n>e;e++)if(t[e]instanceof Object){if(pe.canPlayMIME(t[e].type)){i=e;break}}else if(pe.canPlayURL(t[e])){i=e;break}t[i].url&&(t[i]=t[i].url),t=t[i]}return t},G=function(e){e._hasTimer||(e._hasTimer=!0,!Ue&&pe.html5PollingInterval&&(null===Ie&&0===Ee&&(Ie=t.setInterval(J,pe.html5PollingInterval)),Ee++))},Q=function(t){t._hasTimer&&(t._hasTimer=!1,!Ue&&pe.html5PollingInterval&&Ee--)},J=function(){var e;if(null!==Ie&&!Ee)return t.clearInterval(Ie),Ie=null,!1;for(e=pe.soundIDs.length-1;e>=0;e--)pe.sounds[pe.soundIDs[e]].isHTML5&&pe.sounds[pe.soundIDs[e]]._hasTimer&&pe.sounds[pe.soundIDs[e]]._onTimer()},I=function(n){n=n!==e?n:{},"function"==typeof pe.onerror&&pe.onerror.apply(t,[{type:n.type!==e?n.type:null}]),n.fatal!==e&&n.fatal&&pe.disable()},ue=function(){if(!ze||!ae())return!1;var t,e,n=pe.audioFormats;for(e in n)if(n.hasOwnProperty(e)&&("mp3"===e||"mp4"===e)&&(pe._wD("soundManager: Using flash fallback for "+e+" format"),pe.html5[e]=!1,n[e]&&n[e].related))for(t=n[e].related.length-1;t>=0;t--)pe.html5[n[e].related[t]]=!1},this._setSandboxType=function(t){var n=pe.sandbox;n.type=t,n.description=n.types[n.types[t]!==e?t:"unknown"],"localWithFile"===n.type?(n.noRemote=!0,n.noLocal=!1,d("secNote",2)):"localWithNetwork"===n.type?(n.noRemote=!1,n.noLocal=!0):"localTrusted"===n.type&&(n.noRemote=!1,n.noLocal=!1)},this._externalInterfaceOK=function(t,e){if(pe.swfLoaded)return!1;var n;return p("swf",!0),p("flashtojs",!0),pe.swfLoaded=!0,Qe=!1,ze&&ue(),e&&e.replace(/\+dev/i,"")===pe.versionNumber.replace(/\+dev/i,"")?(setTimeout(h,We?100:1),void 0):(n='soundManager: Fatal: JavaScript file build "'+pe.versionNumber+'" does not match Flash SWF build "'+e+'" at '+pe.url+". Ensure both are up-to-date.",setTimeout(function(){throw Error(n)},0),!1)},E=function(t,n){function i(){var t,e=[],n=[];t="SoundManager "+pe.version+(!pe.html5Only&&pe.useHTML5Audio?pe.hasHTML5?" + HTML5 audio":", no HTML5 audio support":""),pe.html5Only?pe.html5PollingInterval&&e.push("html5PollingInterval ("+pe.html5PollingInterval+"ms)"):(pe.preferFlash&&e.push("preferFlash"),pe.useHighPerformance&&e.push("useHighPerformance"),pe.flashPollingInterval&&e.push("flashPollingInterval ("+pe.flashPollingInterval+"ms)"),pe.html5PollingInterval&&e.push("html5PollingInterval ("+pe.html5PollingInterval+"ms)"),pe.wmode&&e.push("wmode ("+pe.wmode+")"),pe.debugFlash&&e.push("debugFlash"),pe.useFlashBlock&&e.push("flashBlock")),e.length&&(n=n.concat([e.join(" + ")])),pe._wD(t+(n.length?" + "+n.join(", "):""),1),he()}function o(t,e){return'<param name="'+t+'" value="'+e+'" />'}if(_e&&xe)return!1;if(pe.html5Only)return A(),i(),pe.oMC=a(pe.movieID),h(),xe=_e=!0,!1;var r,s,u,l=n||pe.url,c=pe.altURL||l,p=j(),d=N(),f=null,f=ye.getElementsByTagName("html")[0],f=f&&f.dir&&f.dir.match(/rtl/i),t=t===e?pe.id:t;if(A(),pe.url=H(Ze?l:c),n=pe.url,pe.wmode=!pe.wmode&&pe.useHighPerformance?"transparent":pe.wmode,null!==pe.wmode&&(ge.match(/msie 8/i)||!We&&!pe.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(De.push(S.spcWmode),pe.wmode=null),p={name:t,id:t,src:n,quality:"high",allowScriptAccess:pe.allowScriptAccess,bgcolor:pe.bgColor,pluginspage:Ke+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:pe.wmode,hasPriority:"true"},pe.debugFlash&&(p.FlashVars="debug=1"),pe.wmode||delete p.wmode,We)l=ye.createElement("div"),s=['<object id="'+t+'" data="'+n+'" type="'+p.type+'" title="'+p.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+Ke+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',o("movie",n),o("AllowScriptAccess",pe.allowScriptAccess),o("quality",p.quality),pe.wmode?o("wmode",pe.wmode):"",o("bgcolor",pe.bgColor),o("hasPriority","true"),pe.debugFlash?o("FlashVars",p.FlashVars):"","</object>"].join("");else for(r in l=ye.createElement("embed"),p)p.hasOwnProperty(r)&&l.setAttribute(r,p[r]);if(L(),d=N(),p=j())if(pe.oMC=a(pe.movieID)||ye.createElement("div"),pe.oMC.id)u=pe.oMC.className,pe.oMC.className=(u?u+" ":"movieContainer")+(d?" "+d:""),pe.oMC.appendChild(l),We&&(r=pe.oMC.appendChild(ye.createElement("div")),r.className="sm2-object-box",r.innerHTML=s),xe=!0;else{if(pe.oMC.id=pe.movieID,pe.oMC.className="movieContainer "+d,r=d=null,pe.useFlashBlock||(pe.useHighPerformance?d={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(d={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},f&&(d.left=Math.abs(parseInt(d.left,10))+"px"))),Ne&&(pe.oMC.style.zIndex=1e4),!pe.debugFlash)for(u in d)d.hasOwnProperty(u)&&(pe.oMC.style[u]=d[u]);try{We||pe.oMC.appendChild(l),p.appendChild(pe.oMC),We&&(r=pe.oMC.appendChild(ye.createElement("div")),r.className="sm2-object-box",r.innerHTML=s),xe=!0}catch(m){throw Error(R("domError")+" \n"+(""+m))}}return _e=!0,i(),!0},T=function(){return pe.html5Only?(E(),!1):fe?!1:pe.url?(fe=pe.getMovie(pe.id),fe||(Me?(We?pe.oMC.innerHTML=ke:pe.oMC.appendChild(Me),Me=null,_e=!0):E(pe.id,pe.url),fe=pe.getMovie(pe.id)),"function"==typeof pe.oninitmovie&&setTimeout(pe.oninitmovie,1),ce(),!0):(d("noURL"),!1)},_=function(){setTimeout(x,1e3)},x=function(){var e,n=!1;return!pe.url||Oe?!1:(Oe=!0,oe.remove(t,"load",_),Qe&&!Ge?(d("waitFocus"),!1):(Ae||(e=pe.getMoviePercent(),e>0&&100>e&&(n=!0)),setTimeout(function(){return e=pe.getMoviePercent(),n?(Oe=!1,pe._wD(R("waitSWF")),t.setTimeout(_,1),!1):(Ae||(pe._wD("soundManager: No Flash response within expected time. Likely causes: "+(0===e?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(pe.debugFlash?" "+R("checkSWF"):""),2),!Ze&&e&&(d("localFail",2),pe.debugFlash||d("tryDebug",2)),0===e&&pe._wD(R("swf404",pe.url),1),p("flashtojs",!1," (Check flash security or flash blockers)")),!Ae&&Je&&(null===e?pe.useFlashBlock||0===pe.flashLoadTimeout?(pe.useFlashBlock&&W(),d("waitForever")):(d("waitForever"),w({type:"ontimeout",ignoreInit:!0})):0===pe.flashLoadTimeout?d("waitForever"):$(!0)),void 0)},pe.flashLoadTimeout),void 0))},P=function(){return Ge||!Qe?(oe.remove(t,"focus",P),!0):(Ge=Je=!0,d("gotFocus"),Oe=!1,_(),oe.remove(t,"focus",P),!0)},ce=function(){De.length&&(pe._wD("SoundManager 2: "+De.join(" "),1),De=[])},he=function(){ce();var t,e=[];if(pe.useHTML5Audio&&pe.hasHTML5){for(t in pe.audioFormats)pe.audioFormats.hasOwnProperty(t)&&e.push(t+" = "+pe.html5[t]+(!pe.html5[t]&&se&&pe.flash[t]?" (using flash)":pe.preferFlash&&pe.flash[t]&&se?" (preferring flash)":pe.html5[t]?"":" ("+(pe.audioFormats[t].required?"required, ":"")+"and no flash support)"));pe._wD("SoundManager 2 HTML5 support: "+e.join(", "),1)}},f=function(e){if(Ae)return!1;if(pe.html5Only)return d("sm2Loaded"),Ae=!0,b(),p("onload",!0),!0;var n,i=!0;return pe.useFlashBlock&&pe.flashLoadTimeout&&!pe.getMoviePercent()||(Ae=!0,Pe&&(n={type:!se&&Le?"NO_FLASH":"INIT_TIMEOUT"})),pe._wD("SoundManager 2 "+(Pe?"failed to load":"loaded")+" ("+(Pe?"Flash security/load error":"OK")+")",Pe?2:1),Pe||e?(pe.useFlashBlock&&pe.oMC&&(pe.oMC.className=N()+" "+(null===pe.getMoviePercent()?"swf_timedout":"swf_error")),w({type:"ontimeout",error:n,ignoreInit:!0}),p("onload",!1),I(n),i=!1):p("onload",!0),Pe||(pe.waitForWindowLoad&&!Se?(d("waitOnload"),oe.add(t,"load",b)):(pe.waitForWindowLoad&&Se&&d("docLoaded"),b())),i},l=function(){var t,n=pe.setupOptions;for(t in n)n.hasOwnProperty(t)&&(pe[t]===e?pe[t]=n[t]:pe[t]!==n[t]&&(pe.setupOptions[t]=pe[t]))},h=function(){if(Ae)return d("didInit"),!1;if(pe.html5Only)return Ae||(oe.remove(t,"load",pe.beginDelayedInit),pe.enabled=!0,f()),!0;T();try{fe._externalInterfaceTest(!1),D(!0,pe.flashPollingInterval||(pe.useHighPerformance?10:50)),pe.debugMode||fe._disableDebug(),pe.enabled=!0,p("jstoflash",!0),pe.html5Only||oe.add(t,"unload",u)}catch(e){return pe._wD("js/flash exception: "+(""+e)),p("jstoflash",!1),I({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),$(!0),f(),!1}return f(),oe.remove(t,"load",pe.beginDelayedInit),!0},M=function(){if(O)return!1;O=!0,l(),L();var n=null,n=null,i=t.console!==e&&"function"==typeof console.log,o=ve.toLowerCase();return-1!==o.indexOf("sm2-usehtml5audio=")&&(n="1"===o.charAt(o.indexOf("sm2-usehtml5audio=")+18),i&&console.log((n?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),pe.setup({useHTML5Audio:n})),-1!==o.indexOf("sm2-preferflash=")&&(n="1"===o.charAt(o.indexOf("sm2-preferflash=")+16),i&&console.log((n?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),pe.setup({preferFlash:n})),!se&&pe.hasHTML5&&(pe._wD("SoundManager: No Flash detected"+(pe.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),pe.setup({useHTML5Audio:!0,preferFlash:!1})),ie(),pe.html5.usingFlash=Z(),Le=pe.html5.usingFlash,!se&&Le&&(De.push(S.needFlash),pe.setup({flashLoadTimeout:1})),ye.removeEventListener&&ye.removeEventListener("DOMContentLoaded",M,!1),T(),!0
},ne=function(){return"complete"===ye.readyState&&(M(),ye.detachEvent("onreadystatechange",ne)),!0},k=function(){Se=!0,oe.remove(t,"load",k)},C=function(){Ue&&((!pe.setupOptions.useHTML5Audio||pe.setupOptions.preferFlash)&&De.push(S.mobileUA),pe.setupOptions.useHTML5Audio=!0,pe.setupOptions.preferFlash=!1,He||Re&&!ge.match(/android\s2\.3/i))&&(De.push(S.globalHTML5),He&&(pe.ignoreFlash=!0),$e=!0)},C(),ae(),oe.add(t,"focus",P),oe.add(t,"load",_),oe.add(t,"load",k),ye.addEventListener?ye.addEventListener("DOMContentLoaded",M,!1):ye.attachEvent?ye.attachEvent("onreadystatechange",ne):(p("onload",!1),I({type:"NO_DOM2_EVENTS",fatal:!0}))}var i=null;void 0!==t.SM2_DEFER&&SM2_DEFER||(i=new n),t.SoundManager=n,t.soundManager=i}(window),function(t){function e(t,e){var n=typeof t[e];return"function"===n||!("object"!=n||!t[e])||"unknown"==n}function n(t,e,n){return 0>e&&(e+=t.value.length),n===void 0&&(n=e),0>n&&(n+=t.value.length),{start:e,end:n}}function i(){return"object"==typeof document.body&&document.body?document.body:document.getElementsByTagName("body")[0]}var o,r,s,a,u,l,h,c,p;t(document).ready(function(){function d(t,e){return function(){var n=this.jquery?this[0]:this,i=n.nodeName.toLowerCase();return 1!=n.nodeType||"textarea"!=i&&("input"!=i||"text"!=n.type)||(n=[n].concat(Array.prototype.slice.call(arguments)),n=t.apply(this,n),e)?e?this:void 0:n}}var f=document.createElement("textarea");if(i().appendChild(f),f.selectionStart!==void 0&&f.selectionEnd!==void 0)o=function(t){return{start:t.selectionStart,end:t.selectionEnd,length:t.selectionEnd-t.selectionStart,text:t.value.slice(t.selectionStart,t.selectionEnd)}},r=function(t,e,i){e=n(t,e,i),t.selectionStart=e.start,t.selectionEnd=e.end},p=function(t,e){e?t.selectionEnd=t.selectionStart:t.selectionStart=t.selectionEnd};else{if(!(e(f,"createTextRange")&&"object"==typeof document.selection&&document.selection&&e(document.selection,"createRange")))return i().removeChild(f),window.console&&window.console.log&&window.console.log("TextInputs module for Rangy not supported in your browser. Reason: No means of finding text input caret position"),void 0;o=function(t){var e,n,i,o=0,r=0;return(i=document.selection.createRange())&&i.parentElement()==t&&(n=t.value.length,e=t.value.replace(/\r\n/g,"\n"),r=t.createTextRange(),r.moveToBookmark(i.getBookmark()),i=t.createTextRange(),i.collapse(!1),r.compareEndPoints("StartToEnd",i)>-1?o=r=n:(o=-r.moveStart("character",-n),o+=e.slice(0,o).split("\n").length-1,r.compareEndPoints("EndToEnd",i)>-1?r=n:(r=-r.moveEnd("character",-n),r+=e.slice(0,r).split("\n").length-1))),{start:o,end:r,length:r-o,text:t.value.slice(o,r)}},r=function(t,e,i){e=n(t,e,i),i=t.createTextRange();var o=e.start-(t.value.slice(0,e.start).split("\r\n").length-1);i.collapse(!0),e.start==e.end?i.move("character",o):(i.moveEnd("character",e.end-(t.value.slice(0,e.end).split("\r\n").length-1)),i.moveStart("character",o)),i.select()},p=function(t,e){var n=document.selection.createRange();n.collapse(e),n.select()}}i().removeChild(f),a=function(t,e,n,i){var o;e!=n&&(o=t.value,t.value=o.slice(0,e)+o.slice(n)),i&&r(t,e,e)},s=function(t){var e=o(t);a(t,e.start,e.end,!0)},c=function(t){var e,n=o(t);return n.start!=n.end&&(e=t.value,t.value=e.slice(0,n.start)+e.slice(n.end)),r(t,n.start,n.start),n.text},u=function(t,e,n,i){var o=t.value;t.value=o.slice(0,n)+e+o.slice(n),i&&(e=n+e.length,r(t,e,e))},l=function(t,e){var n=o(t),i=t.value;t.value=i.slice(0,n.start)+e+i.slice(n.end),n=n.start+e.length,r(t,n,n)},h=function(t,e,n){var i=o(t),s=t.value;t.value=s.slice(0,i.start)+e+i.text+n+s.slice(i.end),e=i.start+e.length,r(t,e,e+i.length)},t.fn.extend({getSelection:d(o,!1),setSelection:d(r,!0),collapseSelection:d(p,!0),deleteSelectedText:d(s,!0),deleteText:d(a,!0),extractSelectedText:d(c,!1),insertText:d(u,!0),replaceSelectedText:d(l,!0),surroundSelectedText:d(h,!0)})})}(jQuery),function(t){var e={tabHandle:".handle",speed:300,action:"click",tabLocation:"left",topPos:"200px",leftPos:"20px",fixedPosition:!1,positioning:"absolute",pathToTabImage:null,imageHeight:null,imageWidth:null,onLoadSlideOut:!1,topReferenceElement:null,height:null},n=function(t,e){var n=t.outerHeight();return"function"==typeof e.height&&(n=e.height(t)),{containerWidth:parseInt(t.outerWidth(),10)+"px",containerHeight:parseInt(n,10)+20+"px",tabWidth:parseInt(e.tabHandle.outerWidth(),10)+"px",tab:parseInt(e.tabHandle.outerHeight(),10)+"px"}},i=function(e,n,i){if(("top"===n.tabLocation||"bottom"===n.tabLocation)&&(e.css({left:n.leftPos}),n.tabHandle.css({right:0})),"top"===n.tabLocation&&(e.css({top:"-"+i.containerHeight}),n.tabHandle.css({bottom:"-"+i.tabHeight})),"bottom"===n.tabLocation&&(e.css({bottom:"-"+i.containerHeight,position:"fixed"}),n.tabHandle.css({top:"-"+i.tabHeight})),"left"===n.tabLocation||"right"===n.tabLocation){var o=parseInt(n.topPos,10),r=parseInt(n.topPos,10),s=0;n.topReferenceElement&&(o=t(n.topReferenceElement).position().top,s=r-o),console.log("diff",s,"top",o,"topPos",r,"height",i.containerHeight),e.css({height:i.containerHeight,top:o}),n.tabHandle.css({top:r+"px"})}"left"===n.tabLocation&&(e.css({left:"-"+i.containerWidth}),n.tabHandle.css({right:"-"+i.tabWidth})),"right"===n.tabLocation&&(e.css({right:"-"+i.containerWidth}),n.tabHandle.css({left:"-"+i.tabWidth}),t("html").css("overflow-x","hidden"))},o={refresh:function(){console.log("this",t(this));var e=t(this).data("tabSlideOut");if(e){var o=n(t(this),e);i(this,e,o),console.log("reset",o)}}};t.fn.tabSlideOut=function(r){if("string"!=typeof r){var s=t.extend(e,r||{}),a=t(this).data("tabSlideOut");a||t(this).data("tabSlideOut",s),s.tabHandle=t(s.tabHandle);var u=this;s.positioning=s.fixedPosition===!0?"fixed":"absolute",!document.all||window.opera||window.XMLHttpRequest||(s.positioning="absolute"),null!=s.pathToTabImage&&s.tabHandle.css({background:"url("+s.pathToTabImage+") no-repeat",width:s.imageWidth,height:s.imageHeight}),s.tabHandle.css({display:"block",textIndent:"-99999px",outline:"none",position:"absolute"}),u.css({"line-height":"1",position:s.positioning});var l=n(u,s);i(u,s,l),s.tabHandle.click(function(t){t.preventDefault()});var h=function(){var t=n(u,s);console.log("props",t),"top"===s.tabLocation?u.animate({top:"-"+t.containerHeight},s.speed).removeClass("open"):"left"===s.tabLocation?u.animate({left:"-"+t.containerWidth},s.speed).removeClass("open"):"right"===s.tabLocation?u.animate({right:"-"+t.containerWidth},s.speed).removeClass("open"):"bottom"===s.tabLocation&&u.animate({bottom:"-"+t.containerHeight},s.speed).removeClass("open")},c=function(){var t=n(u,s);i(u,s,t),console.log("props out",t),console.log(u[0].scrollHeight),"top"==s.tabLocation?u.animate({top:"-3px"},s.speed).addClass("open"):"left"==s.tabLocation?u.animate({left:"-3px"},s.speed).addClass("open"):"right"==s.tabLocation?u.animate({right:"-3px"},s.speed).addClass("open"):"bottom"==s.tabLocation&&u.animate({bottom:"-3px"},s.speed).addClass("open")},p=function(){u.click(function(t){t.stopPropagation()}),t(document).click(function(){h()})},d=function(){s.tabHandle.click(function(){u.hasClass("open")?h():c()}),p()},f=function(){u.hover(function(){c()},function(){h()}),s.tabHandle.click(function(){u.hasClass("open")&&h()}),p()},m=function(){h(),setTimeout(c,500)};"click"===s.action&&d(),"hover"===s.action&&f(),s.onLoadSlideOut&&m()}else if(o[r])return o[r].apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery),function(t){t.fn.zclip=function(e){if("object"==typeof e&&!e.length){var n=t.extend({path:"ZeroClipboard.swf",copy:null,beforeCopy:null,afterCopy:null,clickAfter:!0,setHandCursor:!0,setCSSEffects:!0},e);return this.each(function(){var e=t(this);if(e.is(":visible")&&("string"==typeof n.copy||t.isFunction(n.copy))){ZeroClipboard.setMoviePath(n.path);var i=new ZeroClipboard.Client;t.isFunction(n.copy)&&e.bind("zClip_copy",n.copy),t.isFunction(n.beforeCopy)&&e.bind("zClip_beforeCopy",n.beforeCopy),t.isFunction(n.afterCopy)&&e.bind("zClip_afterCopy",n.afterCopy),i.setHandCursor(n.setHandCursor),i.setCSSEffects(n.setCSSEffects),i.addEventListener("mouseOver",function(){e.trigger("mouseenter")}),i.addEventListener("mouseOut",function(){e.trigger("mouseleave")}),i.addEventListener("mouseDown",function(){e.trigger("mousedown"),t.isFunction(n.copy)?i.setText(e.triggerHandler("zClip_copy")):i.setText(n.copy),t.isFunction(n.beforeCopy)&&e.trigger("zClip_beforeCopy")}),i.addEventListener("complete",function(i,o){t.isFunction(n.afterCopy)?e.trigger("zClip_afterCopy"):(o.length>500&&(o=o.substr(0,500)+"...\n\n("+(o.length-500)+" characters not shown)"),e.removeClass("hover"),alert("Copied text to clipboard:\n\n "+o)),n.clickAfter&&e.trigger("click")}),i.glue(e[0],e.parent()[0]),t(window).bind("load resize",function(){i.reposition()})}})}return"string"==typeof e?this.each(function(){var n=t(this);e=e.toLowerCase();var i=n.data("zclipId"),o=t("#"+i+".zclip");"remove"==e?(o.remove(),n.removeClass("active hover")):"hide"==e?(o.hide(),n.removeClass("active hover")):"show"==e&&o.show()}):void 0}}(jQuery);var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t.addClass||(t.hide=function(){this.style.display="none"},t.show=function(){this.style.display=""},t.addClass=function(t){this.removeClass(t),this.className+=" "+t},t.removeClass=function(t){for(var e=this.className.split(/\s+/),n=-1,i=0;e.length>i;i++)e[i]==t&&(n=i,i=e.length);return n>-1&&(e.splice(n,1),this.className=e.join(" ")),this},t.hasClass=function(t){return!!this.className.match(RegExp("\\s*"+t+"\\s*"))}),t},setMoviePath:function(t){this.moviePath=t},dispatch:function(t,e,n){var i=this.clients[t];i&&i.receiveEvent(e,n)},register:function(t,e){this.clients[t]=e},getDOMObjectPosition:function(t,e){var n={left:0,top:0,width:t.width?t.width:t.offsetWidth,height:t.height?t.height:t.offsetHeight};return t&&t!=e&&(n.left+=t.offsetLeft,n.top+=t.offsetTop),n},Client:function(t){this.handlers={},this.id=ZeroClipboard.nextId++,this.movieId="ZeroClipboardMovie_"+this.id,ZeroClipboard.register(this.id,this),t&&this.glue(t)}};ZeroClipboard.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(t,e,n){this.domElement=ZeroClipboard.$(t);var i=99;this.domElement.style.zIndex&&(i=parseInt(this.domElement.style.zIndex,10)+1),"string"==typeof e?e=ZeroClipboard.$(e):e===void 0&&(e=document.getElementsByTagName("body")[0]);var o=ZeroClipboard.getDOMObjectPosition(this.domElement,e);this.div=document.createElement("div"),this.div.className="zclip",this.div.id="zclip-"+this.movieId,$(this.domElement).data("zclipId","zclip-"+this.movieId);var r=this.div.style;if(r.position="absolute",r.left=""+o.left+"px",r.top=""+o.top+"px",r.width=""+o.width+"px",r.height=""+o.height+"px",r.zIndex=i,"object"==typeof n)for(addedStyle in n)r[addedStyle]=n[addedStyle];e.appendChild(this.div),this.div.innerHTML=this.getHTML(o.width,o.height)},getHTML:function(t,e){var n="",i="id="+this.id+"&width="+t+"&height="+e;if(navigator.userAgent.match(/MSIE/)){var o=location.href.match(/^https/i)?"https://":"http://";n+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+o+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+t+'" height="'+e+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+i+'"/><param name="wmode" value="transparent"/></object>'}else n+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+t+'" height="'+e+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+i+'" wmode="transparent" />';return n},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide(),this.div.innerHTML="";var t=document.getElementsByTagName("body")[0];try{t.removeChild(this.div)}catch(e){}this.domElement=null,this.div=null}},reposition:function(t){if(t&&(this.domElement=ZeroClipboard.$(t),this.domElement||this.hide()),this.domElement&&this.div){var e=ZeroClipboard.getDOMObjectPosition(this.domElement),n=this.div.style;n.left=""+e.left+"px",n.top=""+e.top+"px"}},setText:function(t){this.clipText=t,this.ready&&this.movie.setText(t)},addEventListener:function(t,e){t=(""+t).toLowerCase().replace(/^on/,""),this.handlers[t]||(this.handlers[t]=[]),this.handlers[t].push(e)},setHandCursor:function(t){this.handCursorEnabled=t,this.ready&&this.movie.setHandCursor(t)},setCSSEffects:function(t){this.cssEffects=!!t},receiveEvent:function(t,e){switch(t=(""+t).toLowerCase().replace(/^on/,"")){case"load":if(this.movie=document.getElementById(this.movieId),!this.movie){var n=this;return setTimeout(function(){n.receiveEvent("load",null)},1),void 0}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var n=this;return setTimeout(function(){n.receiveEvent("load",null)},100),this.ready=!0,void 0}this.ready=!0;try{this.movie.setText(this.clipText)}catch(i){}try{this.movie.setHandCursor(this.handCursorEnabled)}catch(i){}break;case"mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),this.domElement.removeClass("hover"));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[t])for(var o=0,r=this.handlers[t].length;r>o;o++){var s=this.handlers[t][o];"function"==typeof s?s(this,e):"object"==typeof s&&2==s.length?s[0][s[1]](this,e):"string"==typeof s&&window[s](this,e)}}},!function(t){t(function(){t.support.transition=function(){var t=function(){var t,e=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in n)if(void 0!==e.style[t])return n[t]}();return t&&{end:t}}()})}(window.jQuery),!function(t){var e=function(e,n){this.options=n,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,n=t.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),n&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),n?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault(),e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;t(document).on("focusin.modal",function(t){e.$element[0]!==t.target&&!e.$element.has(t.target).length&&e.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,n=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(n),e.hideModal()})},hideModal:function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e):e()):e&&e()}};var n=t.fn.modal;t.fn.modal=function(n){return this.each(function(){var i=t(this),o=i.data("modal"),r=t.extend({},t.fn.modal.defaults,i.data(),"object"==typeof n&&n);o||i.data("modal",o=new e(this,r)),"string"==typeof n?o[n]():r.show&&o.show()})},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),i=n.attr("href"),o=t(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),r=o.data("modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},o.data(),n.data());e.preventDefault(),o.modal(r).one("hide",function(){n.focus()})})}(window.jQuery),!function(t){function e(){t(i).each(function(){n(t(this)).removeClass("open")})}function n(e){var n,i=e.attr("data-target");return i||(i=e.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),n=i&&t(i),n&&n.length||(n=e.parent()),n}var i="[data-toggle=dropdown]",o=function(e){var n=t(e).on("click.dropdown.data-api",this.toggle);t("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};o.prototype={constructor:o,toggle:function(){var i,o,r=t(this);if(!r.is(".disabled, :disabled"))return i=n(r),o=i.hasClass("open"),e(),o||i.toggleClass("open"),r.focus(),!1},keydown:function(e){var o,r,s,a,u;if(/(38|40|27)/.test(e.keyCode)&&(o=t(this),e.preventDefault(),e.stopPropagation(),!o.is(".disabled, :disabled"))){if(s=n(o),a=s.hasClass("open"),!a||a&&27==e.keyCode)return 27==e.which&&s.find(i).focus(),o.click();r=t("[role=menu] li:not(.divider):visible a",s),r.length&&(u=r.index(r.filter(":focus")),38==e.keyCode&&u>0&&u--,40==e.keyCode&&r.length-1>u&&u++,~u||(u=0),r.eq(u).focus())}}};var r=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),i=n.data("dropdown");i||n.data("dropdown",i=new o(this)),"string"==typeof e&&i[e].call(n)})},t.fn.dropdown.Constructor=o,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.dropdown.data-api",e).on("click.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.dropdown-menu",function(t){t.stopPropagation()}).on("click.dropdown.data-api",i,o.prototype.toggle).on("keydown.dropdown.data-api",i+", [role=menu]",o.prototype.keydown)}(window.jQuery),!function(t){var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.button.defaults,n)};e.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.data(),o=n.is("input")?"val":"html";t+="Text",i.resetText||n.data("resetText",n[o]()),n[o](i[t]||this.options[t]),setTimeout(function(){"loadingText"==t?n.addClass(e).attr(e,e):n.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons-radio"]');t&&t.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=function(n){return this.each(function(){var i=t(this),o=i.data("button"),r="object"==typeof n&&n;o||i.data("button",o=new e(this,r)),"toggle"==n?o.toggle():n&&o.setState(n)})},t.fn.button.defaults={loadingText:"loading..."},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.button.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(t){var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=t(this.options.menu),this.shown=!1,this.listen()};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var e=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:e.top+e.height,left:e.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var e;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(e=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source,e?this.process(e):this)},process:function(e){var n=this;return e=t.grep(e,function(t){return n.matcher(t)}),e=this.sorter(e),e.length?this.render(e.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,n=[],i=[],o=[];e=t.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?i.push(e):o.push(e):n.push(e);return n.concat(i,o)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(e){var n=this;return e=t(e).map(function(e,i){return e=t(n.options.item).attr("data-value",i),e.find("a").html(n.highlighter(i)),e[0]}),e.first().addClass("active"),this.$menu.html(e),this},next:function(){var e=this.$menu.find(".active").removeClass("active"),n=e.next();n.length||(n=t(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),e=t.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)).on("mouseleave","li",t.proxy(this.mouseleave,this))},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(t){t.stopPropagation(),t.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=t.fn.typeahead;t.fn.typeahead=function(n){return this.each(function(){var i=t(this),o=i.data("typeahead"),r="object"==typeof n&&n;o||i.data("typeahead",o=new e(this,r)),"string"==typeof n&&o[n]()})},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},t.fn.typeahead.Constructor=e,t.fn.typeahead.noConflict=function(){return t.fn.typeahead=n,this},t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var e=t(this);e.data("typeahead")||e.typeahead(e.data())})}(window.jQuery),!function(t){var e=function(e,n){if(this.$element=t(e),this.type=this.$element.data("uploadtype")||(this.$element.find(".thumbnail").length>0?"image":"file"),this.$input=this.$element.find(":file"),0!==this.$input.length){this.name=this.$input.attr("name")||n.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=t('<input type="hidden" />'),this.$element.prepend(this.$hidden)),this.$preview=this.$element.find(".fileupload-preview");var i=this.$preview.css("height");"inline"!=this.$preview.css("display")&&"0px"!=i&&"none"!=i&&this.$preview.css("line-height",i),this.original={exists:this.$element.hasClass("fileupload-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.$remove=this.$element.find('[data-dismiss="fileupload"]'),this.$element.find('[data-trigger="fileupload"]').on("click.fileupload",t.proxy(this.trigger,this)),this.listen()}};e.prototype={listen:function(){this.$input.on("change.fileupload",t.proxy(this.change,this)),t(this.$input[0].form).on("reset.fileupload",t.proxy(this.reset,this)),this.$remove&&this.$remove.on("click.fileupload",t.proxy(this.clear,this))},change:function(t,e){if("clear"!==e){var n=void 0!==t.target.files?t.target.files[0]:t.target.value?{name:t.target.value.replace(/^.+\\/,"")}:null;if(!n)return this.clear(),void 0;if(this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name),"image"===this.type&&this.$preview.length>0&&(n.type!==void 0?n.type.match("image.*"):n.name.match("\\.(gif|png|jpe?g)$"))&&"undefined"!=typeof FileReader){var i=new FileReader,o=this.$preview,r=this.$element;i.onload=function(t){o.html('<img src="'+t.target.result+'" '+("none"!=o.css("max-height")?'style="max-height: '+o.css("max-height")+';"':"")+" />"),r.addClass("fileupload-exists").removeClass("fileupload-new")},i.readAsDataURL(n)}else this.$preview.text(n.name),this.$element.addClass("fileupload-exists").removeClass("fileupload-new")}},clear:function(t){if(this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),navigator.userAgent.match(/msie/i)){var e=this.$input.clone(!0);this.$input.after(e),this.$input.remove(),this.$input=e}else this.$input.val("");this.$preview.html(""),this.$element.addClass("fileupload-new").removeClass("fileupload-exists"),t&&(this.$input.trigger("change",["clear"]),t.preventDefault())},reset:function(){this.clear(),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.original.exists?this.$element.addClass("fileupload-exists").removeClass("fileupload-new"):this.$element.addClass("fileupload-new").removeClass("fileupload-exists")},trigger:function(t){this.$input.trigger("click"),t.preventDefault()}},t.fn.fileupload=function(n){return this.each(function(){var i=t(this),o=i.data("fileupload");o||i.data("fileupload",o=new e(this,n)),"string"==typeof n&&o[n]()})},t.fn.fileupload.Constructor=e,t(document).on("click.fileupload.data-api",'[data-provides="fileupload"]',function(e){var n=t(this);if(!n.data("fileupload")){n.fileupload(n.data());var i=t(e.target).closest('[data-dismiss="fileupload"],[data-trigger="fileupload"]');i.length>0&&(i.trigger("click.fileupload"),e.preventDefault())}})}(window.jQuery),$.ui.plugin.add("draggable","snap2",{start:function(){var t=$(this).data("ui-draggable"),e=t.options;t.snap2Elements=[],$(e.snap2.constructor!==String?e.snap2.items||":data(ui-draggable)":e.snap2).each(function(){var e=$(this),n=e.offset();this!==t.element[0]&&t.snap2Elements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:n.top,left:n.left})})},drag:function(t,e){var n,i,o,r,s,a,u,l,h,c,p=$(this).data("ui-draggable"),d=p.options,f=d.snap2Tolerance,m=d.snap2Sides,g=e.offset.left,v=g+p.helperProportions.width,y=e.offset.top,w=y+p.helperProportions.height;for(h=p.snap2Elements.length-1;h>=0;h--)s=p.snap2Elements[h].left,a=s+p.snap2Elements[h].width,u=p.snap2Elements[h].top,l=u+p.snap2Elements[h].height,g>s-f&&a+f>g&&y>u-f&&l+f>y||g>s-f&&a+f>g&&w>u-f&&l+f>w||v>s-f&&a+f>v&&y>u-f&&l+f>y||v>s-f&&a+f>v&&w>u-f&&l+f>w?("inner"!==d.snap2Mode&&(n=f>=Math.abs(u-w)&&-1!==m.indexOf("t"),i=f>=Math.abs(l-y)&&-1!==m.indexOf("b"),o=f>=Math.abs(s-v)&&-1!==m.indexOf("l"),r=f>=Math.abs(a-g)&&-1!==m.indexOf("r"),n&&(e.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),i&&(e.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),o&&(e.position.left=p._convertPositionTo("relative",{top:0,left:s-p.helperProportions.width}).left-p.margins.left),r&&(e.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left)),c=n||i||o||r,"outer"!==d.snap2Mode&&(n=f>=Math.abs(u-y)&&-1!==m.indexOf("t"),i=f>=Math.abs(l-w)&&-1!==m.indexOf("b"),o=f>=Math.abs(s-g)&&-1!==m.indexOf("l"),r=f>=Math.abs(a-v)&&-1!==m.indexOf("r"),n&&(e.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),i&&(e.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),o&&(e.position.left=p._convertPositionTo("relative",{top:0,left:s}).left-p.margins.left),r&&(e.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left)),!p.snap2Elements[h].snapping&&(n||i||o||r||c)&&p.options.snap2.snap2&&p.options.snap2.snap2.call(p.element,t,$.extend(p._uiHash(),{snap2Item:p.snap2Elements[h].item})),p.snap2Elements[h].snapping=n||i||o||r||c):(p.snap2Elements[h].snapping&&p.options.snap2.release&&p.options.snap2.release.call(p.element,t,$.extend(p._uiHash(),{snap2Item:p.snap2Elements[h].item})),p.snap2Elements[h].snapping=!1)}});var EDIBLE=EDIBLE||{};EDIBLE.namespace=function(t){var e,n=t.split("."),i=EDIBLE;for("EDIBLE"===n[0]&&(n=n.lice(1)),e=0;n.length>e;e+=1)i[n[e]]===void 0&&(i[n[e]]={}),i=i[n[e]];return i},EDIBLE.namespace("modules.multiCanvas"),EDIBLE.namespace("modules.multiContext"),EDIBLE.modules.MultiContext=function(){var t=function(){this.contexts=this.canvas.canvases.map(function(t){return t.getContext("2d")}),void 0!==this._fillStyle&&(this.fillStyle=this._fillStyle),void 0!==this._strokeStyle&&(this.strokeStyle=this._strokeStyle),void 0!==this._lineWidth&&(this.lineWidth=this._lineWidth),this._position={ctx:this.contexts[0],x:0,y:0,gx:0,gy:0}},e=function(t,e,n){this.contexts[n];var i=n*this._maxWidth,o=i+this._maxWidth;return n===this.contexts.length-1&&(o=i+this.canvas.canvases[n].width),t>=i&&o>t?t-i:void 0},n=function(t){return function(e,n,i,o){var r,s,a=!1;for(r=0;this.contexts.length>r;r+=1){if(s=this._pointInContext(e,n,r),rPt=this._pointInContext(e+i,n,r),void 0!==s&&void 0!==rPt){this.contexts[r][t](s,n,i,o);break}if(void 0!==s)this.contexts[r][t](s,n,this._maxWidth-s,o),a=!0;else{if(void 0!==rPt){this.contexts[r][t](0,n,rPt,o);
break}a&&this.contexts[r][t](0,n,this._maxWidth,o)}}}},i=function(t){return function(e){var n;if(this["_"+t]=e,e instanceof Array)for(n=0;this.contexts.length>n;n+=1)this.contexts[n][t]=e[n];else for(n=0;this.contexts.length>n;n+=1)this.contexts[n][t]=e;return e}},o=function(t){return function(){return this["_"+t]}},r=function(t){return function(){this.contexts.forEach(function(e){e[t]()})}};MultiContext=function(n,i){this.canvas=n,this._maxWidth=i,this._updateContexts=t.bind(this),this._pointInContext=e.bind(this),this._updateContexts(),this._position={ctx:this.contexts[0],x:0,y:0,gx:0,gy:0}},MultiContext.prototype={constructor:EDIBLE.modules.MultiContext,version:"0.1",createLinearGradient:function(t,e,n,i){var o=[];return o=this.contexts.map(function(o){return o.createLinearGradient(t,e,n,i)}),o.addColorStop=function(t,e){this.map(function(n){n.addColorStop(t,e)})},o}};var s=["save","restore","closePath","beginPath","stroke"];s.forEach(function(t){MultiContext.prototype[t]=r(t)});var a=["clearRect","strokeRect","fillRect","rect"];a.forEach(function(t){MultiContext.prototype[t]=n(t)});var u=function(t,e){var n;for(n=0;this.contexts.length>n;n++)pt=this._pointInContext(t,e,n),void 0!==pt&&(this._position={ctx:this.contexts[n],x:pt,y:e,gx:t,gy:e},this.contexts[n].moveTo(pt,e))},l=function(t,e){var n,i,o=0;for(n=0;this.contexts.length>n;n++){if(i=this.contexts[n],pt=this._pointInContext(t,e,n),void 0!==pt&&i===this._position.ctx){i.lineTo(pt,e),this._position={ctx:i,x:pt,y:e,gx:t,gy:e};break}if(void 0!==pt&&this._position.gx>t){m=(e-this._position.gy)/parseFloat(t-this._position.gx);for(var r=function(n){return m*(n-t)+e},s={ctx:i,x:pt,y:e,gx:t,gy:e};this.contexts.indexOf(this._position.ctx)>n;)newY=r(o+this.canvas.canvases[n].width),i.moveTo(this.canvas.canvases[n].width,newY),i.lineTo(pt,e),pt=0,e=newY,o+=this.canvas.canvases[n].width,n+=1,i=this.contexts[n];this._position.ctx.lineTo(pt,e),this._position=s;break}if(void 0!==pt&&t>this._position.gx){console.log("line to the right"),m=(e-this._position.gy)/parseFloat(t-this._position.gx),console.log("slope",m);for(var r=function(n){return m*(n-t)+e},s={ctx:i,x:pt,y:e,gx:t,gy:e};n>this.contexts.indexOf(this._position.ctx);)newY=r(o),console.log("ctx",n,"moveto",0,newY,"lineto",pt,e),i.moveTo(0,newY),i.lineTo(pt,e),pt=this.canvas.canvases[n-1].width,e=newY,o-=this.canvas.canvases[n-1].width,n-=1,i=this.contexts[n];this._position.ctx.lineTo(pt,e),this._position=s;break}o+=this.canvas.canvases[n].width}};MultiContext.prototype.moveTo=u,MultiContext.prototype.lineTo=l;var h=["fillStyle","font","globalAlpha","globalCompositeOperation","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline"];return h.forEach(function(t){MultiContext.prototype.__defineSetter__(t,i(t)),MultiContext.prototype.__defineGetter__(t,o(t))}),MultiContext}(),EDIBLE.modules.MultiCanvas=function(){return MultiCanvas=function(t,e){this._maxWidth=void 0!==e?parseFloat(e):3e4,this.canvases=[t],this.mctx=new EDIBLE.modules.MultiContext(this,this._maxWidth)},MultiCanvas.prototype={constructor:EDIBLE.modules.MultiCanvas,version:"0.1",clone:function(t){this.width=t.width,this.height=t.height;var e,n;for(e=0;t.canvases.length>e;e++)n=this.canvases[e].getContext("2d"),n.drawImage(t.canvases[0],0,0,t.canvases[0].width,t.canvases[0].height)},destroy:function(){var t,e=this.canvases[0].parentNode;for(t=0;this.canvases.length>t;t++)e.removeChild(this.canvases[t])},getContext:function(t){if("2d"===t)return this.mctx;throw"Only '2d' contexts are supported."},get height(){return this._height},set height(t){var e;for(e=0;this.canvases.length>e;e++)this.canvases[e].height=t;return this._height=t,t},get width(){return this._width},set width(t){var e,n,i=parseInt(t/this._maxWidth+1),o=this.canvases[0].parentNode;for(e=0;this.canvases.length>e;e+=1)o.removeChild(this.canvases[e]);for(this.canvases=this.canvases.slice(0,1),this.canvases=[],e=0;i>e;e+=1)e>=this.canvases.length&&(n=document.createElement("canvas"),n.height=this._height,n.style.display="inline-block",o.appendChild(n),this.canvases.push(n)),this.canvases[e].width=e===i-1?t-this._maxWidth*(i-1):this._maxWidth;return this._width=t,this.mctx._updateContexts(),t}},MultiCanvas}(),function(t){"use strict";t.widget("edible.wfBase",{_create:function(){console.log("REGISTERING AS NAME",this.widgetName),this.element.data("waveformClass",this.widgetName)},_destroy:function(){this.element.removeData("waveformClass"),this._super("destroy")}})}(jQuery,window,document),$.fn.wf=function(){return this[this.data("waveformClass")].apply(this,arguments)},function(t,e,n,i){"use strict";t.widget("edible.waveform",t.edible.wfBase,{options:{data:[],height:"90px",canvHeight:"75px",topBarHeight:15,dur:1e3,len:1e3,start:0,pxPerMs:.1,name:"audio",filename:"audio.mp3",innerColor:i,fixed:!1,volume:{x:[0],y:[1]}},width:function(){return this.options.len*this.options.pxPerMs},waveformClass:function(){return"waveform"},exportExtras:function(){return{}},debugInfo:function(){return JSON.stringify(this.options,null,4)},slice:function(e){var i=this.element.offset(),o=e.pageX-i.left,r=n.createElement("div"),s=o/this.options.pxPerMs;return t(r)[this.waveformClass](t.extend(!0,{},this.options,{start:this.options.start+s,len:this.options.len-s})),this._setOptions({len:o/this.options.pxPerMs}),{waveform:r,pos:o/this.options.pxPerMs}},_computePosFromResize:function(t,e){console.log("ui",e);var n=e.position.left-e.originalPosition.left,i=e.originalPosition.left-this.options.start*this.options.pxPerMs,o=(this.options.dur-this.options.start)*this.options.pxPerMs,r=this.options.start,s=e.size.width/this.options.pxPerMs,a=e.position.left;return 0!==n?(r=this.options.start+n/this.options.pxPerMs,0>r&&(r=0,a=i,s=this.options.len+this.options.start)):e.size.width>o&&(s=this.options.dur-this.options.start),console.log("orig element offset",e.originalElement.offset()),this.element.css("left",a-this.element.parent().offset().left),{len:s,start:r}},_create:function(){this._super("_create");var e,n,i=this,o=t("#waveformTemplate").html();this.element.addClass("edible-waveform").append(_.template(o,this.options)),e=this.element.find(".displayCanvas"),n=this.element.find(".topBar"),this.element.find(".removeWaveform").click(function(t){return i._trigger("destroy"),i._destroy(),t.preventDefault(),!1}),this.options.fixed||this.element.draggable({handle:n,snap2:".track",snap2Mode:"inner",snap2Tolerance:46,snap2Sides:"tb",stack:".edible-waveform"}).resizable({handles:"e, w",stop:function(t,e){var n=i._computePosFromResize(t,e);console.log("setting new len",n.len,"and start",n.start),i._setOptions(n)},helper:"resizable-helper"}),this.element.disableSelection().css("position","absolute"),this.options._mcanv=new EDIBLE.modules.MultiCanvas(e[0]),this._refresh()},_drawWaveform:function(){var t=this.options.data.length,e=t/this.options.dur,n=this.options.start*e,o=n+this.options.len*e,r=this.options._mcanv,s="#4BF2A7";this.options.innerColor!==i&&r!==i?s=this.options.innerColor(r):s===i&&(s="#4BF2A7",r!==i&&(s=r.getContext("2d").createLinearGradient(0,0,0,parseInt(this.options.canvHeight)),s.addColorStop(0,"#4BF2A7"),s.addColorStop(1,"#32CD32"))),new Waveform({canvas:r,data:this.options.data.slice(n,o),innerColor:s,outerColor:"#333",height:this.options.canvHeight,interpolate:!0,width:this.width()})},_refresh:function(){this.options._mcanv.width=this.width(),this.options._mcanv.height=parseInt(this.options.canvHeight),this.element.find(".topBar").css("width",this.width()),this.element.width(this.width()).height(this.options.height),this._drawWaveform()},_destroy:function(){this._super("destroy"),this.element.remove()},_setOptions:function(){this._superApply(arguments),this._refresh(),this._trigger("changed",null,arguments)},_setOption:function(t,e){switch(t){case"currentWords":this.options.highlightedWordsRange=i,this.options.currentWords=e;break;case"oogielove":break;default:this.options[t]=e}this._super("_setOption",t,e)}})}(jQuery,window,document),function(t,e,n,i){"use strict";t.widget("edible.textAlignedWaveform",t.edible.waveform,{_create:function(){this._super("_create")},waveformClass:function(){return"textAlignedWaveform"},_drawWaveform:function(){var e,n,o,r,s,a=this,u=this.options.data.length>0,l=this.options.data.length,h=l/this.options.dur,c=this.options.start*h,p=c+this.options.len*h,d=[],f=[],m=0;t.each(this.options.currentWords,function(t,i){if(f.push(m),"gp"===i.alignedWord){for(m+=parseInt(1e3*i.pauseLength),r=[],s=0;1e3*i.pauseLength*h>s;s++)r[s]=0;d.push.apply(d,r)}else e=1e3*i.start,n=1e3*i.end,o=n-e,m+=parseInt(o),u&&(c=parseInt(e*h),p=parseInt(n*h),r=a.options.data.slice(c,p),d.push.apply(d,r))}),this.options.len=m;var g=this.options._mcanv;g.getContext("2d").canvas.width=this.width(),g.getContext("2d").canvas.height=parseInt(this.options.canvHeight),this.element.find(".topBar").css("width",this.width());var v="#4BF2A7";g!==i&&(v=g.getContext("2d").createLinearGradient(0,0,0,parseInt(this.options.canvHeight)),v.addColorStop(0,"#4BF2A7"),v.addColorStop(1,"#32CD32")),u||(d=[]);var y="#FF7F24";g!==i&&(y=g.getContext("2d").createLinearGradient(0,0,0,parseInt(this.options.canvHeight)),y.addColorStop(0,"#FF7F24"),y.addColorStop(1,"#FA9A50"));var w=v;if("highlightedWordsRange"in this.options&&this.options.highlightedWordsRange!==i){var b=this.options.highlightedWordsRange,_=this.options.pxPerMs;w=function(t){var e=t*a.width();return e>=f[b[0]]*_&&f[b[1]]*_>e?y:v}}new Waveform({canvas:g,data:d,innerColor:w,outerColor:"#333333",height:this.options.canvHeight,interpolate:!0,width:this.width()})}})}(jQuery,window,document),function(){function t(t){throw t}function e(t){return function(){return t}}function n(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&t.splice!==void 0&&t.propertyIsEnumerable!==void 0&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||t.call!==void 0&&t.propertyIsEnumerable!==void 0&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&t.call===void 0)return"object";return e}function i(t){return t!==Ge}function o(t){return t!=Je}function r(t){return"array"==n(t)}function s(t){var e=n(t);return"array"==e||"object"==e&&"number"==typeof t.length}function a(t){return"string"==typeof t}function u(t){return"boolean"==typeof t}function l(t){var e=typeof t;return"object"==e&&t!=Je||"function"==e}function h(t,e){var n=t.split("."),o=Ze;!(n[0]in o)&&o.execScript&&o.execScript("var "+n[0]);for(var r;n.length&&(r=n.shift());)!n.length&&i(e)?o[r]=e:o=o[r]?o[r]:o[r]={}}function c(t,e){function n(){}n.prototype=e.prototype,t.Va=e.prototype,t.prototype=new n,t.prototype.constructor=t}function p(){return tn.concat.apply(tn,arguments)}function d(t){var e=t.length;if(e>0){for(var n=Array(e),i=0;e>i;i++)n[i]=t[i];return n}return[]}function f(t,e,n){return 2>=arguments.length?tn.slice.call(t,e):tn.slice.call(t,e,n)}function m(t,e,n){if(!s(t)||!s(e)||t.length!=e.length)return Xe;var i=t.length;n=n||v;for(var o=0;i>o;o++)if(!n(t[o],e[o]))return Xe;return Qe}function g(t,e){return t>e?1:e>t?-1:0}function v(t,e){return t===e}function y(){if(!arguments.length)return[];for(var t=[],e=0;;e++){for(var n=[],i=0;arguments.length>i;i++){var o=arguments[i];if(e>=o.length)return t;n.push(o[e])}t.push(n)}}function w(){}function b(e){if(e instanceof w)return e;if("function"==typeof e.t)return e.t(Xe);if(s(e)){var n=0,i=new w;return i.next=function(){for(;;){if(n>=e.length&&t(sn),n in e)return e[n++];n++}},i}t(Error("Not implemented"))}function _(e,n,i){if(s(e))try{nn(e,n,i)}catch(o){o!==sn&&t(o)}else{e=b(e);try{for(;;)n.call(i,e.next(),Ge,e)}catch(r){r!==sn&&t(r)}}}function x(t,e,n){var i=b(t);return t=new w,t.next=function(){for(;;){var t=i.next();return e.call(n,t,Ge,i)}},t}function A(t){if(s(t))return d(t);t=b(t);var e=[];return _(t,function(t){e.push(t)}),e}function P(e,n){try{return b(e).next()}catch(i){return i!=sn&&t(i),n}}function S(){}function T(t){if(!s(t))return Xe;for(var e=0,n=t.length;n>e;e++)if(window.isNaN(t[e]))return Xe;return Qe}function C(t,e,n){for(var i in t)e.call(n,t[i],i,t)}function M(t,e,n){var i,o={};for(i in t)o[i]=e.call(n,t[i],i,t);return o}function k(t){var e,n=0;for(e in t)n++;return n}function O(t){for(var e in t)return e}function j(t){var e,n=[],i=0;for(e in t)n[i++]=t[e];return n}function E(t){var e,n=[],i=0;for(e in t)n[i++]=e;return n}function I(t){for(var e in t)delete t[e]}function D(t,e){e in t&&delete t[e]}function L(t,e,n){return e in t?t[e]:n}function F(t){var e,n={};for(e in t)n[e]=t[e];return n}function $(t){for(var e,n,i=1;arguments.length>i;i++){n=arguments[i];for(e in n)t[e]=n[e];for(var o=0;un.length>o;o++)e=un[o],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function H(){var e=arguments.length;if(1==e&&r(arguments[0]))return H.apply(Je,arguments[0]);e%2&&t(Error("Uneven number of arguments"));for(var n={},i=0;e>i;i+=2)n[arguments[i]]=arguments[i+1];return n}function R(t){if("function"==typeof t.w)return t.w();if(a(t))return t.split("");if(s(t)){for(var e=[],n=t.length,i=0;n>i;i++)e.push(t[i]);return e}return j(t)}function W(e){this.e={},this.g=[];var n=arguments.length;if(n>1){n%2&&t(Error("Uneven number of arguments"));for(var i=0;n>i;i+=2)this.set(arguments[i],arguments[i+1])}else e&&this.W(e)}function N(t){if(t.u!=t.g.length){for(var e=0,n=0;t.g.length>e;){var i=t.g[e];Object.prototype.hasOwnProperty.call(t.e,i)&&(t.g[n++]=i),e++}t.g.length=n}if(t.u!=t.g.length){for(var o={},n=e=0;t.g.length>e;)i=t.g[e],Object.prototype.hasOwnProperty.call(o,i)||(t.g[n++]=i,o[i]=1),e++;t.g.length=n}}function B(t){this.e=new W,t&&this.W(t)}function q(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[Ke]||(t[Ke]=++Ye)):e.substr(0,1)+t}function U(t,e){for(var n=new B,i=R(e),o=0;i.length>o;o++){var r=i[o];t.contains(r)&&n.add(r)}return n}function z(t,e){for(var n=t.R(),i=R(e),o=i.length,r=0;o>r;r++)n.remove(i[r]);return n}function V(e){if(e!=Je)try{e.clear()}catch(n){t(Error("Input graph is not a jsnx graph type"))}else e=new an.Ba;return e}function G(e,i,o){var r;if(e.hasOwnProperty("adj"))try{return r=Q(e.adj,i,e.f()),"graph"in e&&"object"===n(e.graph)&&(r.graph=F(e.graph)),"node"in e&&"object"===n(e.node)&&(r.node=M(e.node,function(t){return F(t)})),r}catch(a){t(Error("Input is not a correct jsnx graph"))}if("object"===n(e))try{return Q(e,i,o)}catch(u){try{var l=V(i);if(l.i(e),l.f()&&!l.d()){var h={};C(e,function(t,e){nn(t,function(t){t in h||l.h(e,t)}),h[e]=1})}else{var c=[];C(e,function(t,e){nn(t,function(t){c.push([e,t])})}),l.a(c)}return l}catch(p){t(Error("Input is not known type."))}}if(s(e))try{var d=V(i);return d.a(e),d}catch(f){t(Error("Input is not valid edge list"))}}function Q(e,n,i){var o,r,a=V(n);return a.i(e),i?a.d()?(a.f()?(o=[],C(e,function(e,n){s(e)&&t(Error()),C(e,function(t,e){C(t,function(t,i){o.push([n,e,i,t])})})})):(o=[],C(e,function(e,n){s(e)&&t(Error()),C(e,function(t,e){C(t,function(t){o.push([n,e,t])})})})),a.a(o)):a.f()?(r=new B,C(e,function(e,n){s(e)&&t(Error()),C(e,function(t,e){r.contains(""+[n,e])||(o=[],C(t,function(t,i){o.push([n,e,i,t])}),a.a(o),r.add(""+[e,n]))})})):(r=new B,C(e,function(e,n){s(e)&&t(Error()),C(e,function(t,e){r.contains(""+[n,e])||(o=[],C(t,function(t){o.push([n,e,t])}),a.a(o),r.add(""+[e,n]))})})):a.f()&&!a.d()?(r=new B,C(e,function(e,n){s(e)&&t(Error()),C(e,function(t,e){r.contains(""+[n,e])||(a.h(n,e,t),r.add(""+[e,n]))})})):(o=[],C(e,function(e,n){s(e)&&t(Error()),C(e,function(t,e){o.push([n,e,t])})}),a.a(o)),a}function J(t){this.name="JSNetworkXException",this.message=t}function X(t){J.call(this,t),this.name="JSNetworkXError"}function Z(t){J.call(this,t),this.name="JSNetworkXPointlessConcept"}function K(t){J.call(this,t),this.name="JSNetworkXAlgorithmError"}function Y(t){K.call(this,t),this.name="JSNetworkXUnfeasible"}function te(t){Y.call(this,t),this.name="JSNetworkXNoPath"}function ee(t){K.call(this,t),this.name="JSNetworkXUnbounded"}function ne(t){function e(t,e){return t[e[0]]=e[1],t}t=fe(t);var n={};return _(t,function(t){n=e.call(Ge,n,t)}),n}function ie(t){return t instanceof w||"function"==n(t.t)}function oe(e){return a(e)||s(e)||"length"in e?e.length:ge(e)?k(e):(t(new TypeError),void 0)}function re(t,e,n,i){if(u(n)&&(i=n,n=Je),i){var o=e;e=function(t){o.apply(this,t)}}ie(t)?_(t,e,n):s(t)||a(t)?nn(t,e,n):l(t)&&re(E(t),e,n)}function se(e,n,i){return s(e)?rn(e,n,i):ie(e)?x(e,n,i):l(e)?M(e,n,i):(t(new TypeError),void 0)}function ae(){var e=arguments,n=e[0];if(s(n))return y.apply(Je,e);if(ie(n)){var n=new w,i=e.length;return n.next=function(){for(var t=[],n=0;i>n;n++)t.push(e[n].next());return t},n}return l(n)?y.apply(Je,rn(e,E)):(t(new TypeError),void 0)}function ue(e,n,i){if(0===arguments.length)return[];1===arguments.length?(n=e,e=0,i=1):2===arguments.length?i=1:3===arguments.length&&0===arguments[2]&&t("range() step argument must not be zero");var o,r=new w,s=0>i,a=e;return r.next=function(){return(s&&n>=a||!s&&a>=n)&&t(sn),o=a,a+=i,o},r}function le(e){var n=ce(e),i=n.length;if(2>i)return new w;var o=ce(ue(2));return e=new w,e.next=function(){var e=rn(o,function(t){return n[t]});return this.next=function(){var e,r=Xe;for(e=2;e--;)if(o[e]!=e+i-2){r=Qe;break}for(r||t(sn),o[e]+=1,r=e+1;2>r;r++)o[r]=o[r-1]+1;return rn(o,function(t){return n[t]})},e},e}function he(e){var n=ce(e),i=n.length;if(2>i)return new w;var o=ce(ue(i)),r=ce(ue(i,i-2,-1));e=new w;var s,a=new w,u=Qe;return e.next=function(){return this.next=s.next,rn(o.slice(0,2),function(t){return n[t]})},a.next=function(){return u},s=me(a,function(e){return e||t(sn),u=Xe,ue(1,-1,-1)},function(t){if(!u){if(r[t]-=1,0!==r[t]){var e=r[t],s=o[t];return o[t]=o[o.length-e],o[o.length-e]=s,u=Qe,fe([rn(o.slice(0,2),function(t){return n[t]})])}o.splice.apply(o,[t,o.length].concat(o.slice(t+1).concat([o[t]]))),r[t]=i-t}},function(t){return t}),e}function ce(e){return s(e)?d(e):ie(e)?A(e):l(e)?E(e):(t(new TypeError),void 0)}function pe(t){var e=[];return C(t,function(t,n){e.push([n,t])}),e}function de(t){var e=new w,n=b(E(t));return e.next=function(){var e=n.next();return[e,t[e]]},e}function fe(t){return"object"===n(t)&&!s(t)&&!ie(t)&&(t=E(t)),b(t)}function me(e){var n=new w,o=f(arguments,1);if(0===o.length)return e;try{e=b(e)}catch(r){return n.next=function(){"Not implemented"===r.message&&t(new TypeError)},n}var s=Je;return n.next=function(){var t,r;try{for(;!i(t);)t=s.next()}catch(a){for(;!i(r)||!i(t);)r=e.next(),t=o[0](r);if(ie(t))return s=me.apply(Je,p([t],f(o,1))),n.next();s=Je}return t},n}function ge(t){var e=Object.prototype.hasOwnProperty;if(!t||"object"!==n(t)||t.nodeType||t==t.window)return Xe;try{if(t.constructor&&!e.call(t,"constructor")&&!e.call(t.constructor.prototype,"isPrototypeOf"))return Xe}catch(i){return Xe}for(var o in t);return o===Ge||e.call(t,o)}function ve(t,e){e=e||[];var i=n(t);if("object"==i&&ge(t)||"array"==i){var o;o=e;var r;t:{r=function(e){return t===e[0]};for(var s=o.length,u=a(o)?o.split(""):o,l=0;s>l;l++)if(l in u&&r.call(Ge,u[l])){r=l;break t}r=-1}if(o=0>r?Je:a(o)?o.charAt(r):o[r],o!==Je)return o[1];if(t.R)return o=[t,t.R()],e.push(o),o[1];i="array"==i?[]:{},o=[t,i],e.push(o);for(var h in t)i[h]=ve(t[h],e);return i}return t}function ye(t){function e(){}var n,i={};e.prototype=t.constructor.prototype;for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);i=ve(i),t=new e;for(n in i)t[n]=i[n];return t}function we(t){var e=[];return _e(new be,t,e),e.join("")}function be(){this.V=Ge}function _e(e,n,i){switch(typeof n){case"string":xe(n,i);break;case"number":i.push(isFinite(n)&&!isNaN(n)?n:"null");break;case"boolean":i.push(n);break;case"undefined":i.push("null");break;case"object":if(n==Je){i.push("null");break}if(r(n)){var o=n.length;i.push("[");for(var s="",a=0;o>a;a++)i.push(s),s=n[a],_e(e,e.V?e.V.call(n,a+"",s):s,i),s=",";i.push("]");break}i.push("{"),o="";for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s=n[a],"function"!=typeof s&&(i.push(o),xe(a,i),i.push(":"),_e(e,e.V?e.V.call(n,a,s):s,i),o=","));i.push("}");break;case"function":break;default:t(Error("Unknown type: "+typeof n))}}function xe(t,e){e.push('"',t.replace(hn,function(t){if(t in ln)return ln[t];var e=t.charCodeAt(0),n="\\u";return 16>e?n+="000":256>e?n+="00":4096>e&&(n+="0"),ln[t]=n+e.toString(16)}),'"')}function Ae(t,e){return this instanceof Ae?(this.graph={},this.node={},this.adj={},t!=Je&&G(t,this),$(this.graph,e||{}),this.edge=this.adj,void 0):new Ae(t,e)}function Pe(t,e){return this instanceof Pe?(this.graph={},this.node={},this.adj={},this.pred={},this.succ=this.adj,t!=Je&&G(t,this),$(this.graph,e||{}),this.edge=this.adj,void 0):new Pe(t,e)}function Se(t,e){return this instanceof Se?(Ae.call(this,t,e),void 0):new Se(t,e)}function Te(t,e){return this instanceof Te?(Pe.call(this,t,e),void 0):new Te(t,e)}function Ce(t,e){var n={};return C(t.Z,function(t,i){e in t&&(n[i]=t[e])}),n}function Me(e,n){if(e.d()&&t(new X("triangles() is not defined for directed graphs.")),e.q(n))return Math.floor(ke(e,n).next()[2]/2);var i={};return _(ke(e,n),function(t){i[t[0]]=Math.floor(t[2]/2)}),i}function ke(e,n){e.f()&&t(new X("Not defined for multigraphs."));var i;return i=n!=Je?me(e.b(n),function(t){return[t,e.k(t)]}):de(e.adj),x(i,function(t){var n=new B(E(t[1])),i=0;return n.remove(t[0]),_(n,function(t){var o=new B(E(e.k(t)));o.remove(t),i+=U(n,o).c()}),[t[0],n.c(),i]})}function Oe(e,o,r){if(e.d()&&t(new X("Clustering algorithms are not defined for directed graphs.")),r!=Je){var s=r;e.f()&&t(new X("Not defined for multigraphs.")),i(s)||(s="weight");var a;if(0===e.p().length)r=1;else{r=e.p(Qe);var u=function(t){return L(t[2],s,1)};r="function"==n(u)?se(r,function(){return u.apply(Je,arguments)}):ce(r),r=Math.max.apply(Je,r)}a=r,r=o!=Je?me(e.b(o),function(t){return[t,e.k(t)]}):de(e.adj),r=x(r,function(t){var n=t[0],i=new B(E(t[1]));i.remove(n);var o=0,r=new B;return _(i,function(t){var u=L(e.k(n)[t],s,1)/a;r.add(t);var l=z(new B(E(e.k(t))),r);_(U(i,l),function(i){var r=L(e.k(t)[i],s,1)/a;i=L(e.k(n)[i],s,1)/a,o+=Math.pow(u*r*i,1/3)})}),[n,i.c(),2*o]})}else r=ke(e,o);var l={};return _(r,function(t){l[t[0]]=0===t[2]?0:t[2]/(t[1]*(t[1]-1))}),e.q(o)?j(l)[0]:l}function je(e){var n=-1,i={},o=new B;_(e.o(),function(t){var e=new B(E(t[1]));e.remove(t[0]);var r=e.c();r>n?(i[t[0]]=o=e,n=r):i[t[0]]=e});var r=new B(E(i)),s=z(r,o),a=new B,u=[],l=[];return e=new w,e.next=function(){0===s.c()&&0===u.length&&t(sn);var e,h;if(!(s.c()>0)){var c=u.pop();return r=c[0],a=c[1],s=c[2],l.pop(),this.next()}e=P(s),s.remove(e),l.push(e),r.remove(e),a.add(e);var f=i[e],c=U(r,f),f=U(a,f);if(0===c.c()&&(0===f.c()&&(h=d(l)),l.pop(),h))return h;if(0===f.c()&&1===c.c())return h=p(l,c.w()),l.pop(),h;var m,g,v=c.c(),y=-1;for(h=b(f);(e=P(h,Je))!==Je&&(e=U(c,i[e]),g=e.c(),!(g>y&&(m=e,y=g,y===v))););if(y===v)return l.pop(),this.next();for(n=-1,h=b(c);(e=P(h,Je))!==Je&&(e=U(c,i[e]),g=e.c(),!(g>n&&(o=e,n=g,n===v-1))););return y>n&&(o=m),u.push([r,a,s]),r=c,a=f,s=z(r,o),this.next()},e}function Ee(t,e,n,i,o){var r,s,a,u,l=-1,h=e.c();for(s=b(n);(a=P(s,Je))!==Je;)if(a=U(e,t[a]),u=a.c(),u>l&&(r=a,l=u,u===h))return;_(e,function(n){n=U(e,t[n]);var i=n.c();i>l&&(r=n,l=i)}),h=z(e,r),_(h,function(r){e.remove(r),i.push(r);var s=t[r];r=U(e,s),s=U(n,s),r.J()&&s.J()?o.push(d(i)):s.J()&&1===r.c()?o.push(p(i,r.w())):Ee(t,r,s,i,o),n.add(i.pop())})}function Ie(t,e,n){n!=Je||(n=A(je(t))),e!=Je||(e=t.z());var i;if(r(e))i={},nn(e,function(t){i[t]=on(n,function(e){return en(e,t)>=0||en(e,t+"")>=0}).length});else{var o=e;i=on(n,function(t){return en(t,o)>=0||en(t,o+"")>=0}).length}return i}function De(t,e){if(t.v()!=e.v())return Xe;var n,i=t.l(),o=Me(t),r=Ie(t),s=[];for(n in i)s.push([i[n],o[n],r[n]]);s.sort(function(t,e){return t[0]!==e[0]?t[0]-e[0]:t[1]!==e[1]?t[1]-e[1]:t[2]-e[2]});var i=e.l(),o=Me(e),r=Ie(e),a=[];for(n in i)a.push([i[n],o[n],r[n]]);return a.sort(function(t,e){return t[0]!==e[0]?t[0]-e[0]:t[1]!==e[1]?t[1]-e[1]:t[2]-e[2]}),m(s,a,function(t,e){return m(t,e)})?Qe:Xe}function Le(t,e){if(t.v()!=e.v())return Xe;var n,i=t.l(),o=Me(t),r=[];for(n in i)r.push([i[n],o[n]]);r.sort(function(t,e){return t[0]!==e[0]?t[0]-e[0]:t[1]-e[1]});var i=e.l(),o=Me(e),s=[];for(n in i)s.push([i[n],o[n]]);return s.sort(function(t,e){return t[0]!==e[0]?t[0]-e[0]:t[1]-e[1]}),m(r,s,function(t,e){return m(t,e)})?Qe:Xe}function Fe(t,e){if(t.v()!=e.v())return Xe;var n=j(t.l());n.sort();var i=j(e.l());return i.sort(),m(n,i)?Qe:Xe}function $e(e,n){return"eg"===n?Re(e):n==Je||"hh"===n?He(e):(t(new J("`opt_method` must be 'eg' or 'hh'")),void 0)}function He(t){if(0===t.length)return Qe;if(!T(t)||0>Math.min.apply(Je,t)||0!==cn.n.apply(Je,t)%2)return Xe;for(t=d(t);t.length>0&&(tn.sort.call(t,g),!(0>t[0]));){var e=t.pop();if(0===e)return Qe;if(e>t.length)break;for(var n=t.length-1,e=t.length-(e+1);n>e;n--)t[n]-=1}return Xe}function Re(t){if(0===t.length)return Qe;if(!T(t)||0>Math.min.apply(Je,t)||0!==cn.n.apply(Je,t)%2)return Xe;var e,n=t.length,i=d(t).sort(function(t,e){return e-t}),o=[];for(e=1,t=i.length;t>e;e++)i[e]<i[e-1]&&o.push(e);var r,s;for(e=0,t=o.length;t>e;e++)if(r=cn.n.apply(Je,i.slice(0,o[e])),s=o[e]*(o[e]-1)+cn.n.apply(Je,A(x(ue(o[e],n),function(t){return Math.min(o[e],i[t])}))),r>s)return Xe;return Qe}function We(t){var e={},n={},i=new B,o=[],r=[],s=0,a=Xe;return _(t.K(),function(u){var l,h,c,p;if(!i.contains(u))for(p=[u];p.length>0;){u=p[p.length-1],u in e||(s+=1,e[u]=s),a=Qe,l=t.C(u);for(c=0;l.length>c;c++)if(h=l[c],!(h in e)){p.push(h),a=Xe;break}if(a){for(n[u]=e[u],c=0;l.length>c;c++)h=l[c],i.contains(h)||(n[u]=e[h]>e[u]?Math.min(n[u],n[h]):Math.min(n[u],e[h]));if(p.pop(),n[u]===e[u]){for(i.add(u),l=[u];o.length>0&&e[o[o.length-1]]>e[u];)h=o.pop(),i.add(h),l.push(h);r.push(l)}else o.push(u)}}}),r.sort(function(t,e){return e.length-t.length}),r}function Ne(t,e){var n=Be(t,e);return n.name("complete_graph("+t+")"),t>1&&n.a(n.d()?he(ue(t)):le(ue(t))),n}function Be(t,e){t instanceof Ae&&(e=t,t=Je),t!=Je||(t=0);var n;return e!=Je?(n=e,n.clear()):n=new Ae,n.i(ue(t)),n.name("empty_graph("+t+")"),n}function qe(t,e){var n=Be(t,e);return n.name("path_graph("+t+")"),n.a(x(ue(t-1),function(t){return[t,t+1]})),n}function Ue(t,e,n){var i;return i=n?Pe():Ae(),i.i(ue(t)),i.name("gnp_random_graph("+t+","+e+")"),0>=e?i:e>=1?Ne(t,i):(t=i.d()?he(ue(t)):le(ue(t)),_(t,function(t){e>Math.random()&&i.h(t[0],t[1])}),i)}function ze(e,o,r){var s=o;"function"==n(o)&&(s={},_(e.K(),function(t){s[t]=o(t)}));var a;if(!i(r)||r){var u=s,l=new e.constructor;l.name("("+e.name()+")"),e.f()?l.a(x(e.j(Qe,Qe),function(t){return[L(u,t[0],t[0]),L(u,t[1],t[1]),t[2],F(t[3])]})):l.a(x(e.j(Qe),function(t){return[L(u,t[0],t[0]),L(u,t[1],t[1]),F(t[2])]})),l.i(x(e,function(t){return L(u,t,t)})),r={};for(a in e.node)r[L(u,a,a)]=F(e.node[a]);$(l.node,r),$(l.graph,F(e.graph)),a=l}else{var h=s;if(a=new B(E(h)),U(a,h).c()>0){a=Pe(pe(h)),a.A(a.O());try{l=mn.Ja.Xa(a)}catch(c){c instanceof Y&&t(new Y("The node label sets are overlapping and no ordering can resolve the mapping. Use copy=True."))}l.reverse()}else l=a;var d,f=e.f(),m=e.d();_(l,function(n){var i;n in h&&(i=h[n],e.q(n)||t(new X("Node "+n+" is not in the graph.")),e.F(i,e.node[n]),f?(d=rn(e.p(n,Qe,Qe),function(t){return[i,t[1],t[2],t[3]]}),m&&(d=p(d,rn(e.H(n,Qe,Qe),function(t){return[t[0],i,t[2],t[3]]})))):(d=rn(e.p(n,Qe),function(t){return[i,t[1],t[2]]}),m&&(d=p(d,rn(e.H(n,Qe),function(t){return[t[0],i,t[2]]})))),e.N(n),e.a(d))}),a=e}return a}var Ve,Ge=void 0,Qe=!0,Je=null,Xe=!1,Ze=this,Ke="closure_uid_"+(1e9*Math.random()>>>0),Ye=0,tn=Array.prototype,en=tn.indexOf?function(t,e,n){return tn.indexOf.call(t,e,n)}:function(t,e,n){if(n=n==Je?0:0>n?Math.max(0,t.length+n):n,a(t))return a(e)&&1==e.length?t.indexOf(e,n):-1;for(;t.length>n;n++)if(n in t&&t[n]===e)return n;return-1},nn=tn.forEach?function(t,e,n){tn.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,o=a(t)?t.split(""):t,r=0;i>r;r++)r in o&&e.call(n,o[r],r,t)},on=tn.filter?function(t,e,n){return tn.filter.call(t,e,n)}:function(t,e,n){for(var i=t.length,o=[],r=0,s=a(t)?t.split(""):t,u=0;i>u;u++)if(u in s){var l=s[u];e.call(n,l,u,t)&&(o[r++]=l)}return o},rn=tn.map?function(t,e,n){return tn.map.call(t,e,n)}:function(t,e,n){for(var i=t.length,o=Array(i),r=a(t)?t.split(""):t,s=0;i>s;s++)s in r&&(o[s]=e.call(n,r[s],s,t));return o},sn="StopIteration"in Ze?Ze.StopIteration:Error("StopIteration");w.prototype.next=function(){t(sn)},w.prototype.t=function(){return this},S.ca=function(){return S.ea?S.ea:S.ea=new S},S.prototype.va=0,S.ca();var an={};h("jsnx.utils.is_list_of_ints",T),h("jsnx.utils.cumulative_sum",function(t){var e=0;return x(t,function(t){return e+=t})}),h("jsnx.utils.generate_unique_node",function(){return":"+(S.ca().va++).toString(36)});var un="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");Ve=W.prototype,Ve.u=0,Ve.Q=0,Ve.c=function(){return this.u},Ve.w=function(){N(this);for(var t=[],e=0;this.g.length>e;e++)t.push(this.e[this.g[e]]);return t},Ve.J=function(){return 0==this.u},Ve.clear=function(){this.e={},this.Q=this.u=this.g.length=0},Ve.remove=function(t){return Object.prototype.hasOwnProperty.call(this.e,t)?(delete this.e[t],this.u--,this.Q++,this.g.length>2*this.u&&N(this),Qe):Xe},Ve.set=function(t,e){Object.prototype.hasOwnProperty.call(this.e,t)||(this.u++,this.g.push(t),this.Q++),this.e[t]=e},Ve.W=function(t){var e;t instanceof W?(N(t),e=t.g.concat(),t=t.w()):(e=E(t),t=j(t));for(var n=0;e.length>n;n++)this.set(e[n],t[n])},Ve.R=function(){return new W(this)},Ve.t=function(e){N(this);var n=0,i=this.g,o=this.e,r=this.Q,s=this,a=new w;return a.next=function(){for(;;){r!=s.Q&&t(Error("The map has changed since the iterator was created")),n>=i.length&&t(sn);var a=i[n++];return e?a:o[a]}},a},Ve=B.prototype,Ve.c=function(){return this.e.c()},Ve.add=function(t){this.e.set(q(t),t)},Ve.W=function(t){t=R(t);for(var e=t.length,n=0;e>n;n++)this.add(t[n])},Ve.remove=function(t){return this.e.remove(q(t))},Ve.clear=function(){this.e.clear()},Ve.J=function(){return this.e.J()},Ve.contains=function(t){return t=q(t),Object.prototype.hasOwnProperty.call(this.e.e,t)},Ve.w=function(){return this.e.w()},Ve.R=function(){return new B(this)},Ve.t=function(){return this.e.t(Xe)},h("jsnx.to_networkx_graph",G),h("jsnx.convert_to_undirected",an.Ia),h("jsnx.convert_to_undirected",an.Ha),h("jsnx.to_dict_of_lists",an.Wa),J.prototype=Error(),J.prototype.constructor=J,h("jsnx.JSNetworkXException",J),c(X,J),h("jsnx.JSNetworkXError",X),c(Z,J),h("jsnx.JSNetworkXPointlessConcept",Z),c(K,J),h("jsnx.JSNetworkXAlgorithmError",K),c(Y,K),h("jsnx.JSNetworkXUnfeasible",Y),c(te,Y),h("jsnx.JSNetworkXNoPath",te),c(ee,K),h("jsnx.JSNetworkXUnbounded",ee),h("jsnx.forEach",re),h("jsnx.toArray",ce),h("jsnx.sentinelIterator",function(t,e){var n=new w;return n.next=function(){return P(t,e)},n});var ln={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},hn=/\uffff/.test("")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,cn={Qa:function(t){return Math.floor(Math.random()*t)},Ya:function(t,e){return t+Math.random()*(e-t)},Ga:function(t,e,n){return Math.min(Math.max(t,e),n)},ua:function(t,e){var n=t%e;return 0>n*e?n+e:n},Na:function(t,e,n){return t+n*(e-t)},Pa:function(t,e,n){return(n||1e-6)>=Math.abs(t-e)},aa:function(t){return cn.ua(t,360)},ha:function(t){return t*Math.PI/180},Aa:function(t){return 180*t/Math.PI},Ea:function(t,e){return e*Math.cos(cn.ha(t))},Fa:function(t,e){return e*Math.sin(cn.ha(t))},Ca:function(t,e,n,i){return cn.aa(cn.Aa(Math.atan2(i-e,n-t)))},Da:function(t,e){var n=cn.aa(e)-cn.aa(t);return n>180?n-=360:-180>=n&&(n=360+n),n},Ta:function(t){return 0==t?0:0>t?-1:1},Oa:function(t,e,n,i){n=n||function(t,e){return t==e},i=i||function(e){return t[e]};for(var o=t.length,r=e.length,s=[],a=0;o+1>a;a++)s[a]=[],s[a][0]=0;
for(var u=0;r+1>u;u++)s[0][u]=0;for(a=1;o>=a;a++)for(u=1;o>=u;u++)s[a][u]=n(t[a-1],e[u-1])?s[a-1][u-1]+1:Math.max(s[a-1][u],s[a][u-1]);for(var l=[],a=o,u=r;a>0&&u>0;)n(t[a-1],e[u-1])?(l.unshift(i(a-1,u-1)),a--,u--):s[a-1][u]>s[a][u-1]?a--:u--;return l},n:function(){var t;t=arguments;var e=function(t,e){return t+e};if(t.reduce)t=t.reduce(e,0);else{var n=0;nn(t,function(t){n=e.call(Ge,n,t)}),t=n}return t},oa:function(){return cn.n.apply(Je,arguments)/arguments.length},Ua:function(){var t=arguments.length;if(2>t)return 0;var e=cn.oa.apply(Je,arguments),t=cn.n.apply(Je,rn(arguments,function(t){return Math.pow(t-e,2)}))/(t-1);return Math.sqrt(t)},Ma:function(t){return isFinite(t)&&0==t%1},La:function(t){return isFinite(t)&&!isNaN(t)},Sa:function(t,e){return Math.floor(t+(e||2e-15))},Ra:function(t,e){return Math.ceil(t-(e||2e-15))}};h("jsnx.classes.Graph",Ae),h("jsnx.Graph",Ae),Ae.__name__="Graph",Ae.prototype.ra=Je,Ae.prototype.graph=Ae.prototype.ra,Ae.prototype.Z=Je,Ae.prototype.node=Ae.prototype.Z,Ae.prototype.ma=Je,Ae.prototype.adj=Ae.prototype.ma,Ae.prototype.pa=Je,Ae.prototype.edge=Ae.prototype.pa,Ae.prototype.name=function(t){return i(t)?(this.graph.name=""+t,void 0):this.graph.name||""},Ae.prototype.name=Ae.prototype.name,Ae.prototype.toString=function(){return this.name()},Ae.prototype.toString=Ae.prototype.toString,Ae.prototype.t=function(){return fe(this.adj)},Ae.prototype.__iterator__=Ae.prototype.t,Ae.prototype.k=function(e){return e in this.adj||t({name:"KeyError",message:"Graph does not contain node "+e+"."}),this.adj[e]},Ae.prototype.get_node=Ae.prototype.k,Ae.prototype.F=function(e,i){i!=Je||(i={}),"object"!==n(i)&&t(new X("The attr_dict argument must be an object.")),e in this.adj?$(this.node[e],i||{}):(this.adj[e]={},this.node[e]=i||{})},Ae.prototype.add_node=Ae.prototype.F,Ae.prototype.i=function(t,e){var n,i,o,s,a;e=e||{},re(t,function(t){n=!(t in this.adj),r(t)?(i=t[0],o=t[1],i in this.adj?(a=this.node[i],$(a,e,o)):(this.adj[i]={},s=F(e),$(s,o),this.node[i]=s)):n?(this.adj[t]={},this.node[t]=F(e)):$(this.node[t],e)},this)},Ae.prototype.add_nodes_from=Ae.prototype.i,Ae.prototype.N=function(e){var n,i=this.adj;e in this.node||t(new X("The node "+e+" is not in the graph")),n=E(i[e]),D(this.node,e),nn(n,function(t){D(i[t],e)}),D(i,e)},Ae.prototype.remove_node=Ae.prototype.N,Ae.prototype.U=function(t){var e=this.adj;re(t,function(t){try{D(this.node,t),C(e[t],function(n,i){D(e[i],t)}),D(e,t)}catch(n){}},this)},Ae.prototype.remove_nodes_from=Ae.prototype.U,Ae.prototype.K=function(t){return t?de(this.node):fe(E(this.adj))},Ae.prototype.nodes_iter=Ae.prototype.K,Ae.prototype.z=function(t){return A(this.K(t))},Ae.prototype.nodes=Ae.prototype.z,Ae.prototype.L=function(){return k(this.adj)},Ae.prototype.number_of_nodes=Ae.prototype.L,Ae.prototype.v=function(){return k(this.adj)},Ae.prototype.order=Ae.prototype.v,Ae.prototype.q=function(t){return!r(t)&&t in this.adj},Ae.prototype.has_node=Ae.prototype.q,Ae.prototype.h=function(e,i,o){o=o||{},"object"!==n(o)&&t(new X("The attr_dict argument must be an object.")),e in this.adj||(this.adj[e]={},this.node[e]={}),i in this.adj||(this.adj[i]={},this.node[i]={});var r=L(this.adj[e],i,{});$(r,o),this.adj[e][i]=r,this.adj[i][e]=r},Ae.prototype.add_edge=Ae.prototype.h,Ae.prototype.a=function(e,i){i=i||{},"object"!==n(i)&&t(new X("The attr_dict argument must be an object.")),re(e,function(e){var n,o,r,s=oe(e);3===s?(n=e[0],o=e[1],r=e[2]):2===s?(n=e[0],o=e[1],r={}):t(new X("Edge tuple "+(""+e)+" must be a 2-tuple or 3-tuple.")),n in this.adj||(this.adj[n]={},this.node[n]={}),o in this.adj||(this.adj[o]={},this.node[o]={}),e=L(this.adj[n],o,{}),$(e,i,r),this.adj[n][o]=e,this.adj[o][n]=e},this)},Ae.prototype.add_edges_from=Ae.prototype.a,Ae.prototype.la=function(e,n,o){o=o||{},a(n)||(o=n,n="weight"),this.a(se(e,function(e){var o={};return o[n]=e[2],i(o[n])||t(new TypeError("Values must consist of three elements: "+we(e))),[e[0],e[1],o]}),o)},Ae.prototype.add_weighted_edges_from=Ae.prototype.la,Ae.prototype.s=function(e,n){try{D(this.adj[e],n),e!=n&&D(this.adj[n],e)}catch(i){i instanceof TypeError&&t(new X("The edge "+e+"-"+n+" is not in the graph")),t(i)}},Ae.prototype.remove_edge=Ae.prototype.s,Ae.prototype.A=function(t){re(t,function(t){var e=t[0];t=t[1],e in this.adj&&t in this.adj[e]&&(D(this.adj[e],t),e!=t&&D(this.adj[t],e))},this)},Ae.prototype.remove_edges_from=Ae.prototype.A,Ae.prototype.S=function(t,e){return t in this.adj&&e in this.adj[t]},Ae.prototype.has_edge=Ae.prototype.S,Ae.prototype.C=function(e){return e in this.adj||t(new X("The node "+e+" is not in the graph.")),ce(this.adj[e])},Ae.prototype.neighbors=Ae.prototype.C,Ae.prototype.Y=function(e){return e in this.adj||t(new X("The node "+e+" is not in the graph.")),fe(this.adj[e])},Ae.prototype.neighbors_iter=Ae.prototype.Y,Ae.prototype.p=function(t,e){return ce(this.j(t,e))},Ae.prototype.edges=Ae.prototype.p,Ae.prototype.j=function(e,n){u(e)&&(n=e,e=Je);var i,o,r={};return i=e!=Je?se(this.b(e),function(t){return[t,this.adj[t]]},this):de(this.adj),n?me(i,function(e){o=e[0];var n=new w,i=de(e[1]);return n.next=function(){try{return i.next()}catch(e){e===sn&&(r[o]=1),t(e)}},n},function(t){return t[0]in r?void 0:[o,t[0],t[1]]}):me(i,function(e){o=e[0];var n=new w,i=fe(e[1]);return n.next=function(){try{return i.next()}catch(e){e===sn&&(r[o]=1),t(e)}},n},function(t){return t in r?void 0:[o,t]})},Ae.prototype.edges_iter=Ae.prototype.j,Ae.prototype.X=function(t,e,n){return i(n)||(n=Je),t in this.adj?L(this.adj[t],e,n):n},Ae.prototype.get_edge_data=Ae.prototype.X,Ae.prototype.na=function(){return ce(se(this.o(),function(t){return E(t[1])}))},Ae.prototype.adjacency_list=Ae.prototype.na,Ae.prototype.o=function(){return de(this.adj)},Ae.prototype.adjacency_iter=Ae.prototype.o,Ae.prototype.l=function(t,e){return this.q(t)?this.m(t,e).next()[1]:ne(A(this.m(t,e)))},Ae.prototype.degree=Ae.prototype.l,Ae.prototype.m=function(t,e){var n;return n=t!=Je?se(this.b(t),function(t){return[t,this.adj[t]]},this):de(this.adj),e?se(n,function(t){var n=t[0];t=t[1];var i,o=0;for(i in t)o+=+L(t[i],e,1);return o+=+(n in t&&L(t[n],e,1)),[n,o]}):se(n,function(t){return[t[0],k(t[1])+ +(t[0]in t[1])]})},Ae.prototype.degree_iter=Ae.prototype.m,Ae.prototype.clear=function(){this.name(""),I(this.adj),I(this.node),I(this.graph)},Ae.prototype.clear=Ae.prototype.clear,Ae.prototype.copy=function(){return ye(this)},Ae.prototype.copy=Ae.prototype.copy,Ae.prototype.f=e(Xe),Ae.prototype.is_multigraph=Ae.prototype.f,Ae.prototype.d=e(Xe),Ae.prototype.is_directed=Ae.prototype.d,Ae.prototype.B=function(){var t=new Pe;return t.name(this.name()),t.i(this),t.a(function(){var t;return me(this.o(),function(e){return t=e[0],de(e[1])},function(e){return[t,e[0],ve(e[1])]})}.call(this)),t.graph=ve(this.graph),t.node=ve(this.node),t},Ae.prototype.to_directed=Ae.prototype.B,Ae.prototype.P=function(){return ye(this)},Ae.prototype.to_undirected=Ae.prototype.P,Ae.prototype.r=function(t){t=this.b(t);var e=new this.constructor,n=e.adj,i=this.adj;return re(t,function(t){var e={};n[t]=e,C(i[t],function(i,o){o in n&&(e[o]=i,n[o][t]=i)})}),re(e,function(t){e.node[t]=this.node[t]},this),e.graph=this.graph,e},Ae.prototype.subgraph=Ae.prototype.r,Ae.prototype.wa=function(){return rn(on(pe(this.adj),function(t){return t[0]in t[1]}),function(t){return t[0]})},Ae.prototype.nodes_with_selfloops=Ae.prototype.wa,Ae.prototype.O=function(t){return t?rn(on(pe(this.adj),function(t){return t[0]in t[1]}),function(t){var e=t[0];return[e,e,t[1][e]]}):rn(on(pe(this.adj),function(t){return t[0]in t[1]}),function(t){return[t[0],t[0]]})},Ae.prototype.selfloop_edges=Ae.prototype.O,Ae.prototype.xa=function(){return this.O().length},Ae.prototype.number_of_selfloops=Ae.prototype.xa,Ae.prototype.size=function(t){var e=cn.n.apply(Je,j(this.l(Je,t)))/2;return t!=Je?e:Math.floor(e)},Ae.prototype.size=Ae.prototype.size,Ae.prototype.D=function(t,e){return t==Je?Math.floor(this.size()):e in this.adj[t]?1:0},Ae.prototype.number_of_edges=Ae.prototype.D,Ae.prototype.ka=function(t,e){var n=ce(t),i=n[0],n=se(f(n,1),function(t){return[i,t]});this.a(n,e)},Ae.prototype.add_star=Ae.prototype.ka,Ae.prototype.ja=function(t,e){var n=ce(t),n=y(f(n,0,n.length-1),f(n,1));this.a(n,e)},Ae.prototype.add_path=Ae.prototype.ja,Ae.prototype.ia=function(t,e){var n=ce(t),n=y(n,p(f(n,1),[n[0]]));this.a(n,e)},Ae.prototype.add_cycle=Ae.prototype.ia,Ae.prototype.b=function(e){if(e!=Je)if(this.q(e))e=fe([""+e]);else{var n=this.adj,i=new w,o=me(e,function(t){return t in n?""+t:void 0});i.next=function(){try{return o.next()}catch(e){e instanceof TypeError&&t(new X("nbunch is not a node or a sequence of nodes")),t(e)}},e=i}else e=fe(this.adj);return e},Ae.prototype.nbunch_iter=Ae.prototype.b,h("jsnx.classes.DiGraph",Pe),h("jsnx.DiGraph",Pe),c(Pe,Ae),Pe.__name__="DiGraph",Pe.prototype.F=function(e,i){i!=Je||(i={}),"object"!==n(i)&&t(new X("The attr_dict argument must be an object.")),e in this.succ?$(this.node[e],i):(this.succ[e]={},this.pred[e]={},this.node[e]=i)},Pe.prototype.add_node=Pe.prototype.F,Pe.prototype.i=function(t,e){var n,i,o,s,a;e=e||{},re(fe(t),function(t){n=!(t in this.succ),r(t)?(i=t[0],o=t[1],i in this.succ?(a=this.node[i],$(a,e,o)):(this.succ[i]={},this.pred[i]={},s=F(e),$(s,o),this.node[i]=s)):n?(this.succ[t]={},this.pred[t]={},this.node[t]=F(e)):$(this.node[t],e)},this)},Pe.prototype.add_nodes_from=Pe.prototype.i,Pe.prototype.N=function(e){e in this.node||t(new X("The node "+e+" is not in the graph"));var n=this.succ[e];D(this.node,e),C(n,function(t,n){D(this.pred[n],e)},this),D(this.succ,e),C(this.pred[e],function(t,n){D(this.succ[n],e)},this),D(this.pred,e)},Pe.prototype.remove_node=Pe.prototype.N,Pe.prototype.U=function(t){var e;re(t,function(t){t in this.succ&&(e=this.succ[t],D(this.node,t),C(e,function(e,n){D(this.pred[n],t)},this),D(this.succ,t),C(this.pred[t],function(e,n){D(this.succ[n],t)},this),D(this.pred,t))},this)},Pe.prototype.remove_nodes_from=Pe.prototype.U,Pe.prototype.h=function(e,i,o){o=o||{},"object"!==n(o)&&t(new X("The attr_dict argument must be an object.")),e in this.succ||(this.succ[e]={},this.pred[e]={},this.node[e]={}),i in this.succ||(this.succ[i]={},this.pred[i]={},this.node[i]={});var r=L(this.adj[e],i,{});$(r,o),this.succ[e][i]=r,this.pred[i][e]=r},Pe.prototype.add_edge=Pe.prototype.h,Pe.prototype.a=function(e,i){i=i||{},"object"!==n(i)&&t(new X("The attr_dict argument must be an object.")),re(e,function(e){var n,o,r,s=oe(e);3===s?(n=e[0],o=e[1],r=e[2]):2===s?(n=e[0],o=e[1],r={}):t(new X("Edge tuple "+(""+e)+" must be a 2-tuple or 3-tuple.")),n in this.succ||(this.succ[n]={},this.pred[n]={},this.node[n]={}),o in this.succ||(this.succ[o]={},this.pred[o]={},this.node[o]={}),e=L(this.adj[n],o,{}),$(e,i,r),this.succ[n][o]=e,this.pred[o][n]=e},this)},Pe.prototype.add_edges_from=Pe.prototype.a,Pe.prototype.s=function(e,n){try{D(this.succ[e],n),D(this.pred[n],e)}catch(i){i instanceof TypeError&&t(new X("The edge "+e+"-"+n+" is not in the graph")),t(i)}},Pe.prototype.remove_edge=Pe.prototype.s,Pe.prototype.A=function(t){re(t,function(t){var e=t[0];t=t[1],e in this.succ&&t in this.succ[e]&&(D(this.succ[e],t),D(this.pred[t],e))},this)},Pe.prototype.remove_edges_from=Pe.prototype.A,Pe.prototype.ta=function(t,e){return t in this.succ&&e in this.succ[t]},Pe.prototype.has_successor=Pe.prototype.ta,Pe.prototype.sa=function(t,e){return t in this.pred&&e in this.pred[t]},Pe.prototype.has_predecessor=Pe.prototype.sa,Pe.prototype.ga=function(e){return e in this.succ||t(new X("The node "+e+" is not in the digraph.")),fe(this.succ[e])},Pe.prototype.successors_iter=Pe.prototype.ga,Pe.prototype.za=function(e){return e in this.pred||t(new X("The node "+e+" is not in the digraph.")),fe(this.pred[e])},Pe.prototype.predecessors_iter=Pe.prototype.za,Pe.prototype.ba=function(e){return e in this.succ||t(new X("The node "+e+" is not in the digraph.")),ce(this.succ[e])},Pe.prototype.successors=Pe.prototype.ba,Pe.prototype.ya=function(e){return e in this.succ||t(new X("The node "+e+" is not in the digraph.")),ce(this.pred[e])},Pe.prototype.predecessors=Pe.prototype.ya,Pe.prototype.C=Pe.prototype.ba,Pe.prototype.neighbors=Pe.prototype.C,Pe.prototype.Y=Pe.prototype.ga,Pe.prototype.neighbors_iter=Pe.prototype.Y,Pe.prototype.j=function(t,e){u(t)&&(e=t,t=Je);var n,i,o;return n=t!=Je?se(this.b(t),function(t){return[t,this.adj[t]]},this):pe(this.adj),e?me(n,function(t){return i=t[0],o=t[1],de(o)},function(t){return[i,t[0],t[1]]}):me(n,function(t){return i=t[0],o=t[1],de(o)},function(t){return[i,t[0]]})},Pe.prototype.edges_iter=Pe.prototype.j,Pe.prototype.T=Pe.prototype.j,Pe.prototype.out_edges_iter=Pe.prototype.T,Pe.prototype.$=Ae.prototype.p,Pe.prototype.out_edges=Pe.prototype.$,Pe.prototype.I=function(t,e){u(t)&&(e=t,t=Je);var n,i;return n=t!=Je?se(this.b(t),function(t){return[t,this.pred[t]]},this):pe(this.pred),e?me(n,function(t){return i=t[0],de(t[1])},function(t){return[t[0],i,t[1]]}):me(n,function(t){return i=t[0],de(t[1])},function(t){return[t[0],i]})},Pe.prototype.in_edges_iter=Pe.prototype.I,Pe.prototype.H=function(t,e){return ce(this.I(t,e))},Pe.prototype.in_edges=Pe.prototype.H,Pe.prototype.m=function(t,e){var n;return n=t!=Je?ae(se(this.b(t),function(t){return[t,this.succ[t]]},this),se(this.b(t),function(t){return[t,this.pred[t]]},this)):ae(de(this.succ),de(this.pred)),e?se(n,function(t){var n,i=t[0][1],o=t[1][1],r=0;for(n in i)r+=+L(i[n],e,1);for(n in o)r+=+L(o[n],e,1);return[t[0][0],r]}):se(n,function(t){return[t[0][0],oe(t[0][1])+oe(t[1][1])]})},Pe.prototype.degree_iter=Pe.prototype.m,Pe.prototype.G=function(t,e){var n;return n=t!=Je?se(this.b(t),function(t){return[t,this.pred[t]]},this):de(this.pred),e?se(n,function(t){var n,i=0,o=t[1];for(n in o)i+=+L(o[n],e,1);return[t[0],i]}):se(n,function(t){return[t[0],k(t[1])]})},Pe.prototype.in_degree_iter=Pe.prototype.G,Pe.prototype.M=function(t,e){var n;return n=t!=Je?se(this.b(t),function(t){return[t,this.succ[t]]},this):de(this.succ),e?se(n,function(t){var n,i=0,o=t[1];for(n in o)i+=+L(o[n],e,1);return[t[0],i]}):se(n,function(t){return[t[0],k(t[1])]})},Pe.prototype.out_degree_iter=Pe.prototype.M,Pe.prototype.da=function(t,e){return this.q(t)?this.G(t,e).next()[1]:ne(this.G(t,e))},Pe.prototype.in_degree=Pe.prototype.da,Pe.prototype.fa=function(t,e){return this.q(t)?this.M(t,e).next()[1]:ne(this.M(t,e))},Pe.prototype.out_degree=Pe.prototype.fa,Pe.prototype.clear=function(){I(this.succ),I(this.pred),I(this.node),I(this.graph)},Pe.prototype.clear=Pe.prototype.clear,Pe.prototype.f=e(Xe),Pe.prototype.is_multigraph=Pe.prototype.f,Pe.prototype.d=e(Qe),Pe.prototype.is_directed=Pe.prototype.d,Pe.prototype.B=function(){return ye(this)},Pe.prototype.to_directed=Pe.prototype.B,Pe.prototype.P=function(t){var e=new Ae;e.name(this.name()),e.i(this);var n,i=this.pred;return t?e.a(me(this.o(),function(t){return n=t[0],de(t[1])},function(t){return t[0]in i[n]?[n,t[0],ve(t[1])]:void 0})):e.a(me(this.o(),function(t){return n=t[0],de(t[1])},function(t){return[n,t[0],ve(t[1])]})),e.graph=ve(this.graph),e.node=ve(this.node),e},Pe.prototype.to_undirected=Pe.prototype.P,Pe.prototype.reverse=function(t){return(t=!i(t)||t)?(t=new this.constructor(Je,{name:"Reverse of ("+this.name()+")"}),t.i(this),t.a(se(this.j(Qe),function(t){return[t[1],t[0],ve(t[2])]})),t.graph=ve(this.graph),t.node=ve(this.node)):(t=this.succ,this.succ=this.pred,this.pred=t,this.adj=this.succ,t=this),t},Pe.prototype.reverse=Pe.prototype.reverse,Pe.prototype.r=function(t){t=this.b(t);var e=new this.constructor,n=e.succ,i=e.pred,o=this.succ;return re(t,function(t){n[t]={},i[t]={}}),re(n,function(t){var e=n[t];C(o[t],function(o,r){r in n&&(e[r]=o,i[r][t]=o)})}),re(e,function(t){e.node[t]=this.node[t]},this),e.graph=this.graph,e},Pe.prototype.subgraph=Pe.prototype.r,c(Se,Ae),h("jsnx.classes.MultiGraph",Se),h("jsnx.MultiGraph",Se),Se.__name__="MultiGraph",Se.prototype.h=function(e,i,o,r){var s,u;if(o!=Je&&!a(o)&&"number"!=typeof o&&(r=o,o=Je),r=r||{},"object"!==n(r)&&t(new X("The attr_dict argument must be an object.")),e in this.adj||(this.adj[e]={},this.node[e]={}),i in this.adj||(this.adj[i]={},this.node[i]={}),i in this.adj[e]){if(u=this.adj[e][i],o==Je)for(o=k(u);o in u;)o+=1;s=L(u,o,{}),$(s,r),u[o]=s}else o!=Je||(o=0),s={},$(s,r),u=H(o,s),this.adj[e][i]=u,this.adj[i][e]=u},Se.prototype.add_edge=Se.prototype.h,Se.prototype.a=function(e,i){i=i||{},"object"!==n(i)&&t(new X("The attr_dict argument must be an object.")),re(e,function(e){var n,o,r=oe(e),s=Je,a={};if(4===r?(n=e[0],o=e[1],s=e[2],a=e[3]):3===r?(n=e[0],o=e[1],a=e[2]):2===r?(n=e[0],o=e[1]):t(new X("Edge tuple "+we(e)+" must be a 2-tuple, 3-tuple or 4-tuple.")),e=n in this.adj?L(this.adj[n],o,{}):{},s==Je)for(s=k(e);s in e;)s+=1;e=L(e,s,{}),$(e,i,a),this.h(n,o,s,e)},this)},Se.prototype.add_edges_from=Se.prototype.a,Se.prototype.s=function(e,n,i){!(e in this.adj&&n in this.adj[e]||!t(new X("The edge "+e+"-"+n+" is not in the graph")));var o=this.adj[e][n];i!=Je?(i in o||t(new X("The edge "+e+"-"+n+" with key "+i+" is not in the graph")),D(o,i)):D(o,O(o)),0===k(o)&&(D(this.adj[e],n),e!=n&&D(this.adj[n],e))},Se.prototype.remove_edge=Se.prototype.s,Se.prototype.A=function(e){re(e,function(e){try{this.s(e[0],e[1],e[2])}catch(n){n instanceof X||t(n)}},this)},Se.prototype.remove_edges_from=Se.prototype.A,Se.prototype.S=function(t,e,n){return n!=Je?t in this.adj&&e in this.adj[t]&&n in this.adj[t][e]:t in this.adj&&e in this.adj[t]},Se.prototype.has_edge=Se.prototype.S,Se.prototype.p=function(t,e,n){return A(this.j(t,e,n))},Se.prototype.edges=Se.prototype.p,Se.prototype.j=function(e,n,i){u(e)&&(u(n)&&(i=n),n=e,e=Je);var o,r,s={};return e=e!=Je?se(this.b(e),function(t){return[t,this.adj[t]]},this):de(this.adj),n?me(e,function(e){o=e[0];var n=new w,i=de(e[1]);return n.next=function(){try{return i.next()}catch(e){e===sn&&(s[o]=1),t(e)}},n},function(t){return r=t[0],r in s?void 0:de(t[1])},function(t){return i?[o,r,t[0],t[1]]:[o,r,t[1]]}):me(e,function(e){o=e[0];var n=new w,i=de(e[1]);return n.next=function(){try{return i.next()}catch(e){e===sn&&(s[o]=1),t(e)}},n},function(t){return r=t[0],r in s?void 0:de(t[1])},function(t){return i?[o,r,t[0]]:[o,r]})},Se.prototype.edges_iter=Se.prototype.j,Se.prototype.X=function(t,e,n,o){return i(o)||(o=Je),t in this.adj&&e in this.adj[t]?n!=Je?L(this.adj[t][e],n,o):this.adj[t][e]:o},Se.prototype.get_edge_data=Se.prototype.X,Se.prototype.m=function(t,e){var n;return n=t!=Je?se(this.b(t),function(t){return[t,this.adj[t]]},this):de(this.adj),e!=Je?x(n,function(t){var n=t[0];t=t[1];var i=0;return C(t,function(t){C(t,function(t){i+=L(t,e,1)})}),n in t&&C(t[n],function(t){i+=L(t,e,1)}),[n,i]}):x(n,function(t){var e=t[0];t=t[1];var n=0;return C(t,function(t){n+=k(t)}),[e,n+ +(e in t&&k(t[e]))]})},Se.prototype.degree_iter=Se.prototype.m,Se.prototype.f=e(Qe),Se.prototype.is_multigraph=Se.prototype.f,Se.prototype.d=e(Xe),Se.prototype.is_directed=Se.prototype.d,Se.prototype.B=function(){var t=new Te;return t.i(this),t.a(function(){var t,e;return me(this.o(),function(e){return t=e[0],de(e[1])},function(t){return e=t[0],de(t[1])},function(n){return[t,e,n[0],ve(n[1])]})}.call(this)),t.graph=ve(this.graph),t.node=ve(this.node),t},Se.prototype.to_directed=Se.prototype.B,Se.prototype.O=function(t,e){var n=[];return t?e?C(this.adj,function(t,e){e in t&&C(t[e],function(t,i){n.push([e,e,i,t])})}):C(this.adj,function(t,e){e in t&&C(t[e],function(t){n.push([e,e,t])})}):e?C(this.adj,function(t,e){e in t&&C(t[e],function(t,i){n.push([e,e,i])})}):C(this.adj,function(t,e){e in t&&C(t[e],function(){n.push([e,e])})}),n},Se.prototype.selfloop_edges=Se.prototype.O,Se.prototype.D=function(t,e){return t==Je?this.size():t in this.adj&&e in this.adj[t]?k(this.adj[t][e]):0},Se.prototype.number_of_edges=Se.prototype.D,Se.prototype.r=function(t){t=this.b(t);var e=new this.constructor,n=e.adj,i=this.adj;return _(t,function(t){var e={};n[t]=e,C(i[t],function(i,o){if(o in n){var r=F(i);e[o]=r,n[o][t]=r}})}),C(this.node,function(t,n){e.node[n]=t}),e.graph=this.graph,e},Se.prototype.subgraph=Se.prototype.r,c(Te,Pe);var pn,dn=Te.prototype,fn=Se.prototype;for(pn in fn)fn.hasOwnProperty(pn)&&"constructor"!==pn&&(dn[pn]=fn[pn]);h("jsnx.classes.MultiDiGraph",Te),h("jsnx.MultiDiGraph",Te),Te.__name__="MultiDiGraph",Te.prototype.h=function(e,i,o,r){var s,u;if(o!=Je&&!a(o)&&"number"!=typeof o&&(r=o,o=Je),r=r||{},"object"!==n(r)&&t(new X("The attr_dict argument must be an object.")),e in this.succ||(this.succ[e]={},this.pred[e]={},this.node[e]={}),i in this.succ||(this.succ[i]={},this.pred[i]={},this.node[i]={}),i in this.succ[e]){if(u=this.adj[e][i],o==Je)for(o=k(u);o in u;)o+=1;s=L(u,o,{}),$(s,r),u[o]=s}else o!=Je||(o=0),s={},$(s,r),u=H(o,s),this.succ[e][i]=u,this.pred[i][e]=u},Te.prototype.add_edge=Te.prototype.h,Te.prototype.s=function(e,n,i){!(e in this.adj&&n in this.adj[e]||!t(new X("The edge "+e+"-"+n+" is not in the graph")));var o=this.adj[e][n];i!=Je?(i in o||t(new X("The edge "+e+"-"+n+" with key "+i+" is not in the graph")),D(o,i)):D(o,O(o)),0===k(o)&&(D(this.succ[e],n),D(this.pred[n],e))},Te.prototype.remove_edge=Te.prototype.s,Te.prototype.j=function(t,e,n){u(t)&&(u(e)&&(n=e),e=t,t=Je);var i,o;return t=t!=Je?se(this.b(t),function(t){return[t,this.adj[t]]},this):pe(this.adj),e?me(t,function(t){return i=t[0],de(t[1])},function(t){return o=t[0],de(t[1])},function(t){return n?[i,o,t[0],t[1]]:[i,o,t[1]]}):me(t,function(t){return i=t[0],de(t[1])},function(t){return o=t[0],de(t[1])},function(t){return n?[i,o,t[0]]:[i,o]})},Te.prototype.edges_iter=Te.prototype.j,Te.prototype.T=Te.prototype.j,Te.prototype.out_edges_iter=Te.prototype.T,Te.prototype.$=function(t,e,n){return A(this.T(t,e,n))},Te.prototype.out_edges=Te.prototype.$,Te.prototype.I=function(t,e,n){u(t)&&(e=t,t=Je);var i,r;return t=o?se(this.b(t),function(t){return[t,this.pred[t]]},this):pe(this.pred),e?me(t,function(t){return i=t[0],de(t[1])},function(t){return r=t[0],de(t[1])},function(t){return n?[r,i,t[0],t[1]]:[r,i,t[1]]}):me(t,function(t){return i=t[0],de(t[1])},function(t){return r=t[0],de(t[1])},function(t){return n?[r,i,t[0]]:[r,i]})},Te.prototype.in_edges_iter=Te.prototype.I,Te.prototype.H=function(t,e,n){return A(this.I(t,e,n))},Te.prototype.in_edges=Te.prototype.H,Te.prototype.m=function(t,e){var n;return n=t!=Je?ae(x(this.b(t),function(t){return[t,this.succ[t]]},this),x(this.b(t),function(t){return[t,this.pred[t]]},this)):ae(de(this.succ),de(this.pred)),e!=Je?se(n,function(t){var n=t[0][1],i=0;return C(t[1][1],function(t){C(t,function(t){i+=+L(t,e,1)})}),C(n,function(t){C(t,function(t){i+=+L(t,e,1)})}),[t[0][0],i]}):se(n,function(t){var e=0,n=0;return C(t[1][1],function(t){e+=oe(t)}),C(t[0][1],function(t){n+=oe(t)}),[t[0][0],e+n]})},Te.prototype.degree_iter=Te.prototype.m,Te.prototype.G=function(t,e){var n;return n=t!=Je?se(this.b(t),function(t){return[t,this.pred[t]]},this):de(this.pred),e!=Je?se(n,function(t){var n=0;return C(t[1],function(t){C(t,function(t){n+=+L(t,e,1)})}),[t[0][0],n]}):se(n,function(t){var e=0;return C(t[1],function(t){e+=k(t)}),[t[0],e]})},Te.prototype.in_degree_iter=Te.prototype.G,Te.prototype.M=function(t,e){var n;return n=t!=Je?se(this.b(t),function(t){return[t,this.succ[t]]},this):de(this.succ),e!=Je?se(n,function(t){var n=0;return C(t[1],function(t){C(t,function(t){n+=+L(t,e,1)})}),[t[0][0],n]}):se(n,function(t){var e=0;return C(t[1],function(t){e+=k(t)}),[t[0],e]})},Te.prototype.out_degree_iter=Te.prototype.M,Te.prototype.f=e(Qe),Te.prototype.is_multigraph=Te.prototype.f,Te.prototype.d=e(Qe),Te.prototype.is_directed=Te.prototype.d,Te.prototype.B=function(){return ye(this)},Te.prototype.to_directed=Te.prototype.B,Te.prototype.P=function(t){var e=new Se;e.name(this.name()),e.i(this);var n,i,o=this;return t?e.a(me(this.o(),function(t){return n=t[0],de(t[1])},function(t){return i=t[0],de(t[1])},function(t){return o.S(i,n,t[0])?[n,i,t[0],ve(t[1])]:void 0})):e.a(me(this.o(),function(t){return n=t[0],de(t[1])},function(t){return i=t[0],de(t[1])},function(t){return[n,i,t[0],ve(t[1])]})),e.graph=ve(this.graph),e.node=ve(this.node),e},Te.prototype.to_undirected=Te.prototype.P,Te.prototype.r=function(t){t=this.b(t);var e=new this.constructor,n=e.succ,i=e.pred,o=this.succ;return _(t,function(t){n[t]={},i[t]={}}),re(n,function(t){var e=n[t];C(o[t],function(o,r){if(r in n){var s=F(o);e[r]=s,i[r][t]=s}})}),re(e,function(t){e.node[t]=this.node[t]},this),e.graph=this.graph,e},Te.prototype.subgraph=Te.prototype.r,Te.prototype.reverse=function(t){return(t=!i(t)||t)?(t=new this.constructor(Je,{name:"Reverse of ("+this.name()+")"}),t.i(this),t.a(x(this.j(Qe,Qe),function(t){return[t[1],t[0],t[2],ve(t[3])]})),t.graph=ve(this.graph),t.node=ve(this.node)):(t=this.succ,this.succ=this.pred,this.pred=t,this.adj=this.succ,t=this),t},Te.prototype.reverse=Te.prototype.reverse,h("jsnx.nodes",function(t){return t.z()}),h("jsnx.nodes_iter",function(t){return t.K()}),h("jsnx.edges",function(t,e){return t.p(e)}),h("jsnx.edges_iter",function(t,e){return t.j(e)}),h("jsnx.degree",function(t,e,n){return t.l(e,n)}),h("jsnx.neighbors",function(t,e){return t.C(e)}),h("jsnx.number_of_nodes",function(t){return t.L()}),h("jsnx.number_of_edges",function(t){return t.D()}),h("jsnx.density",function(t){var e=t.L(),n=t.D();return 0===n?0:t.d()?n/(e*(e-1)):2*n/(e*(e-1))}),h("jsnx.degree_histogram",function(t){t=j(t.l());for(var e=Math.max.apply(Math,t)+1,n=[],i=0;e>i;i++)n[i]=0;return nn(t,function(t){n[t]+=1}),n}),h("jsnx.is_directed",function(t){return t.d()}),h("jsnx.freeze",function(e){function n(){t(new X("Frozen graph can't be modified"))}return e.F=n,e.i=n,e.N=n,e.U=n,e.h=n,e.a=n,e.s=n,e.A=n,e.clear=n,e.qa=Qe,e}),h("jsnx.is_frozen",function(t){return!!t.qa}),h("jsnx.subgraph",function(t,e){return t.r(e)}),h("jsnx.create_empty_copy",function(t,e){i(e)||(e=Qe);var n=new t.constructor;return e&&n.i(t),n}),h("jsnx.info",function(e,n){var i="";if(n!=Je)e.q(n)||t(new X("node "+n+" not in graph")),i=i+("Node "+n+" has the following properties:\n")+("Degree: "+e.l(n)+"\n"),i+="Neighbors: "+e.C(n).join(" ");else{var i=i+("Name: "+e.name()+"\n"),i=i+("Type: "+e.constructor.__name__+"\n"),i=i+("Number of nodes: "+e.L()+"\n"),i=i+("Number of edges: "+e.D()+"\n"),o=e.L();if(o>0)if(e.d())i+="Average in degree: "+(cn.n.apply(Je,j(e.da()))/o).toFixed(4)+"\n",i+="Average out degree: "+(cn.n.apply(Je,j(e.fa()))/o).toFixed(4);else var r=cn.n.apply(Je,j(e.l())),i=i+("Average degree: "+(r/o).toFixed(4))}return i}),h("jsnx.set_node_attributes",function(t,e,n){C(n,function(n,i){t.Z[i][e]=n})}),h("jsnx.get_node_attributes",Ce),h("jsnx.set_edge_attributes",function(t,e,n){C(n,function(e,n){n=n.split(","),t.k(n[0])[n[1]]=e})}),Ce=function(t,e){var n={};return C(t.p(Qe),function(t){e in t[2]&&(n[[t[0],t[1]]]=t[2][e])}),n},h("jsnx.get_edge_attributes",{}.Ka);var mn={};h("jsnx.triangles",Me),h("jsnx.average_clustering",function(t,e,n,i){2===arguments.length?a(e)?(n=e,e=Je):u(e)&&(i=e,e=Je):3===arguments.length&&u(n)&&(i=n,n=Je),n!=Je||(n=Je),i!=Je||(i=Qe);var o=j(Oe(t,e,n));return i||(o=on(o,function(t){return t>0})),cn.n.apply(cn,o)/o.length}),h("jsnx.clustering",Oe),h("jsnx.transitivity",function(t){var e=0,n=0;return _(ke(t),function(t){n+=t[1]*(t[1]-1),e+=t[2]}),0===e?0:e/n}),h("jsnx.square_clustering",function(t,e){var n=e==Je?t:t.b(e),i={};return _(n,function(e){var n=i[e]=0;_(le(E(t.k(e))),function(o){var r=o[0];o=o[1];var s=U(new B(E(t.k(r))),E(t.k(o)));s.remove(e),s=s.c(),i[e]+=s;var a=s+1,u=t.k(r);o in u&&(a+=1),n+=(k(t.k(r))-a)*(k(t.k(o))-a)+s}),n>0&&(i[e]/=n)}),t.q(e)?j(i)[0]:i}),h("jsnx.find_cliques",je),h("jsnx.find_cliques_recursive",function(t){var e={};_(t.o(),function(t){var n=new B(E(t[1]));n.remove(t[0]),e[t[0]]=n});t:{for(var n in e){t=Xe;break t}t=Qe}if(t)return[];t=new B(E(e)),n=new B;var i=[];return Ee(e,t,n,[],i),i}),h("jsnx.graph_clique_number",function(t,e){e!=Je||(e=je(t));var n=0;return re(e,function(t){n=t.length>n?t.length:n}),n}),h("jsnx.graph_number_of_cliques",function(t,e){return e!=Je||(e=je(t)),ce(e).length}),h("jsnx.number_of_cliques",Ie),h("jsnx.algorithms.isomorphism.could_be_isomorphic",De),h("jsnx.could_be_isomorphic",De),h("jsnx.algorithms.isomorphism.fast_could_be_isomorphic",Le),h("jsnx.fast_could_be_isomorphic",Le),h("jsnx.algorithms.isomorphism.faster_could_be_isomorphic",Fe),h("jsnx.faster_could_be_isomorphic",Fe),h("jsnx.is_valid_degree_sequence",$e),h("jsnx.is_valid_degree_sequence_havel_hakimi",He),h("jsnx.is_valid_degree_sequence_erdos_gallai",Re),h("jsnx.strongly_connected_components",We),h("jsnx.simple_cycles",function(e){function n(t){function e(t){var n;for(c.remove(t);h[t].length>0;)n=h[t].pop(),c.contains(n)&&e(n)}var r,s,a=Xe,u=i.ba(t);for(d.push(t),c.add(t),r=0;u.length>r;r++)s=u[r],s===o?(a=d.slice(0),a.push(o),f.push(a),a=Qe):c.contains(s)||n(s)&&(a=Qe);if(a)e(t);else for(r=0;u.length>r;r++)s=u[r],en(h[s],t)>=0||h[s].push(t);return t!==d.pop()&&console.log("DANGER WILL ROBINSON!"),a}e.d()||t(new X("simple_cycles() is not defined for undirected graphs."));var i,o,r,s,a,u,l,h={},c=new B,p=e.z(),d=[],f=[],m={};for(s=0;p.length>s;s++)h[p[s]]=[],m[p[s]]=s;for(r=0;p.length-1>r;)if(o=p[r],s=e.r(p.slice(r)),a=We(s),0===a.length)r=p.length;else{for(i=l=u=Ge,s=0;a.length>s;s++)for(r=0;a[s].length>r;r++)u===Ge?(u=a[s][r],i=a[s],l=m[u]):l>m[a[s][r]]&&(u=a[s][r],i=a[s],l=m[u]);for(i=e.r(i),o=u,r=m[u],a=i.z(),s=0;a.length>s;s++)c.remove(a[s]),h[a[s]]=[];n(o),r++}return f}),h("jsnx.complete_graph",Ne),h("jsnx.cycle_graph",function(t,e){var n=qe(t,e);return n.name("cycle_graph("+t+")"),t>1&&n.h(t-1,0),n}),h("jsnx.empty_graph",Be),h("jsnx.null_graph",function(t){return t=Be(0,t),t.name("null_graph()"),t}),h("jsnx.path_graph",qe),h("jsnx.trivial_graph",function(t){return t=Be(1,t),t.name("null_graph()"),t}),h("jsnx.fast_gnp_random_graph",function(t,e,n){n!=Je||(n=Xe);var i=Be(t);if(i.name("fast_gnp_random_graph("+t+","+e+")"),0>=e||e>=1)return Ue(t,e,n);var o=1,r=-1;if(e=Math.log(1-e),n)for(i=Pe(i);t>o;){for(n=Math.log(1-Math.random()),r=r+1+Math.floor(n/e),o===r&&(r+=1);r>=t&&t>o;)r-=t,o+=1,o==r&&(r+=1);t>o&&i.h(o,r)}else for(;t>o;){for(n=Math.log(1-Math.random()),r=r+1+Math.floor(n/e);r>=o&&t>o;)r-=o,o+=1;t>o&&i.h(o,r)}return i}),h("jsnx.gnp_random_graph",Ue),h("jsnx.binomial_graph",Ue),h("jsnx.erdos_renyi_graph",Ue),h("jsnx.havel_hakimi_graph",function(e,n){$e(e)||t(new X("Invalid degree sequence")),n!=Je&&(n.d()&&t(new X("Directed Graph not supported")),n.f()&&t(new X("Havel-Hakimi requires simple graph")));var i=e.length,o=Be(i,n);if(0===i||0===Math.max.apply(Je,e))return o;for(i=A(x(o,function(t){return[e[t],t]}));i.length>0;){if(i.sort(function(t,e){return t[0]!==e[0]?t[0]-e[0]:+t[1]-+e[1]}),0>i[0][0])return Xe;var r=i.pop();if(0===r[0])break;if(r[0]>i.length)return Xe;for(var s=i.length,a=s-r[0];s>a;a++)o.h(r[1],i[a][1]),i[a][0]-=1}return o.name("havel_hakimi_graph "+o.v()+" nodes "+o.size()+" edges"),o}),h("jsnx.relabel_nodes",ze),h("jsnx.convert_node_labels_to_integers",function(e,n,i,o){3===arguments.length&&u(i)?(o=i,i=Je):2===arguments.length&&(u(n)?(o=n,n=Je):a(n)&&(i=n,n=Je)),n!=Je||(n=0),i!=Je||(i="default"),o!=Je||(o=Qe);var r,s,l,h,c={};if("default"===i)for(r=e.z(),s=0,l=n,h=r.length;h>s;s++,l++)c[r[s]]=l;else if("sorted"===i)for(r=e.z(),r.sort(),s=0,l=n,h=r.length;h>s;s++,l++)c[r[s]]=l;else if("increasing degree"===i)for(r=A(e.m()),r.sort(function(t,e){return t[1]-e[1]}),s=0,l=n,h=r.length;h>s;s++,l++)c[r[s][0]]=l;else if("decreasing degree"===i)for(r=A(e.m()),r.sort(function(t,e){return e[1]-t[1]}),s=0,l=n,h=r.length;h>s;s++,l++)c[r[s][0]]=l;else t(new X("Unkown node ordering: "+i));return s=ze(e,c),s.name("("+e.name()+")_with_int_labels"),o||(s.node_labels=c),s})}(),function(){var t;t=function(){function t(t,e){var n,i,o,r,s,a,u,l,h,c,p,d,f,m,g,v,y,w,b,_,x;for(u=t.length,o=[],a=[],n=[],i=[],r=[],l=[],s=c=0,w=u-1;w>=0?w>c:c>w;s=w>=0?++c:--c)o[s]=(e[s+1]-e[s])/(t[s+1]-t[s]),s>0&&(a[s]=(o[s-1]+o[s])/2);for(a[0]=o[0],a[u-1]=o[u-2],h=[],s=p=0,b=u-1;b>=0?b>p:p>b;s=b>=0?++p:--p)0===o[s]&&h.push(s);for(d=0,m=h.length;m>d;d++)s=h[d],a[s]=a[s+1]=0;for(s=f=0,_=u-1;_>=0?_>f:f>_;s=_>=0?++f:--f)n[s]=a[s]/o[s],i[s]=a[s+1]/o[s],r[s]=Math.pow(n[s],2)+Math.pow(i[s],2),l[s]=3/Math.sqrt(r[s]);
for(h=[],s=v=0,x=u-1;x>=0?x>v:v>x;s=x>=0?++v:--v)r[s]>9&&h.push(s);for(y=0,g=h.length;g>y;y++)s=h[y],a[s]=l[s]*n[s]*o[s],a[s+1]=l[s]*i[s]*o[s];this.x=t.slice(0,u),this.y=e.slice(0,u),this.m=a}return t.prototype.interpolate=function(t){var e,n,i,o,r,s,a,u,l,h,c,p;for(s=c=p=this.x.length-2;(0>=p?0>=c:c>=0)&&!(t>=this.x[s]);s=0>=p?++c:--c);return e=this.x[s+1]-this.x[s],a=(t-this.x[s])/e,u=Math.pow(a,2),l=Math.pow(a,3),n=2*l-3*u+1,o=l-2*u+a,i=-2*l+3*u,r=l-u,h=n*this.y[s]+o*e*this.m[s]+i*this.y[s+1]+r*e*this.m[s+1]},t}(),window.MonotonicCubicSpline=t}.call(this),function(t,e,n,i){"use strict";t.widget("edible.musicWaveform",t.edible.waveform,{MAX_VOL:1.5,_create:function(){this.options._graph=this._createGraph(),this.options.currentBeats===i&&(this.options.currentBeats=this.options._graph.nodes().slice(0).sort(function(t,e){return parseFloat(t)-parseFloat(e)}),this.options._beatOrder=this.options.currentBeats.slice(0),console.log(this.options.currentBeats)),this._super("_create");var t=this;this.element.resizable({stop:function(e,n){var i=t.options.len,o=t.options.start,r=t._computePosFromResize(e,n);console.log("setting new len",r.len,"and start",r.start),t._updateCurrentBeatsFromResize(i,o,r.len,r.start),t._setOptions(r),t._refresh()}})},_updateCurrentBeatsFromResize:function(t,e,n,o){var r,s,a,u,l=this.options.currentBeats[0],h=this.options.currentBeats;if(o>e)return r=o-e,s=this._msToBeat(r),console.log("old BEATS",h),this.options.currentBeats=h.slice(s),console.log("new BEATS",h),i;if(e>o){if(r=e-o,a=1e3*parseFloat(l)-r,a>=0){for(u=this.options._beatOrder.indexOf(l),console.log("old BEATS",h);1e3*parseFloat(h[0])>a&&u>0;)h.unshift(this.options._beatOrder[--u]);return console.log("new BEATS",h),i}throw"RESIZED TOO FAR! CLEAN UP THE MUSIC RESIZE CODE, STEVE"}if(n>t){for(u=this.options._beatOrder.indexOf(h[h.length-1]),console.log("old BEATS (nl > ol)",h);o+n>1e3*parseFloat(h[h.length-1])&&this.options._beatOrder.length-1>u;)h.push(this.options._beatOrder[++u]);return console.log("new BEATS",h),i}return t>n?(console.log("old BEATS (nl < ol)",h),s=this._msToBeat(n),this.options.currentBeats=h.slice(0,s),console.log("new BEATS",h),i):i},waveformClass:function(){return"musicWaveform"},_updateBeatSet:function(){var t,e={},n=this.options.currentBeats;for(t=0;n.length>t;t++)e[n[t]]=!0;this.options._beatSet=e},_refresh:function(){this._super("_refresh"),this._updateBeatSet(),this.findLoops()},addLoop:function(e){var n,o,r,s,a=this.options.len,u=this.options.start,l=this.options.currentBeats,h=0,c=this.options._graph;if(this.options._simpleCycles!==i){for(n=this.options._simpleCycles[0],o=0;l.length>o;o++)if(l[o]===n[0]){r=o;break}return s=[r,1].concat(n),Array.prototype.splice.apply(this.options.currentBeats,s),t.each(n.slice(0,-1),function(t,e){h+=1e3*c.succ[e][n[t+1]].duration}),console.log("OLD LEN",a,"CYC LEN",h,"NEW LEN",a+h),this._setOptions({len:a+h}),"left"===e&&u-(this.options.len-a),i}},_linearCycles:function(){var t,e,n,i,o,r=this.options.currentBeats,s=this.options._graph.subgraph(r),a=this.options._beatOrder,u=this.options._beatSet,l=[];for(t=0;a.length>t;t++)if(n=a[t],n in u)for(e=t+1;a.length>e;e++)i=a[e],i in u&&n in s.succ[i]&&(o=a.slice(t,e+1),o.push(n),l.push(o));return l.sort(function(t,e){return t.length-e.length}),l},findLoops:function(){if(!this.options.hasOwnProperty("musicGraph"))return[];if(this.element.find(".loopControlLeft").remove(),this.element.find(".loopControlRight").remove(),!(Object.keys(this.options._beatSet).length>140)){this.options._graph;var e,o=this,r=this._linearCycles();console.log("cycles",r),r.length>0?(o.options._simpleCycles=r,e=n.createElement("div"),t(e).html('<i class="icon-repeat icon-white"></i>').addClass("loopControlRight").click(function(){return o.addLoop("right"),event.preventDefault(),!1}),o.element.append(e)):(o.options._simpleCycles=i,o.element.find(".loopControlLeft").remove(),o.element.find(".loopControlRight").remove())}},exportExtras:function(){var t=this.options._mcanv.getContext("2d"),e=this.options.volume.x.slice(0),n=this.options.volume.y.slice(0),i=this.options.pxPerMs;return e.splice(0,0,0),e.push((t.canvas.width-1)/i),n.splice(0,0,n[0]),n.push(n[n.length-1]),{starts:this.options._exportStarts,durations:this.options._exportDurations,distances:this.options._exportDistances,volume:{x:e,y:n}}},slice:function(e){var i=this.element.offset(),o=e.pageX-i.left,r=n.createElement("div"),s=o/this.options.pxPerMs,a=this._msToBeat(s),u=this.options._beatToTime[a];console.log("beat index",a,"slice time",u);var l=t.extend(!0,{},this.options,{start:u,len:this.options.len-u}),h=this.options.currentBeats.slice(a);return l.currentBeats=h,console.log("new beats",h),t(r)[this.waveformClass()](l),this._setOptions({currentBeats:this.options.currentBeats.slice(0,a),len:u,_nextBeatHidden:this.options.currentBeats[a]}),{waveform:r,pos:u}},_msToBeat:function(e){if(!this.options.hasOwnProperty("_timeToBeat"))throw"No _timeToBeat in options";var n=this.options._timeToBeat,i=null,o=null;return t.each(n,function(t,n){(null==i||Math.abs(t-e)<Math.abs(i-e))&&(i=t,o=n)}),o},_drawWaveform:function(){if(!this.options.hasOwnProperty("_graph"))return this._super("_drawWaveform"),i;var e,o,r,s,a,u,l=this,h=this.options.data.length>0,c=this.options.data.length,p=c/this.options.dur,d=this.options.start*p,f=d+this.options.len*p,m=[],g=this.options._graph,v=this.options.currentBeats;console.log("CURRENT BEATS LEN",v.length,v);var y=0;this.options._timeToBeat={},this.options._beatToTime=[],this.options._exportStarts=[],this.options._exportDurations=[],this.options._exportDistances=[],v[0]===this.options._beatOrder[0]&&(l.options._timeToBeat[y]=0,l.options._exportStarts.push(0),l.options._exportDurations.push(parseFloat(v[0])),l.options._exportDistances.push(0),console.log("Using the intro",v[0]),o=1e3*parseFloat(v[0]),y+=o,h&&(f=parseInt(o*p),s=l.options.data.slice(0,f),m.push.apply(m,s))),t.each(v,function(t,n){t===v.length-1&&n===l.options._beatOrder[l.options._beatOrder.length-1]?(e=1e3*parseFloat(n),o=parseFloat(l.options.dur),r=o-e,a=parseFloat(l.options.dur)/1e3-parseFloat(n),u=0):t===v.length-1?(console.log("hanging final beat","len",l.options.len),e=1e3*parseFloat(n),r=l.options.len-y,0>r&&(r=0),a=r/1e3,o=e+r,console.log("current duration",y),console.log("start",e,"end",o),u=0):(e=1e3*parseFloat(n),a=g.succ[n][v[t+1]].duration,r=1e3*a,o=e+r,u=g.succ[n][v[t+1]].distance),l.options._timeToBeat[y]=t,l.options._beatToTime[t]=y,l.options._exportStarts.push(parseFloat(n)),l.options._exportDurations.push(a),l.options._exportDistances.push(u),y+=r,h&&(d=parseInt(e*p),f=parseInt(o*p),s=l.options.data.slice(d,f),m.push.apply(m,s))}),this.options.len=y;var w=this.options._mcanv;t(w).attr("width",this.width()),this.element.find(".topBar").css("width",this.width());var b="#4BF2A7";w!==i&&(b=w.getContext("2d").createLinearGradient(0,0,0,parseInt(this.options.canvHeight,10)),b.addColorStop(0,"#4BF2A7"),b.addColorStop(1,"#32CD32")),h||(m=[]),new Waveform({canvas:w,data:m,innerColor:b,outerColor:"#333",height:this.options.canvHeight,interpolate:!0,width:this.width()}),this.options._tmpCanv!==i&&this.options._tmpCanv.destroy();var _=n.createElement("canvas");t(_).appendTo("body"),this.options._tmpCanv=new EDIBLE.modules.MultiCanvas(_),this.options._tmpCanv.clone(w),this.options._tmpCanv.canvases.forEach(function(e){t(e).css("display","none")}),setTimeout(function(){l._drawVolume(!0)},0)},addVolumeMarker:function(t){var e,n=this.element.offset(),i=t.pageX-n.left,o=t.pageY-n.top-this.options.topBarHeight,r=i/this.options.pxPerMs,s=this.options._mcanv.getContext("2d"),a=this,u=function(t){return a.MAX_VOL-a.MAX_VOL*t/s.canvas.height},l=this.options.volume.x;for(e=0;l.length>e;e++)if(l[e]>r){l.splice(e,0,r),this.options.volume.y.splice(e,0,u(o));break}e===l.length&&(l.push(r),this.options.volume.y.push(u(o))),this._drawVolume(!0)},_drawVolume:function(e){var o=this;this.options._mcanv.clone(this.options._tmpCanv);var r=this.options._mcanv.getContext("2d");r.strokeStyle="yellow",r.lineWidth=3,r.beginPath();var s,a=this.options.volume.x.slice(0),u=this.options.volume.y.slice(0),l=this.options.pxPerMs,h=(r.canvas.width-1)/l,c=!1;for(s=0;a.length>s;s++)if(a[s]>=h){c=!0;break}c&&(this.options.volume.x=a.slice(0,s),this.options.volume.y=u.slice(0,s)),a.splice(0,0,0),a.push((r.canvas.width-1)/l),u.splice(0,0,u[0]),u.push(u[u.length-1]);var p=function(t){return r.canvas.height-r.canvas.height*t/o.MAX_VOL},d=function(t){return t*l},f=a.map(d),m=u.map(p);r.moveTo(d(a[0]),p(u[0]));var s,g=new MonotonicCubicSpline(f,m),v=3;for(s=0;r.canvas.width>s;s+=v)r.lineTo(s,g.interpolate(s));if(r.stroke(),e!==i&&e){t(this.element).find(".volumeHandle").remove();var y,w=function(t,e){var n=e.position.left+4,i=e.position.top+4-o.options.topBarHeight,r=n/o.options.pxPerMs,s=o.options._mcanv.getContext("2d"),a=function(t){return o.MAX_VOL-o.MAX_VOL*t/s.canvas.height},u=e.helper.data("i"),l=!0;u>0&&o.options.volume.x[u-1]>=r&&(l=!1),o.options.volume.x.length-1>u&&r>=o.options.volume.x[u+1]&&(l=!1),l&&(o.options.volume.x[u]=r,o.options.volume.y[u]=a(i))};for(a=this.options.volume.x,u=this.options.volume.y,s=0;a.length>s;s++)y=n.createElement("div"),t(y).addClass("volumeHandle").data("vx",a[s]).data("vy",u[s]).data("i",s).css({left:d(a[s])-4,top:p(u[s])+this.options.topBarHeight-4}).appendTo(this.element).draggable({containment:t(this.element),drag:function(t,e){w(t,e),o._drawVolume(!1)},stop:function(t,e){w(t,e),o._drawVolume(!0)}})}},_createGraph:function(){if(!this.options.hasOwnProperty("musicGraph"))return i;var t=this.options.musicGraph,e=new jsnx.DiGraph;return e.add_nodes_from(t.nodes),console.log("nodes",e),e.add_edges_from(t.edges),console.log("with edges",e),e},_setOption:function(t,e){switch(t){case"musicGraph":this.options.musicGraph=e,this.options._graph=this._createGraph();break;default:this.options[t]=e}this._super("_setOption",t,e)}})}(jQuery,window,document),function(t,e,n,i){"use strict";t.widget("edible.timeline",{options:{width:"1200px",tracks:4,wf:[],_dirtyWaveforms:[],pxPerMs:.05,sound:i,position:0,clickMode:"volume"},_create:function(){console.log("in timeline _create");var e,o=this,r=t("#trackTemplate").html();for(this.element.addClass("edible-timeline"),e=0;this.options.tracks>e;e++)this.element.append(_.template(r));this.element.css("height",95*this.options.tracks+"px"),this.element.find(".track").each(function(e){t(this).css("top",95*e+"px")}).droppable({accept:".edible-waveform",drop:function(e,n){var r=n.draggable,s=t(this);r.parent()!==s&&(r.appendTo(s),r.css("top",0)),t.each(o.options.wf,function(e,n){return n.elt===r[0]?(n.pos=o.pxToMs(r.position().left),t.each(o.element.find(".track"),function(t,e){return s[0]===e?(n.track=t,!1):i}),i):i})},hoverClass:"track-drop-hover"}).bind("click.edibletimeline",function(t){var e=o.element.offset(),n=t.pageX-e.left,r=o.element.scrollLeft(),s=(n+r)/o.options.pxPerMs;o._setOptions({position:s}),o.options.sound!==i&&o.options.sound.setPosition(s)}),this.element.css("height",this.element[0].scrollHeight+20+"px");var s=n.createElement("div");t(s).addClass("playhead").css("height",95*this.options.tracks+"px").appendTo(this.element),this.options._dirtyWaveforms=this.options.wf.slice(0),this._refresh()},_refresh:function(){var e=this;t.each(this.options._dirtyWaveforms,function(n,o){e.element.find(".track:eq("+o.track+")").append(o.elt),t(o.elt).css("left",e.msToPx(o.pos)),t(o.elt).wf("option","fixed")||t(o.elt).draggable({containment:".edible-timeline"}),t(o.elt).wf({pxPerMs:e.options.pxPerMs,changed:function(n,r){r[0].changed===i&&(o.pos=e.pxToMs(t(o.elt).position().left))},destroy:function(){var t;for(t=0;e.options.wf.length>t;t++)if(e.options.wf[t]===o){e.options.wf.splice(t,1),e._refresh();break}}})}),t.each(this.options.wf,function(n,i){t(i.elt).unbind("click.edibletimeline"),"split"===e.options.clickMode?t(i.elt).bind("click.edibletimeline",function(n){var o=t(this).wf("slice",n);console.log("POS OF NEW WF",i.pos+o.pos),console.log("POS OF OLD WF",i.pos),e.addWaveform({elt:o.waveform,track:i.track,pos:i.pos+o.pos}),console.log("POS OF OLD WF",i.pos)}):"volume"===e.options.clickMode&&t(i.elt).bind("click.edibletimeline",function(e){t(this).wf("addVolumeMarker",e)})}),this.options._dirtyWaveforms=[],this.element.width(this.options.width);var n;n=this.options.position*this.options.pxPerMs,this.element.find(".playhead").css("left",n+"px")},_destroy:function(){t.each(this.options.wf,function(e,n){t(n.elt).unbind(".edibletimeline").wf("destroy")}),this.element.removeClass("edible-timeline").html("")},addWaveform:function(t){this.options.wf.push(t),this.options._dirtyWaveforms.push(t),this._refresh()},msToPx:function(t){return parseFloat(t)*this.options.pxPerMs},pxToMs:function(t){return parseFloat(t)/this.options.pxPerMs},"export":function(){return t.map(this.options.wf,function(e){return console.log("SCORE START",e.pos/1e3,"WF POS",e.pos),{waveformClass:t(e.elt).wf("waveformClass"),extra:t(e.elt).wf("exportExtras"),filename:t(e.elt).wf("option","filename"),name:t(e.elt).wf("option","name"),scoreStart:e.pos/1e3,wfStart:t(e.elt).wf("option","start")/1e3,duration:t(e.elt).wf("option","len")/1e3}})},_setOptions:function(){this._superApply(arguments),this._refresh()},_setOption:function(t,e){switch(t){case"pxPerMs":this.options._dirtyWaveforms=this.options.wf.slice(0),this.options[t]=e;break;default:this.options[t]=e}this._super("_setOption",t,e),this._refresh()}})}(jQuery,window,document),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}};window.Waveform=e=function(){function e(t){if(this.redraw=n(this.redraw,this),this.container=t.container,this.canvas=t.canvas,this.data=t.data||[],this.outerColor=t.outerColor||"transparent",this.innerColor=t.innerColor||"#000000",this.interpolate=!0,t.interpolate===!1&&(this.interpolate=!1),null==this.canvas){if(!this.container)throw"Either canvas or container option must be passed";this.canvas=this.createCanvas(this.container,t.width||this.container.clientWidth,t.height||this.container.clientHeight)}this.patchCanvasForIE(this.canvas),this.context=this.canvas.getContext("2d"),this.width=parseInt(this.context.canvas.width,10),this.height=parseInt(this.context.canvas.height,10),t.data&&this.update(t)}return e.name="Waveform",e.prototype.setData=function(t){return this.data=t},e.prototype.setDataInterpolated=function(t){return this.setData(this.interpolateArray(t,this.width))},e.prototype.setDataCropped=function(t){return this.setData(this.expandArray(t,this.width))},e.prototype.update=function(t){return null!=t.interpolate&&(this.interpolate=t.interpolate),this.interpolate===!1?this.setDataCropped(t.data):this.setDataInterpolated(t.data),this.redraw()},e.prototype.redraw=function(){var t,e,n,i,o,r,s,a;for(this.clear(),this.context.fillStyle=this.innerColor,n=this.height/2,e=0,s=this.data,a=[],o=0,r=s.length;r>o;o++)t=s[o],i=this.width/this.data.length,"function"==typeof this.innerColor&&(this.context.fillStyle=this.innerColor(e/this.width,t)),this.context.clearRect(i*e,n-n*t,i,2*n*t),this.context.fillRect(i*e,n-n*t,i,2*n*t),a.push(e++);return a},e.prototype.clear=function(){return this.context.fillStyle=this.outerColor,this.context.clearRect(0,0,this.width,this.height),this.context.fillRect(0,0,this.width,this.height)},e.prototype.patchCanvasForIE=function(t){var e;return window.G_vmlCanvasManager!==void 0?(t=window.G_vmlCanvasManager.initElement(t),e=t.getContext,t.getContext=function(){var n;return n=e.apply(t,arguments),t.getContext=e,n}):void 0},e.prototype.createCanvas=function(t,e,n){var i;return i=document.createElement("canvas"),t.appendChild(i),i.width=e,i.height=n,i},e.prototype.expandArray=function(t,e,n){var i,o,r,s;if(null==n&&(n=0),o=[],t.length>e)o=t.slice(t.length-e,t.length);else for(i=r=0,s=e-1;s>=0?s>=r:r>=s;i=s>=0?++r:--r)o[i]=t[i]||n;return o},e.prototype.linearInterpolate=function(t,e,n){return t+(e-t)*n},e.prototype.interpolateArray=function(t,e){var n,i,o,r,s,a,u;for(s=[],a=new Number((t.length-1)/(e-1)),s[0]=t[0],r=1;e-1>r;)u=r*a,o=new Number(Math.floor(u)).toFixed(),n=new Number(Math.ceil(u)).toFixed(),i=u-o,s[r]=this.linearInterpolate(t[o],t[n],i),r++;return s[e-1]=t[t.length-1],s},e.prototype.optionsForSyncedStream=function(t){var e,n;return null==t&&(t={}),e=!1,n=this,{whileplaying:this.redraw,whileloading:function(){var i;return e||(i=this,n.innerColor=function(e){return i.position/i.durationEstimate>e?t.playedColor||"rgba(255,  102, 0, 0.8)":i.bytesLoaded/i.bytesTotal>e?t.loadedColor||"rgba(0, 0, 0, 0.8)":t.defaultColor||"rgba(0, 0, 0, 0.4)"},e=!0),this.redraw}}},e.prototype.dataFromSoundCloudTrack=function(e){var n=this;return t.get("http://waveformjs.org/w",{url:e.waveform_url},function(t){return n.update({data:t})})},e}(),t=function(){var t,e,n,i,o,r,s,a,u,l;return s=function(t){var e,n,i;return i=document.createElement("script"),e=!1,i.src=t,i.async=!0,i.onload=i.onreadystatechange=function(){return e||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e=!0,i.onload=i.onreadystatechange=null,!i||!i.parentNode)?void 0:i.parentNode.removeChild(i)},n||(n=document.getElementsByTagName("head")[0]),n.appendChild(i)},n=function(t){return encodeURIComponent(t)},o=function(i,r,a,u){var h,c;c=-1===(i||"").indexOf("?")?"?":"&",r=r||{};for(h in r)r.hasOwnProperty(h)&&(c+=n(h)+"="+n(r[h])+"&");return o="json"+ ++e,l[o]=function(t){a(t);try{delete l[o]}catch(e){}return l[o]=null},s(i+c+(u||t.callbackName||"callback")+"="+o),o},u=function(t){var e;return e=t},e=0,i=void 0,a=void 0,r=void 0,l=this,t={},{get:o,init:u}}()}.call(this),function(t){function e(e){return t.less[e.split("/")[1]]}function n(){"development"===m.env?(m.optimization=0,m.watchTimer=setInterval(function(){m.watchMode&&o(function(t,e,n,i,o){e&&l(e.toCSS(),i,o.lastModified)})},m.poll)):m.optimization=3}function i(){for(var t=document.getElementsByTagName("style"),e=0;t.length>e;e++)t[e].type.match(A)&&new m.Parser({filename:document.location.href.replace(/#.*$/,""),dumpLineNumbers:m.dumpLineNumbers}).parse(t[e].innerHTML||"",function(n,i){var o=i.toCSS(),r=t[e];r.type="text/css",r.styleSheet?r.styleSheet.cssText=o:r.innerHTML=o})}function o(t,e){for(var n=0;m.sheets.length>n;n++)a(m.sheets[n],t,e,m.sheets.length-(n+1))}function r(t,e){var n,i,o,r,a=s(t),u=s(e),l="";if(a.hostPart!==u.hostPart)return"";for(i=Math.max(u.directories.length,a.directories.length),n=0;i>n&&u.directories[n]===a.directories[n];n++);for(r=u.directories.slice(n),o=a.directories.slice(n),n=0;r.length-1>n;n++)l+="../";for(n=0;o.length-1>n;n++)l+=o[n]+"/";return l}function s(t,e){var n,i,o=/^((?:[a-z-]+:)?\/\/(?:[^\/\?#]*\/)|([\/\\]))?((?:[^\/\\\?#]*[\/\\])*)([^\/\\\?#]*)([#\?].*)?$/,r=t.match(o),s={},a=[];if(!r)throw Error("Could not parse sheet href - '"+t+"'");if(!r[1]||r[2]){if(i=e.match(o),!i)throw Error("Could not parse page url - '"+e+"'");r[1]=i[1],r[2]||(r[3]=i[3]+r[3])}if(r[3])for(a=r[3].replace("\\","/").split("/"),n=0;a.length>n;n++)".."===a[n]&&n>0&&(a.splice(n-1,2),n-=2);return s.hostPart=r[1],s.directories=a,s.path=r[1]+a.join("/"),s.fileUrl=s.path+(r[4]||""),s.url=s.fileUrl+(r[5]||""),s}function a(e,n,i,o){var a,c=e.contents||{},d=e.files||{},g=s(e.href,t.location.href),v=g.url,y=b&&b.getItem(v),w=b&&b.getItem(v+":timestamp"),_={css:y,timestamp:w};a=m.relativeUrls?m.rootpath?e.entryPath?s(m.rootpath+r(g.path,e.entryPath)).path:m.rootpath:g.path:m.rootpath?m.rootpath:e.entryPath?e.entryPath:g.path,h(v,e.type,function(t,r){if(S+=t.replace(/@import .+?;/gi,""),!i&&_&&r&&new Date(r).valueOf()===new Date(_.timestamp).valueOf())l(_.css,e),n(null,null,t,e,{local:!0,remaining:o},v);else try{c[v]=t,new m.Parser({optimization:m.optimization,paths:[g.path],entryPath:e.entryPath||g.path,mime:e.type,filename:v,rootpath:a,relativeUrls:e.relativeUrls,contents:c,files:d,dumpLineNumbers:m.dumpLineNumbers}).parse(t,function(i,s){if(i)return f(i,v);try{n(i,s,t,e,{local:!1,lastModified:r,remaining:o},v),p(document.getElementById("less-error-message:"+u(v)))}catch(i){f(i,v)}})}catch(s){f(s,v)}},function(t,e){throw Error("Couldn't load "+e+" ("+t+")")})}function u(t){return t.replace(/^[a-z]+:\/\/?[^\/]+/,"").replace(/^\//,"").replace(/\.[a-zA-Z]+$/,"").replace(/[^\.\w-]+/g,"-").replace(/\./g,":")}function l(t,e,n){var i,o=e.href||"",r="less:"+(e.title||u(o));if(null===(i=document.getElementById(r))){i=document.createElement("style"),i.type="text/css",e.media&&(i.media=e.media),i.id=r;var s=e&&e.nextSibling||null;(s||document.getElementsByTagName("head")[0]).parentNode.insertBefore(i,s)}if(i.styleSheet)try{i.styleSheet.cssText=t}catch(a){throw Error("Couldn't reassign styleSheet.cssText.")}else(function(t){i.childNodes.length>0?i.firstChild.nodeValue!==t.nodeValue&&i.replaceChild(t,i.firstChild):i.appendChild(t)})(document.createTextNode(t));if(n&&b){d("saving "+o+" to cache.");try{b.setItem(o,t),b.setItem(o+":timestamp",n)}catch(a){d("failed to save")}}}function h(t,e,n,i){function o(e,n,i){e.status>=200&&300>e.status?n(e.responseText,e.getResponseHeader("Last-Modified")):"function"==typeof i&&i(e.status,t)}var r=c(),s=v?m.fileAsync:m.async;"function"==typeof r.overrideMimeType&&r.overrideMimeType("text/css"),r.open("GET",t,s),r.setRequestHeader("Accept",e||"text/x-less, text/css; q=0.9, */*; q=0.5"),r.send(null),v&&!m.fileAsync?0===r.status||r.status>=200&&300>r.status?n(r.responseText):i(r.status,t):s?r.onreadystatechange=function(){4==r.readyState&&o(r,n,i)}:o(r,n,i)}function c(){if(t.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){return d("browser doesn't support AJAX."),null}}function p(t){return t&&t.parentNode.removeChild(t)}function d(t){"development"==m.env&&"undefined"!=typeof console&&console.log("less: "+t)}function f(t,e){var n,i,o="less-error-message:"+u(e),r='<li><label>{line}</label><pre class="{class}">{content}</pre></li>',s=document.createElement("div"),a=[],h=t.filename||e,c=h.match(/([^\/]+(\?.*)?)$/)[1];s.id=o,s.className="less-error-message",i="<h3>"+(t.message||"There is an error in your .less file")+"</h3>"+'<p>in <a href="'+h+'">'+c+"</a> ";var p=function(t,e,n){t.extract[e]&&a.push(r.replace(/\{line\}/,parseInt(t.line)+(e-1)).replace(/\{class\}/,n).replace(/\{content\}/,t.extract[e]))};t.stack?i+="<br/>"+t.stack.split("\n").slice(1).join("<br/>"):t.extract&&(p(t,0,""),p(t,1,"line"),p(t,2,""),i+="on line "+t.line+", column "+(t.column+1)+":</p>"+"<ul>"+a.join("")+"</ul>"),s.innerHTML=i,l([".less-error-message ul, .less-error-message li {","list-style-type: none;","margin-right: 15px;","padding: 4px 0;","margin: 0;","}",".less-error-message label {","font-size: 12px;","margin-right: 15px;","padding: 4px 0;","color: #cc7777;","}",".less-error-message pre {","color: #dd6666;","padding: 4px 0;","margin: 0;","display: inline-block;","}",".less-error-message pre.line {","color: #ff0000;","}",".less-error-message h3 {","font-size: 20px;","font-weight: bold;","padding: 15px 0 5px 0;","margin: 0;","}",".less-error-message a {","color: #10a","}",".less-error-message .error {","color: red;","font-weight: bold;","padding-bottom: 2px;","border-bottom: 1px dashed red;","}"].join("\n"),{title:"error-message"}),s.style.cssText=["font-family: Arial, sans-serif","border: 1px solid #e00","background-color: #eee","border-radius: 5px","-webkit-border-radius: 5px","-moz-border-radius: 5px","color: #e00","padding: 15px","margin-bottom: 15px"].join(";"),"development"==m.env&&(n=setInterval(function(){document.body&&(document.getElementById(o)?document.body.replaceChild(s,document.getElementById(o)):document.body.insertBefore(s,document.body.firstChild),clearInterval(n))},10))}Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)||t instanceof Array}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var n=this.length>>>0,i=0;n>i;i++)i in this&&t.call(e,this[i],i,this)}),Array.prototype.map||(Array.prototype.map=function(t){for(var e=this.length>>>0,n=Array(e),i=arguments[1],o=0;e>o;o++)o in this&&(n[o]=t.call(i,this[o],o,this));return n}),Array.prototype.filter||(Array.prototype.filter=function(t){for(var e=[],n=arguments[1],i=0;this.length>i;i++)t.call(n,this[i])&&e.push(this[i]);return e}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e=this.length>>>0,n=0;if(0===e&&1===arguments.length)throw new TypeError;if(arguments.length>=2)var i=arguments[1];else for(;;){if(n in this){i=this[n++];break}if(++n>=e)throw new TypeError}for(;e>n;n++)n in this&&(i=t.call(null,i,this[n],n,this));return i}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length,n=arguments[1]||0;if(!e)return-1;if(n>=e)return-1;for(0>n&&(n+=e);e>n;n++)if(Object.prototype.hasOwnProperty.call(this,n)&&t===this[n])return n;return-1}),Object.keys||(Object.keys=function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}),String.prototype.trim||(String.prototype.trim=function(){return(this+"").replace(/^\s\s*/,"").replace(/\s\s*$/,"")});var m,g;"object"==typeof environment&&"[object Environment]"==={}.toString.call(environment)?(m=t===void 0?{}:t.less={},g=m.tree={},m.mode="rhino"):t===void 0?(m=exports,g=e("./tree"),m.mode="node"):(t.less===void 0&&(t.less={}),m=t.less,g=t.less.tree={},m.mode="browser"),m.Parser=function(t){function n(){_=P[b],x=w,S=w}function i(){P[b]=_,w=x,S=w}function o(){w>S&&(P[b]=P[b].slice(w-S),S=w)}function r(t){var e=t.charCodeAt(0);return 32===e||10===e||9===e}function s(t){var e,n;if(t instanceof Function)return t.call(T.parsers);if("string"==typeof t)e=y.charAt(w)===t?t:null,n=1,o();else{if(o(),!(e=t.exec(P[b])))return null;n=e[0].length}return e?(a(n),"string"==typeof e?e:1===e.length?e[0]:e):void 0}function a(t){for(var e=w,n=b,i=w+P[b].length,o=w+=t;i>w&&r(y.charAt(w));)w++;return P[b]=P[b].slice(t+(w-o)),S=w,0===P[b].length&&P.length-1>b&&b++,e!==w||n!==b}function u(t,e){var n=s(t);return n?n:(l(e||("string"==typeof t?"expected '"+t+"' got '"+y.charAt(w)+"'":"unexpected token")),void 0)}function l(t,e){var n=Error(t);throw n.index=w,n.type=e||"Syntax",n}function h(t){return"string"==typeof t?y.charAt(w)===t:t.test(P[b])?!0:!1}function c(t,e){return t.filename&&e.filename&&t.filename!==e.filename?T.imports.contents[t.filename]:y}function p(t,e){for(var n=t,i=-1;n>=0&&"\n"!==e.charAt(n);n--)i++;return{line:"number"==typeof t?(e.slice(0,t).match(/\n/g)||"").length:null,column:i}}function d(t){return"browser"===m.mode||"rhino"===m.mode?t.filename:e("path").resolve(t.filename)}function f(t,e,n){return{lineNumber:p(t,e).line+1,fileName:d(n)}}function v(t,e){var n=c(t,e),i=p(t.index,n),o=i.line,r=i.column,s=n.split("\n");this.type=t.type||"Syntax",this.message=t.message,this.filename=t.filename||e.filename,this.index=t.index,this.line="number"==typeof o?o+1:null,this.callLine=t.call&&p(t.call,n).line+1,this.callExtract=s[p(t.call,n).line],this.stack=t.stack,this.column=r,this.extract=[s[o-1],s[o],s[o+1]]}var y,w,b,_,x,A,P,S,T,t=t||{};t.contents||(t.contents={}),t.rootpath=t.rootpath||"",t.files||(t.files={});var C=function(){},M=this.imports={paths:t.paths||[],queue:[],files:t.files,contents:t.contents,mime:t.mime,error:null,push:function(e,n){var i=this;this.queue.push(e),m.Parser.importer(e,this.paths,function(t,o,r){i.queue.splice(i.queue.indexOf(e),1);var s=r in i.files;i.files[r]=o,t&&!i.error&&(i.error=t),n(t,o,s),0===i.queue.length&&C(i.error)},t)}};return this.env=t=t||{},this.optimization="optimization"in this.env?this.env.optimization:1,this.env.filename=this.env.filename||null,T={imports:M,parse:function(n,i){var o,r,a,u=null;if(w=b=S=A=0,y=n.replace(/\r\n/g,"\n"),y=y.replace(/^\uFEFF/,""),P=function(e){for(var n,i,o,r,s=0,a=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,l=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,h=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,c=0,p=e[0],d=0;y.length>d;)if(a.lastIndex=d,(n=a.exec(y))&&n.index===d&&(d+=n[0].length,p.push(n[0])),o=y.charAt(d),l.lastIndex=h.lastIndex=d,(n=h.exec(y))&&n.index===d)d+=n[0].length,p.push(n[0]);else if(i||"/"!==o||(r=y.charAt(d+1),"/"!==r&&"*"!==r||!(n=l.exec(y))||n.index!==d)){switch(o){case"{":if(!i){c++,p.push(o);break}case"}":if(!i){c--,p.push(o),e[++s]=p=[];break}case"(":if(!i){i=!0,p.push(o);break}case")":if(i){i=!1,p.push(o);break}default:p.push(o)}d++}else d+=n[0].length,p.push(n[0]);return 0!=c&&(u=new v({index:d-1,type:"Parse",message:c>0?"missing closing `}`":"missing opening `{`",filename:t.filename},t)),e.map(function(t){return t.join("")})}([[]]),u)return i(u,t);try{o=new g.Ruleset([],s(this.parsers.primary)),o.root=!0}catch(l){return i(new v(l,t))}if(o.toCSS=function(n){return function(i,o){var r,s=[];i=i||{},"object"==typeof o&&!Array.isArray(o)&&(o=Object.keys(o).map(function(t){var e=o[t];return e instanceof g.Value||(e instanceof g.Expression||(e=new g.Expression([e])),e=new g.Value([e])),new g.Rule("@"+t,e,!1,0)}),s=[new g.Ruleset(null,o)]);try{var a=n.call(this,{frames:s}).toCSS([],{compress:i.compress||!1,dumpLineNumbers:t.dumpLineNumbers})}catch(u){throw new v(u,t)}if(r=T.imports.error)throw r instanceof v?r:new v(r,t);return i.yuicompress&&"node"===m.mode?e("ycssmin").cssmin(a):i.compress?a.replace(/(\s)+/g,"$1"):a}}(o.eval),y.length-1>w){w=A,a=y.split("\n"),r=(y.slice(0,w).match(/\n/g)||"").length+1;for(var h=w,c=-1;h>=0&&"\n"!==y.charAt(h);h--)c++;u={type:"Parse",message:"Syntax Error on line "+r,index:w,filename:t.filename,line:r,column:c,extract:[a[r-2],a[r-1],a[r]]}}this.imports.queue.length>0?C=function(t){t=u||t,t?i(t):i(null,o)}:i(u,o)},parsers:{primary:function(){for(var t,e=[];(t=s(this.mixin.definition)||s(this.rule)||s(this.ruleset)||s(this.mixin.call)||s(this.comment)||s(this.directive))||s(/^[\s\n]+/)||s(/^;+/);)t&&e.push(t);return e},comment:function(){var t;if("/"===y.charAt(w))return"/"===y.charAt(w+1)?new g.Comment(s(/^\/\/.*/),!0):(t=s(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new g.Comment(t):void 0},entities:{quoted:function(){var t,e,n=w;return"~"===y.charAt(n)&&(n++,e=!0),'"'===y.charAt(n)||"'"===y.charAt(n)?(e&&s("~"),(t=s(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/))?new g.Quoted(t[0],t[1]||t[2],e):void 0):void 0},keyword:function(){var t;return(t=s(/^[_A-Za-z-][_A-Za-z0-9-]*/))?g.colors.hasOwnProperty(t)?new g.Color(g.colors[t].slice(1)):new g.Keyword(t):void 0},call:function(){var e,n,i,o,r=w;if(e=/^([\w-]+|%|progid:[\w\.]+)\(/.exec(P[b])){if(e=e[1],n=e.toLowerCase(),"url"===n)return null;if(w+=e.length,"alpha"===n&&(o=s(this.alpha),o!==void 0))return o;if(s("("),i=s(this.entities.arguments),s(")"))return e?new g.Call(e,i,r,t.filename):void 0}},arguments:function(){for(var t,e=[];(t=s(this.entities.assignment)||s(this.expression))&&(e.push(t),s(",")););return e},literal:function(){return s(this.entities.ratio)||s(this.entities.dimension)||s(this.entities.color)||s(this.entities.quoted)||s(this.entities.unicodeDescriptor)},assignment:function(){var t,e;return(t=s(/^\w+(?=\s?=)/i))&&s("=")&&(e=s(this.entity))?new g.Assignment(t,e):void 0},url:function(){var e;if("u"===y.charAt(w)&&s(/^url\(/))return e=s(this.entities.quoted)||s(this.entities.variable)||s(/^(?:(?:\\[\(\)'"])|[^\(\)'"])+/)||"",u(")"),new g.URL(null!=e.value||e instanceof g.Variable?e:new g.Anonymous(e),t.rootpath)},variable:function(){var e,n=w;return"@"===y.charAt(w)&&(e=s(/^@@?[\w-]+/))?new g.Variable(e,n,t.filename):void 0},variableCurly:function(){var e,n=w;return"@"===y.charAt(w)&&(e=s(/^@\{([\w-]+)\}/))?new g.Variable("@"+e[1],n,t.filename):void 0},color:function(){var t;return"#"===y.charAt(w)&&(t=s(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/))?new g.Color(t[1]):void 0},dimension:function(){var t,e=y.charCodeAt(w);if(!(e>57||43>e||47===e||44==e))return(t=s(/^([+-]?\d*\.?\d+)(px|%|em|pc|ex|in|deg|s|ms|pt|cm|mm|rad|grad|turn|dpi|dpcm|dppx|rem|vw|vh|vmin|vm|ch)?/))?new g.Dimension(t[1],t[2]):void 0},ratio:function(){var t,e=y.charCodeAt(w);if(!(e>57||48>e))return(t=s(/^(\d+\/\d+)/))?new g.Ratio(t[1]):void 0},unicodeDescriptor:function(){var t;
return(t=s(/^U\+[0-9a-fA-F?]+(\-[0-9a-fA-F?]+)?/))?new g.UnicodeDescriptor(t[0]):void 0},javascript:function(){var t,e,n=w;return"~"===y.charAt(n)&&(n++,e=!0),"`"===y.charAt(n)?(e&&s("~"),(t=s(/^`([^`]*)`/))?new g.JavaScript(t[1],w,e):void 0):void 0}},variable:function(){var t;return"@"===y.charAt(w)&&(t=s(/^(@[\w-]+)\s*:/))?t[1]:void 0},shorthand:function(){var t,e;if(h(/^[@\w.%-]+\/[@\w.-]+/))return n(),(t=s(this.entity))&&s("/")&&(e=s(this.entity))?new g.Shorthand(t,e):(i(),void 0)},mixin:{call:function(){var e,o,r,a,c,p,d,f,m,v,b=[],_=[],x=[],A=w,P=y.charAt(w),S=!1;if("."===P||"#"===P){for(n();e=s(/^[#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/);)b.push(new g.Element(o,e,w)),o=s(">");if(s("(")){for(p=[];a=s(this.expression);){if(c=null,v=a,1==a.value.length){var T=a.value[0];T instanceof g.Variable&&s(":")&&(p.length>0&&(d&&l("Cannot mix ; and , as delimiter types"),f=!0),v=u(this.expression),c=m=T.name)}p.push(v),x.push({name:c,value:v}),s(",")||(s(";")||d)&&(f&&l("Cannot mix ; and , as delimiter types"),d=!0,p.length>1&&(v=new g.Value(p)),_.push({name:m,value:v}),m=null,p=[],f=!1)}u(")")}return r=d?_:x,s(this.important)&&(S=!0),b.length>0&&(s(";")||h("}"))?new g.mixin.Call(b,r,A,t.filename,S):(i(),void 0)}},definition:function(){var t,e,o,r,a,l,c=[],p=!1;if(!("."!==y.charAt(w)&&"#"!==y.charAt(w)||h(/^[^{]*\}/))&&(n(),e=s(/^([#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+)\s*\(/))){t=e[1];do{if(s(this.comment),"."===y.charAt(w)&&s(/^\.{3}/)){p=!0,c.push({variadic:!0});break}if(!(r=s(this.entities.variable)||s(this.entities.literal)||s(this.entities.keyword)))break;if(r instanceof g.Variable)if(s(":"))a=u(this.expression,"expected expression"),c.push({name:r.name,value:a});else{if(s(/^\.{3}/)){c.push({name:r.name,variadic:!0}),p=!0;break}c.push({name:r.name})}else c.push({value:r})}while(s(",")||s(";"));if(s(")")||(A=w,i()),s(this.comment),s(/^when/)&&(l=u(this.conditions,"expected condition")),o=s(this.block),o)return new g.mixin.Definition(t,c,o,l,p);i()}}},entity:function(){return s(this.entities.literal)||s(this.entities.variable)||s(this.entities.url)||s(this.entities.call)||s(this.entities.keyword)||s(this.entities.javascript)||s(this.comment)},end:function(){return s(";")||h("}")},alpha:function(){var t;if(s(/^\(opacity=/i))return(t=s(/^\d+/)||s(this.entities.variable))?(u(")"),new g.Alpha(t)):void 0},element:function(){var t,e,n;return e=s(this.combinator),t=s(/^(?:\d+\.\d+|\d+)%/)||s(/^(?:[.#]?|:*)(?:[\w-]|[^\x00-\x9f]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/)||s("*")||s("&")||s(this.attribute)||s(/^\([^()@]+\)/)||s(/^[\.#](?=@)/)||s(this.entities.variableCurly),t||s("(")&&(n=s(this.entities.variableCurly)||s(this.entities.variable)||s(this.selector))&&s(")")&&(t=new g.Paren(n)),t?new g.Element(e,t,w):void 0},combinator:function(){var t=y.charAt(w);if(">"===t||"+"===t||"~"===t||"|"===t){for(w++;y.charAt(w).match(/\s/);)w++;return new g.Combinator(t)}return y.charAt(w-1).match(/\s/)?new g.Combinator(" "):new g.Combinator(null)},selector:function(){var t,e,n,i=[];if(s("("))return t=s(this.entity),s(")")?new g.Selector([new g.Element("",t,w)]):null;for(;(e=s(this.element))&&(n=y.charAt(w),i.push(e),"{"!==n&&"}"!==n&&";"!==n&&","!==n&&")"!==n););return i.length>0?new g.Selector(i):void 0},attribute:function(){var t,e,n,i="";if(s("[")&&((t=s(/^(?:[_A-Za-z0-9-]|\\.)+/)||s(this.entities.quoted))&&(i=(n=s(/^[|~*$^]?=/))&&(e=s(this.entities.quoted)||s(/^[\w-]+/))?[t,n,e.toCSS?e.toCSS():e].join(""):t),s("]")))return i?"["+i+"]":void 0},block:function(){var t;return s("{")&&(t=s(this.primary))&&s("}")?t:void 0},ruleset:function(){var e,o,r,a=[];for(n(),t.dumpLineNumbers&&(r=f(w,y,t));(e=s(this.selector))&&(a.push(e),s(this.comment),s(","));)s(this.comment);if(a.length>0&&(o=s(this.block))){var u=new g.Ruleset(a,o,t.strictImports);return t.dumpLineNumbers&&(u.debugInfo=r),u}A=w,i()},rule:function(){var t,e,o,r,a=y.charAt(w);if(n(),"."!==a&&"#"!==a&&"&"!==a&&(t=s(this.variable)||s(this.property))){if("@"!=t.charAt(0)&&(r=/^([^@+\/'"*`(;{}-]*);/.exec(P[b]))?(w+=r[0].length-1,e=new g.Anonymous(r[1])):e="font"===t?s(this.font):s(this.value),o=s(this.important),e&&s(this.end))return new g.Rule(t,e,o,x);A=w,i()}},"import":function(){var e,o,r=w;n();var a=s(/^@import(?:-(once))?\s+/);return a&&(e=s(this.entities.quoted)||s(this.entities.url))&&(o=s(this.mediaFeatures),s(";"))?new g.Import(e,M,o,"once"===a[1],r,t.rootpath):(i(),void 0)},mediaFeature:function(){var t,e,n=[];do if(t=s(this.entities.keyword))n.push(t);else if(s("(")){if(e=s(this.property),t=s(this.entity),!s(")"))return null;if(e&&t)n.push(new g.Paren(new g.Rule(e,t,null,w,!0)));else{if(!t)return null;n.push(new g.Paren(t))}}while(t);return n.length>0?new g.Expression(n):void 0},mediaFeatures:function(){var t,e=[];do if(t=s(this.mediaFeature)){if(e.push(t),!s(","))break}else if((t=s(this.entities.variable))&&(e.push(t),!s(",")))break;while(t);return e.length>0?e:null},media:function(){var e,n,i,o;return t.dumpLineNumbers&&(o=f(w,y,t)),s(/^@media/)&&(e=s(this.mediaFeatures),n=s(this.block))?(i=new g.Media(n,e),t.dumpLineNumbers&&(i.debugInfo=o),i):void 0},directive:function(){var e,o,r,a,u,l,h;if("@"===y.charAt(w)){if(o=s(this["import"])||s(this.media))return o;if(n(),e=s(/^@[a-z-]+/)){switch(a=e,"-"==e.charAt(1)&&e.indexOf("-",2)>0&&(a="@"+e.slice(e.indexOf("-",2)+1)),a){case"@font-face":u=!0;break;case"@viewport":case"@top-left":case"@top-left-corner":case"@top-center":case"@top-right":case"@top-right-corner":case"@bottom-left":case"@bottom-left-corner":case"@bottom-center":case"@bottom-right":case"@bottom-right-corner":case"@left-top":case"@left-middle":case"@left-bottom":case"@right-top":case"@right-middle":case"@right-bottom":u=!0;break;case"@page":case"@document":case"@supports":case"@keyframes":u=!0,l=!0;break;case"@namespace":h=!0}if(l&&(e+=" "+(s(/^[^{]+/)||"").trim()),u){if(r=s(this.block))return new g.Directive(e,r)}else if((o=h?s(this.expression):s(this.entity))&&s(";")){var c=new g.Directive(e,o);return t.dumpLineNumbers&&(c.debugInfo=f(w,y,t)),c}i()}}},font:function(){for(var t,e=[],n=[];t=s(this.shorthand)||s(this.entity);)n.push(t);if(e.push(new g.Expression(n)),s(","))for(;(t=s(this.expression))&&(e.push(t),s(",")););return new g.Value(e)},value:function(){for(var t,e=[];(t=s(this.expression))&&(e.push(t),s(",")););return e.length>0?new g.Value(e):void 0},important:function(){return"!"===y.charAt(w)?s(/^! *important/):void 0},sub:function(){var t;return s("(")&&(t=s(this.expression))&&s(")")?t:void 0},multiplication:function(){var t,e,n,i;if(t=s(this.operand)){for(;!h(/^\/[*\/]/)&&(n=s("/")||s("*"))&&(e=s(this.operand));)i=new g.Operation(n,[i||t,e]);return i||t}},addition:function(){var t,e,n,i;if(t=s(this.multiplication)){for(;(n=s(/^[-+]\s+/)||!r(y.charAt(w-1))&&(s("+")||s("-")))&&(e=s(this.multiplication));)i=new g.Operation(n,[i||t,e]);return i||t}},conditions:function(){var t,e,n,i=w;if(t=s(this.condition)){for(;s(",")&&(e=s(this.condition));)n=new g.Condition("or",n||t,e,i);return n||t}},condition:function(){var t,e,n,i,o=w,r=!1;return s(/^not/)&&(r=!0),u("("),(t=s(this.addition)||s(this.entities.keyword)||s(this.entities.quoted))?((i=s(/^(?:>=|=<|[<=>])/))?(e=s(this.addition)||s(this.entities.keyword)||s(this.entities.quoted))?n=new g.Condition(i,t,e,o,r):l("expected expression"):n=new g.Condition("=",t,new g.Keyword("true"),o,r),u(")"),s(/^and/)?new g.Condition("and",n,s(this.condition)):n):void 0},operand:function(){var t,e=y.charAt(w+1);"-"===y.charAt(w)&&("@"===e||"("===e)&&(t=s("-"));var n=s(this.sub)||s(this.entities.dimension)||s(this.entities.color)||s(this.entities.variable)||s(this.entities.call);return t?new g.Operation("*",[new g.Dimension(-1),n]):n},expression:function(){for(var t,e=[];t=s(this.addition)||s(this.entity);)e.push(t);return e.length>0?new g.Expression(e):void 0},property:function(){var t;return(t=s(/^(\*?-?[_a-z0-9-]+)\s*:/))?t[1]:void 0}}}},("browser"===m.mode||"rhino"===m.mode)&&(m.Parser.importer=function(t,e,n,i){!/^([a-z-]+:)?\//.test(t)&&e.length>0&&(t=e[0]+t),a({href:t,title:t,type:i.mime,contents:i.contents,files:i.files,rootpath:i.rootpath,entryPath:i.entryPath,relativeUrls:i.relativeUrls},function(t,o,r,s,a,u){t&&"function"==typeof i.errback?i.errback.call(null,u,e,n,i):n.call(null,t,o,u)},!0)}),function(t){function e(e){return t.functions.hsla(e.h,e.s,e.l,e.a)}function n(e,n){return e instanceof t.Dimension&&"%"==e.unit?parseFloat(e.value*n/100):i(e)}function i(e){if(e instanceof t.Dimension)return parseFloat("%"==e.unit?e.value/100:e.value);if("number"==typeof e)return e;throw{error:"RuntimeError",message:"color functions take numbers as parameters"}}function o(t){return Math.min(1,Math.max(0,t))}t.functions={rgb:function(t,e,n){return this.rgba(t,e,n,1)},rgba:function(e,o,r,s){var a=[e,o,r].map(function(t){return n(t,256)});return s=i(s),new t.Color(a,s)},hsl:function(t,e,n){return this.hsla(t,e,n,1)},hsla:function(t,e,n,o){function r(t){return t=0>t?t+1:t>1?t-1:t,1>6*t?a+6*(s-a)*t:1>2*t?s:2>3*t?a+6*(s-a)*(2/3-t):a}t=i(t)%360/360,e=i(e),n=i(n),o=i(o);var s=.5>=n?n*(e+1):n+e-n*e,a=2*n-s;return this.rgba(255*r(t+1/3),255*r(t),255*r(t-1/3),o)},hsv:function(t,e,n){return this.hsva(t,e,n,1)},hsva:function(t,e,n,o){t=360*(i(t)%360/360),e=i(e),n=i(n),o=i(o);var r,s;r=Math.floor(t/60%6),s=t/60-r;var a=[n,n*(1-e),n*(1-s*e),n*(1-(1-s)*e)],u=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return this.rgba(255*a[u[r][0]],255*a[u[r][1]],255*a[u[r][2]],o)},hue:function(e){return new t.Dimension(Math.round(e.toHSL().h))},saturation:function(e){return new t.Dimension(Math.round(100*e.toHSL().s),"%")},lightness:function(e){return new t.Dimension(Math.round(100*e.toHSL().l),"%")},red:function(e){return new t.Dimension(e.rgb[0])},green:function(e){return new t.Dimension(e.rgb[1])},blue:function(e){return new t.Dimension(e.rgb[2])},alpha:function(e){return new t.Dimension(e.toHSL().a)},luma:function(e){return new t.Dimension(Math.round(100*(.2126*(e.rgb[0]/255)+.7152*(e.rgb[1]/255)+.0722*(e.rgb[2]/255))*e.alpha),"%")},saturate:function(t,n){var i=t.toHSL();return i.s+=n.value/100,i.s=o(i.s),e(i)},desaturate:function(t,n){var i=t.toHSL();return i.s-=n.value/100,i.s=o(i.s),e(i)},lighten:function(t,n){var i=t.toHSL();return i.l+=n.value/100,i.l=o(i.l),e(i)},darken:function(t,n){var i=t.toHSL();return i.l-=n.value/100,i.l=o(i.l),e(i)},fadein:function(t,n){var i=t.toHSL();return i.a+=n.value/100,i.a=o(i.a),e(i)},fadeout:function(t,n){var i=t.toHSL();return i.a-=n.value/100,i.a=o(i.a),e(i)},fade:function(t,n){var i=t.toHSL();return i.a=n.value/100,i.a=o(i.a),e(i)},spin:function(t,n){var i=t.toHSL(),o=(i.h+n.value)%360;return i.h=0>o?360+o:o,e(i)},mix:function(e,n,i){i||(i=new t.Dimension(50));var o=i.value/100,r=2*o-1,s=e.toHSL().a-n.toHSL().a,a=((-1==r*s?r:(r+s)/(1+r*s))+1)/2,u=1-a,l=[e.rgb[0]*a+n.rgb[0]*u,e.rgb[1]*a+n.rgb[1]*u,e.rgb[2]*a+n.rgb[2]*u],h=e.alpha*o+n.alpha*(1-o);return new t.Color(l,h)},greyscale:function(e){return this.desaturate(e,new t.Dimension(100))},contrast:function(t,e,n,i){return t.rgb?(n===void 0&&(n=this.rgba(255,255,255,1)),e===void 0&&(e=this.rgba(0,0,0,1)),i=i===void 0?.43:i.value,i>(.2126*(t.rgb[0]/255)+.7152*(t.rgb[1]/255)+.0722*(t.rgb[2]/255))*t.alpha?n:e):null},e:function(e){return new t.Anonymous(e instanceof t.JavaScript?e.evaluated:e)},escape:function(e){return new t.Anonymous(encodeURI(e.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29"))},"%":function(e){for(var n=Array.prototype.slice.call(arguments,1),i=e.value,o=0;n.length>o;o++)i=i.replace(/%[sda]/i,function(t){var e=t.match(/s/i)?n[o].value:n[o].toCSS();return t.match(/[A-Z]$/)?encodeURIComponent(e):e});return i=i.replace(/%%/g,"%"),new t.Quoted('"'+i+'"',i)},unit:function(e,n){return new t.Dimension(e.value,n?n.toCSS():"")},round:function(t,e){var n=e===void 0?0:e.value;return this._math(function(t){return t.toFixed(n)},t)},ceil:function(t){return this._math(Math.ceil,t)},floor:function(t){return this._math(Math.floor,t)},_math:function(e,n){if(n instanceof t.Dimension)return new t.Dimension(e(parseFloat(n.value)),n.unit);if("number"==typeof n)return e(n);throw{type:"Argument",message:"argument must be a number"}},argb:function(e){return new t.Anonymous(e.toARGB())},percentage:function(e){return new t.Dimension(100*e.value,"%")},color:function(e){if(e instanceof t.Quoted)return new t.Color(e.value.slice(1));throw{type:"Argument",message:"argument must be a string"}},iscolor:function(e){return this._isa(e,t.Color)},isnumber:function(e){return this._isa(e,t.Dimension)},isstring:function(e){return this._isa(e,t.Quoted)},iskeyword:function(e){return this._isa(e,t.Keyword)},isurl:function(e){return this._isa(e,t.URL)},ispixel:function(e){return e instanceof t.Dimension&&"px"===e.unit?t.True:t.False},ispercentage:function(e){return e instanceof t.Dimension&&"%"===e.unit?t.True:t.False},isem:function(e){return e instanceof t.Dimension&&"em"===e.unit?t.True:t.False},_isa:function(e,n){return e instanceof n?t.True:t.False},multiply:function(t,e){var n=t.rgb[0]*e.rgb[0]/255,i=t.rgb[1]*e.rgb[1]/255,o=t.rgb[2]*e.rgb[2]/255;return this.rgb(n,i,o)},screen:function(t,e){var n=255-(255-t.rgb[0])*(255-e.rgb[0])/255,i=255-(255-t.rgb[1])*(255-e.rgb[1])/255,o=255-(255-t.rgb[2])*(255-e.rgb[2])/255;return this.rgb(n,i,o)},overlay:function(t,e){var n=128>t.rgb[0]?2*t.rgb[0]*e.rgb[0]/255:255-2*(255-t.rgb[0])*(255-e.rgb[0])/255,i=128>t.rgb[1]?2*t.rgb[1]*e.rgb[1]/255:255-2*(255-t.rgb[1])*(255-e.rgb[1])/255,o=128>t.rgb[2]?2*t.rgb[2]*e.rgb[2]/255:255-2*(255-t.rgb[2])*(255-e.rgb[2])/255;return this.rgb(n,i,o)},softlight:function(t,e){var n=e.rgb[0]*t.rgb[0]/255,i=n+t.rgb[0]*(255-(255-t.rgb[0])*(255-e.rgb[0])/255-n)/255;n=e.rgb[1]*t.rgb[1]/255;var o=n+t.rgb[1]*(255-(255-t.rgb[1])*(255-e.rgb[1])/255-n)/255;n=e.rgb[2]*t.rgb[2]/255;var r=n+t.rgb[2]*(255-(255-t.rgb[2])*(255-e.rgb[2])/255-n)/255;return this.rgb(i,o,r)},hardlight:function(t,e){var n=128>e.rgb[0]?2*e.rgb[0]*t.rgb[0]/255:255-2*(255-e.rgb[0])*(255-t.rgb[0])/255,i=128>e.rgb[1]?2*e.rgb[1]*t.rgb[1]/255:255-2*(255-e.rgb[1])*(255-t.rgb[1])/255,o=128>e.rgb[2]?2*e.rgb[2]*t.rgb[2]/255:255-2*(255-e.rgb[2])*(255-t.rgb[2])/255;return this.rgb(n,i,o)},difference:function(t,e){var n=Math.abs(t.rgb[0]-e.rgb[0]),i=Math.abs(t.rgb[1]-e.rgb[1]),o=Math.abs(t.rgb[2]-e.rgb[2]);return this.rgb(n,i,o)},exclusion:function(t,e){var n=t.rgb[0]+e.rgb[0]*(255-t.rgb[0]-t.rgb[0])/255,i=t.rgb[1]+e.rgb[1]*(255-t.rgb[1]-t.rgb[1])/255,o=t.rgb[2]+e.rgb[2]*(255-t.rgb[2]-t.rgb[2])/255;return this.rgb(n,i,o)},average:function(t,e){var n=(t.rgb[0]+e.rgb[0])/2,i=(t.rgb[1]+e.rgb[1])/2,o=(t.rgb[2]+e.rgb[2])/2;return this.rgb(n,i,o)},negation:function(t,e){var n=255-Math.abs(255-e.rgb[0]-t.rgb[0]),i=255-Math.abs(255-e.rgb[1]-t.rgb[1]),o=255-Math.abs(255-e.rgb[2]-t.rgb[2]);return this.rgb(n,i,o)},tint:function(t,e){return this.mix(this.rgb(255,255,255),t,e)},shade:function(t,e){return this.mix(this.rgb(0,0,0),t,e)}}}(e("./tree")),function(t){t.colors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(e("./tree")),function(t){t.Alpha=function(t){this.value=t},t.Alpha.prototype={toCSS:function(){return"alpha(opacity="+(this.value.toCSS?this.value.toCSS():this.value)+")"},eval:function(t){return this.value.eval&&(this.value=this.value.eval(t)),this}}}(e("../tree")),function(t){t.Anonymous=function(t){this.value=t.value||t},t.Anonymous.prototype={toCSS:function(){return this.value},eval:function(){return this},compare:function(t){if(!t.toCSS)return-1;var e=this.toCSS(),n=t.toCSS();return e===n?0:n>e?-1:1}}}(e("../tree")),function(t){t.Assignment=function(t,e){this.key=t,this.value=e},t.Assignment.prototype={toCSS:function(){return this.key+"="+(this.value.toCSS?this.value.toCSS():this.value)},eval:function(e){return this.value.eval?new t.Assignment(this.key,this.value.eval(e)):this}}}(e("../tree")),function(t){t.Call=function(t,e,n,i){this.name=t,this.args=e,this.index=n,this.filename=i},t.Call.prototype={eval:function(e){var n,i=this.args.map(function(t){return t.eval(e)});if(this.name in t.functions)try{if(n=t.functions[this.name].apply(t.functions,i),null!=n)return n}catch(o){throw{type:o.type||"Runtime",message:"error evaluating function `"+this.name+"`"+(o.message?": "+o.message:""),index:this.index,filename:this.filename}}return new t.Anonymous(this.name+"("+i.map(function(t){return t.toCSS(e)}).join(", ")+")")},toCSS:function(t){return this.eval(t).toCSS()}}}(e("../tree")),function(t){t.Color=function(t,e){this.rgb=Array.isArray(t)?t:6==t.length?t.match(/.{2}/g).map(function(t){return parseInt(t,16)}):t.split("").map(function(t){return parseInt(t+t,16)}),this.alpha="number"==typeof e?e:1},t.Color.prototype={eval:function(){return this},toCSS:function(){return 1>this.alpha?"rgba("+this.rgb.map(function(t){return Math.round(t)}).concat(this.alpha).join(", ")+")":"#"+this.rgb.map(function(t){return t=Math.round(t),t=(t>255?255:0>t?0:t).toString(16),1===t.length?"0"+t:t}).join("")},operate:function(e,n){var i=[];n instanceof t.Color||(n=n.toColor());for(var o=0;3>o;o++)i[o]=t.operate(e,this.rgb[o],n.rgb[o]);return new t.Color(i,this.alpha+n.alpha)},toHSL:function(){var t,e,n=this.rgb[0]/255,i=this.rgb[1]/255,o=this.rgb[2]/255,r=this.alpha,s=Math.max(n,i,o),a=Math.min(n,i,o),u=(s+a)/2,l=s-a;if(s===a)t=e=0;else{switch(e=u>.5?l/(2-s-a):l/(s+a),s){case n:t=(i-o)/l+(o>i?6:0);break;case i:t=(o-n)/l+2;break;case o:t=(n-i)/l+4}t/=6}return{h:360*t,s:e,l:u,a:r}},toARGB:function(){var t=[Math.round(255*this.alpha)].concat(this.rgb);return"#"+t.map(function(t){return t=Math.round(t),t=(t>255?255:0>t?0:t).toString(16),1===t.length?"0"+t:t}).join("")},compare:function(t){return t.rgb?t.rgb[0]===this.rgb[0]&&t.rgb[1]===this.rgb[1]&&t.rgb[2]===this.rgb[2]&&t.alpha===this.alpha?0:-1:-1}}}(e("../tree")),function(t){t.Comment=function(t,e){this.value=t,this.silent=!!e},t.Comment.prototype={toCSS:function(t){return t.compress?"":this.value},eval:function(){return this}}}(e("../tree")),function(t){t.Condition=function(t,e,n,i,o){this.op=t.trim(),this.lvalue=e,this.rvalue=n,this.index=i,this.negate=o},t.Condition.prototype.eval=function(t){var e,n=this.lvalue.eval(t),i=this.rvalue.eval(t),o=this.index,e=function(t){switch(t){case"and":return n&&i;case"or":return n||i;default:if(n.compare)e=n.compare(i);else{if(!i.compare)throw{type:"Type",message:"Unable to perform comparison",index:o};e=i.compare(n)}switch(e){case-1:return"<"===t||"=<"===t;case 0:return"="===t||">="===t||"=<"===t;case 1:return">"===t||">="===t}}}(this.op);return this.negate?!e:e}}(e("../tree")),function(t){t.Dimension=function(t,e){this.value=parseFloat(t),this.unit=e||null},t.Dimension.prototype={eval:function(){return this},toColor:function(){return new t.Color([this.value,this.value,this.value])},toCSS:function(){var t=this.value+this.unit;return t},operate:function(e,n){return new t.Dimension(t.operate(e,this.value,n.value),this.unit||n.unit)},compare:function(e){return e instanceof t.Dimension?e.value>this.value?-1:e.value<this.value?1:e.unit&&this.unit!==e.unit?-1:0:-1}}}(e("../tree")),function(t){t.Directive=function(e,n){this.name=e,Array.isArray(n)?(this.ruleset=new t.Ruleset([],n),this.ruleset.allowImports=!0):this.value=n},t.Directive.prototype={toCSS:function(t,e){return this.ruleset?(this.ruleset.root=!0,this.name+(e.compress?"{":" {\n  ")+this.ruleset.toCSS(t,e).trim().replace(/\n/g,"\n  ")+(e.compress?"}":"\n}\n")):this.name+" "+this.value.toCSS()+";\n"},eval:function(e){var n=this;return this.ruleset&&(e.frames.unshift(this),n=new t.Directive(this.name),n.ruleset=this.ruleset.eval(e),e.frames.shift()),n},variable:function(e){return t.Ruleset.prototype.variable.call(this.ruleset,e)},find:function(){return t.Ruleset.prototype.find.apply(this.ruleset,arguments)},rulesets:function(){return t.Ruleset.prototype.rulesets.apply(this.ruleset)}}}(e("../tree")),function(t){t.Element=function(e,n,i){this.combinator=e instanceof t.Combinator?e:new t.Combinator(e),this.value="string"==typeof n?n.trim():n?n:"",this.index=i},t.Element.prototype.eval=function(e){return new t.Element(this.combinator,this.value.eval?this.value.eval(e):this.value,this.index)},t.Element.prototype.toCSS=function(t){var e=this.value.toCSS?this.value.toCSS(t):this.value;return""==e&&"&"==this.combinator.value.charAt(0)?"":this.combinator.toCSS(t||{})+e},t.Combinator=function(t){this.value=" "===t?" ":t?t.trim():""},t.Combinator.prototype.toCSS=function(t){return{"":""," ":" ",":":" :","+":t.compress?"+":" + ","~":t.compress?"~":" ~ ",">":t.compress?">":" > ","|":t.compress?"|":" | "}[this.value]}}(e("../tree")),function(t){t.Expression=function(t){this.value=t},t.Expression.prototype={eval:function(e){return this.value.length>1?new t.Expression(this.value.map(function(t){return t.eval(e)})):1===this.value.length?this.value[0].eval(e):this},toCSS:function(t){return this.value.map(function(e){return e.toCSS?e.toCSS(t):""}).join(" ")}}}(e("../tree")),function(t){t.Import=function(e,n,i,o,r,s){var a=this;this.once=o,this.index=r,this._path=e,this.features=i&&new t.Value(i),this.rootpath=s,this.path=e instanceof t.Quoted?/(\.[a-z]*$)|([\?;].*)$/.test(e.value)?e.value:e.value+".less":e.value.value||e.value,this.css=/css([\?;].*)?$/.test(this.path),this.css||n.push(this.path,function(e,n,i){e&&(e.index=r),i&&a.once&&(a.skip=i),a.root=n||new t.Ruleset([],[])})},t.Import.prototype={toCSS:function(t){var e=this.features?" "+this.features.toCSS(t):"";return this.css?("string"==typeof this._path.value&&!/^(?:[a-z-]+:|\/)/.test(this._path.value)&&(this._path.value=this.rootpath+this._path.value),"@import "+this._path.toCSS()+e+";\n"):""},eval:function(e){var n;return this.features&&this.features.eval(e),this.skip?[]:this.css?this:(n=new t.Ruleset([],this.root.rules.slice(0)),n.evalImports(e),this.features?new t.Media(n.rules,this.features.value):n.rules)}}}(e("../tree")),function(t){t.JavaScript=function(t,e,n){this.escaped=n,this.expression=t,this.index=e},t.JavaScript.prototype={eval:function(e){var n,i=this,o={},r=this.expression.replace(/@\{([\w-]+)\}/g,function(n,o){return t.jsify(new t.Variable("@"+o,i.index).eval(e))});try{r=Function("return ("+r+")")}catch(s){throw{message:"JavaScript evaluation error: `"+r+"`",index:this.index}}for(var a in e.frames[0].variables())o[a.slice(1)]={value:e.frames[0].variables()[a].value,toJS:function(){return this.value.eval(e).toCSS()}};try{n=r.call(o)}catch(s){throw{message:"JavaScript evaluation error: '"+s.name+": "+s.message+"'",index:this.index}}return"string"==typeof n?new t.Quoted('"'+n+'"',n,this.escaped,this.index):Array.isArray(n)?new t.Anonymous(n.join(", ")):new t.Anonymous(n)}}}(e("../tree")),function(t){t.Keyword=function(t){this.value=t},t.Keyword.prototype={eval:function(){return this},toCSS:function(){return this.value},compare:function(e){return e instanceof t.Keyword?e.value===this.value?0:1:-1}},t.True=new t.Keyword("true"),t.False=new t.Keyword("false")}(e("../tree")),function(t){t.Media=function(e,n){var i=this.emptySelectors();this.features=new t.Value(n),this.ruleset=new t.Ruleset(i,e),this.ruleset.allowImports=!0},t.Media.prototype={toCSS:function(t,e){var n=this.features.toCSS(e);return this.ruleset.root=0===t.length||t[0].multiMedia,"@media "+n+(e.compress?"{":" {\n  ")+this.ruleset.toCSS(t,e).trim().replace(/\n/g,"\n  ")+(e.compress?"}":"\n}\n")},eval:function(e){e.mediaBlocks||(e.mediaBlocks=[],e.mediaPath=[]);var n=new t.Media([],[]);return this.debugInfo&&(this.ruleset.debugInfo=this.debugInfo,n.debugInfo=this.debugInfo),n.features=this.features.eval(e),e.mediaPath.push(n),e.mediaBlocks.push(n),e.frames.unshift(this.ruleset),n.ruleset=this.ruleset.eval(e),e.frames.shift(),e.mediaPath.pop(),0===e.mediaPath.length?n.evalTop(e):n.evalNested(e)},variable:function(e){return t.Ruleset.prototype.variable.call(this.ruleset,e)},find:function(){return t.Ruleset.prototype.find.apply(this.ruleset,arguments)},rulesets:function(){return t.Ruleset.prototype.rulesets.apply(this.ruleset)},emptySelectors:function(){var e=new t.Element("","&",0);return[new t.Selector([e])]},evalTop:function(e){var n=this;if(e.mediaBlocks.length>1){var i=this.emptySelectors();n=new t.Ruleset(i,e.mediaBlocks),n.multiMedia=!0}return delete e.mediaBlocks,delete e.mediaPath,n},evalNested:function(e){var n,i,o=e.mediaPath.concat([this]);for(n=0;o.length>n;n++)i=o[n].features instanceof t.Value?o[n].features.value:o[n].features,o[n]=Array.isArray(i)?i:[i];return this.features=new t.Value(this.permute(o).map(function(e){for(e=e.map(function(e){return e.toCSS?e:new t.Anonymous(e)}),n=e.length-1;n>0;n--)e.splice(n,0,new t.Anonymous("and"));return new t.Expression(e)})),new t.Ruleset([],[])},permute:function(t){if(0===t.length)return[];if(1===t.length)return t[0];for(var e=[],n=this.permute(t.slice(1)),i=0;n.length>i;i++)for(var o=0;t[0].length>o;o++)e.push([t[0][o]].concat(n[i]));return e},bubbleSelectors:function(e){this.ruleset=new t.Ruleset(e.slice(0),[this.ruleset])}}}(e("../tree")),function(t){t.mixin={},t.mixin.Call=function(e,n,i,o,r){this.selector=new t.Selector(e),this.arguments=n,this.index=i,this.filename=o,this.important=r},t.mixin.Call.prototype={eval:function(e){var n,i,o,r,s,a,u,l,h=[],c=!1;for(o=this.arguments&&this.arguments.map(function(t){return{name:t.name,value:t.value.eval(e)}}),r=0;e.frames.length>r;r++)if((n=e.frames[r].find(this.selector)).length>0){for(l=!0,s=0;n.length>s;s++){for(i=n[s],u=!1,a=0;e.frames.length>a;a++)if(!(i instanceof t.mixin.Definition)&&i===(e.frames[a].originalRuleset||e.frames[a])){u=!0;break}if(!u&&i.matchArgs(o,e)){if(!i.matchCondition||i.matchCondition(o,e))try{Array.prototype.push.apply(h,i.eval(e,o,this.important).rules)}catch(p){throw{message:p.message,index:this.index,filename:this.filename,stack:p.stack}}c=!0}}if(c)return h}throw l?{type:"Runtime",message:"No matching definition was found for `"+this.selector.toCSS().trim()+"("+(o?o.map(function(t){var e="";return t.name&&(e+=t.name+":"),e+=t.value.toCSS?t.value.toCSS():"???"}).join(", "):"")+")`",index:this.index,filename:this.filename}:{type:"Name",message:this.selector.toCSS().trim()+" is undefined",index:this.index,filename:this.filename}}},t.mixin.Definition=function(e,n,i,o,r){this.name=e,this.selectors=[new t.Selector([new t.Element(null,e)])],this.params=n,this.condition=o,this.variadic=r,this.arity=n.length,this.rules=i,this._lookups={},this.required=n.reduce(function(t,e){return!e.name||e.name&&!e.value?t+1:t},0),this.parent=t.Ruleset.prototype,this.frames=[]},t.mixin.Definition.prototype={toCSS:function(){return""},variable:function(t){return this.parent.variable.call(this,t)},variables:function(){return this.parent.variables.call(this)},find:function(){return this.parent.find.apply(this,arguments)},rulesets:function(){return this.parent.rulesets.apply(this)},evalParams:function(e,n,i,o){var r,s,a,u,l,h,c,p,d=new t.Ruleset(null,[]),f=this.params.slice(0);if(i)for(i=i.slice(0),a=0;i.length>a;a++)if(s=i[a],h=s&&s.name){for(c=!1,u=0;f.length>u;u++)if(!o[u]&&h===f[u].name){o[u]=s.value.eval(e),d.rules.unshift(new t.Rule(h,s.value.eval(e))),c=!0;break}if(c){i.splice(a,1),a--;continue}throw{type:"Runtime",message:"Named argument for "+this.name+" "+i[a].name+" not found"}}for(p=0,a=0;f.length>a;a++)if(!o[a]){if(s=i&&i[p],h=f[a].name)if(f[a].variadic&&i){for(r=[],u=p;i.length>u;u++)r.push(i[u].value.eval(e));d.rules.unshift(new t.Rule(h,new t.Expression(r).eval(e)))}else{if(l=s&&s.value)l=l.eval(e);else{if(!f[a].value)throw{type:"Runtime",message:"wrong number of arguments for "+this.name+" ("+i.length+" for "+this.arity+")"};l=f[a].value.eval(n)}d.rules.unshift(new t.Rule(h,l)),o[a]=l}if(f[a].variadic&&i)for(u=p;i.length>u;u++)o[u]=i[u].value.eval(e);p++}return d},eval:function(e,n,i){var o,r,s=[],a=this.frames.concat(e.frames),u=this.evalParams(e,{frames:a},n,s);return u.rules.unshift(new t.Rule("@arguments",new t.Expression(s).eval(e))),o=i?this.parent.makeImportant.apply(this).rules:this.rules.slice(0),r=new t.Ruleset(null,o).eval({frames:[this,u].concat(a)}),r.originalRuleset=this,r},matchCondition:function(t,e){return this.condition&&!this.condition.eval({frames:[this.evalParams(e,{frames:this.frames.concat(e.frames)},t,[])].concat(e.frames)})?!1:!0},matchArgs:function(t,e){var n,i=t&&t.length||0;if(!this.variadic){if(this.required>i)return!1;if(i>this.params.length)return!1;if(this.required>0&&i>this.params.length)return!1}n=Math.min(i,this.arity);for(var o=0;n>o;o++)if(!this.params[o].name&&!this.params[o].variadic&&t[o].value.eval(e).toCSS()!=this.params[o].value.eval(e).toCSS())return!1;return!0}}}(e("../tree")),function(t){t.Operation=function(t,e){this.op=t.trim(),this.operands=e},t.Operation.prototype.eval=function(e){var n,i=this.operands[0].eval(e),o=this.operands[1].eval(e);if(i instanceof t.Dimension&&o instanceof t.Color){if("*"!==this.op&&"+"!==this.op)throw{name:"OperationError",message:"Can't substract or divide a color from a number"};n=o,o=i,i=n}if(!i.operate)throw{name:"OperationError",message:"Operation on an invalid type"};return i.operate(this.op,o)},t.operate=function(t,e,n){switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;
case"/":return e/n}}}(e("../tree")),function(t){t.Paren=function(t){this.value=t},t.Paren.prototype={toCSS:function(t){return"("+this.value.toCSS(t)+")"},eval:function(e){return new t.Paren(this.value.eval(e))}}}(e("../tree")),function(t){t.Quoted=function(t,e,n,i){this.escaped=n,this.value=e||"",this.quote=t.charAt(0),this.index=i},t.Quoted.prototype={toCSS:function(){return this.escaped?this.value:this.quote+this.value+this.quote},eval:function(e){var n=this,i=this.value.replace(/`([^`]+)`/g,function(i,o){return new t.JavaScript(o,n.index,!0).eval(e).value}).replace(/@\{([\w-]+)\}/g,function(i,o){var r=new t.Variable("@"+o,n.index).eval(e);return r instanceof t.Quoted?r.value:r.toCSS()});return new t.Quoted(this.quote+i+this.quote,i,this.escaped,this.index)},compare:function(t){if(!t.toCSS)return-1;var e=this.toCSS(),n=t.toCSS();return e===n?0:n>e?-1:1}}}(e("../tree")),function(t){t.Ratio=function(t){this.value=t},t.Ratio.prototype={toCSS:function(){return this.value},eval:function(){return this}}}(e("../tree")),function(t){t.Rule=function(e,n,i,o,r){this.name=e,this.value=n instanceof t.Value?n:new t.Value([n]),this.important=i?" "+i.trim():"",this.index=o,this.inline=r||!1,this.variable="@"===e.charAt(0)?!0:!1},t.Rule.prototype.toCSS=function(t){return this.variable?"":this.name+(t.compress?":":": ")+this.value.toCSS(t)+this.important+(this.inline?"":";")},t.Rule.prototype.eval=function(e){return new t.Rule(this.name,this.value.eval(e),this.important,this.index,this.inline)},t.Rule.prototype.makeImportant=function(){return new t.Rule(this.name,this.value,"!important",this.index,this.inline)},t.Shorthand=function(t,e){this.a=t,this.b=e},t.Shorthand.prototype={toCSS:function(t){return this.a.toCSS(t)+"/"+this.b.toCSS(t)},eval:function(){return this}}}(e("../tree")),function(t){t.Ruleset=function(t,e,n){this.selectors=t,this.rules=e,this._lookups={},this.strictImports=n},t.Ruleset.prototype={eval:function(e){var n,i=this.selectors&&this.selectors.map(function(t){return t.eval(e)}),o=new t.Ruleset(i,this.rules.slice(0),this.strictImports);o.originalRuleset=this,o.root=this.root,o.allowImports=this.allowImports,this.debugInfo&&(o.debugInfo=this.debugInfo),e.frames.unshift(o),(o.root||o.allowImports||!o.strictImports)&&o.evalImports(e);for(var r=0;o.rules.length>r;r++)o.rules[r]instanceof t.mixin.Definition&&(o.rules[r].frames=e.frames.slice(0));for(var s=e.mediaBlocks&&e.mediaBlocks.length||0,r=0;o.rules.length>r;r++)o.rules[r]instanceof t.mixin.Call&&(n=o.rules[r].eval(e),o.rules.splice.apply(o.rules,[r,1].concat(n)),r+=n.length-1,o.resetCache());for(var a,r=0;o.rules.length>r;r++)a=o.rules[r],a instanceof t.mixin.Definition||(o.rules[r]=a.eval?a.eval(e):a);if(e.frames.shift(),e.mediaBlocks)for(var r=s;e.mediaBlocks.length>r;r++)e.mediaBlocks[r].bubbleSelectors(i);return o},evalImports:function(e){var n,i;for(n=0;this.rules.length>n;n++)this.rules[n]instanceof t.Import&&(i=this.rules[n].eval(e),"number"==typeof i.length?(this.rules.splice.apply(this.rules,[n,1].concat(i)),n+=i.length-1):this.rules.splice(n,1,i),this.resetCache())},makeImportant:function(){return new t.Ruleset(this.selectors,this.rules.map(function(t){return t.makeImportant?t.makeImportant():t}),this.strictImports)},matchArgs:function(t){return!t||0===t.length},resetCache:function(){this._rulesets=null,this._variables=null,this._lookups={}},variables:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(e,n){return n instanceof t.Rule&&n.variable===!0&&(e[n.name]=n),e},{})},variable:function(t){return this.variables()[t]},rulesets:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(e){return e instanceof t.Ruleset||e instanceof t.mixin.Definition})},find:function(e,n){n=n||this;var i,o=[],r=e.toCSS();return r in this._lookups?this._lookups[r]:(this.rulesets().forEach(function(r){if(r!==n)for(var s=0;r.selectors.length>s;s++)if(i=e.match(r.selectors[s])){e.elements.length>r.selectors[s].elements.length?Array.prototype.push.apply(o,r.find(new t.Selector(e.elements.slice(1)),n)):o.push(r);break}}),this._lookups[r]=o)},toCSS:function(e,n){var i,o,r,s=[],a=[],u=[],l=[],h=[];this.root||this.joinSelectors(h,e,this.selectors);for(var c=0;this.rules.length>c;c++)if(r=this.rules[c],r.rules||r instanceof t.Media)l.push(r.toCSS(h,n));else if(r instanceof t.Directive){var p=r.toCSS(h,n);if("@charset"===r.name){if(n.charset){r.debugInfo&&(l.push(t.debugInfo(n,r)),l.push(new t.Comment("/* "+p.replace(/\n/g,"")+" */\n").toCSS(n)));continue}n.charset=!0}l.push(p)}else r instanceof t.Comment?r.silent||(this.root?l.push(r.toCSS(n)):a.push(r.toCSS(n))):r.toCSS&&!r.variable?a.push(r.toCSS(n)):r.value&&!r.variable&&a.push(""+r.value);if(l=l.join(""),this.root)s.push(a.join(n.compress?"":"\n"));else if(a.length>0){o=t.debugInfo(n,this),i=h.map(function(t){return t.map(function(t){return t.toCSS(n)}).join("").trim()}).join(n.compress?",":",\n");for(var c=a.length-1;c>=0;c--)-1===u.indexOf(a[c])&&u.unshift(a[c]);a=u,s.push(o+i+(n.compress?"{":" {\n  ")+a.join(n.compress?"":"\n  ")+(n.compress?"}":"\n}\n"))}return s.push(l),s.join("")+(n.compress?"\n":"")},joinSelectors:function(t,e,n){for(var i=0;n.length>i;i++)this.joinSelector(t,e,n[i])},joinSelector:function(e,n,i){var o,r,s,a,u,l,h,c,p,d,f,m,g,v,y;for(o=0;i.elements.length>o;o++)l=i.elements[o],"&"===l.value&&(a=!0);if(a){for(v=[],u=[[]],o=0;i.elements.length>o;o++)if(l=i.elements[o],"&"!==l.value)v.push(l);else{for(y=[],v.length>0&&this.mergeElementsOnToSelectors(v,u),r=0;u.length>r;r++)if(h=u[r],0==n.length)h.length>0&&(h[0].elements=h[0].elements.slice(0),h[0].elements.push(new t.Element(l.combinator,"",0))),y.push(h);else for(s=0;n.length>s;s++)c=n[s],p=[],d=[],m=!0,h.length>0?(p=h.slice(0),g=p.pop(),f=new t.Selector(g.elements.slice(0)),m=!1):f=new t.Selector([]),c.length>1&&(d=d.concat(c.slice(1))),c.length>0&&(m=!1,f.elements.push(new t.Element(l.combinator,c[0].elements[0].value,0)),f.elements=f.elements.concat(c[0].elements.slice(1))),m||p.push(f),p=p.concat(d),y.push(p);u=y,v=[]}for(v.length>0&&this.mergeElementsOnToSelectors(v,u),o=0;u.length>o;o++)e.push(u[o])}else if(n.length>0)for(o=0;n.length>o;o++)e.push(n[o].concat(i));else e.push([i])},mergeElementsOnToSelectors:function(e,n){var i,o;if(0==n.length)return n.push([new t.Selector(e)]),void 0;for(i=0;n.length>i;i++)o=n[i],o.length>0?o[o.length-1]=new t.Selector(o[o.length-1].elements.concat(e)):o.push(new t.Selector(e))}}}(e("../tree")),function(t){t.Selector=function(t){this.elements=t},t.Selector.prototype.match=function(t){var e,n,i,o,r=this.elements,s=r.length;if(e=t.elements.slice(t.elements.length&&"&"===t.elements[0].value?1:0),n=e.length,i=Math.min(s,n),0===n||n>s)return!1;for(o=0;i>o;o++)if(r[o].value!==e[o].value)return!1;return!0},t.Selector.prototype.eval=function(e){return new t.Selector(this.elements.map(function(t){return t.eval(e)}))},t.Selector.prototype.toCSS=function(t){return this._css?this._css:(this._css=""===this.elements[0].combinator.value?" ":"",this._css+=this.elements.map(function(e){return"string"==typeof e?" "+e.trim():e.toCSS(t)}).join(""),this._css)}}(e("../tree")),function(t){t.UnicodeDescriptor=function(t){this.value=t},t.UnicodeDescriptor.prototype={toCSS:function(){return this.value},eval:function(){return this}}}(e("../tree")),function(t){t.URL=function(t,e){this.value=t,this.rootpath=e},t.URL.prototype={toCSS:function(){return"url("+this.value.toCSS()+")"},eval:function(e){var n,i=this.value.eval(e);return"string"==typeof i.value&&!/^(?:[a-z-]+:|\/)/.test(i.value)&&(n=this.rootpath,i.quote||(n=n.replace(/[\(\)'"\s]/g,function(t){return"\\"+t})),i.value=n+i.value),new t.URL(i,this.rootpath)}}}(e("../tree")),function(t){t.Value=function(t){this.value=t,this.is="value"},t.Value.prototype={eval:function(e){return 1===this.value.length?this.value[0].eval(e):new t.Value(this.value.map(function(t){return t.eval(e)}))},toCSS:function(t){return this.value.map(function(e){return e.toCSS(t)}).join(t.compress?",":", ")}}}(e("../tree")),function(t){t.Variable=function(t,e,n){this.name=t,this.index=e,this.file=n},t.Variable.prototype={eval:function(e){var n,i,o=this.name;if(0==o.indexOf("@@")&&(o="@"+new t.Variable(o.slice(1)).eval(e).value),this.evaluating)throw{type:"Name",message:"Recursive variable definition for "+o,filename:this.file,index:this.index};if(this.evaluating=!0,n=t.find(e.frames,function(t){return(i=t.variable(o))?i.value.eval(e):void 0}))return this.evaluating=!1,n;throw{type:"Name",message:"variable "+o+" is undefined",filename:this.file,index:this.index}}}}(e("../tree")),function(t){t.debugInfo=function(e,n){var i="";if(e.dumpLineNumbers&&!e.compress)switch(e.dumpLineNumbers){case"comments":i=t.debugInfo.asComment(n);break;case"mediaquery":i=t.debugInfo.asMediaQuery(n);break;case"all":i=t.debugInfo.asComment(n)+t.debugInfo.asMediaQuery(n)}return i},t.debugInfo.asComment=function(t){return"/* line "+t.debugInfo.lineNumber+", "+t.debugInfo.fileName+" */\n"},t.debugInfo.asMediaQuery=function(t){return"@media -sass-debug-info{filename{font-family:"+("file://"+t.debugInfo.fileName).replace(/[\/:.]/g,"\\$&")+"}line{font-family:\\00003"+t.debugInfo.lineNumber+"}}\n"},t.find=function(t,e){for(var n,i=0;t.length>i;i++)if(n=e.call(t,t[i]))return n;return null},t.jsify=function(t){return Array.isArray(t.value)&&t.value.length>1?"["+t.value.map(function(t){return t.toCSS(!1)}).join(", ")+"]":t.toCSS(!1)}}(e("./tree"));var v=/^(file|chrome(-extension)?|resource|qrc|app):/.test(location.protocol);if(m.env=m.env||("127.0.0.1"==location.hostname||"0.0.0.0"==location.hostname||"localhost"==location.hostname||location.port.length>0||v?"development":"production"),m.async=m.async||!1,m.fileAsync=m.fileAsync||!1,m.poll=m.poll||(v?1e3:1500),m.functions)for(var y in m.functions)m.tree.functions[y]=m.functions[y];var w=/!dumpLineNumbers:(comments|mediaquery|all)/.exec(location.hash);w&&(m.dumpLineNumbers=w[1]),m.watch=function(){return m.watchMode||(m.env="development",n()),this.watchMode=!0},m.unwatch=function(){return clearInterval(m.watchTimer),this.watchMode=!1},/!watch/.test(location.hash)&&m.watch();var b=null;if("development"!=m.env)try{b=t.localStorage===void 0?null:t.localStorage}catch(_){}var x=document.getElementsByTagName("link"),A=/^text\/(x-)?less$/;m.sheets=[];for(var P=0;x.length>P;P++)("stylesheet/less"===x[P].rel||x[P].rel.match(/stylesheet/)&&x[P].type.match(A))&&m.sheets.push(x[P]);var S="";m.modifyVars=function(t){var e=S;for(name in t)e+=("@"===name.slice(0,1)?"":"@")+name+": "+(";"===t[name].slice(-1)?t[name]:t[name]+";");(new m.Parser).parse(e,function(t,e){l(e.toCSS(),m.sheets[m.sheets.length-1])})},m.refresh=function(t){var e,n;e=n=new Date,o(function(t,i,o,r,s){s.local?d("loading "+r.href+" from cache."):(d("parsed "+r.href+" successfully."),l(i.toCSS(),r,s.lastModified)),d("css for "+r.href+" generated in "+(new Date-n)+"ms"),0===s.remaining&&d("css generated in "+(new Date-e)+"ms"),n=new Date},t),i()},m.refreshStyles=i,m.refresh("development"===m.env),"function"==typeof define&&define.amd&&define("less",[],function(){return m})}(window),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},o=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},r=[].slice;t=jQuery,e=function(){function e(e,n,o,r){var s,a=this;this.tam=e,this.name=n,this.speaker=o,this.adjustSelection=i(this.adjustSelection,this),null==r&&(r={}),this.locked="locked"in r?r.locked:!1,this.el=t('<div>\n<div class="emContainerTAM">\n    <div class="emphasisTAM"></div>\n</div>\n<div class="hlContainerTAM">\n    <div class="highlightsTAM"></div>\n</div>\n<div class="taContainerTAM">\n    <textarea class="txtAreaTAM" name="area'+n+'"></textarea>\n</div>\n<div class="overlayContainerTAM">\n    <div class="overlaysTAM"></div>\n</div>\n</div>'),this.hlContainer=this.el.find(".hlContainerTAM"),this.highlights=this.el.find(".highlightsTAM"),this.emContainer=this.el.find(".emContainerTAM"),this.emphasis=this.el.find(".emphasisTAM"),this.overlayContainer=this.el.find(".overlayContainerTAM"),this.overlays=this.el.find(".overlaysTAM"),this.taContainer=this.el.find(".taContainerTAM"),this.area=this.el.find(".txtAreaTAM"),s=[this.area,this.hlContainer,this.highlights,this.emContainer,this.emphasis,this.overlayContainer,this.overlays,this.taContainer],this.$containers=t(_.map(s,function(t){return t[0]})),this.area.bind("copy",function(){return a.tam.processCopy(a)}).bind("cut",function(t){return console.log("Cut not supported at this time"),t.preventDefault(),!1}).bind("paste",function(t){return a.locked?t.preventDefault():a.tam.processPaste(a,a.area.val())}).keypress(function(t){return t.which(function(){return 32})?t.preventDefault:void 0}).keydown(function(t){switch(t.which){case 8:return t.preventDefault(),a.locked||a.tam.processDelete(a,"backward"),!1;case 46:return t.preventDefault(),a.locked||a.tam.processDelete(a,"forward"),!1;case 37:case 38:case 39:case 40:if(t.shiftKey)return _.defer(a.snapSelectionToWord);break;case 13:return t.preventDefault();case 90:return!1;case 190:if(t.preventDefault(),!a.locked)return a.addPeriod()}}).bind("mousemove",function(){var t,e,n,i;return e=a.area.getSelection(),i=a.rangeIndices(e.start,e.end),n=i[0],t=i[1],a.tam.highlightWordsInWaveform(n,t,a)}).bind("mouseup",this.adjustSelection),this.overlays.bind("mouseup",this.adjustSelection)}return e.prototype.adjustSelection=function(){var t,e,n,i;return this.tam.lastFocused=this,this.snapSelectionToWord(),e=this.area.getSelection(),i=this.rangeIndices(e.start,e.end),n=i[0],t=i[1],this.tam.highlightWordsInWaveform(n,t,this)},e.prototype._renderWord=function(t,e,n,i){var r,s;return null==n&&(n=""),null==i&&(i=""),r=[".","?","!"],s=t.word[t.word.length-1],o.call(r,s)>=0?e?""+n+t.word+i+"\n":""+n+t.word+i+"<br />":""+n+t.word+i+" "},e.prototype.updateWords=function(t){var e,n,i=this;return t&&(this.words=t),n=this._renderWord,e=_.reduce(this.words,function(t,e){return("UH"===e.alignedWord||"UM"===e.alignedWord)&&(e.emph=!0),""+t+n(e,!0)},""),this.val(e),this.tam.dirtyTas.push(this),this.refresh(),0===this.words.length&&1!==this.tam.tas.length?_.defer(function(){return i.tam.removeTA(i)}):void 0},e.prototype.height=function(){return this.area.height()},e.prototype.val=function(t){return this.area.val(t)},e.prototype.refresh=function(){return this.updatePos(),this.adjustHeight()},e.prototype.adjustHeight=function(){var t;return this.area.height("20px"),t=this.area.prop("scrollHeight")+"px",this.$containers.height(t)},e.prototype.snapSelectionToWord=function(){var t,e,n,i,r,s,a,u,l,h;if(i=this.area.getSelection(),console.log(i),t=!1,e=!1,0!==i.length){if(/^\s+$/.exec(i.text)&&this.area.collapseSelection(),s=this.area.val(),r=[" ","\n"],i.length>0){for(;a=s.charAt(i.start),o.call(r,a)>=0&&(e=!0,i.start+1<i.end);)this.area.setSelection(i.start+1,i.end),i=this.area.getSelection();for(;u=s.charAt(i.start-1),0>o.call(r,u)&&""!==s.charAt(i.start-1)&&n!==i.length&&!e;)n=i.length,this.area.setSelection(i.start-1,i.end),i=this.area.getSelection();for(;l=s.charAt(i.end-1),o.call(r,l)>=0&&(t=!0,i.start<i.end-1);)this.area.setSelection(i.start,i.end-1),i=this.area.getSelection();for(;h=s.charAt(i.end),0>o.call(r,h)&&""!==s.charAt(i.end)&&n!==i.length&&!t;)n=i.length,this.area.setSelection(i.start,i.end+1),i=this.area.getSelection()}return console.log("end of snap",i)}},e.prototype.selectWord=function(t){var e,n,i,r,s,a;if(i=this.area.getSelection().start,r=this.area.val(),n=[" ","\n"],"backward"===t){for(e=i-1;s=r.charAt(e),o.call(n,s)>=0&&""!==r.charAt(e);)e-=1;this.area.setSelection(e,i)}else if("forward"===t){for(e=i+2;a=r.charAt(e),o.call(n,a)>=0&&""!==r.charAt(e);)e+=1;this.area.setSelection(i,e)}return this.snapSelectionToWord()},e.prototype.updatePos=function(){var t;return t=this.name,_.each(this.words,function(e,n,i){return i[n].taPos=this.total,i[n].taIdx=t,this.total+=e.word.length+1},{total:0})},e.prototype.rangeIndices=function(t,e){var n,i,o,r,s,a,u,l,h,c;for(h=this.words,i=s=0,u=h.length;u>s;i=++s)if(r=h[i],r.taPos>=t){o=i;break}for(c=this.words,i=a=0,l=c.length;l>a;i=++a)r=c[i],e>r.taPos&&(n=i);return[o,n]},e.prototype.range=function(t,e){var n,i,o,r,s,a;if(null==e){for(a=this.words,i=r=0,s=a.length;s>r;i=++r)if(o=a[i],o.taPos>=t){n=o.taPos;break}return[n,i]}return _.filter(this.words,function(n){return n.taPos>=t&&e>n.taPos})},e.prototype.addPeriod=function(){var t,e,n,i,o,r;return console.log("Adding a period"),r=this.area.getSelection(),o=this.range(r.end),0!==o[1]?(i=o[1]-1,console.log("adding period to word",this.words[i]),this.words[i].word+=".",n=this.tam.breathInds[this.speaker],e=n[Math.floor(Math.random()*n.length)],t=[e],"sp"===this.tam.words[e-1].alignedWord&&(t=[e-1,e]),"sp"===this.tam.words[e+1].alignedWord&&t.push(e+1),this.tam.insertWords(t,o.end,this)):void 0},e.prototype.highlightWords=function(t,e){var n,i;return i=this._renderWord,n=_.reduce(this.words,function(n,o,r){var s,a;return s="",a="",r!==t||r!==e-1&&null!=e?r===t?s="<span class='hl'>":r===e-1&&(a="</span>"):(s="<span class='hl'>",a="</span>"),""+n+i(o,!1,s,a)},""),this.highlights.html(n)},e.prototype.emphasizeWords=function(){var t,e,n;return t=[-1],n=this._renderWord,e=_.reduce(this.words,function(t,e){var i,o;return i="",o="",null!=e.origPos&&e.origPos-1!==this[0]&&(i+="<span class='editLocation'>",o+="</span>"),null!=e.emph&&e.emph&&(i+="<span class='emph'>",o+="</span>"),"sp"===e.alignedWord?(i+="<span class='pause'>",o+="</span>"):"{BR}"===e.alignedWord&&(i+="<span class='breath'>",o+="</span>"),this[0]=e.origPos,""+t+n(e,!1,i,o)},"",t),this.emphasis.html(e)},e.prototype.insertDupeOverlays=function(e,n){var i,o,r,s,a,u,l,h,c,p,d,f,m;return i=this.overlays,r={dupeOrder:[],bounds:[]},u=[],h=n.firsts,l=n.starts,p=this.tam.taIndexSpan[this.tam.tas.indexOf(this)],s='<span class="dropdown overlay">\n    <span class="dropdown-toggle">',a='    </span>\n    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">\n        <li class="disabled"><a><%= header %></a></li>\n        <% _.each(dupes[dupeIdx], function (elt) { %>\n            <li><span \n                   class="dupeOpt"\n                   tabindex="-1">\n                   <i class="icon-play dupePlayButton"></i>\n                   <div style="position:relative; display:inline-block">\n                   <span class="copyButton"><%= elt[1] %></span>\n                   </div>\n                </span>\n            </li>\n        <% }) %>\n    </ul>\n</span>',d=this._renderWord,c=this.locked,o=_.reduce(this.words,function(t,n,i,o){var r,u,p,f,m,g,v;if(p=h.indexOf(n.origPos),g="",v="",-1!==p){for(m=i,u=l[p],r=u.idxInDupes;o.length>m&&o[m].origPos>=u.dElt[0][0]&&o[m].origPos<=u.dElt[0][1];)m+=1;this.dupeOrder.push(r),this.bounds.push([i,m-1]),g=s,f=c?"Similar sentences (click to copy)":"Similar sentences",v=_.template(a,{header:f,dupeIdx:r,dupes:e})}return"sp"===n.alignedWord&&(g+="<span class='pauseOverlay'>",v+="</span>"),"{BR}"===n.alignedWord&&(g+="<span class='breathOverlay'>",v+="</span>"),""+t+d(n,!1,g,v)},"",r),i.html(o),f=this,m=this.area.width(),this.area.unbind(".tam").bind("click.tam",function(){return console.log("clicked on the box"),t(".dropdown.open").removeClass("open")}),i.find(".dropdown-toggle").dropdown().each(function(n){var i,o,s,a,u;return a=t(this).offset(),o=f.area.offset(),i=e[r.dupeOrder[n]],u=r.bounds[n][0],s=r.bounds[n][1],t(this).click(function(){return console.log("start",u,"end",s),f.area.setSelection(f.words[u].taPos,f.words[s].taPos+f.words[s].word.length)}).next(".dropdown-menu").css({left:""+(-a.left+o.left+10)+"px",width:""+(m-20)+"px"}).find("span.dupeOpt").each(function(e){var n,o,r;return c?(t(this).closest(".dropdown").addClass("open"),n=function(){r=[];for(var t=o=i[e][0][0],n=i[e][0][1];n>=o?n>=t:t>=n;n>=o?t++:t--)r.push(t);return r}.apply(this),t(this).find(".copyButton").attr("data-clipboard-text",f.tam.generateCopyTextFromIndices(n)).zclip({path:"static/swf/ZeroClipboard.swf",copy:f.tam.generateCopyTextFromIndices(n),afterCopy:function(){return f.area.focus(),console.log("COPPY",t(this).closest(".dropdown")),t(this).closest(".dropdown").removeClass("open")}}),t(this).find(".zclip").css({top:"-4px"}),t(this).closest(".dropdown").removeClass("open")):t(this).click(function(){var t;return t=f.replaceWords(u,s,i[e][0][0],i[e][0][1]),f.area.setSelection(t[0],t[1]),!1}),t(this).find(".dupePlayButton").click(function(n){var o,r;return r=f.tam.words[i[e][0][0]].start,o=f.tam.words[i[e][0][1]].end,TAAPP.origSound.play({from:1e3*r,to:1e3*o,onstop:function(){return t(this).closest(".dropdown").hasClass("open")?f.area.focus():void 0}}),n.stopPropagation()})})})},e.prototype.replaceWords=function(t,e,n,i){return this.tam.replaceWords(t,e,n,i,this,this.words[t].taPos)},e}(),n=function(){function n(e,n,i,o,r){var s,a,u,l,h,c=this;this.el=e,this.speakers=n,this.words=i,this.current=o,null==r&&(r={}),this.locked="locked"in r?r.locked:!1,this.textAlignedWf="wf"in r?r.wf:null,this.headerTable=t(document.createElement("table")).attr("width","100%").appendTo(this.el),this.container=t(document.createElement("div")).css({"overflow-x":"hidden","overflow-y":"auto"}).appendTo(this.el),this.table=t(document.createElement("table")).attr("width","100%").appendTo(this.container),a=t(document.createElement("tr")).appendTo(this.headerTable),_.each(this.speakers,function(e){var n;return n=document.createElement("th"),t(n).html(e).width(""+100/c.speakers.length+"%").appendTo(a)}),this.tas=[],this.taIndexSpan=[],this.areas=[],this.dirtyTas=[],this.draw(),this.breathInds={},h=this.speakers;for(u=0,l=h.length;l>u;u++)s=h[u],this.breathInds[s]=[];_.each(this.words,function(t,e){var n;if("{BR}"===t.alignedWord){for(n=e;c.words.length>n&&!("speaker"in c.words[n]);)n++;if(n===c.words.length)return;if("speaker"in c.words[n])return c.breathInds[c.words[n].speaker].push(e)}})}return n.prototype._tr=function(e){var n;return n=t(document.createElement("tr")),_.each(this.speakers,function(){var e;return e=t(document.createElement("td")),n.append(e)}),n.find("td").width(""+100/this.speakers.length+"%"),null!=e?n.insertAfter(e):n.appendTo(this.table),n},n.prototype._newScriptArea=function(t,n,i){var o;return o=new e(this,t,n,{locked:this.locked}),null!=i?(this.tas.splice(i,0,o),this.areas.splice(i,0,o.area)):(this.tas.push(o),this.areas.push(o.area)),o.el},n.prototype.refresh=function(){return this.dirtyTas=_.uniq(this.dirtyTas),this.updatePos(),this.adjustHeight(),this.emphasizeWords(),this.insertDupeOverlays(this.dupes,this.dupeInfo),null!=this.textAlignedWf&&t(this.textAlignedWf).textAlignedWaveform({currentWords:this.current}),this.dirtyTas=[]},n.prototype.adjustHeight=function(){var t,e,n,i,o,r,s;for(r=this.tas,n=0,o=r.length;o>n;n++)e=r[n],e.adjustHeight();for(t=i=0,s=this.tas.length;s>=0?s>i:i>s;t=s>=0?++i:--i)this.table.find("tr").eq(t).height(this.tas[t].height());return console.log("container height",window.innerHeight-this.el.offset().top-50),this.container.height(window.innerHeight-this.el.offset().top-50),console.log("el height",window.innerHeight-this.el.offset().top-50),this.el.height(window.innerHeight-this.el.offset().top-50)},n.prototype.draw=function(){var t,e,n=this;return this.table.find("tr").remove(),e=this.speakers[0],t=0,this.taIndexSpan=[0],_.each(this.current,function(i,o){var r,s;return 0===o?(r=0,s=n._tr(),s.find("td").eq(r).append(n._newScriptArea(t++,e))):null!=i.speaker&&i.speaker!==e?(n.taIndexSpan.push(o),r=n.speakers.indexOf(i.speaker),s=n._tr(),s.find("td").eq(r).append(n._newScriptArea(t++,i.speaker)),e=i.speaker):void 0}),_.each(this.taIndexSpan,function(t,e){var i;return i=e===n.taIndexSpan.length-1?n.current.slice(t):n.current.slice(t,n.taIndexSpan[e+1]),n.tas[e].updateWords(i)}),this.refresh(),this.lastFocused=this.tas[0]},n.prototype.pruneByTAPos=function(t,e,n){var i;return i=[],_.each(n.words,function(n,o){return n.taPos>=t&&e>n.taPos?i.push(o):void 0}),console.log("prune by TA",i[0],_.last(i)),this.pruneCurrent(i[0],_.last(i)+1,n)},n.prototype.pruneCurrent=function(t,e,n){var i,o,r,s,a,u,l;for(r=this.tas.indexOf(n),o=this.taIndexSpan[r],this.current.splice(t+o,e-t),console.log("offset",o,"start",t,"end",e),l=this.tas,i=a=0,u=l.length;u>a;i=++a)s=l[i],i>r&&(this.taIndexSpan[i]-=e-t);return r===this.tas.length-1?n.updateWords(this.current.slice(this.taIndexSpan[r])):(console.log("Prune current, updating ta with words",this.taIndexSpan[r],this.taIndexSpan[r+1]-1),n.updateWords(this.current.slice(this.taIndexSpan[r],this.taIndexSpan[r+1]))),this.refresh()},n.prototype.highlightWordsInWaveform=function(e,n,i){var o;return null!=this.textAlignedWf?(o=this.taIndexSpan[this.tas.indexOf(i)],t(this.textAlignedWf).textAlignedWaveform({highlightedWordsRange:[o+e,o+n+1]})):void 0},n.prototype.highlightWords=function(t,e){var n,i,o,r,s,a,u,l,h,c,p,d,f,m,g,v;if(-1!==t){if(!((null!=(f=this.currentHighlight)?f[0]:void 0)>t&&t+3>(null!=(m=this.currentHighlight)?m[0]:void 0))){for(this.currentHighlight=[t,e],g=this.tas,n=u=0,c=g.length;c>u&&(s=g[n],!(this.taIndexSpan[n]>t));n=++u);for(0!==n?(s=this.tas[n-1],o=this.taIndexSpan[n-1]):(s=this.tas[0],o=this.taIndexSpan[0]),v=this.tas,l=0,p=v.length;p>l;l++)r=v[l],r.highlights.html("");return null!=e&&(i=e-o),s.highlightWords(t-o,i)}}else for(this.currentHighlight=void 0,d=this.tas,a=0,h=d.length;h>a;a++)s=d[a],s.highlights.html("")},n.prototype.emphasizeWords=function(){var t,e,n,i,o;for(i=this.tas,o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push(t.emphasizeWords());return o},n.prototype.updatePos=function(){var t,e,n,i,o;for(this.highlightWords(-1),i=this.dirtyTas,o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push(t.updatePos());return o},n.prototype.clean=function(t){var e,n,i,o,r,s,a,u,l,h,c,p,d,f,m,g;for(h=this.tas.indexOf(t),r=this.taIndexSpan[h],u=[],s=[],l=[],g=t.words,n=f=0,m=g.length;m>f;n=++f)p=g[n],null!=p.speaker&&p.speaker!==i&&(u.push(n),l.push(p.speaker),s.push(p.speaker===t.speaker),i=p.speaker);return 1===s.length&&s[0]?(this.refresh(),void 0):2===s.length&&s[0]?(d=t.words.slice(u[1]),h===this.tas.length-1?(console.log("New row"),e=this.speakers.indexOf(l[1]),c=this._tr(this.table.find("tr").eq(h)),c.find("td").eq(e).append(this._newScriptArea(this.tas.length,l[1])),t.updateWords(t.words.slice(0,u[1])),this.tas[this.tas.length-1].updateWords(d),this.taIndexSpan.push(r+t.words.length),this.tas[this.tas.length-1].area.setSelection(0,0),this.refresh()):this.tas[h+1].speaker===l[1]?(console.log("Inserting in next row"),console.log(this.tas,h),o=this.tas[h+1],t.updateWords(t.words.slice(0,u[1])),o.updateWords(d.concat(o.words)),this.taIndexSpan[h+1]-=d.length,o.area.setSelection(0,0),this.refresh()):window.alert("should not get here (right wrong pattern)"),console.log("CLEAN: @tas",this.tas,"taIndexSpan",this.taIndexSpan),void 0):2===s.length&&s[1]?(d=t.words.slice(0,u[1]),0===h?(console.log("New row (wrong right)"),e=this.speakers.indexOf(l[0]),c=this._tr(this.table.find("tr").eq(h)),c.find("td").eq(e).append(this._newScriptArea(this.tas.length,l[0],0)),t.updateWords(t.words.slice(u[1])),this.tas[0].updateWords(d),this.taIndexSpan.splice(1,0,d.length)):this.tas[h-1].speaker===l[0]?(a=this.tas[h-1],t.updateWords(t.words.slice(u[1])),a.updateWords(a.words.concat(d)),this.taIndexSpan[h]+=d.length):window.alert("should not get here (wrong right pattern)"),t.area.setSelection(0,0),this.refresh(),void 0):(3===s.length&&(d=t.words.slice(0),e=this.speakers.indexOf(l[1]),c=this._tr(this.table.find("tr").eq(h)),c.find("td").eq(e).append(this._newScriptArea(this.tas.length,l[1],h+1)),e=this.speakers.indexOf(l[2]),c=this._tr(this.table.find("tr").eq(h+1)),c.find("td").eq(e).append(this._newScriptArea(this.tas.length,l[2],h+2)),t.updateWords(d.slice(0,u[1])),this.tas[h+1].updateWords(d.slice(u[1],u[2])),this.tas[h+2].updateWords(d.slice(u[2])),this.taIndexSpan.splice(h+1,0,this.taIndexSpan[h]+t.words.length,this.taIndexSpan[h]+t.words.length+this.tas[h+1].words.length),this.refresh(),this.tas[h+1].area.setSelection(0,0)),void 0)},n.prototype.processDelete=function(t,e){var n,i,r,s,a;for(window.TAAPP.sound&&window.TAAPP.sound.stop(),t.snapSelectionToWord(),i=t.area.getSelection(),0===i.length&&t.selectWord(e,!0),i=t.area.getSelection(),n=i.end,s=t.area.val(),r=[" ","\n"];a=s.charAt(n),o.call(r,a)>=0;)n+=1;return console.log("calling prune by ta pos with start",i.start,"end",n),this.pruneByTAPos(i.start,n,t),t.area.setSelection(i.start,i.start),this.refresh()},n.prototype.insertWords=function(t,e,n){var i,o,r,s,a,u,l,h,c,p,d,f,m,g;for(null==n&&(n=this.lastFocused),null==e&&(e=n.area.getSelection().start),l=this.tas.indexOf(n),u=this.taIndexSpan[l],m=n.words,s=p=0,f=m.length;f>p&&(h=m[s],!(h.taPos>=e));s=++p);for(o={first:void 0,last:void 0,words:this.words},_.isArray(t)||(t=[t]),c=_.map(t,function(t){var e,n,i;return"{gp"===(""+t).split("-")[0]?(e=clone(TAAPP.roomTone[TAAPP.speech]),e.word=t,e.pauseLength=parseFloat(t.split("-")[1]),null==(n=this.first)&&(this.first=e),this.last=e,e):(e=clone(this.words[t]),null==(i=this.first)&&(this.first=e),this.last=e,e)},o),i=[s+u,0].concat(c),Array.prototype.splice.apply(this.current,i),r=d=0,g=this.tas.length;g>=0?g>d:d>g;r=g>=0?++d:--d)r>l&&(this.taIndexSpan[r]+=c.length);return l===this.tas.length-1?n.updateWords(this.current.slice(this.taIndexSpan[l])):n.updateWords(this.current.slice(this.taIndexSpan[l],this.taIndexSpan[l+1])),this.clean(n),this.refresh(),a=o.last.taPos+o.last.word.length,n.area.setSelection(a,a)},n.prototype.processPaste=function(t,e){var n=this;return _.defer(function(){var i,r,s,a,u,l,h,c,p;if(s=/(?:\[(\d+|gp)\]([^|]+)\|)/g,r=!1,a=[],i=t.area.val(),l=t.area.getSelection(),h=[" ","\n"],0!==e.length-i.length+l.start&&(c=e.charAt(e.length-i.length+l.start),0>o.call(h,c))&&(p=e.charAt(e.length-i.length+l.start-1),0>o.call(h,p)))return t.area.val(e),n.refresh(),void 0;for(;u=s.exec(i);)r=!0,"gp"===u[1]?a.push(u[2]):a.push(parseInt(u[1],10));return r?(n.insertWords(a,e.length-i.length+l.start,t),console.log("taindexspan after clean",n.taIndexSpan),void 0):(t.area.val(e),n.refresh())})},n.prototype.generateCopyTextFromIndices=function(t){var e,n,i,o=this;return i=function(){var n,i,o;for(o=[],n=0,i=t.length;i>n;n++)e=t[n],o.push(this.current[e]);return o}.call(this),n=_.reduce(i,function(t,e){var n,i,r,s,a;if("gp"===e.alignedWord)return t+"[gp]"+e.word+"|";for(a=o.words,n=r=0,s=a.length;s>r&&(i=a[n],i.start!==e.start||i.end!==e.end);n=++r);return""+t+"["+n+"]"+e.word+"|"},"")},n.prototype.processCopy=function(e){var n,i,o,r,s,a=this;return r=window.getSelection(),i=document.createElement("div"),o=e.area.getSelection(),s=e.range(o.start,o.end),n=_.reduce(s,function(t,e){var n,i,o,r,s;if("gp"===e.alignedWord)return t+"[gp]"+e.word+"|";for(s=a.words,n=o=0,r=s.length;r>o&&(i=s[n],i.start!==e.start||i.end!==e.end);n=++o);return""+t+"["+n+"]"+e.word+"|"},""),t(i).css({position:"absolute",left:"-99999px"}).html(n).appendTo("body"),r.selectAllChildren(i),_.defer(function(){return t(i).remove()})},n.prototype.processCut=function(t){var e,n,i,o,r=this;return i=t.area.getSelection(),o=t.range(i.start,i.end),n=t.area.val(),e=_.reduce(o,function(t,e){var n,i,o,s,a;if("gp"===e.alignedWord)return t+"[gp]"+e.word+"|";for(a=r.words,n=o=0,s=a.length;s>o&&(i=a[n],i.start!==e.start||i.end!==e.end);n=++o);return""+t+"["+n+"]"+e.word+"|"},""),n=n.slice(0,i.start)+e+n.slice(i.end+1),t.area.val(n).setSelection(i.start,i.start+e.length)},n.prototype.insertDupeOverlays=function(t,e){var n,i,o,r,s;if(this.dupes=t,this.dupeInfo=e,null!=this.dupes){for(r=this.tas,s=[],i=0,o=r.length;o>i;i++)n=r[i],s.push(n.insertDupeOverlays(this.dupes,this.dupeInfo));return s}},n.prototype.replaceWords=function(t,e,n,i,o,r){return this.pruneCurrent(t,e+1,o),this.insertWords(_.range(n,i+1),r,o)},n.prototype.removeTA=function(t){var e;return e=this.tas.indexOf(t),this.tas.splice(e,1),this.taIndexSpan.splice(e,1),this.table.find("tr").eq(e).remove(),0!==e&&this.tas.length>e&&this.tas[e-1].speaker===this.tas[e].speaker&&(this.tas[e-1].updateWords(this.tas[e-1].words.concat(this.tas[e].words)),this.removeTA(this.tas[e])),this.refresh()
},n.prototype.log=function(){var t,e;return e=arguments.length>=1?r.call(arguments,0):[],t=["[TAM]"].concat(e),console.log.apply(console,t)},n}(),window.TextAreaManager=n}.call(this);var TAAPP=TAAPP||{},clone=function(t){var e=t instanceof Array?[]:{};for(i in t)e[i]=t[i]&&"object"==typeof t[i]?clone(t[i]):t[i];return e};soundManager.setup({url:"static/swf/soundmanager2_flash9.swf",flashVersion:9,useFlashBlock:!1,useHighPerformance:!0}),TAAPP.state={speechReauthor:{},speechSampleRate:44100,timelineHeight:100,timelineWidth:2e3},TAAPP.spinner=new Spinner({lines:13,length:26,width:9,radius:35,corners:1,rotate:0,color:"#0f82f5",speed:.8,trail:52,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"200px",left:"auto"}),TAAPP.bestBreathIndices=function(){var t=_.min(_.filter(TAAPP.words,function(t){return t.hasOwnProperty("breathLen")}),function(t){return t.breathLen}),e=[t.origPos];return"sp"===TAAPP.words[t.origPos+1].alignedWord&&e.push(t.origPos+1),e},TAAPP.allBreathIndices=function(){var t,e=_.filter(TAAPP.words,function(t){return t.hasOwnProperty("breathLen")}),n=[],i=[];for(t=0;e.length>t;t++)i=[e[t].origPos],"sp"===TAAPP.words[e[t].origPos+1].alignedWord&&i.push(i[0]+1),"sp"===TAAPP.words[e[t].origPos-1].alignedWord&&i.splice(0,0,e[t].origPos-1),n.push(i),i=[];return n},TAAPP.randomBreathIndices=function(){var t=_.filter(TAAPP.words,function(t){return t.hasOwnProperty("breathLen")}),e=t[Math.floor(Math.random()*t.length)],n=[e.origPos];return"sp"===TAAPP.words[e.origPos+1].alignedWord&&n.push(e.origPos+1),n},TAAPP._createBreathDropdown=function(){var t=TAAPP.allBreathIndices(),e=_.template($("#breathDropdownTemplate").html());$(".breathDropdown").append(e({breaths:t})).find(".breathPlayButton").each(function(e){$(this).click(function(n){var i=TAAPP.words[t[e][0]].start,o=TAAPP.words[_.last(t[e])].end;TAAPP.origSound.play({from:1e3*i,to:1e3*o}),n.stopPropagation()})}),$(".breathDropdown").find(".copyButton").each(function(e){$(this).click(function(){TAAPP.TAManager.insertWords(t[e])})})},TAAPP.insertBreath=function(){var t=TAAPP.randomBreathIndices();TAAPP.TAManager.insertWords(t)},TAAPP.globalBreathFill=function(){var t=/[\.:!\?]$/,e=[];_.each(TAAPP.current,function(n,i,o){if(null!==t.exec(n.word))for(;++i<o.length&&"{BR}"!==o[i].alignedWord;)if("gp"!==o[i].alignedWord&&"sp"!==o[i].alignedWord){e.push(i);break}});var n=0;_.each(e,function(t){var e=TAAPP.randomBreathIndices(),i=_.map(e,function(t){return TAAPP.words[t]}),o=[t+n,0].concat(i);n+=i.length,Array.prototype.splice.apply(TAAPP.current,o)}),TAAPP.updateTextArea(),TAAPP.updatePos()},TAAPP.generateAudio=function(){TAAPP.state.speechReauthor={words:TAAPP.current},TAAPP.state.exportedTimeline=TAAPP.$timeline.timeline("export"),console.log("exported timeline",TAAPP.state.exportedTimeline),TAAPP.spinner.spin($("body")[0]),$.ajax({url:"reauthor",type:"POST",dataType:"json",contentType:"json",data:JSON.stringify(TAAPP.state),success:function(t){void 0!==TAAPP.sound&&TAAPP.sound.destruct(),TAAPP.sound=TAAPP.createSound(t),TAAPP.spinner.stop()},error:function(){TAAPP.spinner.stop()}})},TAAPP.createSound=function(t){return soundManager.createSound({id:"speech",url:t.url+"?r="+parseInt(1e4*Math.random()),autoPlay:!0,autoLoad:!0,onplay:function(){$(".playBtn").html('<i class="icon-pause icon-white"></i>')},onresume:function(){$(".playBtn").html('<i class="icon-pause icon-white"></i>')},onpause:function(){$(".playBtn").html('<i class="icon-play icon-white"></i>')},onload:function(){TAAPP.timing=t.timing,_.each(t.timing,function(t,e){var n=1e3*t;this.onPosition(n,function(){TAAPP.TAManager.highlightWords(e)})},this);var e=1e3*(_.last(t.timing)+2);this.onPosition(e,function(){TAAPP.TAManager.highlightWords(-1)}),TAAPP.$timeline.timeline({sound:this})},onfinish:function(){TAAPP.TAManager.highlightWords(-1),TAAPP.$timeline.timeline("option","position",0)},whileplaying:function(){TAAPP.$timeline.timeline("option","position",this.position)}})},TAAPP.adjustHeight=function(){window.innerHeight-$("#editorRow").offset().top-50,TAAPP.TAManager.adjustHeight(),TAAPP.hasOwnProperty("sliders")&&TAAPP.sliders.each(function(){$(this).tabSlideOut("refresh")}),TAAPP.RawTAManager.adjustHeight(),TAAPP.hasOwnProperty("sliders")&&TAAPP.sliders.each(function(){$(this).tabSlideOut("refresh")})},TAAPP.playFromSelection=function(){var t,e=TAAPP.ta.getSelection(),n=TAAPP.currentRange(e.start),i=TAAPP.timing.length-1;for(console.log(n),console.log(TAAPP.timing),t=0;TAAPP.timing.length>t;t++)if(TAAPP.timing[t][0]>=n[1]){i=t-1;break}console.log(1e3*TAAPP.timing[i][1]),TAAPP.sound.stop(),TAAPP.sound.setPosition(1e3*TAAPP.timing[i][1]),TAAPP.sound.play()},TAAPP.roomTone={sedaris:{start:32.837,end:34.118,word:"{gpause}",alignedWord:"gp"},bullw:{start:123,end:124.266,word:"{gpause}",alignedWord:"gp"},scorerickard:{start:19.53,end:19.851,word:"{gpause}",alignedWord:"gp"},teleclip:{start:0,end:.557,word:"{gpause}",alignedWord:"gp"},bluesmobile:{start:333.334,end:334.249,word:"{gpause}",alignedWord:"gp"}},TAAPP.buildWaveform=function(t,e){var n=document.createElement("div");return"textaligned"===e?(console.log("creating text aligned waveform"),$(n).textAlignedWaveform({dur:t.duration,len:t.duration,filename:t.url,name:"Speech",currentWords:TAAPP.current}),TAAPP.currentWaveform=n,TAAPP.TAManager.textAlignedWf=TAAPP.currentWaveform):$(n).waveform({dur:t.duration,len:t.duration,name:t.id}),console.log("in buildWaveform",n),$.getJSON("static/wfData/"+TAAPP.speech+"44.wav.json",function(t){$(n).wf({data:t.mid})}),n},TAAPP.origSoundURL=function(){return void 0!==TAAPP.env&&"production"===TAAPP.env?"http://d1qv8gm47dmlns.cloudfront.net/mp3s/"+TAAPP.speech+".mp3":"static/"+TAAPP.speech+".mp3"},TAAPP.loadOriginal=function(){var t={url:TAAPP.origSoundURL(),id:"orig",autoLoad:!0,onload:function(){console.log("loaded original sound");var t=TAAPP.buildWaveform(this,"textaligned");TAAPP.$timeline.timeline({tracks:2,pxPerMs:.005,width:"100%",wf:[{elt:t,track:0,pos:0}]}),console.log("calling adjust height after timeline creation"),TAAPP.adjustHeight()},autoPlay:!1};void 0===TAAPP.origSound?soundManager.onready(function(){TAAPP.origSound=soundManager.createSound(t)}):(TAAPP.origSound.destruct(),TAAPP.origSound=soundManager.createSound(t))},TAAPP.reset=function(){TAAPP.state.speechAudio=TAAPP.speech+"44.wav",TAAPP.sound&&(TAAPP.sound.destruct(),TAAPP.sound=void 0),TAAPP.current=void 0,TAAPP.timing=void 0,TAAPP.dupes=void 0,TAAPP.currentWaveform=void 0;try{$(".timeline").timeline("destroy")}catch(t){}TAAPP.$timeline=$(".timeline"),$(".TAManager").html(""),TAAPP.TAManager=void 0,$(".rawTAManager").html(""),TAAPP.RawTAManager=void 0,$(".breathDropdown").html(""),$(".dupeList").html(""),TAAPP.state.outfile=TAAPP.speech+"-"+TAAPP.outfile,$(".dlLink").prop("href","download/"+TAAPP.state.outfile),$.getJSON("alignment/"+TAAPP.speech,function(t){var e=t.words;TAAPP.state.speechText=t.speechText,TAAPP.words=e,_.each(TAAPP.words,function(t,e){t.origPos=e}),TAAPP.current=clone(TAAPP.words),TAAPP.speakers=_.chain(TAAPP.words).map(function(t){return t.speaker}).filter(function(t){return!_.isUndefined(t)}).uniq().value(),TAAPP.TAManager=new TextAreaManager($(".TAManager"),TAAPP.speakers,TAAPP.words,TAAPP.current),TAAPP.updateDupes(),TAAPP._createBreathDropdown(),TAAPP.loadOriginal()})},TAAPP.updateDupes=function(){$.ajax({url:"dupes",type:"POST",dataType:"json",contentType:"json",data:JSON.stringify(TAAPP.state),success:function(t){TAAPP.dupes=t,TAAPP._preprocessDupes(),TAAPP.RawTAManager=new TextAreaManager($(".rawTAManager"),TAAPP.speakers,TAAPP.words,clone(TAAPP.current)),TAAPP.TAManager.insertDupeOverlays(TAAPP.dupes,TAAPP.dupeInfo),TAAPP.RawTAManager.insertDupeOverlays(TAAPP.dupes,TAAPP.dupeInfo)}})},TAAPP._preprocessDupes=function(){var t=_.flatten(_.compact(_.map(TAAPP.dupes,function(t,e){return 1!==t.length?_.map(t,function(n){return{firstWord:n[0][0],dupe:t,dElt:n,idxInDupes:e}}):!1}))),e=_.pluck(t,"firstWord");TAAPP.dupeInfo={starts:t,firsts:e}},TAAPP.drawScript=function(){_.each(TAAPP.dupes,function(t,e){var n=document.createElement("button"),i=document.createElement("button"),o=document.createElement("div");$(n).html('<i class="icon-play icon-white"></i>').addClass("btn btn-success").prop("type","button"),$(i).html('<i class="icon-plus icon-white"></i>').addClass("btn btn-primary"),$(o).addClass("scriptLine");var r=TAAPP.words[t[0][0][1]],s="";if(r.hasOwnProperty("speaker")&&(s=r.speaker+": "),1===t.length){$(n).click(function(){TAAPP.origSound.play({from:1e3*TAAPP.words[t[0][0][0]].start,to:1e3*TAAPP.words[t[0][0][1]].end})}),$(i).click(function(){var e=t[0][0];TAAPP.TAManager.insertWords(_.range(e[0],e[1]+1))});var a=document.createElement("div");$(a).addClass("btn-group").append(n).append(i);var u=document.createElement("span");$(u).text(s+t[0][1]).addClass("scriptLineText"),$(o).append(a).append(u),$(".dupeList").append(o)}else{var l=_.map(t,function(t,e){var n=document.createElement("option");return $(n).val(e).text(t[1]),n}),h=document.createElement("select");$(n).click(function(){var e=$(h).val(),n=t[e][0],i=TAAPP.words[n[0]].start,o=TAAPP.words[n[1]].end;TAAPP.origSound.play({from:1e3*i,to:1e3*o})}),$(i).click(function(){var e=$(h).val(),n=t[e][0];TAAPP.TAManager.insertWords(_.range(n[0],n[1]+1))}),$(h).append(l).prop("name","dupe"+e).addClass("span10"),$(o).addClass("input-prepend").append(n).append(i).append(h),$(".dupeList").append(o)}}),TAAPP.adjustHeight()},TAAPP.reauthor=function(){TAAPP.sound&&TAAPP.sound.pause(),TAAPP.TAManager.highlightWords(-1),TAAPP.generateAudio()},TAAPP.togglePlay=function(){TAAPP.sound?TAAPP.sound.togglePause():TAAPP.reauthor()},TAAPP._timelineClickMode="marker",TAAPP.toggleMode=function(t){"split"===t&&"split"===TAAPP._timelineClickMode?TAAPP._timelineClickMode="marker":"split"===t&&"split"!==TAAPP._timelineClickMode&&(TAAPP._timelineClickMode="split"),TAAPP.$timeline.timeline({clickMode:TAAPP._timelineClickMode})},TAAPP._zoom=function(t){var e=TAAPP.$timeline.timeline("option","pxPerMs");TAAPP.$timeline.timeline({pxPerMs:e*t})},TAAPP.zoomIn=function(){TAAPP._zoom(2)},TAAPP.zoomOut=function(){TAAPP._zoom(.5)},TAAPP.songInfo={},TAAPP.addSongToTimeline=function(t){var e=TAAPP.songInfo[t],n=document.createElement("div");$(n).musicWaveform({data:e.wfData,name:e.name,filename:e.path,dur:e.dur,len:e.dur,musicGraph:e.graph}),TAAPP.$timeline.timeline("addWaveform",{elt:n,track:1,pos:0})},TAAPP.addSongToLibrary=function(t){var e=$("#songLibraryTemplate").html();TAAPP.songInfo[t.name]=t,$(_.template(e,{name:t.name,title:t.title,artist:t.artist})).appendTo(".musicLibrary table").find("button").click(function(){TAAPP.addSongToTimeline($(this).attr("data-song-name"))})},TAAPP.uploadSong=function(t){var e=new FormData(t);return TAAPP.spinner.spin($("body")[0]),$.ajax({url:"uploadSong",type:"POST",success:function(e){$(t).find('[data-dismiss="fileupload"]').trigger("click"),TAAPP.addSongToLibrary(e),TAAPP.spinner.stop()},error:function(){TAAPP.spinner.stop()},data:e,cache:!1,contentType:!1,processData:!1}),!1},TAAPP.loadSite=function(){$(".gPause").click(function(){var t=clone(TAAPP.roomTone[TAAPP.speech]);return t.pauseLength=parseFloat($(".gpLen").val()),t.word="{gp-"+t.pauseLength+"}",TAAPP.TAManager.insertWords([t.word]),!1}),$(".genLink").click(TAAPP.reauthor),$(".playBtn").click(TAAPP.togglePlay),$(".zoomInBtn").click(TAAPP.zoomIn),$(".zoomOutBtn").click(TAAPP.zoomOut),$(".razorBtn").click(function(){$(this).toggleClass("buttonActive"),TAAPP.toggleMode("split")}),$("#songUploadForm").submit(function(){return TAAPP.uploadSong($("#songUploadForm")[0]),!1}),$(window).resize(function(){TAAPP.adjustHeight(),TAAPP.TAManager.insertDupeOverlays(TAAPP.dupes,TAAPP.dupeInfo)}),$("#editorRow"),TAAPP.sliders=$(".tabSlider"),$(".origSlider").tabSlideOut({tabHandle:".origSliderHandle",tabLocation:"right",speed:300,action:"click",topPos:"0px",leftPos:"20px",pathToTabImage:"static/img/origSlider.png",imageHeight:"200px",imageWidth:"20px",height:function(){return $("#editorRow").height()},topReferenceElement:$("#editorRow")}),$(".browserSlider").tabSlideOut({tabHandle:".browserSliderHandle",tabLocation:"right",speed:300,action:"click",topPos:"220px",leftPos:"20px",pathToTabImage:"static/img/musicBrowserSlider.png",imageHeight:"200px",imageWidth:"20px",topReferenceElement:$("#editorRow"),height:function(){return $("#editorRow").height()}})},TAAPP.newProject=function(){TAAPP.speech=$("select[name=speechSelect]").val(),TAAPP.reset()},$(function(){$("#setupModal").modal().find(".createProjectBtn").click(TAAPP.newProject),TAAPP.loadSite()});