function getParameterByName(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e="[\\?&]"+t+"=([^&#]*)",n=RegExp(e),i=n.exec(window.location.search);return null==i?"":decodeURIComponent(i[1].replace(/\+/g," "))}function Animator(t){this.setOptions(t);var e=this;this.timerDelegate=function(){e.onTimerEvent()},this.subjects=[],this.subjectScopes=[],this.target=0,this.state=0,this.lastTime=null}function NumericalStyleSubject(t,e,n,i,o){this.els=Animator.makeArray(t),this.property="opacity"==e&&window.ActiveXObject?"filter":Animator.camelize(e),this.from=parseFloat(n),this.to=parseFloat(i),this.units=null!=o?o:"px"}function ColorStyleSubject(t,e,n,i){this.els=Animator.makeArray(t),this.property=Animator.camelize(e),this.to=this.expandColor(i),this.from=this.expandColor(n),this.origFrom=n,this.origTo=i}function DiscreteStyleSubject(t,e,n,i,o){this.els=Animator.makeArray(t),this.property=Animator.camelize(e),this.from=n,this.to=i,this.threshold=o||.5}function CSSStyleSubject(t,e,n){if(t=Animator.makeArray(t),this.subjects=[],0!=t.length){var i,o,r;if(n)r=this.parseStyle(e,t[0]),o=this.parseStyle(n,t[0]);else{o=this.parseStyle(e,t[0]),r={};for(i in o)r[i]=CSSStyleSubject.getStyle(t[0],i)}var i;for(i in r)r[i]==o[i]&&(delete r[i],delete o[i]);var i,s,a,l,u,h;for(i in r){var c=r[i]+"",d=o[i]+"";if(null!=o[i]){if(u=ColorStyleSubject.parseColor(c))h=ColorStyleSubject.parseColor(d),l=ColorStyleSubject;else if(c.match(CSSStyleSubject.numericalRe)&&d.match(CSSStyleSubject.numericalRe)){u=parseFloat(c),h=parseFloat(d),l=NumericalStyleSubject,a=CSSStyleSubject.numericalRe.exec(c);var p=CSSStyleSubject.numericalRe.exec(d);s=null!=a[1]?a[1]:null!=p[1]?p[1]:p}else{if(!c.match(CSSStyleSubject.discreteRe)||!d.match(CSSStyleSubject.discreteRe)){window.DEBUG&&alert("Unrecognised format for value of "+i+": '"+r[i]+"'");continue}u=c,h=d,l=DiscreteStyleSubject,s=0}this.subjects[this.subjects.length]=new l(t,i,u,h,s)}else window.DEBUG&&alert("No to style provided for '"+i+'"')}}}function AnimatorChain(t,e){this.animators=t,this.setOptions(e);for(var n=0;this.animators.length>n;n++)this.listenTo(this.animators[n]);this.forwards=!1,this.current=0}function Accordion(t){this.setOptions(t);var e,n=this.options.initialSection;this.options.rememberance&&(e=document.location.hash.substring(1)),this.rememberanceTexts=[],this.ans=[];for(var i=this,o=0;this.options.sections.length>o;o++){var r=this.options.sections[o],s=new Animator(this.options.animatorOptions),a=this.options.from+this.options.shift*o,l=this.options.to+this.options.shift*o;s.addSubject(new NumericalStyleSubject(r,this.options.property,a,l,this.options.units)),s.jumpTo(0);var u=this.options.getActivator(r);u.index=o,u.onclick=function(){i.show(this.index)},this.ans[this.ans.length]=s,this.rememberanceTexts[o]=u.innerHTML.replace(/\s/g,""),this.rememberanceTexts[o]===e&&(n=o)}this.show(n)}function kdTree(t,e,n){function i(t,e){this.obj=t,this.left=null,this.right=null,this.dimension=e}function o(t,e){var r=e%n.length;if(0==t.length)return null;if(1==t.length)return new i(t[0],r);t.sort(function(t,e){return t[n[r]]-e[n[r]]});var s=Math.floor(t.length/2),a=new i(t[s],r);return a.left=o(t.slice(0,s),e+1),a.right=o(t.slice(s+1),e+1),a}function r(t){this.content=[],this.scoreFunction=t}var s=o(t,0);this.nearest=function(t,i,o){function a(o){function r(t,e){bestNodes.push([t,e]),bestNodes.size()>i&&bestNodes.pop()}for(var s,l=n[o.dimension],u=e(t,o.obj),h={},c=0;n.length>c;c++)h[n[c]]=c==o.dimension?t[n[c]]:o.obj[n[c]];var d=e(h,o.obj);if(null==o.right&&null==o.left)return(i>bestNodes.size()||bestNodes.peek()[1]>u)&&r(o,u),void 0;if(s=null==o.right?o.left:null==o.left?o.right:t[l]<o.obj[l]?o.left:o.right,a(s),(i>bestNodes.size()||bestNodes.peek()[1]>u)&&r(o,u),i>bestNodes.size()||Math.abs(d)<bestNodes.peek()[1]){var p;p=s==o.left?o.right:o.left,null!=p&&a(p)}}if(bestNodes=new r(function(t){return-t[1]}),o)for(var l=0;i>l;l++)bestNodes.push([null,o]);a(s);for(var u=[],l=0;i>l;l++)bestNodes.content[l][0]&&u.push([bestNodes.content[l][0].obj,bestNodes.content[l][1]]);return u},r.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var e=this.content.length,n=0;e>n;n++)if(this.content[n]==t){var i=this.content.pop();return n!=e-1&&(this.content[n]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.bubbleUp(n):this.sinkDown(n)),void 0}throw Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t];t>0;){var n=Math.floor((t+1)/2)-1,i=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[n]=e,this.content[t]=i,t=n}},sinkDown:function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var o=2*(t+1),r=o-1,s=null;if(e>r){var a=this.content[r],l=this.scoreFunction(a);i>l&&(s=r)}if(e>o){var u=this.content[o],h=this.scoreFunction(u);(null==s?i:l)>h&&(s=o)}if(null==s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}}}(function(){var t=this,e=t._,n={},i=Array.prototype,o=Object.prototype,r=Function.prototype,s=i.push,a=i.slice,l=i.concat,u=o.toString,h=o.hasOwnProperty,c=i.forEach,d=i.map,p=i.reduce,f=i.reduceRight,g=i.filter,m=i.every,v=i.some,y=i.indexOf,b=i.lastIndexOf,_=Array.isArray,w=Object.keys,S=r.bind,P=function(t){return t instanceof P?t:this instanceof P?(this._wrapped=t,void 0):new P(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=P),exports._=P):t._=P,P.VERSION="1.4.4";var A=P.each=P.forEach=function(t,e,i){if(null!=t)if(c&&t.forEach===c)t.forEach(e,i);else if(t.length===+t.length){for(var o=0,r=t.length;r>o;o++)if(e.call(i,t[o],o,t)===n)return}else for(var s in t)if(P.has(t,s)&&e.call(i,t[s],s,t)===n)return};P.map=P.collect=function(t,e,n){var i=[];return null==t?i:d&&t.map===d?t.map(e,n):(A(t,function(t,o,r){i[i.length]=e.call(n,t,o,r)}),i)};var T="Reduce of empty array with no initial value";P.reduce=P.foldl=P.inject=function(t,e,n,i){var o=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return i&&(e=P.bind(e,i)),o?t.reduce(e,n):t.reduce(e);if(A(t,function(t,r,s){o?n=e.call(i,n,t,r,s):(n=t,o=!0)}),!o)throw new TypeError(T);return n},P.reduceRight=P.foldr=function(t,e,n,i){var o=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return i&&(e=P.bind(e,i)),o?t.reduceRight(e,n):t.reduceRight(e);var r=t.length;if(r!==+r){var s=P.keys(t);r=s.length}if(A(t,function(a,l,u){l=s?s[--r]:--r,o?n=e.call(i,n,t[l],l,u):(n=t[l],o=!0)}),!o)throw new TypeError(T);return n},P.find=P.detect=function(t,e,n){var i;return x(t,function(t,o,r){return e.call(n,t,o,r)?(i=t,!0):void 0}),i},P.filter=P.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(A(t,function(t,o,r){e.call(n,t,o,r)&&(i[i.length]=t)}),i)},P.reject=function(t,e,n){return P.filter(t,function(t,i,o){return!e.call(n,t,i,o)},n)},P.every=P.all=function(t,e,i){e||(e=P.identity);var o=!0;return null==t?o:m&&t.every===m?t.every(e,i):(A(t,function(t,r,s){return(o=o&&e.call(i,t,r,s))?void 0:n}),!!o)};var x=P.some=P.any=function(t,e,i){e||(e=P.identity);var o=!1;return null==t?o:v&&t.some===v?t.some(e,i):(A(t,function(t,r,s){return o||(o=e.call(i,t,r,s))?n:void 0}),!!o)};P.contains=P.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):x(t,function(t){return t===e})},P.invoke=function(t,e){var n=a.call(arguments,2),i=P.isFunction(e);return P.map(t,function(t){return(i?e:t[e]).apply(t,n)})},P.pluck=function(t,e){return P.map(t,function(t){return t[e]})},P.where=function(t,e,n){return P.isEmpty(e)?n?null:[]:P[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},P.findWhere=function(t,e){return P.where(t,e,!0)},P.max=function(t,e,n){if(!e&&P.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!e&&P.isEmpty(t))return-1/0;var i={computed:-1/0,value:-1/0};return A(t,function(t,o,r){var s=e?e.call(n,t,o,r):t;s>=i.computed&&(i={value:t,computed:s})}),i.value},P.min=function(t,e,n){if(!e&&P.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!e&&P.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return A(t,function(t,o,r){var s=e?e.call(n,t,o,r):t;i.computed>s&&(i={value:t,computed:s})}),i.value},P.shuffle=function(t){var e,n=0,i=[];return A(t,function(t){e=P.random(n++),i[n-1]=i[e],i[e]=t}),i};var C=function(t){return P.isFunction(t)?t:function(e){return e[t]}};P.sortBy=function(t,e,n){var i=C(e);return P.pluck(P.map(t,function(t,e,o){return{value:t,index:e,criteria:i.call(n,t,e,o)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index<e.index?-1:1}),"value")};var D=function(t,e,n,i){var o={},r=C(e||P.identity);return A(t,function(e,s){var a=r.call(n,e,s,t);i(o,a,e)}),o};P.groupBy=function(t,e,n){return D(t,e,n,function(t,e,n){(P.has(t,e)?t[e]:t[e]=[]).push(n)})},P.countBy=function(t,e,n){return D(t,e,n,function(t,e){P.has(t,e)||(t[e]=0),t[e]++})},P.sortedIndex=function(t,e,n,i){n=null==n?P.identity:C(n);for(var o=n.call(i,e),r=0,s=t.length;s>r;){var a=r+s>>>1;o>n.call(i,t[a])?r=a+1:s=a}return r},P.toArray=function(t){return t?P.isArray(t)?a.call(t):t.length===+t.length?P.map(t,P.identity):P.values(t):[]},P.size=function(t){return null==t?0:t.length===+t.length?t.length:P.keys(t).length},P.first=P.head=P.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:a.call(t,0,e)},P.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},P.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},P.rest=P.tail=P.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},P.compact=function(t){return P.filter(t,P.identity)};var k=function(t,e,n){return A(t,function(t){P.isArray(t)?e?s.apply(n,t):k(t,e,n):n.push(t)}),n};P.flatten=function(t,e){return k(t,e,[])},P.without=function(t){return P.difference(t,a.call(arguments,1))},P.uniq=P.unique=function(t,e,n,i){P.isFunction(e)&&(i=n,n=e,e=!1);var o=n?P.map(t,n,i):t,r=[],s=[];return A(o,function(n,i){(e?i&&s[s.length-1]===n:P.contains(s,n))||(s.push(n),r.push(t[i]))}),r},P.union=function(){return P.uniq(l.apply(i,arguments))},P.intersection=function(t){var e=a.call(arguments,1);return P.filter(P.uniq(t),function(t){return P.every(e,function(e){return P.indexOf(e,t)>=0})})},P.difference=function(t){var e=l.apply(i,a.call(arguments,1));return P.filter(t,function(t){return!P.contains(e,t)})},P.zip=function(){for(var t=a.call(arguments),e=P.max(P.pluck(t,"length")),n=Array(e),i=0;e>i;i++)n[i]=P.pluck(t,""+i);return n},P.object=function(t,e){if(null==t)return{};for(var n={},i=0,o=t.length;o>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},P.indexOf=function(t,e,n){if(null==t)return-1;var i=0,o=t.length;if(n){if("number"!=typeof n)return i=P.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,o+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;o>i;i++)if(t[i]===e)return i;return-1},P.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(b&&t.lastIndexOf===b)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var o=i?n:t.length;o--;)if(t[o]===e)return o;return-1},P.range=function(t,e,n){1>=arguments.length&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),o=0,r=Array(i);i>o;)r[o++]=t,t+=n;return r},P.bind=function(t,e){if(t.bind===S&&S)return S.apply(t,a.call(arguments,1));var n=a.call(arguments,2);return function(){return t.apply(e,n.concat(a.call(arguments)))}},P.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},P.bindAll=function(t){var e=a.call(arguments,1);return 0===e.length&&(e=P.functions(t)),A(e,function(e){t[e]=P.bind(t[e],t)}),t},P.memoize=function(t,e){var n={};return e||(e=P.identity),function(){var i=e.apply(this,arguments);return P.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},P.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},P.defer=function(t){return P.delay.apply(P,[t,1].concat(a.call(arguments,1)))},P.throttle=function(t,e){var n,i,o,r,s=0,a=function(){s=new Date,o=null,r=t.apply(n,i)};return function(){var l=new Date,u=e-(l-s);return n=this,i=arguments,0>=u?(clearTimeout(o),o=null,s=l,r=t.apply(n,i)):o||(o=setTimeout(a,u)),r}},P.debounce=function(t,e,n){var i,o;return function(){var r=this,s=arguments,a=function(){i=null,n||(o=t.apply(r,s))},l=n&&!i;return clearTimeout(i),i=setTimeout(a,e),l&&(o=t.apply(r,s)),o}},P.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},P.wrap=function(t,e){return function(){var n=[t];return s.apply(n,arguments),e.apply(this,n)}},P.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},P.after=function(t,e){return 0>=t?e():function(){return 1>--t?e.apply(this,arguments):void 0}},P.keys=w||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)P.has(t,n)&&(e[e.length]=n);return e},P.values=function(t){var e=[];for(var n in t)P.has(t,n)&&e.push(t[n]);return e},P.pairs=function(t){var e=[];for(var n in t)P.has(t,n)&&e.push([n,t[n]]);return e},P.invert=function(t){var e={};for(var n in t)P.has(t,n)&&(e[t[n]]=n);return e},P.functions=P.methods=function(t){var e=[];for(var n in t)P.isFunction(t[n])&&e.push(n);return e.sort()},P.extend=function(t){return A(a.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},P.pick=function(t){var e={},n=l.apply(i,a.call(arguments,1));return A(n,function(n){n in t&&(e[n]=t[n])}),e},P.omit=function(t){var e={},n=l.apply(i,a.call(arguments,1));for(var o in t)P.contains(n,o)||(e[o]=t[o]);return e},P.defaults=function(t){return A(a.call(arguments,1),function(e){if(e)for(var n in e)null==t[n]&&(t[n]=e[n])}),t},P.clone=function(t){return P.isObject(t)?P.isArray(t)?t.slice():P.extend({},t):t},P.tap=function(t,e){return e(t),t};var M=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof P&&(t=t._wrapped),e instanceof P&&(e=e._wrapped);var o=u.call(t);if(o!=u.call(e))return!1;switch(o){case"[object String]":return t==e+"";case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var r=n.length;r--;)if(n[r]==t)return i[r]==e;n.push(t),i.push(e);var s=0,a=!0;if("[object Array]"==o){if(s=t.length,a=s==e.length)for(;s--&&(a=M(t[s],e[s],n,i)););}else{var l=t.constructor,h=e.constructor;if(l!==h&&!(P.isFunction(l)&&l instanceof l&&P.isFunction(h)&&h instanceof h))return!1;for(var c in t)if(P.has(t,c)&&(s++,!(a=P.has(e,c)&&M(t[c],e[c],n,i))))break;if(a){for(c in e)if(P.has(e,c)&&!s--)break;a=!s}}return n.pop(),i.pop(),a};P.isEqual=function(t,e){return M(t,e,[],[])},P.isEmpty=function(t){if(null==t)return!0;if(P.isArray(t)||P.isString(t))return 0===t.length;for(var e in t)if(P.has(t,e))return!1;return!0},P.isElement=function(t){return!(!t||1!==t.nodeType)},P.isArray=_||function(t){return"[object Array]"==u.call(t)},P.isObject=function(t){return t===Object(t)},A(["Arguments","Function","String","Number","Date","RegExp"],function(t){P["is"+t]=function(e){return u.call(e)=="[object "+t+"]"}}),P.isArguments(arguments)||(P.isArguments=function(t){return!(!t||!P.has(t,"callee"))}),true&&(P.isFunction=function(t){return"function"==typeof t}),P.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},P.isNaN=function(t){return P.isNumber(t)&&t!=+t},P.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==u.call(t)},P.isNull=function(t){return null===t},P.isUndefined=function(t){return void 0===t},P.has=function(t,e){return h.call(t,e)},P.noConflict=function(){return t._=e,this},P.identity=function(t){return t},P.times=function(t,e,n){for(var i=Array(t),o=0;t>o;o++)i[o]=e.call(n,o);return i},P.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};I.unescape=P.invert(I.escape);var j={escape:RegExp("["+P.keys(I.escape).join("")+"]","g"),unescape:RegExp("("+P.keys(I.unescape).join("|")+")","g")};P.each(["escape","unescape"],function(t){P[t]=function(e){return null==e?"":(""+e).replace(j[t],function(e){return I[t][e]})}}),P.result=function(t,e){if(null==t)return null;var n=t[e];return P.isFunction(n)?n.call(t):n},P.mixin=function(t){A(P.functions(t),function(e){var n=P[e]=t[e];P.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),R.call(this,n.apply(P,t))}})};var E=0;P.uniqueId=function(t){var e=++E+"";return t?t+e:e},P.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\t|\u2028|\u2029/g;P.template=function(t,e,n){var i;n=P.defaults({},n,P.templateSettings);var o=RegExp([(n.escape||O).source,(n.interpolate||O).source,(n.evaluate||O).source].join("|")+"|$","g"),r=0,s="__p+='";t.replace(o,function(e,n,i,o,a){return s+=t.slice(r,a).replace(F,function(t){return"\\"+L[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),o&&(s+="';\n"+o+"\n__p+='"),r=a+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return i(e,P);var l=function(t){return i.call(this,t,P)};return l.source="function("+(n.variable||"obj")+"){\n"+s+"}",l},P.chain=function(t){return P(t).chain()};var R=function(t){return this._chain?P(t).chain():t};P.mixin(P),A(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];P.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],R.call(this,n)}}),A(["concat","join","slice"],function(t){var e=i[t];P.prototype[t]=function(){return R.call(this,e.apply(this._wrapped,arguments))}}),P.extend(P.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this),!function(t,e,n){function i(t,n){var i,o=e.createElement(t||"div");for(i in n)o[i]=n[i];return o}function o(t){for(var e=1,n=arguments.length;n>e;e++)t.appendChild(arguments[e]);return t}function r(t,e,n,i){var o=["opacity",e,~~(100*t),n,i].join("-"),r=.01+100*(n/i),s=Math.max(1-(1-t)/e*(100-r),t),a=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return p[o]||(f.insertRule("@"+l+"keyframes "+o+"{"+"0%{opacity:"+s+"}"+r+"%{opacity:"+t+"}"+(r+.01)+"%{opacity:1}"+(r+e)%100+"%{opacity:"+t+"}"+"100%{opacity:"+s+"}"+"}",f.cssRules.length),p[o]=1),o}function s(t,e){var i,o,r=t.style;if(r[e]!==n)return e;for(e=e.charAt(0).toUpperCase()+e.slice(1),o=0;d.length>o;o++)if(i=d[o]+e,r[i]!==n)return i}function a(t,e){for(var n in e)t.style[s(t,n)||n]=e[n];return t}function l(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var o in i)t[o]===n&&(t[o]=i[o])}return t}function u(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function h(t){return this.spin?(this.opts=l(t||{},h.defaults,g),n):new h(t)}var c,d=["webkit","Moz","ms","O"],p={},f=function(){var t=i("style",{type:"text/css"});return o(e.getElementsByTagName("head")[0],t),t.sheet||t.styleSheet}(),g={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};h.defaults={},l(h.prototype,{spin:function(t){this.stop();var e,n,o=this,r=o.opts,s=o.el=a(i(0,{className:r.className}),{position:r.position,width:0,zIndex:r.zIndex}),l=r.radius+r.length+r.width;if(t&&(t.insertBefore(s,t.firstChild||null),n=u(t),e=u(s),a(s,{left:("auto"==r.left?n.x-e.x+(t.offsetWidth>>1):parseInt(r.left,10)+l)+"px",top:("auto"==r.top?n.y-e.y+(t.offsetHeight>>1):parseInt(r.top,10)+l)+"px"})),s.setAttribute("aria-role","progressbar"),o.lines(s,o.opts),!c){var h=0,d=r.fps,p=d/r.speed,f=(1-r.opacity)/(p*r.trail/100),g=p/r.lines;(function m(){h++;for(var t=r.lines;t;t--){var e=Math.max(1-(h+t*g)%p*f,r.opacity);o.opacity(s,r.lines-t,e,r)}o.timeout=o.el&&setTimeout(m,~~(1e3/d))})()}return o},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=n),this},lines:function(t,e){function n(t,n){return a(i(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*l+e.rotate)+"deg) translate("+e.radius+"px"+",0)",borderRadius:(e.corners*e.width>>1)+"px"})}for(var s,l=0;e.lines>l;l++)s=a(i(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:c&&r(e.opacity,e.trail,l,e.lines)+" "+1/e.speed+"s linear infinite"}),e.shadow&&o(s,a(n("#000","0 0 4px #000"),{top:"2px"})),o(t,o(s,n(e.color,"0 0 1px rgba(0,0,0,.1)")));return t},opacity:function(t,e,n){t.childNodes.length>e&&(t.childNodes[e].style.opacity=n)}}),function(){function t(t,e){return i("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}var e=a(i("group"),{behavior:"url(#default#VML)"});!s(e,"transform")&&e.adj?(f.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(e,n){function i(){return a(t("group",{coordsize:u+" "+u,coordorigin:-l+" "+-l}),{width:u,height:u})}function r(e,r,s){o(c,o(a(i(),{rotation:360/n.lines*e+"deg",left:~~r}),o(a(t("roundrect",{arcsize:n.corners}),{width:l,height:n.width,left:n.radius,top:-n.width>>1,filter:s}),t("fill",{color:n.color,opacity:n.opacity}),t("stroke",{opacity:0}))))}var s,l=n.length+n.width,u=2*l,h=2*-(n.width+n.length)+"px",c=a(i(),{position:"absolute",top:h,left:h});if(n.shadow)for(s=1;n.lines>=s;s++)r(s,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(s=1;n.lines>=s;s++)r(s);return o(e,c)},h.prototype.opacity=function(t,e,n,i){var o=t.firstChild;i=i.shadow&&i.lines||0,o&&o.childNodes.length>e+i&&(o=o.childNodes[e+i],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=n))}):c=s(e,"animation")}(),"function"==typeof define&&define.amd?define(function(){return h}):t.Spinner=h}(window,document),function(t,e){function n(n,i){function o(t){return de.preferFlash&&se&&!de.ignoreFlash&&de.flash[t]!==e&&de.flash[t]}function r(t){return function(e){var n=this._s;return n&&n._a?e=t.call(this,e):(n&&n.id?de._wD(n.id+": Ignoring "+e.type):de._wD(ge+"Ignoring "+e.type),e=null),e}}this.setupOptions={url:n||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!0,noSWFCache:!1},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=i||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20130101",this.altURL=this.movieURL=this.version=null,this.enabled=this.swfLoaded=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.didFlashBlock=this.muted=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.ignoreFlash=this.html5Only=!1;var s,a,l,u,h,c,d,p,f,g,m,v,y,b,_,w,S,P,A,T,x,C,D,k,M,I,j,E,O,L,F,R,B,N,$,H,W,U,q,z,V,J,G,X,Q,K,Y,Z,te,ee,ne,ie,oe,re,se,ae,le,ue,he,ce,de=this,pe=null,fe=null,ge="HTML5::",me=navigator.userAgent,ve=""+t.location.href,ye=document,be=[],_e=!0,we=!1,Se=!1,Pe=!1,Ae=!1,Te=!1,xe=0,Ce=["log","info","warn","error"],De=null,ke=null,Me=!1,Ie=!1,je=0,Ee=null,Oe=[],Le=null,Fe=Array.prototype.slice,Re=!1,Be=me.match(/(ipad|iphone|ipod)/i),Ne=me.match(/android/i),$e=me.match(/msie/i),He=me.match(/webkit/i),We=me.match(/safari/i)&&!me.match(/chrome/i),Ue=me.match(/opera/i),qe=me.match(/(mobile|pre\/|xoom)/i)||Be||Ne,ze=!ve.match(/usehtml5audio/i)&&!ve.match(/sm2\-ignorebadua/i)&&We&&!me.match(/silk/i)&&me.match(/OS X 10_6_([3-7])/i),Ve=t.console!==e&&console.log!==e,Je=ye.hasFocus!==e?ye.hasFocus():null,Ge=We&&(ye.hasFocus===e||!ye.hasFocus()),Xe=!Ge,Qe=/(mp3|mp4|mpa|m4a|m4b)/i,Ke=ye.location?ye.location.protocol.match(/http/i):null,Ye=Ke?"":"http://",Ze=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,tn="mpeg4 aac flv mov mp4 m4v f4v m4a m4b mp4v 3gp 3g2".split(" "),en=RegExp("\\.("+tn.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!Ke;var nn;try{nn=Audio!==e&&(Ue&&opera!==e&&10>opera.version()?new Audio(null):new Audio).canPlayType!==e}catch(on){nn=!1}this.hasHTML5=nn,this.setup=function(t){var n=!de.url;return t!==e&&Pe&&Le&&de.ok()&&(t.flashVersion!==e||t.url!==e||t.html5Test!==e)&&z(N("setupLate")),m(t),n&&M&&t.url!==e&&de.beginDelayedInit(),!M&&t.url!==e&&"complete"===ye.readyState&&setTimeout(D,1),de},this.supported=this.ok=function(){return Le?Pe&&!Ae:de.useHTML5Audio&&de.hasHTML5},this.getMovie=function(e){return a(e)||ye[e]||t[e]},this.createSound=function(t,n){function i(){return r=U(r),de.sounds[r.id]=new s(r),de.soundIDs.push(r.id),de.sounds[r.id]}var o,r;return o=null,o="soundManager.createSound(): "+N(Pe?"notOK":"notReady"),Pe&&de.ok()?(n!==e&&(t={id:t,url:n}),r=g(t),r.url=Q(r.url),(""+r.id).charAt(0).match(/^[0-9]$/)&&de._wD("soundManager.createSound(): "+N("badID",r.id),2),de._wD("soundManager.createSound(): "+r.id+" ("+r.url+")",1),V(r.id,!0)?(de._wD("soundManager.createSound(): "+r.id+" exists",1),de.sounds[r.id]):(Y(r)?(o=i(),de._wD(r.id+": Using HTML5"),o._setup_html5(r)):(c>8&&(null===r.isMovieStar&&(r.isMovieStar=!!(r.serverURL||r.type&&r.type.match(Ze)||r.url.match(en))),r.isMovieStar&&(de._wD("soundManager.createSound(): using MovieStar handling"),r.loops>1&&p("noNSLoop"))),r=q(r,"soundManager.createSound(): "),o=i(),8===c?fe._createSound(r.id,r.loops||1,r.usePolicyFile):(fe._createSound(r.id,r.url,r.usePeakData,r.useWaveformData,r.useEQData,r.isMovieStar,r.isMovieStar?r.bufferTime:!1,r.loops||1,r.serverURL,r.duration||null,r.autoPlay,!0,r.autoLoad,r.usePolicyFile),r.serverURL||(o.connected=!0,r.onconnect&&r.onconnect.apply(o))),!r.serverURL&&(r.autoLoad||r.autoPlay)&&o.load(r)),!r.serverURL&&r.autoPlay&&o.play(),o)):(z(o),!1)},this.destroySound=function(t,e){if(!V(t))return!1;var n,i=de.sounds[t];for(i._iO={},i.stop(),i.unload(),n=0;de.soundIDs.length>n;n++)if(de.soundIDs[n]===t){de.soundIDs.splice(n,1);break}return e||i.destruct(!0),delete de.sounds[t],!0},this.load=function(t,e){return V(t)?de.sounds[t].load(e):!1},this.unload=function(t){return V(t)?de.sounds[t].unload():!1},this.onposition=this.onPosition=function(t,e,n,i){return V(t)?de.sounds[t].onposition(e,n,i):!1},this.clearOnPosition=function(t,e,n){return V(t)?de.sounds[t].clearOnPosition(e,n):!1},this.start=this.play=function(t,e){var n=!1;return Pe&&de.ok()?V(t)?de.sounds[t].play(e):(e instanceof Object||(e={url:e}),e&&e.url&&(de._wD('soundManager.play(): attempting to create "'+t+'"',1),e.id=t,n=de.createSound(e).play()),n):(z("soundManager.play(): "+N(Pe?"notOK":"notReady")),n)},this.setPosition=function(t,e){return V(t)?de.sounds[t].setPosition(e):!1},this.stop=function(t){return V(t)?(de._wD("soundManager.stop("+t+")",1),de.sounds[t].stop()):!1},this.stopAll=function(){var t;de._wD("soundManager.stopAll()",1);for(t in de.sounds)de.sounds.hasOwnProperty(t)&&de.sounds[t].stop()},this.pause=function(t){return V(t)?de.sounds[t].pause():!1},this.pauseAll=function(){var t;for(t=de.soundIDs.length-1;t>=0;t--)de.sounds[de.soundIDs[t]].pause()},this.resume=function(t){return V(t)?de.sounds[t].resume():!1},this.resumeAll=function(){var t;for(t=de.soundIDs.length-1;t>=0;t--)de.sounds[de.soundIDs[t]].resume()},this.togglePause=function(t){return V(t)?de.sounds[t].togglePause():!1},this.setPan=function(t,e){return V(t)?de.sounds[t].setPan(e):!1},this.setVolume=function(t,e){return V(t)?de.sounds[t].setVolume(e):!1},this.mute=function(t){var e=0;if(t instanceof String&&(t=null),t)return V(t)?(de._wD('soundManager.mute(): Muting "'+t+'"'),de.sounds[t].mute()):!1;for(de._wD("soundManager.mute(): Muting all sounds"),e=de.soundIDs.length-1;e>=0;e--)de.sounds[de.soundIDs[e]].mute();return de.muted=!0},this.muteAll=function(){de.mute()},this.unmute=function(t){if(t instanceof String&&(t=null),t)return V(t)?(de._wD('soundManager.unmute(): Unmuting "'+t+'"'),de.sounds[t].unmute()):!1;for(de._wD("soundManager.unmute(): Unmuting all sounds"),t=de.soundIDs.length-1;t>=0;t--)de.sounds[de.soundIDs[t]].unmute();return de.muted=!1,!0},this.unmuteAll=function(){de.unmute()},this.toggleMute=function(t){return V(t)?de.sounds[t].toggleMute():!1},this.getMemoryUse=function(){var t=0;return fe&&8!==c&&(t=parseInt(fe._getMemoryUse(),10)),t},this.disable=function(n){var i;if(n===e&&(n=!1),Ae)return!1;for(Ae=!0,p("shutdown",1),i=de.soundIDs.length-1;i>=0;i--)F(de.sounds[de.soundIDs[i]]);return f(n),oe.remove(t,"load",_),!0},this.canPlayMIME=function(t){var e;return de.hasHTML5&&(e=Z({type:t})),!e&&Le&&(e=t&&de.ok()?!!(c>8&&t.match(Ze)||t.match(de.mimePattern)):null),e},this.canPlayURL=function(t){var e;return de.hasHTML5&&(e=Z({url:t})),!e&&Le&&(e=t&&de.ok()?!!t.match(de.filePattern):null),e},this.canPlayLink=function(t){return t.type!==e&&t.type&&de.canPlayMIME(t.type)?!0:de.canPlayURL(t.href)},this.getSoundById=function(t,e){if(!t)throw Error("soundManager.getSoundById(): sID is null/_undefined");var n=de.sounds[t];return!n&&!e&&de._wD('"'+t+'" is an invalid sound ID.',2),n},this.onready=function(e,n){if("function"!=typeof e)throw N("needFunction","onready");return Pe&&de._wD(N("queue","onready")),n||(n=t),y("onready",e,n),b(),!0},this.ontimeout=function(e,n){if("function"!=typeof e)throw N("needFunction","ontimeout");return Pe&&de._wD(N("queue","ontimeout")),n||(n=t),y("ontimeout",e,n),b({type:"ontimeout"}),!0},this._writeDebug=function(t,n){var i,o;return de.debugMode?Ve&&de.useConsole&&(n&&"object"==typeof n?console.log(t,n):Ce[n]!==e?console[Ce[n]](t):console.log(t),de.consoleOnly)?!0:(i=a("soundmanager-debug"))?(o=ye.createElement("div"),0===++xe%2&&(o.className="sm2-alt"),n=n===e?0:parseInt(n,10),o.appendChild(ye.createTextNode(t)),n&&(n>=2&&(o.style.fontWeight="bold"),3===n&&(o.style.color="#ff3333")),i.insertBefore(o,i.firstChild),!0):!1:!1
},-1!==ve.indexOf("sm2-debug=alert")&&(this._writeDebug=function(e){t.alert(e)}),this._wD=this._writeDebug,this._debug=function(){var t,e;for(p("currentObj",1),t=0,e=de.soundIDs.length;e>t;t++)de.sounds[de.soundIDs[t]]._debug()},this.reboot=function(e,n){de.soundIDs.length&&de._wD("Destroying "+de.soundIDs.length+" SMSound objects...");var i,o,r;for(i=de.soundIDs.length-1;i>=0;i--)de.sounds[de.soundIDs[i]].destruct();if(fe)try{$e&&(ke=fe.innerHTML),De=fe.parentNode.removeChild(fe),p("flRemoved")}catch(s){p("badRemove",2)}if(ke=De=Le=fe=null,de.enabled=M=Pe=Me=Ie=we=Se=Ae=Re=de.swfLoaded=!1,de.soundIDs=[],de.sounds={},e)be=[];else for(i in be)if(be.hasOwnProperty(i))for(o=0,r=be[i].length;r>o;o++)be[i][o].fired=!1;return n||de._wD("soundManager: Rebooting..."),de.html5={usingFlash:null},de.flash={},de.html5Only=!1,de.ignoreFlash=!1,t.setTimeout(function(){C(),n||de.beginDelayedInit()},20),de},this.reset=function(){return p("reset"),de.reboot(!0,!0)},this.getMoviePercent=function(){return fe&&"PercentLoaded"in fe?fe.PercentLoaded():null},this.beginDelayedInit=function(){Te=!0,D(),setTimeout(function(){return Ie?!1:(j(),x(),Ie=!0)},20),w()},this.destruct=function(){de._wD("soundManager.destruct()"),de.disable(!0)},s=function(t){var n,i,o,r,s,a,l,u,h,f,m=this,v=!1,y=[],b=0,_=null;i=n=null,this.sID=this.id=t.id,this.url=t.url,this._iO=this.instanceOptions=this.options=g(t),this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,this.id3={},this._debug=function(){de._wD(m.id+": Merged options:",m.options)},this.load=function(t){var n=null;if(t!==e?m._iO=g(t,m.options):(t=m.options,m._iO=t,_&&_!==m.url&&(p("manURL"),m._iO.url=m.url,m.url=null)),m._iO.url||(m._iO.url=m.url),m._iO.url=Q(m._iO.url),t=m.instanceOptions=m._iO,de._wD(m.id+": load ("+t.url+")"),t.url===m.url&&0!==m.readyState&&2!==m.readyState)return p("onURL",1),3===m.readyState&&t.onload&&t.onload.apply(m,[!!m.duration]),m;if(m.loaded=!1,m.readyState=1,m.playState=0,m.id3={},Y(t))n=m._setup_html5(t),n._called_load?de._wD(m.id+": Ignoring request to load again"):(m._html5_canplay=!1,m.url!==t.url&&(de._wD(p("manURL")+": "+t.url),m._a.src=t.url,m.setPosition(0)),m._a.autobuffer="auto",m._a.preload="auto",m._a._called_load=!0,t.autoPlay&&m.play());else try{m.isHTML5=!1,m._iO=q(U(t)),t=m._iO,8===c?fe._load(m.id,t.url,t.stream,t.autoPlay,t.usePolicyFile):fe._load(m.id,t.url,!!t.stream,!!t.autoPlay,t.loops||1,!!t.autoLoad,t.usePolicyFile)}catch(i){p("smError",2),d("onload",!1),E({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}return m.url=t.url,m},this.unload=function(){return 0!==m.readyState&&(de._wD(m.id+": unload()"),m.isHTML5?(a(),m._a&&(m._a.pause(),ee(m._a,"about:blank"),_="about:blank")):8===c?fe._unload(m.id,"about:blank"):fe._unload(m.id),o()),m},this.destruct=function(t){de._wD(m.id+": Destruct"),m.isHTML5?(a(),m._a&&(m._a.pause(),ee(m._a),Re||s(),m._a._s=null,m._a=null)):(m._iO.onfailure=null,fe._destroySound(m.id)),t||de.destroySound(m.id,!0)},this.start=this.play=function(t,n){var i,o,r=!0,r=null;if(i=m.id+": play(): ",n=n===e?!0:n,t||(t={}),m.url&&(m._iO.url=m.url),m._iO=g(m._iO,m.options),m._iO=g(t,m._iO),m._iO.url=Q(m._iO.url),m.instanceOptions=m._iO,m._iO.serverURL&&!m.connected)return m.getAutoPlay()||(de._wD(i+" Netstream not connected yet - setting autoPlay"),m.setAutoPlay(!0)),m;if(Y(m._iO)&&(m._setup_html5(m._iO),l()),1===m.playState&&!m.paused&&((o=m._iO.multiShot)?de._wD(i+"Already playing (multi-shot)",1):(de._wD(i+"Already playing (one-shot)",1),r=m)),null!==r)return r;if(t.url&&t.url!==m.url&&m.load(m._iO),m.loaded?de._wD(i):0===m.readyState?(de._wD(i+"Attempting to load"),m.isHTML5||(m._iO.autoPlay=!0),m.load(m._iO),m.instanceOptions=m._iO):2===m.readyState?(de._wD(i+"Could not load - exiting",2),r=m):de._wD(i+"Loading - attempting to play..."),null!==r)return r;if(!m.isHTML5&&9===c&&m.position>0&&m.position===m.duration&&(de._wD(i+"Sound at end, resetting to position:0"),t.position=0),m.paused&&m.position>=0&&(!m._iO.serverURL||m.position>0))de._wD(i+"Resuming from paused state",1),m.resume();else{if(m._iO=g(t,m._iO),null!==m._iO.from&&null!==m._iO.to&&0===m.instanceCount&&0===m.playState&&!m._iO.serverURL){if(o=function(){m._iO=g(t,m._iO),m.play(m._iO)},m.isHTML5&&!m._html5_canplay?(de._wD(i+"Beginning load for from/to case"),m.load({oncanplay:o}),r=!1):m.isHTML5||m.loaded||m.readyState&&2===m.readyState||(de._wD(i+"Preloading for from/to case"),m.load({onload:o}),r=!1),null!==r)return r;m._iO=f()}de._wD(i+"Starting to play"),(!m.instanceCount||m._iO.multiShotEvents||!m.isHTML5&&c>8&&!m.getAutoPlay())&&m.instanceCount++,m._iO.onposition&&0===m.playState&&u(m),m.playState=1,m.paused=!1,m.position=m._iO.position===e||isNaN(m._iO.position)?0:m._iO.position,m.isHTML5||(m._iO=q(U(m._iO))),m._iO.onplay&&n&&(m._iO.onplay.apply(m),v=!0),m.setVolume(m._iO.volume,!0),m.setPan(m._iO.pan,!0),m.isHTML5?(l(),i=m._setup_html5(),m.setPosition(m._iO.position),i.play()):(r=fe._start(m.id,m._iO.loops||1,9===c?m._iO.position:m._iO.position/1e3,m._iO.multiShot),9===c&&!r&&(de._wD(i+"No sound hardware, or 32-sound ceiling hit"),m._iO.onplayerror&&m._iO.onplayerror.apply(m)))}return m},this.stop=function(t){var e=m._iO;return 1===m.playState&&(de._wD(m.id+": stop()"),m._onbufferchange(0),m._resetOnPosition(0),m.paused=!1,m.isHTML5||(m.playState=0),h(),e.to&&m.clearOnPosition(e.to),m.isHTML5?m._a&&(t=m.position,m.setPosition(0),m.position=t,m._a.pause(),m.playState=0,m._onTimer(),a()):(fe._stop(m.id,t),e.serverURL&&m.unload()),m.instanceCount=0,m._iO={},e.onstop&&e.onstop.apply(m)),m},this.setAutoPlay=function(t){de._wD(m.id+": Autoplay turned "+(t?"on":"off")),m._iO.autoPlay=t,m.isHTML5||(fe._setAutoPlay(m.id,t),t&&!m.instanceCount&&1===m.readyState&&(m.instanceCount++,de._wD(m.id+": Incremented instance count to "+m.instanceCount)))},this.getAutoPlay=function(){return m._iO.autoPlay},this.setPosition=function(t){t===e&&(t=0);var n=m.isHTML5?Math.max(t,0):Math.min(m.duration||m._iO.duration,Math.max(t,0));if(m.position=n,t=m.position/1e3,m._resetOnPosition(m.position),m._iO.position=n,m.isHTML5){if(m._a)if(m._html5_canplay){if(m._a.currentTime!==t){de._wD(m.id+": setPosition("+t+")");try{m._a.currentTime=t,(0===m.playState||m.paused)&&m._a.pause()}catch(i){de._wD(m.id+": setPosition("+t+") failed: "+i.message,2)}}}else de._wD(m.id+": setPosition("+t+"): Cannot seek yet, sound not ready")}else t=9===c?m.position:t,m.readyState&&2!==m.readyState&&fe._setPosition(m.id,t,m.paused||!m.playState,m._iO.multiShot);return m.isHTML5&&m.paused&&m._onTimer(!0),m},this.pause=function(t){return m.paused||0===m.playState&&1!==m.readyState?m:(de._wD(m.id+": pause()"),m.paused=!0,m.isHTML5?(m._setup_html5().pause(),a()):(t||t===e)&&fe._pause(m.id,m._iO.multiShot),m._iO.onpause&&m._iO.onpause.apply(m),m)},this.resume=function(){var t=m._iO;return m.paused?(de._wD(m.id+": resume()"),m.paused=!1,m.playState=1,m.isHTML5?(m._setup_html5().play(),l()):(t.isMovieStar&&!t.serverURL&&m.setPosition(m.position),fe._pause(m.id,t.multiShot)),!v&&t.onplay?(t.onplay.apply(m),v=!0):t.onresume&&t.onresume.apply(m),m):m},this.togglePause=function(){return de._wD(m.id+": togglePause()"),0===m.playState?(m.play({position:9!==c||m.isHTML5?m.position/1e3:m.position}),m):(m.paused?m.resume():m.pause(),m)},this.setPan=function(t,n){return t===e&&(t=0),n===e&&(n=!1),m.isHTML5||fe._setPan(m.id,t),m._iO.pan=t,n||(m.pan=t,m.options.pan=t),m},this.setVolume=function(t,n){return t===e&&(t=100),n===e&&(n=!1),m.isHTML5?m._a&&(m._a.volume=Math.max(0,Math.min(1,t/100))):fe._setVolume(m.id,de.muted&&!m.muted||m.muted?0:t),m._iO.volume=t,n||(m.volume=t,m.options.volume=t),m},this.mute=function(){return m.muted=!0,m.isHTML5?m._a&&(m._a.muted=!0):fe._setVolume(m.id,0),m},this.unmute=function(){m.muted=!1;var t=m._iO.volume!==e;return m.isHTML5?m._a&&(m._a.muted=!1):fe._setVolume(m.id,t?m._iO.volume:m.options.volume),m},this.toggleMute=function(){return m.muted?m.unmute():m.mute()},this.onposition=this.onPosition=function(t,n,i){return y.push({position:parseInt(t,10),method:n,scope:i!==e?i:m,fired:!1}),m},this.clearOnPosition=function(t,e){var n,t=parseInt(t,10);if(isNaN(t))return!1;for(n=0;y.length>n;n++)t!==y[n].position||e&&e!==y[n].method||(y[n].fired&&b--,y.splice(n,1))},this._processOnPosition=function(){var t,e;if(t=y.length,!t||!m.playState||b>=t)return!1;for(t-=1;t>=0;t--)e=y[t],!e.fired&&m.position>=e.position&&(e.fired=!0,b++,e.method.apply(e.scope,[e.position]));return!0},this._resetOnPosition=function(t){var e,n;if(e=y.length,!e)return!1;for(e-=1;e>=0;e--)n=y[e],n.fired&&n.position>=t&&(n.fired=!1,b--);return!0},f=function(){var t,e,n=m._iO,i=n.from,o=n.to;return e=function(){de._wD(m.id+': "To" time of '+o+" reached."),m.clearOnPosition(o,e),m.stop()},t=function(){de._wD(m.id+': Playing "from" '+i),null===o||isNaN(o)||m.onPosition(o,e)},null!==i&&!isNaN(i)&&(n.position=i,n.multiShot=!1,t()),n},u=function(){var t,e=m._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&m.onPosition(parseInt(t,10),e[t])},h=function(){var t,e=m._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&m.clearOnPosition(parseInt(t,10))},l=function(){m.isHTML5&&J(m)},a=function(){m.isHTML5&&G(m)},o=function(t){t||(y=[],b=0),v=!1,m._hasTimer=null,m._a=null,m._html5_canplay=!1,m.bytesLoaded=null,m.bytesTotal=null,m.duration=m._iO&&m._iO.duration?m._iO.duration:null,m.durationEstimate=null,m.buffered=[],m.eqData=[],m.eqData.left=[],m.eqData.right=[],m.failures=0,m.isBuffering=!1,m.instanceOptions={},m.instanceCount=0,m.loaded=!1,m.metadata={},m.readyState=0,m.muted=!1,m.paused=!1,m.peakData={left:0,right:0},m.waveformData={left:[],right:[]},m.playState=0,m.position=null,m.id3={}},o(),this._onTimer=function(t){var e,o=!1,r={};return m._hasTimer||t?(m._a&&(t||(m.playState>0||1===m.readyState)&&!m.paused)&&(e=m._get_html5_duration(),e!==n&&(n=e,m.duration=e,o=!0),m.durationEstimate=m.duration,e=1e3*m._a.currentTime||0,e!==i&&(i=e,o=!0),(o||t)&&m._whileplaying(e,r,r,r,r)),o):void 0},this._get_html5_duration=function(){var t=m._iO;return(t=m._a&&m._a.duration?1e3*m._a.duration:t&&t.duration?t.duration:null)&&!isNaN(t)&&1/0!==t?t:null},this._apply_loop=function(t,e){!t.loop&&e>1&&de._wD("Note: Native HTML5 looping is infinite.",1),t.loop=e>1?"loop":""},this._setup_html5=function(t){var e,t=g(m._iO,t),n=decodeURI,i=Re?pe:m._a,s=n(t.url);if(Re?s===re&&(e=!0):s===_&&(e=!0),i){if(i._s)if(Re)i._s&&i._s.playState&&!e&&i._s.stop();else if(!Re&&s===n(_))return m._apply_loop(i,t.loops),i;e||(o(!1),i.src=t.url,re=_=m.url=t.url,i._called_load=!1)}else m._a=t.autoLoad||t.autoPlay?new Audio(t.url):Ue&&10>opera.version()?new Audio(null):new Audio,i=m._a,i._called_load=!1,Re&&(pe=i);return m.isHTML5=!0,m._a=i,i._s=m,r(),m._apply_loop(i,t.loops),t.autoLoad||t.autoPlay?m.load():(i.autobuffer=!1,i.preload="auto"),i},r=function(){if(m._a._added_events)return!1;var t;m._a._added_events=!0;for(t in ue)ue.hasOwnProperty(t)&&m._a&&m._a.addEventListener(t,ue[t],!1);return!0},s=function(){var t;de._wD(m.id+": Removing event listeners"),m._a._added_events=!1;for(t in ue)ue.hasOwnProperty(t)&&m._a&&m._a.removeEventListener(t,ue[t],!1)},this._onload=function(t){var e=!!t||!m.isHTML5&&8===c&&m.duration,t=m.id+": ";return de._wD(t+(e?"onload()":"Failed to load? - "+m.url),e?1:2),!e&&!m.isHTML5&&(!0===de.sandbox.noRemote&&de._wD(t+N("noNet"),1),!0===de.sandbox.noLocal&&de._wD(t+N("noLocal"),1)),m.loaded=e,m.readyState=e?3:2,m._onbufferchange(0),m._iO.onload&&m._iO.onload.apply(m,[e]),!0},this._onbufferchange=function(t){return 0===m.playState||t&&m.isBuffering||!t&&!m.isBuffering?!1:(m.isBuffering=1===t,m._iO.onbufferchange&&(de._wD(m.id+": Buffer state change: "+t),m._iO.onbufferchange.apply(m)),!0)},this._onsuspend=function(){return m._iO.onsuspend&&(de._wD(m.id+": Playback suspended"),m._iO.onsuspend.apply(m)),!0},this._onfailure=function(t,e,n){m.failures++,de._wD(m.id+": Failures = "+m.failures),m._iO.onfailure&&1===m.failures?m._iO.onfailure(m,t,e,n):de._wD(m.id+": Ignoring failure")},this._onfinish=function(){var t=m._iO.onfinish;m._onbufferchange(0),m._resetOnPosition(0),m.instanceCount&&(m.instanceCount--,m.instanceCount||(h(),m.playState=0,m.paused=!1,m.instanceCount=0,m.instanceOptions={},m._iO={},a(),m.isHTML5&&(m.position=0)),(!m.instanceCount||m._iO.multiShotEvents)&&t)&&(de._wD(m.id+": onfinish()"),t.apply(m))},this._whileloading=function(t,e,n,i){var o=m._iO;m.bytesLoaded=t,m.bytesTotal=e,m.duration=Math.floor(n),m.bufferLength=i,m.durationEstimate=m.isHTML5||o.isMovieStar?m.duration:o.duration?m.duration>o.duration?m.duration:o.duration:parseInt(m.bytesTotal/m.bytesLoaded*m.duration,10),m.isHTML5||(m.buffered=[{start:0,end:m.duration}]),(3!==m.readyState||m.isHTML5)&&o.whileloading&&o.whileloading.apply(m)},this._whileplaying=function(t,n,i,o,r){var s=m._iO;return isNaN(t)||null===t?!1:(m.position=Math.max(0,t),m._processOnPosition(),!m.isHTML5&&c>8&&(s.usePeakData&&n!==e&&n&&(m.peakData={left:n.leftPeak,right:n.rightPeak}),s.useWaveformData&&i!==e&&i&&(m.waveformData={left:i.split(","),right:o.split(",")}),s.useEQData&&r!==e&&r&&r.leftEQ&&(t=r.leftEQ.split(","),m.eqData=t,m.eqData.left=t,r.rightEQ!==e&&r.rightEQ&&(m.eqData.right=r.rightEQ.split(",")))),1===m.playState&&(!m.isHTML5&&8===c&&!m.position&&m.isBuffering&&m._onbufferchange(0),s.whileplaying&&s.whileplaying.apply(m)),!0)},this._oncaptiondata=function(t){de._wD(m.id+": Caption data received."),m.captiondata=t,m._iO.oncaptiondata&&m._iO.oncaptiondata.apply(m,[t])},this._onmetadata=function(t,e){de._wD(m.id+": Metadata received.");var n,i,o={};for(n=0,i=t.length;i>n;n++)o[t[n]]=e[n];m.metadata=o,m._iO.onmetadata&&m._iO.onmetadata.apply(m)},this._onid3=function(t,e){de._wD(m.id+": ID3 data received.");var n,i,o=[];for(n=0,i=t.length;i>n;n++)o[t[n]]=e[n];m.id3=g(m.id3,o),m._iO.onid3&&m._iO.onid3.apply(m)},this._onconnect=function(t){t=1===t,de._wD(m.id+": "+(t?"Connected.":"Failed to connect? - "+m.url),t?1:2),(m.connected=t)&&(m.failures=0,V(m.id)&&(m.getAutoPlay()?m.play(e,m.getAutoPlay()):m._iO.autoLoad&&m.load()),m._iO.onconnect&&m._iO.onconnect.apply(m,[t]))},this._ondataerror=function(t){m.playState>0&&(de._wD(m.id+": Data error: "+t),m._iO.ondataerror&&m._iO.ondataerror.apply(m))},this._debug()},I=function(){return ye.body||ye._docElement||ye.getElementsByTagName("div")[0]},a=function(t){return ye.getElementById(t)},g=function(t,n){var i,o,r=t||{};i=n===e?de.defaultOptions:n;for(o in i)i.hasOwnProperty(o)&&r[o]===e&&(r[o]="object"!=typeof i[o]||null===i[o]?i[o]:g(r[o],i[o]));return r},v={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},m=function(t,n){var i,o=!0,r=n!==e,s=de.setupOptions;if(t===e){o=[];for(i in s)s.hasOwnProperty(i)&&o.push(i);for(i in v)v.hasOwnProperty(i)&&("object"==typeof de[i]?o.push(i+": {...}"):de[i]instanceof Function?o.push(i+": function() {...}"):o.push(i));return de._wD(N("setup",o.join(", "))),!1}for(i in t)if(t.hasOwnProperty(i))if("object"!=typeof t[i]||null===t[i]||t[i]instanceof Array||t[i]instanceof RegExp)r&&v[n]!==e?de[n][i]=t[i]:s[i]!==e?(de.setupOptions[i]=t[i],de[i]=t[i]):v[i]===e?(z(N(de[i]===e?"setupUndef":"setupError",i),2),o=!1):de[i]instanceof Function?de[i].apply(de,t[i]instanceof Array?t[i]:[t[i]]):de[i]=t[i];else{if(v[i]!==e)return m(t[i],i);z(N(de[i]===e?"setupUndef":"setupError",i),2),o=!1}return o};var rn=function(t){var t=Fe.call(t),e=t.length;return an?(t[1]="on"+t[1],e>3&&t.pop()):3===e&&t.push(!1),t},sn=function(t,e){var n=t.shift(),i=[ln[e]];an?n[i](t[0],t[1]):n[i].apply(n,t)},an=t.attachEvent,ln={add:an?"attachEvent":"addEventListener",remove:an?"detachEvent":"removeEventListener"};oe={add:function(){sn(rn(arguments),"add")},remove:function(){sn(rn(arguments),"remove")}},ue={abort:r(function(){de._wD(this._s.id+": abort")}),canplay:r(function(){var t,n=this._s;if(n._html5_canplay)return!0;if(n._html5_canplay=!0,de._wD(n.id+": canplay"),n._onbufferchange(0),t=n._iO.position===e||isNaN(n._iO.position)?null:n._iO.position/1e3,n.position&&this.currentTime!==t){de._wD(n.id+": canplay: Setting position to "+t);try{this.currentTime=t}catch(i){de._wD(n.id+": canplay: Setting position of "+t+" failed: "+i.message,2)}}n._iO._oncanplay&&n._iO._oncanplay()}),canplaythrough:r(function(){var t=this._s;t.loaded||(t._onbufferchange(0),t._whileloading(t.bytesLoaded,t.bytesTotal,t._get_html5_duration()),t._onload(!0))}),ended:r(function(){var t=this._s;de._wD(t.id+": ended"),t._onfinish()}),error:r(function(){de._wD(this._s.id+": HTML5 error, code "+this.error.code),this._s._onload(!1)}),loadeddata:r(function(){var t=this._s;de._wD(t.id+": loadeddata"),!t._loaded&&!We&&(t.duration=t._get_html5_duration())}),loadedmetadata:r(function(){de._wD(this._s.id+": loadedmetadata")}),loadstart:r(function(){de._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:r(function(){de._wD(this._s.id+": play()"),this._s._onbufferchange(0)}),playing:r(function(){de._wD(this._s.id+": playing"),this._s._onbufferchange(0)}),progress:r(function(t){var e,n,i,o=this._s;e=0;var r="progress"===t.type,s=t.target.buffered,a=t.loaded||0,l=t.total||1;if(o.buffered=[],s&&s.length){for(e=0,n=s.length;n>e;e++)o.buffered.push({start:1e3*s.start(e),end:1e3*s.end(e)});if(e=1e3*(s.end(0)-s.start(0)),a=e/(1e3*t.target.duration),r&&s.length>1){for(i=[],n=s.length,e=0;n>e;e++)i.push(1e3*t.target.buffered.start(e)+"-"+1e3*t.target.buffered.end(e));de._wD(this._s.id+": progress, timeRanges: "+i.join(", "))}r&&!isNaN(a)&&de._wD(this._s.id+": progress, "+Math.floor(100*a)+"% loaded")}isNaN(a)||(o._onbufferchange(0),o._whileloading(a,l,o._get_html5_duration()),a&&l&&a===l&&ue.canplaythrough.call(this,t))}),ratechange:r(function(){de._wD(this._s.id+": ratechange")}),suspend:r(function(t){var e=this._s;de._wD(this._s.id+": suspend"),ue.progress.call(this,t),e._onsuspend()}),stalled:r(function(){de._wD(this._s.id+": stalled")}),timeupdate:r(function(){this._s._onTimer()}),waiting:r(function(){var t=this._s;de._wD(this._s.id+": waiting"),t._onbufferchange(1)})},Y=function(t){return t.serverURL||t.type&&o(t.type)?!1:t.type?Z({type:t.type}):Z({url:t.url})||de.html5Only},ee=function(t,e){t&&(t.src=e,t._called_load=!1),Re&&(re=null)},Z=function(t){if(!de.useHTML5Audio||!de.hasHTML5)return!1;var n,i=t.url||null,t=t.type||null,r=de.audioFormats;if(t&&de.html5[t]!==e)return de.html5[t]&&!o(t);if(!te){te=[];for(n in r)r.hasOwnProperty(n)&&(te.push(n),r[n].related&&(te=te.concat(r[n].related)));te=RegExp("\\.("+te.join("|")+")(\\?.*)?$","i")}return n=i?i.toLowerCase().match(te):null,n&&n.length?n=n[1]:t&&(i=t.indexOf(";"),n=(-1!==i?t.substr(0,i):t).substr(6)),n&&de.html5[n]!==e?i=de.html5[n]&&!o(n):(t="audio/"+n,i=de.html5.canPlayType({type:t}),i=(de.html5[n]=i)&&de.html5[t]&&!o(t)),i},ie=function(){function t(t){var e,n,i=e=!1;if(!r||"function"!=typeof r.canPlayType)return e;if(t instanceof Array){for(e=0,n=t.length;n>e;e++)(de.html5[t[e]]||r.canPlayType(t[e]).match(de.html5Test))&&(i=!0,de.html5[t[e]]=!0,de.flash[t[e]]=!!t[e].match(Qe));e=i}else t=r&&"function"==typeof r.canPlayType?r.canPlayType(t):!1,e=!(!t||!t.match(de.html5Test));return e}if(!de.useHTML5Audio||!de.hasHTML5)return!1;var n,i,o,r=Audio!==e?Ue&&10>opera.version()?new Audio(null):new Audio:null,s={};o=de.audioFormats;for(n in o)if(o.hasOwnProperty(n)&&(i="audio/"+n,s[n]=t(o[n].type),s[i]=s[n],n.match(Qe)?(de.flash[n]=!0,de.flash[i]=!0):(de.flash[n]=!1,de.flash[i]=!1),o[n]&&o[n].related))for(i=o[n].related.length-1;i>=0;i--)s["audio/"+o[n].related[i]]=s[n],de.html5[o[n].related[i]]=s[n],de.flash[o[n].related[i]]=s[n];return s.canPlayType=r?t:null,de.html5=g(de.html5,s),!0},T={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:"soundManagerexception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:"soundManager: Verify that %s is a valid path.",tryDebug:"Try soundManager.debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:"soundManager: Non-HTTP page ("+ye.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:"soundManager: Special case: Waiting for SWF to load with window focus...",waitForever:"soundManager: Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:"soundManager: Waiting for 100% SWF load...",needFunction:"soundManager: Function object expected for %s",badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"soundManager: _debug(): Current sound objects",waitOnload:"soundManager: Waiting for window.onload()",docLoaded:"soundManager: Document already loaded",onload:"soundManager: initComplete(): calling soundManager.onload()",onloadOK:"soundManager.onload() complete",didInit:"soundManager: init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"soundManager: Failed to remove Flash node.",shutdown:"soundManager.disable(): Shutting down",queue:"soundManager: Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying .swf_timedout CSS...",fbLoaded:"Flash loaded",flRemoved:"soundManager: Flash movie removed.",fbHandler:"soundManager: flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:"soundManager.load(): current URL already assigned.",badFV:'soundManager.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:"soundManager: Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:"soundManager: Got window focus.",policy:"Enabling usePolicyFile for data access",setup:"soundManager.setup(): allowed parameters: %s",setupError:'soundManager.setup(): "%s" cannot be assigned with this method.',setupUndef:'soundManager.setup(): Could not find option "%s"',setupLate:"soundManager.setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:"soundManager: Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready.",reset:"soundManager.reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device."},N=function(){var t,e,n=Fe.call(arguments),i=n.shift(),i=T&&T[i]?T[i]:"";if(i&&n&&n.length)for(t=0,e=n.length;e>t;t++)i=i.replace("%s",n[t]);return i},U=function(t){return 8===c&&t.loops>1&&t.stream&&(p("as2loop"),t.stream=!1),t},q=function(t,e){return t&&!t.usePolicyFile&&(t.onid3||t.usePeakData||t.useWaveformData||t.useEQData)&&(de._wD((e||"")+N("policy")),t.usePolicyFile=!0),t},z=function(t){console!==e&&console.warn!==e?console.warn(t):de._wD(t)},l=function(){return!1},F=function(t){for(var e in t)t.hasOwnProperty(e)&&"function"==typeof t[e]&&(t[e]=l)},R=function(t){t===e&&(t=!1),(Ae||t)&&de.disable(t)},B=function(t){var e=null;if(t)if(t.match(/\.swf(\?.*)?$/i)){if(e=t.substr(t.toLowerCase().lastIndexOf(".swf?")+4))return t}else t.lastIndexOf("/")!==t.length-1&&(t+="/");return t=(t&&-1!==t.lastIndexOf("/")?t.substr(0,t.lastIndexOf("/")+1):"./")+de.movieURL,de.noSWFCache&&(t+="?ts="+(new Date).getTime()),t},P=function(){c=parseInt(de.flashVersion,10),8!==c&&9!==c&&(de._wD(N("badFV",c,8)),de.flashVersion=c=8);var t=de.debugMode||de.debugFlash?"_debug.swf":".swf";de.useHTML5Audio&&!de.html5Only&&de.audioFormats.mp4.required&&9>c&&(de._wD(N("needfl9")),de.flashVersion=c=9),de.version=de.versionNumber+(de.html5Only?" (HTML5-only mode)":9===c?" (AS3/Flash 9)":" (AS2/Flash 8)"),c>8?(de.defaultOptions=g(de.defaultOptions,de.flash9Options),de.features.buffering=!0,de.defaultOptions=g(de.defaultOptions,de.movieStarOptions),de.filePatterns.flash9=RegExp("\\.(mp3|"+tn.join("|")+")(\\?.*)?$","i"),de.features.movieStar=!0):de.features.movieStar=!1,de.filePattern=de.filePatterns[8!==c?"flash9":"flash8"],de.movieURL=(8===c?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",t),de.features.peakData=de.features.waveformData=de.features.eqData=c>8},O=function(t,e){return fe?(fe._setPolling(t,e),void 0):!1},L=function(){if(de.debugURLParam.test(ve)&&(de.debugMode=!0),a(de.debugID))return!1;var t,e,n,i;if(!(!de.debugMode||a(de.debugID)||Ve&&de.useConsole&&de.consoleOnly)){t=ye.createElement("div"),t.id=de.debugID+"-toggle",e={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},t.appendChild(ye.createTextNode("-")),t.onclick=W,t.title="Toggle SM2 debug console",me.match(/msie 6/i)&&(t.style.position="absolute",t.style.cursor="hand");for(i in e)e.hasOwnProperty(i)&&(t.style[i]=e[i]);if(e=ye.createElement("div"),e.id=de.debugID,e.style.display=de.debugMode?"block":"none",de.debugMode&&!a(t.id)){try{n=I(),n.appendChild(t)}catch(o){throw Error(N("domError")+" \n"+(""+o))}n.appendChild(e)}}},V=this.getSoundById,p=function(t,e){return t?de._wD(N(t),e):""},W=function(){var t=a(de.debugID),e=a(de.debugID+"-toggle");return t?(_e?(e.innerHTML="+",t.style.display="none"):(e.innerHTML="-",t.style.display="block"),_e=!_e,void 0):!1},d=function(n,i,o){if(t.sm2Debugger!==e)try{sm2Debugger.handleEvent(n,i,o)}catch(r){}return!0},H=function(){var t=[];return de.debugMode&&t.push("sm2_debug"),de.debugFlash&&t.push("flash_debug"),de.useHighPerformance&&t.push("high_performance"),t.join(" ")},$=function(){var t=N("fbHandler"),e=de.getMoviePercent(),n={type:"FLASHBLOCK"};return de.html5Only?!1:(de.ok()?(de.didFlashBlock&&de._wD(t+": Unblocked"),de.oMC&&(de.oMC.className=[H(),"movieContainer","swf_loaded"+(de.didFlashBlock?" swf_unblocked":"")].join(" "))):(Le&&(de.oMC.className=H()+" movieContainer "+(null===e?"swf_timedout":"swf_error"),de._wD(t+": "+N("fbTimeout")+(e?" ("+N("fbLoaded")+")":""))),de.didFlashBlock=!0,b({type:"ontimeout",ignoreInit:!0,error:n}),E(n)),void 0)},y=function(t,n,i){be[t]===e&&(be[t]=[]),be[t].push({method:n,scope:i||null,fired:!1})},b=function(t){if(t||(t={type:de.ok()?"onready":"ontimeout"}),!Pe&&t&&!t.ignoreInit||"ontimeout"===t.type&&(de.ok()||Ae&&!t.ignoreInit))return!1;var e,n={success:t&&t.ignoreInit?de.ok():!Ae},i=t&&t.type?be[t.type]||[]:[],o=[],n=[n],r=Le&&!de.ok();for(t.error&&(n[0].error=t.error),t=0,e=i.length;e>t;t++)!0!==i[t].fired&&o.push(i[t]);if(o.length)for(t=0,e=o.length;e>t;t++)o[t].scope?o[t].method.apply(o[t].scope,n):o[t].method.apply(this,n),r||(o[t].fired=!0);return!0},_=function(){t.setTimeout(function(){de.useFlashBlock&&$(),b(),"function"==typeof de.onload&&(p("onload",1),de.onload.apply(t),p("onloadOK",1)),de.waitForWindowLoad&&oe.add(t,"load",_)},1)},ae=function(){if(se!==e)return se;var n,i=!1,o=navigator,r=o.plugins,s=t.ActiveXObject;if(r&&r.length)(o=o.mimeTypes)&&o["application/x-shockwave-flash"]&&o["application/x-shockwave-flash"].enabledPlugin&&o["application/x-shockwave-flash"].enabledPlugin.description&&(i=!0);else if(s!==e&&!me.match(/MSAppHost/i)){try{n=new s("ShockwaveFlash.ShockwaveFlash")}catch(a){}i=!!n}return se=i},K=function(){var t,e,n=de.audioFormats;if(Be&&me.match(/os (1|2|3_0|3_1)/i)?(de.hasHTML5=!1,de.html5Only=!0,de.oMC&&(de.oMC.style.display="none")):de.useHTML5Audio&&(de.html5&&de.html5.canPlayType||(de._wD("SoundManager: No HTML5 Audio() support detected."),de.hasHTML5=!1),ze&&de._wD("soundManager: Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(se?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),de.useHTML5Audio&&de.hasHTML5)for(e in n)n.hasOwnProperty(e)&&(n[e].required&&!de.html5.canPlayType(n[e].type)||de.preferFlash&&(de.flash[e]||de.flash[n[e].type]))&&(t=!0);return de.ignoreFlash&&(t=!1),de.html5Only=de.hasHTML5&&de.useHTML5Audio&&!t,!de.html5Only},Q=function(t){var e,n,i=0;if(t instanceof Array){for(e=0,n=t.length;n>e;e++)if(t[e]instanceof Object){if(de.canPlayMIME(t[e].type)){i=e;break}}else if(de.canPlayURL(t[e])){i=e;break}t[i].url&&(t[i]=t[i].url),t=t[i]}return t},J=function(e){e._hasTimer||(e._hasTimer=!0,!qe&&de.html5PollingInterval&&(null===Ee&&0===je&&(Ee=t.setInterval(X,de.html5PollingInterval)),je++))},G=function(t){t._hasTimer&&(t._hasTimer=!1,!qe&&de.html5PollingInterval&&je--)},X=function(){var e;if(null!==Ee&&!je)return t.clearInterval(Ee),Ee=null,!1;for(e=de.soundIDs.length-1;e>=0;e--)de.sounds[de.soundIDs[e]].isHTML5&&de.sounds[de.soundIDs[e]]._hasTimer&&de.sounds[de.soundIDs[e]]._onTimer()},E=function(n){n=n!==e?n:{},"function"==typeof de.onerror&&de.onerror.apply(t,[{type:n.type!==e?n.type:null}]),n.fatal!==e&&n.fatal&&de.disable()},le=function(){if(!ze||!ae())return!1;var t,e,n=de.audioFormats;for(e in n)if(n.hasOwnProperty(e)&&("mp3"===e||"mp4"===e)&&(de._wD("soundManager: Using flash fallback for "+e+" format"),de.html5[e]=!1,n[e]&&n[e].related))for(t=n[e].related.length-1;t>=0;t--)de.html5[n[e].related[t]]=!1},this._setSandboxType=function(t){var n=de.sandbox;n.type=t,n.description=n.types[n.types[t]!==e?t:"unknown"],"localWithFile"===n.type?(n.noRemote=!0,n.noLocal=!1,p("secNote",2)):"localWithNetwork"===n.type?(n.noRemote=!1,n.noLocal=!0):"localTrusted"===n.type&&(n.noRemote=!1,n.noLocal=!1)},this._externalInterfaceOK=function(t,e){if(de.swfLoaded)return!1;var n;return d("swf",!0),d("flashtojs",!0),de.swfLoaded=!0,Ge=!1,ze&&le(),e&&e.replace(/\+dev/i,"")===de.versionNumber.replace(/\+dev/i,"")?(setTimeout(h,$e?100:1),void 0):(n='soundManager: Fatal: JavaScript file build "'+de.versionNumber+'" does not match Flash SWF build "'+e+'" at '+de.url+". Ensure both are up-to-date.",setTimeout(function(){throw Error(n)},0),!1)},j=function(t,n){function i(){var t,e=[],n=[];t="SoundManager "+de.version+(!de.html5Only&&de.useHTML5Audio?de.hasHTML5?" + HTML5 audio":", no HTML5 audio support":""),de.html5Only?de.html5PollingInterval&&e.push("html5PollingInterval ("+de.html5PollingInterval+"ms)"):(de.preferFlash&&e.push("preferFlash"),de.useHighPerformance&&e.push("useHighPerformance"),de.flashPollingInterval&&e.push("flashPollingInterval ("+de.flashPollingInterval+"ms)"),de.html5PollingInterval&&e.push("html5PollingInterval ("+de.html5PollingInterval+"ms)"),de.wmode&&e.push("wmode ("+de.wmode+")"),de.debugFlash&&e.push("debugFlash"),de.useFlashBlock&&e.push("flashBlock")),e.length&&(n=n.concat([e.join(" + ")])),de._wD(t+(n.length?" + "+n.join(", "):""),1),he()}function o(t,e){return'<param name="'+t+'" value="'+e+'" />'}if(we&&Se)return!1;if(de.html5Only)return P(),i(),de.oMC=a(de.movieID),h(),Se=we=!0,!1;var r,s,l,u=n||de.url,c=de.altURL||u,d=I(),p=H(),f=null,f=ye.getElementsByTagName("html")[0],f=f&&f.dir&&f.dir.match(/rtl/i),t=t===e?de.id:t;if(P(),de.url=B(Ke?u:c),n=de.url,de.wmode=!de.wmode&&de.useHighPerformance?"transparent":de.wmode,null!==de.wmode&&(me.match(/msie 8/i)||!$e&&!de.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Oe.push(T.spcWmode),de.wmode=null),d={name:t,id:t,src:n,quality:"high",allowScriptAccess:de.allowScriptAccess,bgcolor:de.bgColor,pluginspage:Ye+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:de.wmode,hasPriority:"true"},de.debugFlash&&(d.FlashVars="debug=1"),de.wmode||delete d.wmode,$e)u=ye.createElement("div"),s=['<object id="'+t+'" data="'+n+'" type="'+d.type+'" title="'+d.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+Ye+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',o("movie",n),o("AllowScriptAccess",de.allowScriptAccess),o("quality",d.quality),de.wmode?o("wmode",de.wmode):"",o("bgcolor",de.bgColor),o("hasPriority","true"),de.debugFlash?o("FlashVars",d.FlashVars):"","</object>"].join("");
else for(r in u=ye.createElement("embed"),d)d.hasOwnProperty(r)&&u.setAttribute(r,d[r]);if(L(),p=H(),d=I())if(de.oMC=a(de.movieID)||ye.createElement("div"),de.oMC.id)l=de.oMC.className,de.oMC.className=(l?l+" ":"movieContainer")+(p?" "+p:""),de.oMC.appendChild(u),$e&&(r=de.oMC.appendChild(ye.createElement("div")),r.className="sm2-object-box",r.innerHTML=s),Se=!0;else{if(de.oMC.id=de.movieID,de.oMC.className="movieContainer "+p,r=p=null,de.useFlashBlock||(de.useHighPerformance?p={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(p={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},f&&(p.left=Math.abs(parseInt(p.left,10))+"px"))),He&&(de.oMC.style.zIndex=1e4),!de.debugFlash)for(l in p)p.hasOwnProperty(l)&&(de.oMC.style[l]=p[l]);try{$e||de.oMC.appendChild(u),d.appendChild(de.oMC),$e&&(r=de.oMC.appendChild(ye.createElement("div")),r.className="sm2-object-box",r.innerHTML=s),Se=!0}catch(g){throw Error(N("domError")+" \n"+(""+g))}}return we=!0,i(),!0},x=function(){return de.html5Only?(j(),!1):fe?!1:de.url?(fe=de.getMovie(de.id),fe||(De?($e?de.oMC.innerHTML=ke:de.oMC.appendChild(De),De=null,we=!0):j(de.id,de.url),fe=de.getMovie(de.id)),"function"==typeof de.oninitmovie&&setTimeout(de.oninitmovie,1),ce(),!0):(p("noURL"),!1)},w=function(){setTimeout(S,1e3)},S=function(){var e,n=!1;return!de.url||Me?!1:(Me=!0,oe.remove(t,"load",w),Ge&&!Je?(p("waitFocus"),!1):(Pe||(e=de.getMoviePercent(),e>0&&100>e&&(n=!0)),setTimeout(function(){return e=de.getMoviePercent(),n?(Me=!1,de._wD(N("waitSWF")),t.setTimeout(w,1),!1):(Pe||(de._wD("soundManager: No Flash response within expected time. Likely causes: "+(0===e?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(de.debugFlash?" "+N("checkSWF"):""),2),!Ke&&e&&(p("localFail",2),de.debugFlash||p("tryDebug",2)),0===e&&de._wD(N("swf404",de.url),1),d("flashtojs",!1," (Check flash security or flash blockers)")),!Pe&&Xe&&(null===e?de.useFlashBlock||0===de.flashLoadTimeout?(de.useFlashBlock&&$(),p("waitForever")):(p("waitForever"),b({type:"ontimeout",ignoreInit:!0})):0===de.flashLoadTimeout?p("waitForever"):R(!0)),void 0)},de.flashLoadTimeout),void 0))},A=function(){return Je||!Ge?(oe.remove(t,"focus",A),!0):(Je=Xe=!0,p("gotFocus"),Me=!1,w(),oe.remove(t,"focus",A),!0)},ce=function(){Oe.length&&(de._wD("SoundManager 2: "+Oe.join(" "),1),Oe=[])},he=function(){ce();var t,e=[];if(de.useHTML5Audio&&de.hasHTML5){for(t in de.audioFormats)de.audioFormats.hasOwnProperty(t)&&e.push(t+" = "+de.html5[t]+(!de.html5[t]&&se&&de.flash[t]?" (using flash)":de.preferFlash&&de.flash[t]&&se?" (preferring flash)":de.html5[t]?"":" ("+(de.audioFormats[t].required?"required, ":"")+"and no flash support)"));de._wD("SoundManager 2 HTML5 support: "+e.join(", "),1)}},f=function(e){if(Pe)return!1;if(de.html5Only)return p("sm2Loaded"),Pe=!0,_(),d("onload",!0),!0;var n,i=!0;return de.useFlashBlock&&de.flashLoadTimeout&&!de.getMoviePercent()||(Pe=!0,Ae&&(n={type:!se&&Le?"NO_FLASH":"INIT_TIMEOUT"})),de._wD("SoundManager 2 "+(Ae?"failed to load":"loaded")+" ("+(Ae?"Flash security/load error":"OK")+")",Ae?2:1),Ae||e?(de.useFlashBlock&&de.oMC&&(de.oMC.className=H()+" "+(null===de.getMoviePercent()?"swf_timedout":"swf_error")),b({type:"ontimeout",error:n,ignoreInit:!0}),d("onload",!1),E(n),i=!1):d("onload",!0),Ae||(de.waitForWindowLoad&&!Te?(p("waitOnload"),oe.add(t,"load",_)):(de.waitForWindowLoad&&Te&&p("docLoaded"),_())),i},u=function(){var t,n=de.setupOptions;for(t in n)n.hasOwnProperty(t)&&(de[t]===e?de[t]=n[t]:de[t]!==n[t]&&(de.setupOptions[t]=de[t]))},h=function(){if(Pe)return p("didInit"),!1;if(de.html5Only)return Pe||(oe.remove(t,"load",de.beginDelayedInit),de.enabled=!0,f()),!0;x();try{fe._externalInterfaceTest(!1),O(!0,de.flashPollingInterval||(de.useHighPerformance?10:50)),de.debugMode||fe._disableDebug(),de.enabled=!0,d("jstoflash",!0),de.html5Only||oe.add(t,"unload",l)}catch(e){return de._wD("js/flash exception: "+(""+e)),d("jstoflash",!1),E({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),R(!0),f(),!1}return f(),oe.remove(t,"load",de.beginDelayedInit),!0},D=function(){if(M)return!1;M=!0,u(),L();var n=null,n=null,i=t.console!==e&&"function"==typeof console.log,o=ve.toLowerCase();return-1!==o.indexOf("sm2-usehtml5audio=")&&(n="1"===o.charAt(o.indexOf("sm2-usehtml5audio=")+18),i&&console.log((n?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),de.setup({useHTML5Audio:n})),-1!==o.indexOf("sm2-preferflash=")&&(n="1"===o.charAt(o.indexOf("sm2-preferflash=")+16),i&&console.log((n?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),de.setup({preferFlash:n})),!se&&de.hasHTML5&&(de._wD("SoundManager: No Flash detected"+(de.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),de.setup({useHTML5Audio:!0,preferFlash:!1})),ie(),de.html5.usingFlash=K(),Le=de.html5.usingFlash,!se&&Le&&(Oe.push(T.needFlash),de.setup({flashLoadTimeout:1})),ye.removeEventListener&&ye.removeEventListener("DOMContentLoaded",D,!1),x(),!0},ne=function(){return"complete"===ye.readyState&&(D(),ye.detachEvent("onreadystatechange",ne)),!0},k=function(){Te=!0,oe.remove(t,"load",k)},C=function(){qe&&((!de.setupOptions.useHTML5Audio||de.setupOptions.preferFlash)&&Oe.push(T.mobileUA),de.setupOptions.useHTML5Audio=!0,de.setupOptions.preferFlash=!1,Be||Ne&&!me.match(/android\s2\.3/i))&&(Oe.push(T.globalHTML5),Be&&(de.ignoreFlash=!0),Re=!0)},C(),ae(),oe.add(t,"focus",A),oe.add(t,"load",w),oe.add(t,"load",k),ye.addEventListener?ye.addEventListener("DOMContentLoaded",D,!1):ye.attachEvent?ye.attachEvent("onreadystatechange",ne):(d("onload",!1),E({type:"NO_DOM2_EVENTS",fatal:!0}))}var i=null;void 0!==t.SM2_DEFER&&SM2_DEFER||(i=new n),t.SoundManager=n,t.soundManager=i}(window),function(){var t;t=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,n,i,o,r,s;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:t.label,children:0,disabled:t.disabled}),r=t.childNodes,s=[],i=0,o=r.length;o>i;i++)n=r[i],s.push(this.add_option(n,e,t.disabled));return s},t.prototype.add_option=function(t,e,n){return"OPTION"===t.nodeName.toUpperCase()?(""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:n===!0?n:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},t}(),t.select_to_array=function(e){var n,i,o,r,s;for(i=new t,s=e.childNodes,o=0,r=s.length;r>o;o++)n=s[o],i.add_node(n);return i.parsed},this.SelectParser=t}.call(this),function(){var t,e;e=this,t=function(){function t(t,e){this.form_field=t,this.options=null!=e?e:{},this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1},t.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(){var t=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return t.blur_test()},100))},t.prototype.result_add_option=function(t){var e,n;return t.disabled?"":(t.dom_id=this.container_id+"_o_"+t.array_index,e=t.selected&&this.is_multiple?[]:["active-result"],t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),n=""!==t.style.cssText?' style="'+t.style+'"':"",'<li id="'+t.dom_id+'" class="'+e.join(" ")+'"'+n+">"+t.html+"</li>")},t.prototype.results_update_field=function(){return this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.keyup_checker=function(t){var e,n;switch(e=null!=(n=t.which)?n:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&1>this.backstroke_length&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.generate_field_id=function(){var t;return t=this.generate_random_id(),this.form_field.id=t,t},t.prototype.generate_random_char=function(){var t,e,n;return t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=Math.floor(Math.random()*t.length),e=t.substring(n,n+1)},t}(),e.AbstractChosen=t}.call(this),function(){var t,e,n,i,o={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=this,t=jQuery,t.fn.extend({chosen:function(n){var i,o,r;return r=navigator.userAgent.toLowerCase(),o=/(msie) ([\w.]+)/.exec(r)||[],i={name:o[1]||"",version:o[2]||"0"},"msie"===i.name&&("6.0"===i.version||"7.0"===i.version&&7===document.documentMode)?this:this.each(function(){var i;return i=t(this),i.hasClass("chzn-done")?void 0:i.data("chosen",new e(this,n))})}}),e=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_value=this.form_field_jq.val(),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},o.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},o.prototype.set_up_html=function(){var e,i,o,r,s,a;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",e=["chzn-container"],e.push("chzn-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chzn-rtl"),this.f_width=this.form_field_jq.outerWidth(),o={id:this.container_id,"class":e.join(" "),style:"width: "+this.f_width+"px;",title:this.form_field.title},i=t("<div />",o),this.is_multiple?i.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):i.html('<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(i),this.container=t("#"+this.container_id),this.dropdown=this.container.find("div.chzn-drop").first(),r=this.container.height(),s=this.f_width-n(this.dropdown),this.dropdown.css({width:s+"px",top:r+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),a=s-n(this.search_container)-n(this.search_field),this.search_field.css({width:a+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},o.prototype.register_observers=function(){var t=this;return this.container.mousedown(function(e){return t.container_mousedown(e)}),this.container.mouseup(function(e){return t.container_mouseup(e)}),this.container.mouseenter(function(e){return t.mouse_enter(e)}),this.container.mouseleave(function(e){return t.mouse_leave(e)}),this.search_results.mouseup(function(e){return t.search_results_mouseup(e)}),this.search_results.mouseover(function(e){return t.search_results_mouseover(e)}),this.search_results.mouseout(function(e){return t.search_results_mouseout(e)}),this.form_field_jq.bind("liszt:updated",function(e){return t.results_update_field(e)}),this.form_field_jq.bind("liszt:activate",function(e){return t.activate_field(e)}),this.form_field_jq.bind("liszt:open",function(e){return t.container_mousedown(e)}),this.search_field.blur(function(e){return t.input_blur(e)}),this.search_field.keyup(function(e){return t.keyup_checker(e)}),this.search_field.keydown(function(e){return t.keydown_checker(e)}),this.search_field.focus(function(e){return t.input_focus(e)}),this.is_multiple?this.search_choices.click(function(e){return t.choices_click(e)}):this.container.click(function(t){return t.preventDefault()})},o.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field()):(this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus",this.activate_action))},o.prototype.container_mousedown=function(e){var n;return this.is_disabled?void 0:(n=null!=e?t(e.target).hasClass("search-choice-close"):!1,e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),this.pending_destroy_click||n?this.pending_destroy_click=!1:(this.active_field?!this.is_multiple&&e&&(t(e.target)[0]===this.selected_item[0]||t(e.target).parents("a.chzn-single").length)&&(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(document).click(this.click_test_action),this.results_show()),this.activate_field()))},o.prototype.container_mouseup=function(t){return"ABBR"!==t.target.nodeName||this.is_disabled?void 0:this.results_reset(t)},o.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chzn-container-active")?this.close_field():void 0},o.prototype.close_field=function(){return t(document).unbind("click",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},o.prototype.activate_field=function(){return this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},o.prototype.test_active_click=function(e){return t(e.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},o.prototype.results_build=function(){var t,e,n,o,r;for(this.parsing=!0,this.results_data=i.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),t="",r=this.results_data,n=0,o=r.length;o>n;n++)e=r[n],e.group?t+=this.result_add_group(e):e.empty||(t+=this.result_add_option(e),e.selected&&this.is_multiple?this.choice_build(e):e.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(e.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(t),this.parsing=!1},o.prototype.result_add_group=function(e){return e.disabled?"":(e.dom_id=this.container_id+"_g_"+e.array_index,'<li id="'+e.dom_id+'" class="group-result">'+t("<div />").text(e.label).html()+"</li>")},o.prototype.result_do_highlight=function(t){var e,n,i,o,r;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),i=parseInt(this.search_results.css("maxHeight"),10),r=this.search_results.scrollTop(),o=i+r,n=this.result_highlight.position().top+this.search_results.scrollTop(),e=n+this.result_highlight.outerHeight(),e>=o)return this.search_results.scrollTop(e-i>0?e-i:0);if(r>n)return this.search_results.scrollTop(n)}},o.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},o.prototype.results_show=function(){var t;if(this.is_multiple){if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1}else this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);return t=this.is_multiple?this.container.height():this.container.height()-1,this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:t+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},o.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},o.prototype.set_tab_index=function(){var t;return this.form_field_jq.attr("tabindex")?(t=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.search_field.attr("tabindex",t)):void 0},o.prototype.show_search_field_default=function(){return this.is_multiple&&1>this.choices&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},o.prototype.search_results_mouseup=function(e){var n;return n=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),n.length?(this.result_highlight=n,this.result_select(e),this.search_field.focus()):void 0},o.prototype.search_results_mouseover=function(e){var n;return n=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),n?this.result_do_highlight(n):void 0},o.prototype.search_results_mouseout=function(e){return t(e.target).hasClass("active-result")?this.result_clear_highlight():void 0},o.prototype.choices_click=function(e){return e.preventDefault(),!this.active_field||t(e.target).hasClass("search-choice")||this.results_showing?void 0:this.results_show()},o.prototype.choice_build=function(e){var n,i,o,r=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(n=this.container_id+"_c_"+e.array_index,this.choices+=1,i=e.disabled?'<li class="search-choice search-choice-disabled" id="'+n+'"><span>'+e.html+"</span></li>":'<li class="search-choice" id="'+n+'"><span>'+e.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+e.array_index+'"></a></li>',this.search_container.before(i),o=t("#"+n).find("a").first(),o.click(function(t){return r.choice_destroy_link_click(t)}))},o.prototype.choice_destroy_link_click=function(e){return e.preventDefault(),this.is_disabled?e.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(t(e.target)))},o.prototype.choice_destroy=function(t){return this.result_deselect(t.attr("rel"))?(this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&1>this.search_field.val().length&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()):void 0},o.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},o.prototype.results_reset_cleanup=function(){return this.current_value=this.form_field_jq.val(),this.selected_item.find("abbr").remove()},o.prototype.result_select=function(t){var e,n,i,o;return this.result_highlight?(e=this.result_highlight,n=e.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(e):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=e,this.selected_item.removeClass("chzn-default")),e.addClass("result-selected"),o=n.substr(n.lastIndexOf("_")+1),i=this.results_data[o],i.selected=!0,this.form_field.options[i.options_index].selected=!0,this.is_multiple?this.choice_build(i):(this.selected_item.find("span").first().text(i.text),this.allow_single_deselect&&this.single_deselect_control_build()),(!t.metaKey&&!t.ctrlKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()):void 0},o.prototype.result_activate=function(t){return t.addClass("active-result")},o.prototype.result_deactivate=function(t){return t.removeClass("active-result")},o.prototype.result_deselect=function(e){var n,i;return i=this.results_data[e],this.form_field.options[i.options_index].disabled?!1:(i.selected=!1,this.form_field.options[i.options_index].selected=!1,n=t("#"+this.container_id+"_o_"+e),n.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[i.options_index].value}),this.search_field_scale(),!0)},o.prototype.single_deselect_control_build=function(){return this.allow_single_deselect&&1>this.selected_item.find("abbr").length?this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'):void 0},o.prototype.winnow_results=function(){var e,n,i,o,r,s,a,l,u,h,c,d,p,f,g,m,v,y;for(this.no_results_clear(),u=0,h=this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html(),s=this.search_contains?"":"^",r=RegExp(s+h.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),p=RegExp(h.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),y=this.results_data,f=0,m=y.length;m>f;f++)if(n=y[f],!n.disabled&&!n.empty)if(n.group)t("#"+n.dom_id).css("display","none");else if(!this.is_multiple||!n.selected){if(e=!1,l=n.dom_id,a=t("#"+l),r.test(n.html))e=!0,u+=1;else if(this.enable_split_word_search&&(n.html.indexOf(" ")>=0||0===n.html.indexOf("["))&&(o=n.html.replace(/\[|\]/g,"").split(" "),o.length))for(g=0,v=o.length;v>g;g++)i=o[g],r.test(i)&&(e=!0,u+=1);e?(h.length?(c=n.html.search(p),d=n.html.substr(0,c+h.length)+"</em>"+n.html.substr(c+h.length),d=d.substr(0,c)+"<em>"+d.substr(c)):d=n.html,a.html(d),this.result_activate(a),null!=n.group_array_index&&t("#"+this.results_data[n.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&l===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(a))}return 1>u&&h.length?this.no_results(h):this.winnow_results_set_highlight()},o.prototype.winnow_results_clear=function(){var e,n,i,o,r;for(this.search_field.val(""),n=this.search_results.find("li"),r=[],i=0,o=n.length;o>i;i++)e=n[i],e=t(e),e.hasClass("group-result")?r.push(e.css("display","auto")):this.is_multiple&&e.hasClass("result-selected")?r.push(void 0):r.push(this.result_activate(e));return r},o.prototype.winnow_results_set_highlight=function(){var t,e;return this.result_highlight||(e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),t=e.length?e.first():this.search_results.find(".active-result").first(),null==t)?void 0:this.result_do_highlight(t)},o.prototype.no_results=function(e){var n;return n=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),n.find("span").first().html(e),this.search_results.append(n)},o.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},o.prototype.keydown_arrow=function(){var e,n;return this.result_highlight?this.results_showing&&(n=this.result_highlight.nextAll("li.active-result").first(),n&&this.result_do_highlight(n)):(e=this.search_results.find("li.active-result").first(),e&&this.result_do_highlight(t(e))),this.results_showing?void 0:this.results_show()},o.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},o.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},o.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},o.prototype.keydown_checker=function(t){var e,n;switch(e=null!=(n=t.which)?n:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},o.prototype.search_field_scale=function(){var e,n,i,o,r,s,a,l,u;if(this.is_multiple){for(i=0,a=0,r="position:absolute; left: -1000px; top: -1000px; display:none;",s=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,u=s.length;u>l;l++)o=s[l],r+=o+":"+this.search_field.css(o)+";";return n=t("<div />",{style:r}),n.text(this.search_field.val()),t("body").append(n),a=n.width()+25,n.remove(),a>this.f_width-10&&(a=this.f_width-10),this.search_field.css({width:a+"px"}),e=this.container.height(),this.dropdown.css({top:e+"px"})}},o.prototype.generate_random_id=function(){var e;for(e="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();t("#"+e).length>0;)e+=this.generate_random_char();return e},o}(AbstractChosen),i.Chosen=e,n=function(t){var e;return e=t.outerWidth()-t.width()},i.get_side_border_padding=n}.call(this),function(t){function e(t,e){var n=typeof t[e];return"function"===n||!("object"!=n||!t[e])||"unknown"==n}function n(t,e,n){return 0>e&&(e+=t.value.length),n===void 0&&(n=e),0>n&&(n+=t.value.length),{start:e,end:n}}function i(){return"object"==typeof document.body&&document.body?document.body:document.getElementsByTagName("body")[0]}var o,r,s,a,l,u,h,c,d;t(document).ready(function(){function p(t,e){return function(){var n=this.jquery?this[0]:this,i=n.nodeName.toLowerCase();return 1!=n.nodeType||"textarea"!=i&&("input"!=i||"text"!=n.type)||(n=[n].concat(Array.prototype.slice.call(arguments)),n=t.apply(this,n),e)?e?this:void 0:n}}var f=document.createElement("textarea");if(i().appendChild(f),f.selectionStart!==void 0&&f.selectionEnd!==void 0)o=function(t){return{start:t.selectionStart,end:t.selectionEnd,length:t.selectionEnd-t.selectionStart,text:t.value.slice(t.selectionStart,t.selectionEnd)}},r=function(t,e,i){e=n(t,e,i),t.selectionStart=e.start,t.selectionEnd=e.end},d=function(t,e){e?t.selectionEnd=t.selectionStart:t.selectionStart=t.selectionEnd};else{if(!(e(f,"createTextRange")&&"object"==typeof document.selection&&document.selection&&e(document.selection,"createRange")))return i().removeChild(f),window.console&&window.console.log&&window.console.log("TextInputs module for Rangy not supported in your browser. Reason: No means of finding text input caret position"),void 0;o=function(t){var e,n,i,o=0,r=0;return(i=document.selection.createRange())&&i.parentElement()==t&&(n=t.value.length,e=t.value.replace(/\r\n/g,"\n"),r=t.createTextRange(),r.moveToBookmark(i.getBookmark()),i=t.createTextRange(),i.collapse(!1),r.compareEndPoints("StartToEnd",i)>-1?o=r=n:(o=-r.moveStart("character",-n),o+=e.slice(0,o).split("\n").length-1,r.compareEndPoints("EndToEnd",i)>-1?r=n:(r=-r.moveEnd("character",-n),r+=e.slice(0,r).split("\n").length-1))),{start:o,end:r,length:r-o,text:t.value.slice(o,r)}},r=function(t,e,i){e=n(t,e,i),i=t.createTextRange();var o=e.start-(t.value.slice(0,e.start).split("\r\n").length-1);i.collapse(!0),e.start==e.end?i.move("character",o):(i.moveEnd("character",e.end-(t.value.slice(0,e.end).split("\r\n").length-1)),i.moveStart("character",o)),i.select()},d=function(t,e){var n=document.selection.createRange();n.collapse(e),n.select()}}i().removeChild(f),a=function(t,e,n,i){var o;e!=n&&(o=t.value,t.value=o.slice(0,e)+o.slice(n)),i&&r(t,e,e)},s=function(t){var e=o(t);a(t,e.start,e.end,!0)},c=function(t){var e,n=o(t);return n.start!=n.end&&(e=t.value,t.value=e.slice(0,n.start)+e.slice(n.end)),r(t,n.start,n.start),n.text},l=function(t,e,n,i){var o=t.value;t.value=o.slice(0,n)+e+o.slice(n),i&&(e=n+e.length,r(t,e,e))},u=function(t,e){var n=o(t),i=t.value;t.value=i.slice(0,n.start)+e+i.slice(n.end),n=n.start+e.length,r(t,n,n)},h=function(t,e,n){var i=o(t),s=t.value;t.value=s.slice(0,i.start)+e+i.text+n+s.slice(i.end),e=i.start+e.length,r(t,e,e+i.length)},t.fn.extend({getSelection:p(o,!1),setSelection:p(r,!0),collapseSelection:p(d,!0),deleteSelectedText:p(s,!0),deleteText:p(a,!0),extractSelectedText:p(c,!1),insertText:p(l,!0),replaceSelectedText:p(u,!0),surroundSelectedText:p(h,!0)})
})}(jQuery),function(t){var e={tabHandle:".handle",speed:300,action:"click",tabLocation:"left",topPos:"200px",leftPos:"20px",fixedPosition:!1,positioning:"absolute",pathToTabImage:null,imageHeight:null,imageWidth:null,onLoadSlideOut:!1,topReferenceElement:null,height:null},n=function(t,e){var n=t.outerHeight();return"function"==typeof e.height&&(n=e.height(t)),{containerWidth:parseInt(t.outerWidth(),10)+"px",containerHeight:parseInt(n,10)+20+"px",tabWidth:parseInt(e.tabHandle.outerWidth(),10)+"px",tab:parseInt(e.tabHandle.outerHeight(),10)+"px"}},i=function(e,n,i){if(("top"===n.tabLocation||"bottom"===n.tabLocation)&&(e.css({left:n.leftPos}),n.tabHandle.css({right:0})),"top"===n.tabLocation&&(e.css({top:"-"+i.containerHeight}),n.tabHandle.css({bottom:"-"+i.tabHeight})),"bottom"===n.tabLocation&&(e.css({bottom:"-"+i.containerHeight,position:"fixed"}),n.tabHandle.css({top:"-"+i.tabHeight})),"left"===n.tabLocation||"right"===n.tabLocation){var o=parseInt(n.topPos,10),r=parseInt(n.topPos,10),s=0;n.topReferenceElement&&(o=t(n.topReferenceElement).position().top,s=r-o),console.log("diff",s,"top",o,"topPos",r,"height",i.containerHeight),e.css({height:i.containerHeight,top:o}),n.tabHandle.css({top:r+"px"})}"left"===n.tabLocation&&(e.css({left:"-"+i.containerWidth}),n.tabHandle.css({right:"-"+i.tabWidth})),"right"===n.tabLocation&&(e.css({right:"-"+i.containerWidth}),n.tabHandle.css({left:"-"+i.tabWidth}),t("html").css("overflow-x","hidden"))},o={refresh:function(){console.log("this",t(this));var e=t(this).data("tabSlideOut");if(e){var o=n(t(this),e);i(this,e,o),console.log("reset",o)}}};t.fn.tabSlideOut=function(r){if("string"!=typeof r){var s=t.extend(e,r||{}),a=t(this).data("tabSlideOut");a||t(this).data("tabSlideOut",s),s.tabHandle=t(s.tabHandle);var l=this;s.positioning=s.fixedPosition===!0?"fixed":"absolute",!document.all||window.opera||window.XMLHttpRequest||(s.positioning="absolute"),null!=s.pathToTabImage&&s.tabHandle.css({background:"url("+s.pathToTabImage+") no-repeat",width:s.imageWidth,height:s.imageHeight}),s.tabHandle.css({display:"block",textIndent:"-99999px",outline:"none",position:"absolute"}),l.css({"line-height":"1",position:s.positioning});var u=n(l,s);i(l,s,u),s.tabHandle.click(function(t){t.preventDefault()});var h=function(){if(l.hasClass("open")){var t=n(l,s);console.log("props",t),"top"===s.tabLocation?l.animate({top:"-"+t.containerHeight},s.speed).removeClass("open"):"left"===s.tabLocation?l.animate({left:"-"+t.containerWidth},s.speed).removeClass("open"):"right"===s.tabLocation?l.animate({right:"-"+t.containerWidth},s.speed).removeClass("open"):"bottom"===s.tabLocation&&l.animate({bottom:"-"+t.containerHeight},s.speed).removeClass("open")}},c=function(){var t=n(l,s);i(l,s,t),console.log("props out",t),console.log(l[0].scrollHeight),"top"==s.tabLocation?l.animate({top:"-3px"},s.speed).addClass("open"):"left"==s.tabLocation?l.animate({left:"-3px"},s.speed).addClass("open"):"right"==s.tabLocation?l.animate({right:"-3px"},s.speed).addClass("open"):"bottom"==s.tabLocation&&l.animate({bottom:"-3px"},s.speed).addClass("open")},d=function(){l.click(function(t){t.stopPropagation()}),t(document).click(function(){h()})},p=function(){s.tabHandle.click(function(){l.hasClass("open")?h():c()}),d()},f=function(){l.hover(function(){c()},function(){h()}),s.tabHandle.click(function(){l.hasClass("open")&&h()}),d()},g=function(){h(),setTimeout(c,500)};"click"===s.action&&p(),"hover"===s.action&&f(),s.onLoadSlideOut&&g()}else if(o[r])return o[r].apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery),function(t){function e(t){return"object"==typeof t?t:{top:t,left:t}}var n=t.scrollTo=function(e,n,i){t(window).scrollTo(e,n,i)};n.defaults={axis:"xy",duration:parseFloat(t.fn.jquery)>=1.3?0:1,limit:!0},n.window=function(){return t(window)._scrollable()},t.fn._scrollable=function(){return this.map(function(){var e=this,n=!e.nodeName||-1!=t.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!n)return e;var i=(e.contentWindow||e).document||e.ownerDocument||e;return/webkit/i.test(navigator.userAgent)||"BackCompat"==i.compatMode?i.body:i.documentElement})},t.fn.scrollTo=function(i,o,r){return"object"==typeof o&&(r=o,o=0),"function"==typeof r&&(r={onAfter:r}),"max"==i&&(i=9e9),r=t.extend({},n.defaults,r),o=o||r.duration,r.queue=r.queue&&r.axis.length>1,r.queue&&(o/=2),r.offset=e(r.offset),r.over=e(r.over),this._scrollable().each(function(){function s(t){u.animate(c,o,r.easing,t&&function(){t.call(this,i,r)})}if(null!=i){var a,l=this,u=t(l),h=i,c={},d=u.is("html,body");switch(typeof h){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(h)){h=e(h);break}if(h=t(h,this),!h.length)return;case"object":(h.is||h.style)&&(a=(h=t(h)).offset())}t.each(r.axis.split(""),function(t,e){var i="x"==e?"Left":"Top",o=i.toLowerCase(),p="scroll"+i,f=l[p],g=n.max(l,e);if(a)c[p]=a[o]+(d?0:f-u.offset()[o]),r.margin&&(c[p]-=parseInt(h.css("margin"+i))||0,c[p]-=parseInt(h.css("border"+i+"Width"))||0),c[p]+=r.offset[o]||0,r.over[o]&&(c[p]+=h["x"==e?"width":"height"]()*r.over[o]);else{var m=h[o];c[p]=m.slice&&"%"==m.slice(-1)?parseFloat(m)/100*g:m}r.limit&&/^\d+$/.test(c[p])&&(c[p]=0>=c[p]?0:Math.min(c[p],g)),!t&&r.queue&&(f!=c[p]&&s(r.onAfterFirst),delete c[p])}),s(r.onAfter)}}).end()},n.max=function(e,n){var i="x"==n?"Width":"Height",o="scroll"+i;if(!t(e).is("html,body"))return e[o]-t(e)[i.toLowerCase()]();var r="client"+i,s=e.ownerDocument.documentElement,a=e.ownerDocument.body;return Math.max(s[o],a[o])-Math.min(s[r],a[r])}}(jQuery),function(t){t.fn.zclip=function(e){if("object"==typeof e&&!e.length){var n=t.extend({path:"ZeroClipboard.swf",copy:null,beforeCopy:null,afterCopy:null,clickAfter:!0,setHandCursor:!0,setCSSEffects:!0},e);return this.each(function(){var e=t(this);if(e.is(":visible")&&("string"==typeof n.copy||t.isFunction(n.copy))){ZeroClipboard.setMoviePath(n.path);var i=new ZeroClipboard.Client;t.isFunction(n.copy)&&e.bind("zClip_copy",n.copy),t.isFunction(n.beforeCopy)&&e.bind("zClip_beforeCopy",n.beforeCopy),t.isFunction(n.afterCopy)&&e.bind("zClip_afterCopy",n.afterCopy),i.setHandCursor(n.setHandCursor),i.setCSSEffects(n.setCSSEffects),i.addEventListener("mouseOver",function(){e.trigger("mouseenter")}),i.addEventListener("mouseOut",function(){e.trigger("mouseleave")}),i.addEventListener("mouseDown",function(){e.trigger("mousedown"),t.isFunction(n.copy)?i.setText(e.triggerHandler("zClip_copy")):i.setText(n.copy),t.isFunction(n.beforeCopy)&&e.trigger("zClip_beforeCopy")}),i.addEventListener("complete",function(i,o){t.isFunction(n.afterCopy)?e.trigger("zClip_afterCopy"):(o.length>500&&(o=o.substr(0,500)+"...\n\n("+(o.length-500)+" characters not shown)"),e.removeClass("hover"),alert("Copied text to clipboard:\n\n "+o)),n.clickAfter&&e.trigger("click")}),i.glue(e[0],e.parent()[0]),t(window).bind("load resize",function(){i.reposition()})}})}return"string"==typeof e?this.each(function(){var n=t(this);e=e.toLowerCase();var i=n.data("zclipId"),o=t("#"+i+".zclip");"remove"==e?(o.remove(),n.removeClass("active hover")):"hide"==e?(o.hide(),n.removeClass("active hover")):"show"==e&&o.show()}):void 0}}(jQuery);var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t.addClass||(t.hide=function(){this.style.display="none"},t.show=function(){this.style.display=""},t.addClass=function(t){this.removeClass(t),this.className+=" "+t},t.removeClass=function(t){for(var e=this.className.split(/\s+/),n=-1,i=0;e.length>i;i++)e[i]==t&&(n=i,i=e.length);return n>-1&&(e.splice(n,1),this.className=e.join(" ")),this},t.hasClass=function(t){return!!this.className.match(RegExp("\\s*"+t+"\\s*"))}),t},setMoviePath:function(t){this.moviePath=t},dispatch:function(t,e,n){var i=this.clients[t];i&&i.receiveEvent(e,n)},register:function(t,e){this.clients[t]=e},getDOMObjectPosition:function(t,e){var n={left:0,top:0,width:t.width?t.width:t.offsetWidth,height:t.height?t.height:t.offsetHeight};return t&&t!=e&&(n.left+=t.offsetLeft,n.top+=t.offsetTop),n},Client:function(t){this.handlers={},this.id=ZeroClipboard.nextId++,this.movieId="ZeroClipboardMovie_"+this.id,ZeroClipboard.register(this.id,this),t&&this.glue(t)}};ZeroClipboard.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(t,e,n){this.domElement=ZeroClipboard.$(t);var i=99;this.domElement.style.zIndex&&(i=parseInt(this.domElement.style.zIndex,10)+1),"string"==typeof e?e=ZeroClipboard.$(e):e===void 0&&(e=document.getElementsByTagName("body")[0]);var o=ZeroClipboard.getDOMObjectPosition(this.domElement,e);this.div=document.createElement("div"),this.div.className="zclip",this.div.id="zclip-"+this.movieId,$(this.domElement).data("zclipId","zclip-"+this.movieId);var r=this.div.style;if(r.position="absolute",r.left=""+o.left+"px",r.top=""+o.top+"px",r.width=""+o.width+"px",r.height=""+o.height+"px",r.zIndex=i,"object"==typeof n)for(addedStyle in n)r[addedStyle]=n[addedStyle];e.appendChild(this.div),this.div.innerHTML=this.getHTML(o.width,o.height)},getHTML:function(t,e){var n="",i="id="+this.id+"&width="+t+"&height="+e;if(navigator.userAgent.match(/MSIE/)){var o=location.href.match(/^https/i)?"https://":"http://";n+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+o+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+t+'" height="'+e+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+i+'"/><param name="wmode" value="transparent"/></object>'}else n+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+t+'" height="'+e+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+i+'" wmode="transparent" />';return n},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide(),this.div.innerHTML="";var t=document.getElementsByTagName("body")[0];try{t.removeChild(this.div)}catch(e){}this.domElement=null,this.div=null}},reposition:function(t){if(t&&(this.domElement=ZeroClipboard.$(t),this.domElement||this.hide()),this.domElement&&this.div){var e=ZeroClipboard.getDOMObjectPosition(this.domElement),n=this.div.style;n.left=""+e.left+"px",n.top=""+e.top+"px"}},setText:function(t){this.clipText=t,this.ready&&this.movie.setText(t)},addEventListener:function(t,e){t=(""+t).toLowerCase().replace(/^on/,""),this.handlers[t]||(this.handlers[t]=[]),this.handlers[t].push(e)},setHandCursor:function(t){this.handCursorEnabled=t,this.ready&&this.movie.setHandCursor(t)},setCSSEffects:function(t){this.cssEffects=!!t},receiveEvent:function(t,e){switch(t=(""+t).toLowerCase().replace(/^on/,"")){case"load":if(this.movie=document.getElementById(this.movieId),!this.movie){var n=this;return setTimeout(function(){n.receiveEvent("load",null)},1),void 0}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var n=this;return setTimeout(function(){n.receiveEvent("load",null)},100),this.ready=!0,void 0}this.ready=!0;try{this.movie.setText(this.clipText)}catch(i){}try{this.movie.setHandCursor(this.handCursorEnabled)}catch(i){}break;case"mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),this.domElement.removeClass("hover"));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[t])for(var o=0,r=this.handlers[t].length;r>o;o++){var s=this.handlers[t][o];"function"==typeof s?s(this,e):"object"==typeof s&&2==s.length?s[0][s[1]](this,e):"string"==typeof s&&window[s](this,e)}}},!function(t){t(function(){t.support.transition=function(){var t=function(){var t,e=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in n)if(void 0!==e.style[t])return n[t]}();return t&&{end:t}}()})}(window.jQuery),!function(t){var e=function(e,n){this.options=n,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,n=t.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),n&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),n?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault(),e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;t(document).on("focusin.modal",function(t){e.$element[0]!==t.target&&!e.$element.has(t.target).length&&e.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,n=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(n),e.hideModal()})},hideModal:function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e):e()):e&&e()}};var n=t.fn.modal;t.fn.modal=function(n){return this.each(function(){var i=t(this),o=i.data("modal"),r=t.extend({},t.fn.modal.defaults,i.data(),"object"==typeof n&&n);o||i.data("modal",o=new e(this,r)),"string"==typeof n?o[n]():r.show&&o.show()})},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),i=n.attr("href"),o=t(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),r=o.data("modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},o.data(),n.data());e.preventDefault(),o.modal(r).one("hide",function(){n.focus()})})}(window.jQuery),!function(t){function e(){t(i).each(function(){n(t(this)).removeClass("open")})}function n(e){var n,i=e.attr("data-target");return i||(i=e.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),n=i&&t(i),n&&n.length||(n=e.parent()),n}var i="[data-toggle=dropdown]",o=function(e){var n=t(e).on("click.dropdown.data-api",this.toggle);t("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};o.prototype={constructor:o,toggle:function(){var i,o,r=t(this);if(!r.is(".disabled, :disabled"))return i=n(r),o=i.hasClass("open"),e(),o||i.toggleClass("open"),r.focus(),!1},keydown:function(e){var o,r,s,a,l;if(/(38|40|27)/.test(e.keyCode)&&(o=t(this),e.preventDefault(),e.stopPropagation(),!o.is(".disabled, :disabled"))){if(s=n(o),a=s.hasClass("open"),!a||a&&27==e.keyCode)return 27==e.which&&s.find(i).focus(),o.click();r=t("[role=menu] li:not(.divider):visible a",s),r.length&&(l=r.index(r.filter(":focus")),38==e.keyCode&&l>0&&l--,40==e.keyCode&&r.length-1>l&&l++,~l||(l=0),r.eq(l).focus())}}};var r=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),i=n.data("dropdown");i||n.data("dropdown",i=new o(this)),"string"==typeof e&&i[e].call(n)})},t.fn.dropdown.Constructor=o,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.dropdown.data-api",e).on("click.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.dropdown-menu",function(t){t.stopPropagation()}).on("click.dropdown.data-api",i,o.prototype.toggle).on("keydown.dropdown.data-api",i+", [role=menu]",o.prototype.keydown)}(window.jQuery),!function(t){var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.button.defaults,n)};e.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.data(),o=n.is("input")?"val":"html";t+="Text",i.resetText||n.data("resetText",n[o]()),n[o](i[t]||this.options[t]),setTimeout(function(){"loadingText"==t?n.addClass(e).attr(e,e):n.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons-radio"]');t&&t.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=function(n){return this.each(function(){var i=t(this),o=i.data("button"),r="object"==typeof n&&n;o||i.data("button",o=new e(this,r)),"toggle"==n?o.toggle():n&&o.setState(n)})},t.fn.button.defaults={loadingText:"loading..."},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.button.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(t){var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=t(this.options.menu),this.shown=!1,this.listen()};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var e=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:e.top+e.height,left:e.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var e;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(e=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source,e?this.process(e):this)},process:function(e){var n=this;return e=t.grep(e,function(t){return n.matcher(t)}),e=this.sorter(e),e.length?this.render(e.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,n=[],i=[],o=[];e=t.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?i.push(e):o.push(e):n.push(e);return n.concat(i,o)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(e){var n=this;return e=t(e).map(function(e,i){return e=t(n.options.item).attr("data-value",i),e.find("a").html(n.highlighter(i)),e[0]}),e.first().addClass("active"),this.$menu.html(e),this},next:function(){var e=this.$menu.find(".active").removeClass("active"),n=e.next();n.length||(n=t(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),e=t.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)).on("mouseleave","li",t.proxy(this.mouseleave,this))},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(t){t.stopPropagation(),t.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=t.fn.typeahead;t.fn.typeahead=function(n){return this.each(function(){var i=t(this),o=i.data("typeahead"),r="object"==typeof n&&n;o||i.data("typeahead",o=new e(this,r)),"string"==typeof n&&o[n]()})},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},t.fn.typeahead.Constructor=e,t.fn.typeahead.noConflict=function(){return t.fn.typeahead=n,this},t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var e=t(this);e.data("typeahead")||e.typeahead(e.data())})}(window.jQuery),!function(t){var e=function(e,n){if(this.$element=t(e),this.type=this.$element.data("uploadtype")||(this.$element.find(".thumbnail").length>0?"image":"file"),this.$input=this.$element.find(":file"),0!==this.$input.length){this.name=this.$input.attr("name")||n.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=t('<input type="hidden" />'),this.$element.prepend(this.$hidden)),this.$preview=this.$element.find(".fileupload-preview");var i=this.$preview.css("height");"inline"!=this.$preview.css("display")&&"0px"!=i&&"none"!=i&&this.$preview.css("line-height",i),this.original={exists:this.$element.hasClass("fileupload-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.$remove=this.$element.find('[data-dismiss="fileupload"]'),this.$element.find('[data-trigger="fileupload"]').on("click.fileupload",t.proxy(this.trigger,this)),this.listen()}};e.prototype={listen:function(){this.$input.on("change.fileupload",t.proxy(this.change,this)),t(this.$input[0].form).on("reset.fileupload",t.proxy(this.reset,this)),this.$remove&&this.$remove.on("click.fileupload",t.proxy(this.clear,this))},change:function(t,e){if("clear"!==e){var n=void 0!==t.target.files?t.target.files[0]:t.target.value?{name:t.target.value.replace(/^.+\\/,"")}:null;if(!n)return this.clear(),void 0;if(this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name),"image"===this.type&&this.$preview.length>0&&(n.type!==void 0?n.type.match("image.*"):n.name.match("\\.(gif|png|jpe?g)$"))&&"undefined"!=typeof FileReader){var i=new FileReader,o=this.$preview,r=this.$element;i.onload=function(t){o.html('<img src="'+t.target.result+'" '+("none"!=o.css("max-height")?'style="max-height: '+o.css("max-height")+';"':"")+" />"),r.addClass("fileupload-exists").removeClass("fileupload-new")},i.readAsDataURL(n)}else this.$preview.text(n.name),this.$element.addClass("fileupload-exists").removeClass("fileupload-new")}},clear:function(t){if(this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),navigator.userAgent.match(/msie/i)){var e=this.$input.clone(!0);this.$input.after(e),this.$input.remove(),this.$input=e}else this.$input.val("");this.$preview.html(""),this.$element.addClass("fileupload-new").removeClass("fileupload-exists"),t&&(this.$input.trigger("change",["clear"]),t.preventDefault())},reset:function(){this.clear(),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.original.exists?this.$element.addClass("fileupload-exists").removeClass("fileupload-new"):this.$element.addClass("fileupload-new").removeClass("fileupload-exists")},trigger:function(t){this.$input.trigger("click"),t.preventDefault()}},t.fn.fileupload=function(n){return this.each(function(){var i=t(this),o=i.data("fileupload");o||i.data("fileupload",o=new e(this,n)),"string"==typeof n&&o[n]()})},t.fn.fileupload.Constructor=e,t(document).on("click.fileupload.data-api",'[data-provides="fileupload"]',function(e){var n=t(this);if(!n.data("fileupload")){n.fileupload(n.data());var i=t(e.target).closest('[data-dismiss="fileupload"],[data-trigger="fileupload"]');i.length>0&&(i.trigger("click.fileupload"),e.preventDefault())}})}(window.jQuery),$.ui.plugin.add("draggable","snap2",{start:function(){var t=$(this).data("ui-draggable"),e=t.options;t.snap2Elements=[],$(e.snap2.constructor!==String?e.snap2.items||":data(ui-draggable)":e.snap2).each(function(){var e=$(this),n=e.offset();this!==t.element[0]&&t.snap2Elements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:n.top,left:n.left})})},drag:function(t,e){var n,i,o,r,s,a,l,u,h,c,d=$(this).data("ui-draggable"),p=d.options,f=p.snap2Tolerance,g=p.snap2Sides,m=e.offset.left,v=m+d.helperProportions.width,y=e.offset.top,b=y+d.helperProportions.height;for(h=d.snap2Elements.length-1;h>=0;h--)s=d.snap2Elements[h].left,a=s+d.snap2Elements[h].width,l=d.snap2Elements[h].top,u=l+d.snap2Elements[h].height,m>s-f&&a+f>m&&y>l-f&&u+f>y||m>s-f&&a+f>m&&b>l-f&&u+f>b||v>s-f&&a+f>v&&y>l-f&&u+f>y||v>s-f&&a+f>v&&b>l-f&&u+f>b?("inner"!==p.snap2Mode&&(n=f>=Math.abs(l-b)&&-1!==g.indexOf("t"),i=f>=Math.abs(u-y)&&-1!==g.indexOf("b"),o=f>=Math.abs(s-v)&&-1!==g.indexOf("l"),r=f>=Math.abs(a-m)&&-1!==g.indexOf("r"),n&&(e.position.top=d._convertPositionTo("relative",{top:l-d.helperProportions.height,left:0}).top-d.margins.top),i&&(e.position.top=d._convertPositionTo("relative",{top:u,left:0}).top-d.margins.top),o&&(e.position.left=d._convertPositionTo("relative",{top:0,left:s-d.helperProportions.width}).left-d.margins.left),r&&(e.position.left=d._convertPositionTo("relative",{top:0,left:a}).left-d.margins.left)),c=n||i||o||r,"outer"!==p.snap2Mode&&(n=f>=Math.abs(l-y)&&-1!==g.indexOf("t"),i=f>=Math.abs(u-b)&&-1!==g.indexOf("b"),o=f>=Math.abs(s-m)&&-1!==g.indexOf("l"),r=f>=Math.abs(a-v)&&-1!==g.indexOf("r"),n&&(e.position.top=d._convertPositionTo("relative",{top:l,left:0}).top-d.margins.top),i&&(e.position.top=d._convertPositionTo("relative",{top:u-d.helperProportions.height,left:0}).top-d.margins.top),o&&(e.position.left=d._convertPositionTo("relative",{top:0,left:s}).left-d.margins.left),r&&(e.position.left=d._convertPositionTo("relative",{top:0,left:a-d.helperProportions.width}).left-d.margins.left)),!d.snap2Elements[h].snapping&&(n||i||o||r||c)&&d.options.snap2.snap2&&d.options.snap2.snap2.call(d.element,t,$.extend(d._uiHash(),{snap2Item:d.snap2Elements[h].item})),d.snap2Elements[h].snapping=n||i||o||r||c):(d.snap2Elements[h].snapping&&d.options.snap2.release&&d.options.snap2.release.call(d.element,t,$.extend(d._uiHash(),{snap2Item:d.snap2Elements[h].item})),d.snap2Elements[h].snapping=!1)}});var EDIBLE=EDIBLE||{};EDIBLE.namespace=function(t){var e,n=t.split("."),i=EDIBLE;for("EDIBLE"===n[0]&&(n=n.lice(1)),e=0;n.length>e;e+=1)i[n[e]]===void 0&&(i[n[e]]={}),i=i[n[e]];return i},EDIBLE.namespace("modules.multiCanvas"),EDIBLE.namespace("modules.multiContext"),EDIBLE.modules.MultiContext=function(){var t=function(){this.contexts=this.canvas.canvases.map(function(t){return t.getContext("2d")}),void 0!==this._fillStyle&&(this.fillStyle=this._fillStyle),void 0!==this._strokeStyle&&(this.strokeStyle=this._strokeStyle),void 0!==this._lineWidth&&(this.lineWidth=this._lineWidth),this._position={ctx:this.contexts[0],x:0,y:0,gx:0,gy:0}},e=function(t,e,n){this.contexts[n];var i=n*this._maxWidth,o=i+this._maxWidth;return n===this.contexts.length-1&&(o=i+this.canvas.canvases[n].width),t>=i&&o>t?t-i:void 0},n=function(t){return function(e,n,i,o){var r,s,a=!1;for(r=0;this.contexts.length>r;r+=1){if(s=this._pointInContext(e,n,r),rPt=this._pointInContext(e+i,n,r),void 0!==s&&void 0!==rPt){this.contexts[r][t](s,n,i,o);break}if(void 0!==s)this.contexts[r][t](s,n,this._maxWidth-s,o),a=!0;else{if(void 0!==rPt){this.contexts[r][t](0,n,rPt,o);break}a&&this.contexts[r][t](0,n,this._maxWidth,o)}}}},i=function(t){return function(e){var n;if(this["_"+t]=e,e instanceof Array)for(n=0;this.contexts.length>n;n+=1)this.contexts[n][t]=e[n];else for(n=0;this.contexts.length>n;n+=1)this.contexts[n][t]=e;return e}},o=function(t){return function(){return this["_"+t]}},r=function(t){return function(){this.contexts.forEach(function(e){e[t]()})}};MultiContext=function(n,i){this.canvas=n,this._maxWidth=i,this._updateContexts=t.bind(this),this._pointInContext=e.bind(this),this._updateContexts(),this._position={ctx:this.contexts[0],x:0,y:0,gx:0,gy:0}},MultiContext.prototype={constructor:EDIBLE.modules.MultiContext,version:"0.1",createLinearGradient:function(t,e,n,i){var o=[];return o=this.contexts.map(function(o){return o.createLinearGradient(t,e,n,i)}),o.addColorStop=function(t,e){this.map(function(n){n.addColorStop(t,e)})},o}};var s=["save","restore","closePath","beginPath","stroke","fill"];s.forEach(function(t){MultiContext.prototype[t]=r(t)});var a=["clearRect","strokeRect","fillRect","rect"];a.forEach(function(t){MultiContext.prototype[t]=n(t)});var l=function(t,e){var n;for(n=0;this.contexts.length>n;n++)pt=this._pointInContext(t,e,n),void 0!==pt&&(this._position={ctx:this.contexts[n],x:pt,y:e,gx:t,gy:e},this.contexts[n].moveTo(pt,e))},u=function(t,e){var n,i,o=0;for(n=0;this.contexts.length>n;n++){if(i=this.contexts[n],pt=this._pointInContext(t,e,n),void 0!==pt&&i===this._position.ctx){i.lineTo(pt,e),this._position={ctx:i,x:pt,y:e,gx:t,gy:e};break}if(void 0!==pt&&this._position.gx>t){m=(e-this._position.gy)/parseFloat(t-this._position.gx);for(var r=function(n){return m*(n-t)+e},s={ctx:i,x:pt,y:e,gx:t,gy:e};this.contexts.indexOf(this._position.ctx)>n;)newY=r(o+this.canvas.canvases[n].width),i.moveTo(this.canvas.canvases[n].width,newY),i.lineTo(pt,e),pt=0,e=newY,o+=this.canvas.canvases[n].width,n+=1,i=this.contexts[n];
this._position.ctx.lineTo(pt,e),this._position=s;break}if(void 0!==pt&&t>this._position.gx){console.log("line to the right"),m=(e-this._position.gy)/parseFloat(t-this._position.gx),console.log("slope",m);for(var r=function(n){return m*(n-t)+e},s={ctx:i,x:pt,y:e,gx:t,gy:e};n>this.contexts.indexOf(this._position.ctx);)newY=r(o),console.log("ctx",n,"moveto",0,newY,"lineto",pt,e),i.moveTo(0,newY),i.lineTo(pt,e),pt=this.canvas.canvases[n-1].width,e=newY,o-=this.canvas.canvases[n-1].width,n-=1,i=this.contexts[n];this._position.ctx.lineTo(pt,e),this._position=s;break}o+=this.canvas.canvases[n].width}};MultiContext.prototype.moveTo=l,MultiContext.prototype.lineTo=u;var h=["fillStyle","font","globalAlpha","globalCompositeOperation","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline"];return h.forEach(function(t){MultiContext.prototype.__defineSetter__(t,i(t)),MultiContext.prototype.__defineGetter__(t,o(t))}),MultiContext}(),EDIBLE.modules.MultiCanvas=function(){return MultiCanvas=function(t,e){this._maxWidth=void 0!==e?parseFloat(e):3e4,this.canvases=[t],this.mctx=new EDIBLE.modules.MultiContext(this,this._maxWidth)},MultiCanvas.prototype={constructor:EDIBLE.modules.MultiCanvas,version:"0.1",clone:function(t){this.width=t.width,this.height=t.height;var e,n;for(e=0;t.canvases.length>e;e++)n=this.canvases[e].getContext("2d"),n.drawImage(t.canvases[0],0,0,t.canvases[0].width,t.canvases[0].height)},destroy:function(){var t,e=this.canvases[0].parentNode;for(t=0;this.canvases.length>t;t++)e.removeChild(this.canvases[t])},getContext:function(t){if("2d"===t)return this.mctx;throw"Only '2d' contexts are supported."},get height(){return this._height},set height(t){var e;for(e=0;this.canvases.length>e;e++)this.canvases[e].height=t;return this._height=t,t},get width(){return this._width},set width(t){var e,n,i=parseInt(t/this._maxWidth+1),o=this.canvases[0].parentNode;for(e=0;this.canvases.length>e;e+=1)o.removeChild(this.canvases[e]);for(this.canvases=this.canvases.slice(0,1),this.canvases=[],e=0;i>e;e+=1)e>=this.canvases.length&&(n=document.createElement("canvas"),n.height=this._height,n.style.display="inline-block",o.appendChild(n),this.canvases.push(n)),this.canvases[e].width=e===i-1?t-this._maxWidth*(i-1):this._maxWidth;return this._width=t,this.mctx._updateContexts(),t}},MultiCanvas}(),function(t){"use strict";t.widget("edible.wfBase",{_create:function(){console.log("REGISTERING AS NAME",this.widgetName),this.element.data("waveformClass",this.widgetName)},_destroy:function(){this.element.removeData("waveformClass"),this._super("destroy")}})}(jQuery,window,document),$.fn.wf=function(){return this[this.data("waveformClass")].apply(this,arguments)},function(t,e,n,i){"use strict";t.widget("edible.waveform",t.edible.wfBase,{options:{data:[],height:"90px",canvHeight:"75px",topBarHeight:15,dur:1e3,len:1e3,start:0,pxPerMs:.1,name:"audio",filename:"audio.mp3",innerColor:i,fixed:!1,mute:!1,globalVolume:1,_dirty:!0,volume:{x:[0],y:[1]}},width:function(){return this.options.len*this.options.pxPerMs},waveformClass:function(){return"waveform"},isDirty:function(){return this.options._dirty},addVolumeMarker:function(){},exportExtras:function(){return this.options._dirty=!1,{}},debugInfo:function(){return JSON.stringify(this.options,null,4)},slice:function(e){var i=this.element.offset(),o=e.pageX-i.left,r=n.createElement("div"),s=o/this.options.pxPerMs;return t(r)[this.waveformClass](t.extend(!0,{},this.options,{start:this.options.start+s,len:this.options.len-s})),this._setOptions({len:o/this.options.pxPerMs}),{waveform:r,pos:o/this.options.pxPerMs}},_computePosFromResize:function(t,e){console.log("ui",e);var n=e.position.left-e.originalPosition.left,i=e.originalPosition.left-this.options.start*this.options.pxPerMs,o=(this.options.dur-this.options.start)*this.options.pxPerMs,r=this.options.start,s=e.size.width/this.options.pxPerMs,a=e.position.left;return 0!==n?(r=this.options.start+n/this.options.pxPerMs,0>r&&(r=0,a=i,s=this.options.len+this.options.start)):e.size.width>o&&(s=this.options.dur-this.options.start),console.log("orig element offset",e.originalElement.offset()),this.element.css("left",a-this.element.parent().offset().left),{len:s,start:r}},_create:function(){this._super("_create");var e,n,i=this,o=t("#waveformTemplate").html();this.element.addClass("edible-waveform").append(_.template(o,this.options)),e=this.element.find(".displayCanvas"),n=this.element.find(".topBar"),this.element.find(".removeWaveform").click(function(t){return i._trigger("destroy"),i._destroy(),t.preventDefault(),!1}),this.options.fixed||this.element.draggable({handle:n,snap2:".track",snap2Mode:"inner",snap2Tolerance:46,snap2Sides:"tb",stack:".edible-waveform"}).resizable({handles:"e, w",stop:function(t,e){var n=i._computePosFromResize(t,e);console.log("setting new len",n.len,"and start",n.start),i._setOptions(n)},helper:"resizable-helper"}),this.element.disableSelection().css("position","absolute"),this.options._mcanv=new EDIBLE.modules.MultiCanvas(e[0]),this._refresh()},_drawWaveform:function(){var t=this.options.data.length,e=t/this.options.dur,n=this.options.start*e,o=n+this.options.len*e,r=this.options._mcanv,s="#4BF2A7";this.options.innerColor!==i&&r!==i?s=this.options.innerColor(r):s===i&&(s="#4BF2A7",r!==i&&(s=r.getContext("2d").createLinearGradient(0,0,0,parseInt(this.options.canvHeight)),s.addColorStop(0,"#4BF2A7"),s.addColorStop(1,"#32CD32"))),new Waveform({canvas:r,data:this.options.data.slice(n,o),innerColor:s,outerColor:"#333",height:this.options.canvHeight,interpolate:!0,width:this.width()})},_refresh:function(){this.options._mcanv.width=this.width(),this.options._mcanv.height=parseInt(this.options.canvHeight),this.element.find(".topBar").css("width",this.width()),this.element.width(this.width()).height(this.options.height),this._drawWaveform()},_destroy:function(){this._super("destroy"),this.element.remove()},_setOptions:function(){this._superApply(arguments),this._refresh(),this._trigger("changed",null,arguments)},_setOption:function(t,e){switch(this.options._dirty=!0,t){case"currentWords":this.options.highlightedWordsRange=i,this.options.currentWords=e;break;case"oogielove":break;default:this.options[t]=e}this._super("_setOption",t,e)}})}(jQuery,window,document),function(t,e,n,i){"use strict";t.widget("edible.textAlignedWaveform",t.edible.waveform,{_create:function(){this._super("_create")},waveformClass:function(){return"textAlignedWaveform"},_drawWaveform:function(){var e,o,r,s,a,l=this,u=this.options.data.length>0,h=this.options.data.length,c=h/this.options.dur,d=this.options.start*c,p=d+this.options.len*c,f=[],g=[],m=0;t.each(this.options.currentWords,function(t,n){if(g.push(m),"gp"===n.alignedWord){for(m+=parseInt(1e3*n.pauseLength),s=[],a=0;1e3*n.pauseLength*c>a;a++)s[a]=0;f.push.apply(f,s)}else e=1e3*n.start,o=1e3*n.end,r=o-e,m+=parseInt(r),u&&(d=parseInt(e*c),p=parseInt(o*c),s=l.options.data.slice(d,p),f.push.apply(f,s))}),this.options.len=m;var v=this.options._mcanv;v.getContext("2d").canvas.width=this.width(),v.getContext("2d").canvas.height=parseInt(this.options.canvHeight),this.element.find(".topBar").css("width",this.width());var y="#4BF2A7";v!==i&&(y=v.getContext("2d").createLinearGradient(0,0,0,parseInt(this.options.canvHeight)),y.addColorStop(0,"#333"),y.addColorStop(1,"#777")),u||(f=[]);var b="#FF7F24";v!==i&&(b=v.getContext("2d").createLinearGradient(0,0,0,parseInt(this.options.canvHeight)),b.addColorStop(0,"#FF7F24"),b.addColorStop(1,"#FA9A50"));var _=y;if("highlightedWordsRange"in this.options&&this.options.highlightedWordsRange!==i){var w,S=this.options.highlightedWordsRange,P=this.options.pxPerMs,A=g[S[0]]*P;w=S[1]+1>=g.length?l.width():g[S[1]+1]*P,_=function(t){var e=t*l.width();return e>=A&&w>e?b:y}}new Waveform({canvas:v,data:f,innerColor:_,outerColor:"#eee",height:this.options.canvHeight,interpolate:!0,width:this.width()});var T=function(t,e,n){n.save(),n.fillStyle="red",n.strokeStyle="#cccccc",n.beginPath(),n.moveTo(t-5,e-15),n.lineTo(t-5,e-5),n.lineTo(t,e),n.lineTo(t+5,e-5),n.lineTo(t+5,e-15),n.lineTo(t-5,e-15),n.closePath(),n.fill(),n.stroke()},x=function(e,i,o,r){var s=n.createElement("div");return t(s).addClass("emphasisPointBox").width(o).height(r).css({left:e,top:i}).appendTo(l.element)};t(this.element).find(".emphasisPointBox").remove(),t.each(this.options.currentWords,function(e,n){if(n.hasOwnProperty("emphasisPoint")&&n.emphasisPoint){var i=g[e+1]*l.options.pxPerMs,o=20;T(i,o,v.getContext("2d"));var r=x(i-5,o,10,15);r.data("wordIndex",e),r.click(function(){l.options.emphasisPointFunc(t(this).data("wordIndex"))})}})}})}(jQuery,window,document),function(){function t(t){throw t}function e(t){return function(){return t}}function n(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&t.splice!==void 0&&t.propertyIsEnumerable!==void 0&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||t.call!==void 0&&t.propertyIsEnumerable!==void 0&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&t.call===void 0)return"object";return e}function i(t){return t!==Je}function o(t){return t!=Xe}function r(t){return"array"==n(t)}function s(t){var e=n(t);return"array"==e||"object"==e&&"number"==typeof t.length}function a(t){return"string"==typeof t}function l(t){return"boolean"==typeof t}function u(t){var e=typeof t;return"object"==e&&t!=Xe||"function"==e}function h(t,e){var n=t.split("."),o=Ke;!(n[0]in o)&&o.execScript&&o.execScript("var "+n[0]);for(var r;n.length&&(r=n.shift());)!n.length&&i(e)?o[r]=e:o=o[r]?o[r]:o[r]={}}function c(t,e){function n(){}n.prototype=e.prototype,t.Va=e.prototype,t.prototype=new n,t.prototype.constructor=t}function d(){return tn.concat.apply(tn,arguments)}function p(t){var e=t.length;if(e>0){for(var n=Array(e),i=0;e>i;i++)n[i]=t[i];return n}return[]}function f(t,e,n){return 2>=arguments.length?tn.slice.call(t,e):tn.slice.call(t,e,n)}function g(t,e,n){if(!s(t)||!s(e)||t.length!=e.length)return Qe;var i=t.length;n=n||v;for(var o=0;i>o;o++)if(!n(t[o],e[o]))return Qe;return Ge}function m(t,e){return t>e?1:e>t?-1:0}function v(t,e){return t===e}function y(){if(!arguments.length)return[];for(var t=[],e=0;;e++){for(var n=[],i=0;arguments.length>i;i++){var o=arguments[i];if(e>=o.length)return t;n.push(o[e])}t.push(n)}}function b(){}function _(e){if(e instanceof b)return e;if("function"==typeof e.t)return e.t(Qe);if(s(e)){var n=0,i=new b;return i.next=function(){for(;;){if(n>=e.length&&t(sn),n in e)return e[n++];n++}},i}t(Error("Not implemented"))}function w(e,n,i){if(s(e))try{nn(e,n,i)}catch(o){o!==sn&&t(o)}else{e=_(e);try{for(;;)n.call(i,e.next(),Je,e)}catch(r){r!==sn&&t(r)}}}function S(t,e,n){var i=_(t);return t=new b,t.next=function(){for(;;){var t=i.next();return e.call(n,t,Je,i)}},t}function P(t){if(s(t))return p(t);t=_(t);var e=[];return w(t,function(t){e.push(t)}),e}function A(e,n){try{return _(e).next()}catch(i){return i!=sn&&t(i),n}}function T(){}function x(t){if(!s(t))return Qe;for(var e=0,n=t.length;n>e;e++)if(window.isNaN(t[e]))return Qe;return Ge}function C(t,e,n){for(var i in t)e.call(n,t[i],i,t)}function D(t,e,n){var i,o={};for(i in t)o[i]=e.call(n,t[i],i,t);return o}function k(t){var e,n=0;for(e in t)n++;return n}function M(t){for(var e in t)return e}function I(t){var e,n=[],i=0;for(e in t)n[i++]=t[e];return n}function j(t){var e,n=[],i=0;for(e in t)n[i++]=e;return n}function E(t){for(var e in t)delete t[e]}function O(t,e){e in t&&delete t[e]}function L(t,e,n){return e in t?t[e]:n}function F(t){var e,n={};for(e in t)n[e]=t[e];return n}function R(t){for(var e,n,i=1;arguments.length>i;i++){n=arguments[i];for(e in n)t[e]=n[e];for(var o=0;ln.length>o;o++)e=ln[o],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function B(){var e=arguments.length;if(1==e&&r(arguments[0]))return B.apply(Xe,arguments[0]);e%2&&t(Error("Uneven number of arguments"));for(var n={},i=0;e>i;i+=2)n[arguments[i]]=arguments[i+1];return n}function N(t){if("function"==typeof t.w)return t.w();if(a(t))return t.split("");if(s(t)){for(var e=[],n=t.length,i=0;n>i;i++)e.push(t[i]);return e}return I(t)}function $(e){this.e={},this.g=[];var n=arguments.length;if(n>1){n%2&&t(Error("Uneven number of arguments"));for(var i=0;n>i;i+=2)this.set(arguments[i],arguments[i+1])}else e&&this.W(e)}function H(t){if(t.u!=t.g.length){for(var e=0,n=0;t.g.length>e;){var i=t.g[e];Object.prototype.hasOwnProperty.call(t.e,i)&&(t.g[n++]=i),e++}t.g.length=n}if(t.u!=t.g.length){for(var o={},n=e=0;t.g.length>e;)i=t.g[e],Object.prototype.hasOwnProperty.call(o,i)||(t.g[n++]=i,o[i]=1),e++;t.g.length=n}}function W(t){this.e=new $,t&&this.W(t)}function U(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[Ye]||(t[Ye]=++Ze)):e.substr(0,1)+t}function q(t,e){for(var n=new W,i=N(e),o=0;i.length>o;o++){var r=i[o];t.contains(r)&&n.add(r)}return n}function z(t,e){for(var n=t.R(),i=N(e),o=i.length,r=0;o>r;r++)n.remove(i[r]);return n}function V(e){if(e!=Xe)try{e.clear()}catch(n){t(Error("Input graph is not a jsnx graph type"))}else e=new an.Ba;return e}function J(e,i,o){var r;if(e.hasOwnProperty("adj"))try{return r=G(e.adj,i,e.f()),"graph"in e&&"object"===n(e.graph)&&(r.graph=F(e.graph)),"node"in e&&"object"===n(e.node)&&(r.node=D(e.node,function(t){return F(t)})),r}catch(a){t(Error("Input is not a correct jsnx graph"))}if("object"===n(e))try{return G(e,i,o)}catch(l){try{var u=V(i);if(u.i(e),u.f()&&!u.d()){var h={};C(e,function(t,e){nn(t,function(t){t in h||u.h(e,t)}),h[e]=1})}else{var c=[];C(e,function(t,e){nn(t,function(t){c.push([e,t])})}),u.a(c)}return u}catch(d){t(Error("Input is not known type."))}}if(s(e))try{var p=V(i);return p.a(e),p}catch(f){t(Error("Input is not valid edge list"))}}function G(e,n,i){var o,r,a=V(n);return a.i(e),i?a.d()?(a.f()?(o=[],C(e,function(e,n){s(e)&&t(Error()),C(e,function(t,e){C(t,function(t,i){o.push([n,e,i,t])})})})):(o=[],C(e,function(e,n){s(e)&&t(Error()),C(e,function(t,e){C(t,function(t){o.push([n,e,t])})})})),a.a(o)):a.f()?(r=new W,C(e,function(e,n){s(e)&&t(Error()),C(e,function(t,e){r.contains(""+[n,e])||(o=[],C(t,function(t,i){o.push([n,e,i,t])}),a.a(o),r.add(""+[e,n]))})})):(r=new W,C(e,function(e,n){s(e)&&t(Error()),C(e,function(t,e){r.contains(""+[n,e])||(o=[],C(t,function(t){o.push([n,e,t])}),a.a(o),r.add(""+[e,n]))})})):a.f()&&!a.d()?(r=new W,C(e,function(e,n){s(e)&&t(Error()),C(e,function(t,e){r.contains(""+[n,e])||(a.h(n,e,t),r.add(""+[e,n]))})})):(o=[],C(e,function(e,n){s(e)&&t(Error()),C(e,function(t,e){o.push([n,e,t])})}),a.a(o)),a}function X(t){this.name="JSNetworkXException",this.message=t}function Q(t){X.call(this,t),this.name="JSNetworkXError"}function K(t){X.call(this,t),this.name="JSNetworkXPointlessConcept"}function Y(t){X.call(this,t),this.name="JSNetworkXAlgorithmError"}function Z(t){Y.call(this,t),this.name="JSNetworkXUnfeasible"}function te(t){Z.call(this,t),this.name="JSNetworkXNoPath"}function ee(t){Y.call(this,t),this.name="JSNetworkXUnbounded"}function ne(t){function e(t,e){return t[e[0]]=e[1],t}t=fe(t);var n={};return w(t,function(t){n=e.call(Je,n,t)}),n}function ie(t){return t instanceof b||"function"==n(t.t)}function oe(e){return a(e)||s(e)||"length"in e?e.length:me(e)?k(e):(t(new TypeError),void 0)}function re(t,e,n,i){if(l(n)&&(i=n,n=Xe),i){var o=e;e=function(t){o.apply(this,t)}}ie(t)?w(t,e,n):s(t)||a(t)?nn(t,e,n):u(t)&&re(j(t),e,n)}function se(e,n,i){return s(e)?rn(e,n,i):ie(e)?S(e,n,i):u(e)?D(e,n,i):(t(new TypeError),void 0)}function ae(){var e=arguments,n=e[0];if(s(n))return y.apply(Xe,e);if(ie(n)){var n=new b,i=e.length;return n.next=function(){for(var t=[],n=0;i>n;n++)t.push(e[n].next());return t},n}return u(n)?y.apply(Xe,rn(e,j)):(t(new TypeError),void 0)}function le(e,n,i){if(0===arguments.length)return[];1===arguments.length?(n=e,e=0,i=1):2===arguments.length?i=1:3===arguments.length&&0===arguments[2]&&t("range() step argument must not be zero");var o,r=new b,s=0>i,a=e;return r.next=function(){return(s&&n>=a||!s&&a>=n)&&t(sn),o=a,a+=i,o},r}function ue(e){var n=ce(e),i=n.length;if(2>i)return new b;var o=ce(le(2));return e=new b,e.next=function(){var e=rn(o,function(t){return n[t]});return this.next=function(){var e,r=Qe;for(e=2;e--;)if(o[e]!=e+i-2){r=Ge;break}for(r||t(sn),o[e]+=1,r=e+1;2>r;r++)o[r]=o[r-1]+1;return rn(o,function(t){return n[t]})},e},e}function he(e){var n=ce(e),i=n.length;if(2>i)return new b;var o=ce(le(i)),r=ce(le(i,i-2,-1));e=new b;var s,a=new b,l=Ge;return e.next=function(){return this.next=s.next,rn(o.slice(0,2),function(t){return n[t]})},a.next=function(){return l},s=ge(a,function(e){return e||t(sn),l=Qe,le(1,-1,-1)},function(t){if(!l){if(r[t]-=1,0!==r[t]){var e=r[t],s=o[t];return o[t]=o[o.length-e],o[o.length-e]=s,l=Ge,fe([rn(o.slice(0,2),function(t){return n[t]})])}o.splice.apply(o,[t,o.length].concat(o.slice(t+1).concat([o[t]]))),r[t]=i-t}},function(t){return t}),e}function ce(e){return s(e)?p(e):ie(e)?P(e):u(e)?j(e):(t(new TypeError),void 0)}function de(t){var e=[];return C(t,function(t,n){e.push([n,t])}),e}function pe(t){var e=new b,n=_(j(t));return e.next=function(){var e=n.next();return[e,t[e]]},e}function fe(t){return"object"===n(t)&&!s(t)&&!ie(t)&&(t=j(t)),_(t)}function ge(e){var n=new b,o=f(arguments,1);if(0===o.length)return e;try{e=_(e)}catch(r){return n.next=function(){"Not implemented"===r.message&&t(new TypeError)},n}var s=Xe;return n.next=function(){var t,r;try{for(;!i(t);)t=s.next()}catch(a){for(;!i(r)||!i(t);)r=e.next(),t=o[0](r);if(ie(t))return s=ge.apply(Xe,d([t],f(o,1))),n.next();s=Xe}return t},n}function me(t){var e=Object.prototype.hasOwnProperty;if(!t||"object"!==n(t)||t.nodeType||t==t.window)return Qe;try{if(t.constructor&&!e.call(t,"constructor")&&!e.call(t.constructor.prototype,"isPrototypeOf"))return Qe}catch(i){return Qe}for(var o in t);return o===Je||e.call(t,o)}function ve(t,e){e=e||[];var i=n(t);if("object"==i&&me(t)||"array"==i){var o;o=e;var r;t:{r=function(e){return t===e[0]};for(var s=o.length,l=a(o)?o.split(""):o,u=0;s>u;u++)if(u in l&&r.call(Je,l[u])){r=u;break t}r=-1}if(o=0>r?Xe:a(o)?o.charAt(r):o[r],o!==Xe)return o[1];if(t.R)return o=[t,t.R()],e.push(o),o[1];i="array"==i?[]:{},o=[t,i],e.push(o);for(var h in t)i[h]=ve(t[h],e);return i}return t}function ye(t){function e(){}var n,i={};e.prototype=t.constructor.prototype;for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);i=ve(i),t=new e;for(n in i)t[n]=i[n];return t}function be(t){var e=[];return we(new _e,t,e),e.join("")}function _e(){this.V=Je}function we(e,n,i){switch(typeof n){case"string":Se(n,i);break;case"number":i.push(isFinite(n)&&!isNaN(n)?n:"null");break;case"boolean":i.push(n);break;case"undefined":i.push("null");break;case"object":if(n==Xe){i.push("null");break}if(r(n)){var o=n.length;i.push("[");for(var s="",a=0;o>a;a++)i.push(s),s=n[a],we(e,e.V?e.V.call(n,a+"",s):s,i),s=",";i.push("]");break}i.push("{"),o="";for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s=n[a],"function"!=typeof s&&(i.push(o),Se(a,i),i.push(":"),we(e,e.V?e.V.call(n,a,s):s,i),o=","));i.push("}");break;case"function":break;default:t(Error("Unknown type: "+typeof n))}}function Se(t,e){e.push('"',t.replace(hn,function(t){if(t in un)return un[t];var e=t.charCodeAt(0),n="\\u";return 16>e?n+="000":256>e?n+="00":4096>e&&(n+="0"),un[t]=n+e.toString(16)}),'"')}function Pe(t,e){return this instanceof Pe?(this.graph={},this.node={},this.adj={},t!=Xe&&J(t,this),R(this.graph,e||{}),this.edge=this.adj,void 0):new Pe(t,e)}function Ae(t,e){return this instanceof Ae?(this.graph={},this.node={},this.adj={},this.pred={},this.succ=this.adj,t!=Xe&&J(t,this),R(this.graph,e||{}),this.edge=this.adj,void 0):new Ae(t,e)}function Te(t,e){return this instanceof Te?(Pe.call(this,t,e),void 0):new Te(t,e)}function xe(t,e){return this instanceof xe?(Ae.call(this,t,e),void 0):new xe(t,e)}function Ce(t,e){var n={};return C(t.Z,function(t,i){e in t&&(n[i]=t[e])}),n}function De(e,n){if(e.d()&&t(new Q("triangles() is not defined for directed graphs.")),e.q(n))return Math.floor(ke(e,n).next()[2]/2);var i={};return w(ke(e,n),function(t){i[t[0]]=Math.floor(t[2]/2)}),i}function ke(e,n){e.f()&&t(new Q("Not defined for multigraphs."));var i;return i=n!=Xe?ge(e.b(n),function(t){return[t,e.k(t)]}):pe(e.adj),S(i,function(t){var n=new W(j(t[1])),i=0;return n.remove(t[0]),w(n,function(t){var o=new W(j(e.k(t)));o.remove(t),i+=q(n,o).c()}),[t[0],n.c(),i]})}function Me(e,o,r){if(e.d()&&t(new Q("Clustering algorithms are not defined for directed graphs.")),r!=Xe){var s=r;e.f()&&t(new Q("Not defined for multigraphs.")),i(s)||(s="weight");var a;if(0===e.p().length)r=1;else{r=e.p(Ge);var l=function(t){return L(t[2],s,1)};r="function"==n(l)?se(r,function(){return l.apply(Xe,arguments)}):ce(r),r=Math.max.apply(Xe,r)}a=r,r=o!=Xe?ge(e.b(o),function(t){return[t,e.k(t)]}):pe(e.adj),r=S(r,function(t){var n=t[0],i=new W(j(t[1]));i.remove(n);var o=0,r=new W;return w(i,function(t){var l=L(e.k(n)[t],s,1)/a;r.add(t);var u=z(new W(j(e.k(t))),r);w(q(i,u),function(i){var r=L(e.k(t)[i],s,1)/a;i=L(e.k(n)[i],s,1)/a,o+=Math.pow(l*r*i,1/3)})}),[n,i.c(),2*o]})}else r=ke(e,o);var u={};return w(r,function(t){u[t[0]]=0===t[2]?0:t[2]/(t[1]*(t[1]-1))}),e.q(o)?I(u)[0]:u}function Ie(e){var n=-1,i={},o=new W;w(e.o(),function(t){var e=new W(j(t[1]));e.remove(t[0]);var r=e.c();r>n?(i[t[0]]=o=e,n=r):i[t[0]]=e});var r=new W(j(i)),s=z(r,o),a=new W,l=[],u=[];return e=new b,e.next=function(){0===s.c()&&0===l.length&&t(sn);var e,h;if(!(s.c()>0)){var c=l.pop();return r=c[0],a=c[1],s=c[2],u.pop(),this.next()}e=A(s),s.remove(e),u.push(e),r.remove(e),a.add(e);var f=i[e],c=q(r,f),f=q(a,f);if(0===c.c()&&(0===f.c()&&(h=p(u)),u.pop(),h))return h;if(0===f.c()&&1===c.c())return h=d(u,c.w()),u.pop(),h;var g,m,v=c.c(),y=-1;for(h=_(f);(e=A(h,Xe))!==Xe&&(e=q(c,i[e]),m=e.c(),!(m>y&&(g=e,y=m,y===v))););if(y===v)return u.pop(),this.next();for(n=-1,h=_(c);(e=A(h,Xe))!==Xe&&(e=q(c,i[e]),m=e.c(),!(m>n&&(o=e,n=m,n===v-1))););return y>n&&(o=g),l.push([r,a,s]),r=c,a=f,s=z(r,o),this.next()},e}function je(t,e,n,i,o){var r,s,a,l,u=-1,h=e.c();for(s=_(n);(a=A(s,Xe))!==Xe;)if(a=q(e,t[a]),l=a.c(),l>u&&(r=a,u=l,l===h))return;w(e,function(n){n=q(e,t[n]);var i=n.c();i>u&&(r=n,u=i)}),h=z(e,r),w(h,function(r){e.remove(r),i.push(r);var s=t[r];r=q(e,s),s=q(n,s),r.J()&&s.J()?o.push(p(i)):s.J()&&1===r.c()?o.push(d(i,r.w())):je(t,r,s,i,o),n.add(i.pop())})}function Ee(t,e,n){n!=Xe||(n=P(Ie(t))),e!=Xe||(e=t.z());var i;if(r(e))i={},nn(e,function(t){i[t]=on(n,function(e){return en(e,t)>=0||en(e,t+"")>=0}).length});else{var o=e;i=on(n,function(t){return en(t,o)>=0||en(t,o+"")>=0}).length}return i}function Oe(t,e){if(t.v()!=e.v())return Qe;var n,i=t.l(),o=De(t),r=Ee(t),s=[];for(n in i)s.push([i[n],o[n],r[n]]);s.sort(function(t,e){return t[0]!==e[0]?t[0]-e[0]:t[1]!==e[1]?t[1]-e[1]:t[2]-e[2]});var i=e.l(),o=De(e),r=Ee(e),a=[];for(n in i)a.push([i[n],o[n],r[n]]);return a.sort(function(t,e){return t[0]!==e[0]?t[0]-e[0]:t[1]!==e[1]?t[1]-e[1]:t[2]-e[2]}),g(s,a,function(t,e){return g(t,e)})?Ge:Qe}function Le(t,e){if(t.v()!=e.v())return Qe;var n,i=t.l(),o=De(t),r=[];for(n in i)r.push([i[n],o[n]]);r.sort(function(t,e){return t[0]!==e[0]?t[0]-e[0]:t[1]-e[1]});var i=e.l(),o=De(e),s=[];for(n in i)s.push([i[n],o[n]]);return s.sort(function(t,e){return t[0]!==e[0]?t[0]-e[0]:t[1]-e[1]}),g(r,s,function(t,e){return g(t,e)})?Ge:Qe}function Fe(t,e){if(t.v()!=e.v())return Qe;var n=I(t.l());n.sort();var i=I(e.l());return i.sort(),g(n,i)?Ge:Qe}function Re(e,n){return"eg"===n?Ne(e):n==Xe||"hh"===n?Be(e):(t(new X("`opt_method` must be 'eg' or 'hh'")),void 0)}function Be(t){if(0===t.length)return Ge;if(!x(t)||0>Math.min.apply(Xe,t)||0!==cn.n.apply(Xe,t)%2)return Qe;for(t=p(t);t.length>0&&(tn.sort.call(t,m),!(0>t[0]));){var e=t.pop();if(0===e)return Ge;if(e>t.length)break;for(var n=t.length-1,e=t.length-(e+1);n>e;n--)t[n]-=1}return Qe}function Ne(t){if(0===t.length)return Ge;if(!x(t)||0>Math.min.apply(Xe,t)||0!==cn.n.apply(Xe,t)%2)return Qe;var e,n=t.length,i=p(t).sort(function(t,e){return e-t}),o=[];for(e=1,t=i.length;t>e;e++)i[e]<i[e-1]&&o.push(e);var r,s;for(e=0,t=o.length;t>e;e++)if(r=cn.n.apply(Xe,i.slice(0,o[e])),s=o[e]*(o[e]-1)+cn.n.apply(Xe,P(S(le(o[e],n),function(t){return Math.min(o[e],i[t])}))),r>s)return Qe;return Ge}function $e(t){var e={},n={},i=new W,o=[],r=[],s=0,a=Qe;return w(t.K(),function(l){var u,h,c,d;if(!i.contains(l))for(d=[l];d.length>0;){l=d[d.length-1],l in e||(s+=1,e[l]=s),a=Ge,u=t.C(l);for(c=0;u.length>c;c++)if(h=u[c],!(h in e)){d.push(h),a=Qe;break}if(a){for(n[l]=e[l],c=0;u.length>c;c++)h=u[c],i.contains(h)||(n[l]=e[h]>e[l]?Math.min(n[l],n[h]):Math.min(n[l],e[h]));if(d.pop(),n[l]===e[l]){for(i.add(l),u=[l];o.length>0&&e[o[o.length-1]]>e[l];)h=o.pop(),i.add(h),u.push(h);r.push(u)}else o.push(l)}}}),r.sort(function(t,e){return e.length-t.length}),r}function He(t,e){var n=We(t,e);return n.name("complete_graph("+t+")"),t>1&&n.a(n.d()?he(le(t)):ue(le(t))),n}function We(t,e){t instanceof Pe&&(e=t,t=Xe),t!=Xe||(t=0);var n;return e!=Xe?(n=e,n.clear()):n=new Pe,n.i(le(t)),n.name("empty_graph("+t+")"),n}function Ue(t,e){var n=We(t,e);return n.name("path_graph("+t+")"),n.a(S(le(t-1),function(t){return[t,t+1]})),n}function qe(t,e,n){var i;return i=n?Ae():Pe(),i.i(le(t)),i.name("gnp_random_graph("+t+","+e+")"),0>=e?i:e>=1?He(t,i):(t=i.d()?he(le(t)):ue(le(t)),w(t,function(t){e>Math.random()&&i.h(t[0],t[1])}),i)}function ze(e,o,r){var s=o;"function"==n(o)&&(s={},w(e.K(),function(t){s[t]=o(t)}));var a;if(!i(r)||r){var l=s,u=new e.constructor;u.name("("+e.name()+")"),e.f()?u.a(S(e.j(Ge,Ge),function(t){return[L(l,t[0],t[0]),L(l,t[1],t[1]),t[2],F(t[3])]})):u.a(S(e.j(Ge),function(t){return[L(l,t[0],t[0]),L(l,t[1],t[1]),F(t[2])]})),u.i(S(e,function(t){return L(l,t,t)})),r={};for(a in e.node)r[L(l,a,a)]=F(e.node[a]);R(u.node,r),R(u.graph,F(e.graph)),a=u}else{var h=s;if(a=new W(j(h)),q(a,h).c()>0){a=Ae(de(h)),a.A(a.O());try{u=gn.Ja.Xa(a)}catch(c){c instanceof Z&&t(new Z("The node label sets are overlapping and no ordering can resolve the mapping. Use copy=True."))}u.reverse()}else u=a;var p,f=e.f(),g=e.d();w(u,function(n){var i;n in h&&(i=h[n],e.q(n)||t(new Q("Node "+n+" is not in the graph.")),e.F(i,e.node[n]),f?(p=rn(e.p(n,Ge,Ge),function(t){return[i,t[1],t[2],t[3]]}),g&&(p=d(p,rn(e.H(n,Ge,Ge),function(t){return[t[0],i,t[2],t[3]]})))):(p=rn(e.p(n,Ge),function(t){return[i,t[1],t[2]]}),g&&(p=d(p,rn(e.H(n,Ge),function(t){return[t[0],i,t[2]]})))),e.N(n),e.a(p))}),a=e}return a}var Ve,Je=void 0,Ge=!0,Xe=null,Qe=!1,Ke=this,Ye="closure_uid_"+(1e9*Math.random()>>>0),Ze=0,tn=Array.prototype,en=tn.indexOf?function(t,e,n){return tn.indexOf.call(t,e,n)}:function(t,e,n){if(n=n==Xe?0:0>n?Math.max(0,t.length+n):n,a(t))return a(e)&&1==e.length?t.indexOf(e,n):-1;for(;t.length>n;n++)if(n in t&&t[n]===e)return n;return-1},nn=tn.forEach?function(t,e,n){tn.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,o=a(t)?t.split(""):t,r=0;i>r;r++)r in o&&e.call(n,o[r],r,t)},on=tn.filter?function(t,e,n){return tn.filter.call(t,e,n)}:function(t,e,n){for(var i=t.length,o=[],r=0,s=a(t)?t.split(""):t,l=0;i>l;l++)if(l in s){var u=s[l];e.call(n,u,l,t)&&(o[r++]=u)}return o},rn=tn.map?function(t,e,n){return tn.map.call(t,e,n)}:function(t,e,n){for(var i=t.length,o=Array(i),r=a(t)?t.split(""):t,s=0;i>s;s++)s in r&&(o[s]=e.call(n,r[s],s,t));return o},sn="StopIteration"in Ke?Ke.StopIteration:Error("StopIteration");b.prototype.next=function(){t(sn)},b.prototype.t=function(){return this},T.ca=function(){return T.ea?T.ea:T.ea=new T},T.prototype.va=0,T.ca();var an={};h("jsnx.utils.is_list_of_ints",x),h("jsnx.utils.cumulative_sum",function(t){var e=0;return S(t,function(t){return e+=t})}),h("jsnx.utils.generate_unique_node",function(){return":"+(T.ca().va++).toString(36)});var ln="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");Ve=$.prototype,Ve.u=0,Ve.Q=0,Ve.c=function(){return this.u},Ve.w=function(){H(this);for(var t=[],e=0;this.g.length>e;e++)t.push(this.e[this.g[e]]);return t},Ve.J=function(){return 0==this.u},Ve.clear=function(){this.e={},this.Q=this.u=this.g.length=0},Ve.remove=function(t){return Object.prototype.hasOwnProperty.call(this.e,t)?(delete this.e[t],this.u--,this.Q++,this.g.length>2*this.u&&H(this),Ge):Qe},Ve.set=function(t,e){Object.prototype.hasOwnProperty.call(this.e,t)||(this.u++,this.g.push(t),this.Q++),this.e[t]=e},Ve.W=function(t){var e;t instanceof $?(H(t),e=t.g.concat(),t=t.w()):(e=j(t),t=I(t));for(var n=0;e.length>n;n++)this.set(e[n],t[n])},Ve.R=function(){return new $(this)},Ve.t=function(e){H(this);var n=0,i=this.g,o=this.e,r=this.Q,s=this,a=new b;return a.next=function(){for(;;){r!=s.Q&&t(Error("The map has changed since the iterator was created")),n>=i.length&&t(sn);var a=i[n++];return e?a:o[a]}},a},Ve=W.prototype,Ve.c=function(){return this.e.c()},Ve.add=function(t){this.e.set(U(t),t)},Ve.W=function(t){t=N(t);for(var e=t.length,n=0;e>n;n++)this.add(t[n])},Ve.remove=function(t){return this.e.remove(U(t))},Ve.clear=function(){this.e.clear()},Ve.J=function(){return this.e.J()},Ve.contains=function(t){return t=U(t),Object.prototype.hasOwnProperty.call(this.e.e,t)},Ve.w=function(){return this.e.w()},Ve.R=function(){return new W(this)},Ve.t=function(){return this.e.t(Qe)},h("jsnx.to_networkx_graph",J),h("jsnx.convert_to_undirected",an.Ia),h("jsnx.convert_to_undirected",an.Ha),h("jsnx.to_dict_of_lists",an.Wa),X.prototype=Error(),X.prototype.constructor=X,h("jsnx.JSNetworkXException",X),c(Q,X),h("jsnx.JSNetworkXError",Q),c(K,X),h("jsnx.JSNetworkXPointlessConcept",K),c(Y,X),h("jsnx.JSNetworkXAlgorithmError",Y),c(Z,Y),h("jsnx.JSNetworkXUnfeasible",Z),c(te,Z),h("jsnx.JSNetworkXNoPath",te),c(ee,Y),h("jsnx.JSNetworkXUnbounded",ee),h("jsnx.forEach",re),h("jsnx.toArray",ce),h("jsnx.sentinelIterator",function(t,e){var n=new b;return n.next=function(){return A(t,e)},n});var un={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},hn=/\uffff/.test("")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,cn={Qa:function(t){return Math.floor(Math.random()*t)},Ya:function(t,e){return t+Math.random()*(e-t)},Ga:function(t,e,n){return Math.min(Math.max(t,e),n)},ua:function(t,e){var n=t%e;return 0>n*e?n+e:n},Na:function(t,e,n){return t+n*(e-t)},Pa:function(t,e,n){return(n||1e-6)>=Math.abs(t-e)},aa:function(t){return cn.ua(t,360)},ha:function(t){return t*Math.PI/180},Aa:function(t){return 180*t/Math.PI},Ea:function(t,e){return e*Math.cos(cn.ha(t))},Fa:function(t,e){return e*Math.sin(cn.ha(t))},Ca:function(t,e,n,i){return cn.aa(cn.Aa(Math.atan2(i-e,n-t)))},Da:function(t,e){var n=cn.aa(e)-cn.aa(t);return n>180?n-=360:-180>=n&&(n=360+n),n},Ta:function(t){return 0==t?0:0>t?-1:1},Oa:function(t,e,n,i){n=n||function(t,e){return t==e},i=i||function(e){return t[e]};for(var o=t.length,r=e.length,s=[],a=0;o+1>a;a++)s[a]=[],s[a][0]=0;for(var l=0;r+1>l;l++)s[0][l]=0;for(a=1;o>=a;a++)for(l=1;o>=l;l++)s[a][l]=n(t[a-1],e[l-1])?s[a-1][l-1]+1:Math.max(s[a-1][l],s[a][l-1]);for(var u=[],a=o,l=r;a>0&&l>0;)n(t[a-1],e[l-1])?(u.unshift(i(a-1,l-1)),a--,l--):s[a-1][l]>s[a][l-1]?a--:l--;return u},n:function(){var t;t=arguments;var e=function(t,e){return t+e};if(t.reduce)t=t.reduce(e,0);else{var n=0;nn(t,function(t){n=e.call(Je,n,t)}),t=n}return t},oa:function(){return cn.n.apply(Xe,arguments)/arguments.length},Ua:function(){var t=arguments.length;if(2>t)return 0;var e=cn.oa.apply(Xe,arguments),t=cn.n.apply(Xe,rn(arguments,function(t){return Math.pow(t-e,2)}))/(t-1);return Math.sqrt(t)},Ma:function(t){return isFinite(t)&&0==t%1},La:function(t){return isFinite(t)&&!isNaN(t)},Sa:function(t,e){return Math.floor(t+(e||2e-15))},Ra:function(t,e){return Math.ceil(t-(e||2e-15))}};h("jsnx.classes.Graph",Pe),h("jsnx.Graph",Pe),Pe.__name__="Graph",Pe.prototype.ra=Xe,Pe.prototype.graph=Pe.prototype.ra,Pe.prototype.Z=Xe,Pe.prototype.node=Pe.prototype.Z,Pe.prototype.ma=Xe,Pe.prototype.adj=Pe.prototype.ma,Pe.prototype.pa=Xe,Pe.prototype.edge=Pe.prototype.pa,Pe.prototype.name=function(t){return i(t)?(this.graph.name=""+t,void 0):this.graph.name||""
},Pe.prototype.name=Pe.prototype.name,Pe.prototype.toString=function(){return this.name()},Pe.prototype.toString=Pe.prototype.toString,Pe.prototype.t=function(){return fe(this.adj)},Pe.prototype.__iterator__=Pe.prototype.t,Pe.prototype.k=function(e){return e in this.adj||t({name:"KeyError",message:"Graph does not contain node "+e+"."}),this.adj[e]},Pe.prototype.get_node=Pe.prototype.k,Pe.prototype.F=function(e,i){i!=Xe||(i={}),"object"!==n(i)&&t(new Q("The attr_dict argument must be an object.")),e in this.adj?R(this.node[e],i||{}):(this.adj[e]={},this.node[e]=i||{})},Pe.prototype.add_node=Pe.prototype.F,Pe.prototype.i=function(t,e){var n,i,o,s,a;e=e||{},re(t,function(t){n=!(t in this.adj),r(t)?(i=t[0],o=t[1],i in this.adj?(a=this.node[i],R(a,e,o)):(this.adj[i]={},s=F(e),R(s,o),this.node[i]=s)):n?(this.adj[t]={},this.node[t]=F(e)):R(this.node[t],e)},this)},Pe.prototype.add_nodes_from=Pe.prototype.i,Pe.prototype.N=function(e){var n,i=this.adj;e in this.node||t(new Q("The node "+e+" is not in the graph")),n=j(i[e]),O(this.node,e),nn(n,function(t){O(i[t],e)}),O(i,e)},Pe.prototype.remove_node=Pe.prototype.N,Pe.prototype.U=function(t){var e=this.adj;re(t,function(t){try{O(this.node,t),C(e[t],function(n,i){O(e[i],t)}),O(e,t)}catch(n){}},this)},Pe.prototype.remove_nodes_from=Pe.prototype.U,Pe.prototype.K=function(t){return t?pe(this.node):fe(j(this.adj))},Pe.prototype.nodes_iter=Pe.prototype.K,Pe.prototype.z=function(t){return P(this.K(t))},Pe.prototype.nodes=Pe.prototype.z,Pe.prototype.L=function(){return k(this.adj)},Pe.prototype.number_of_nodes=Pe.prototype.L,Pe.prototype.v=function(){return k(this.adj)},Pe.prototype.order=Pe.prototype.v,Pe.prototype.q=function(t){return!r(t)&&t in this.adj},Pe.prototype.has_node=Pe.prototype.q,Pe.prototype.h=function(e,i,o){o=o||{},"object"!==n(o)&&t(new Q("The attr_dict argument must be an object.")),e in this.adj||(this.adj[e]={},this.node[e]={}),i in this.adj||(this.adj[i]={},this.node[i]={});var r=L(this.adj[e],i,{});R(r,o),this.adj[e][i]=r,this.adj[i][e]=r},Pe.prototype.add_edge=Pe.prototype.h,Pe.prototype.a=function(e,i){i=i||{},"object"!==n(i)&&t(new Q("The attr_dict argument must be an object.")),re(e,function(e){var n,o,r,s=oe(e);3===s?(n=e[0],o=e[1],r=e[2]):2===s?(n=e[0],o=e[1],r={}):t(new Q("Edge tuple "+(""+e)+" must be a 2-tuple or 3-tuple.")),n in this.adj||(this.adj[n]={},this.node[n]={}),o in this.adj||(this.adj[o]={},this.node[o]={}),e=L(this.adj[n],o,{}),R(e,i,r),this.adj[n][o]=e,this.adj[o][n]=e},this)},Pe.prototype.add_edges_from=Pe.prototype.a,Pe.prototype.la=function(e,n,o){o=o||{},a(n)||(o=n,n="weight"),this.a(se(e,function(e){var o={};return o[n]=e[2],i(o[n])||t(new TypeError("Values must consist of three elements: "+be(e))),[e[0],e[1],o]}),o)},Pe.prototype.add_weighted_edges_from=Pe.prototype.la,Pe.prototype.s=function(e,n){try{O(this.adj[e],n),e!=n&&O(this.adj[n],e)}catch(i){i instanceof TypeError&&t(new Q("The edge "+e+"-"+n+" is not in the graph")),t(i)}},Pe.prototype.remove_edge=Pe.prototype.s,Pe.prototype.A=function(t){re(t,function(t){var e=t[0];t=t[1],e in this.adj&&t in this.adj[e]&&(O(this.adj[e],t),e!=t&&O(this.adj[t],e))},this)},Pe.prototype.remove_edges_from=Pe.prototype.A,Pe.prototype.S=function(t,e){return t in this.adj&&e in this.adj[t]},Pe.prototype.has_edge=Pe.prototype.S,Pe.prototype.C=function(e){return e in this.adj||t(new Q("The node "+e+" is not in the graph.")),ce(this.adj[e])},Pe.prototype.neighbors=Pe.prototype.C,Pe.prototype.Y=function(e){return e in this.adj||t(new Q("The node "+e+" is not in the graph.")),fe(this.adj[e])},Pe.prototype.neighbors_iter=Pe.prototype.Y,Pe.prototype.p=function(t,e){return ce(this.j(t,e))},Pe.prototype.edges=Pe.prototype.p,Pe.prototype.j=function(e,n){l(e)&&(n=e,e=Xe);var i,o,r={};return i=e!=Xe?se(this.b(e),function(t){return[t,this.adj[t]]},this):pe(this.adj),n?ge(i,function(e){o=e[0];var n=new b,i=pe(e[1]);return n.next=function(){try{return i.next()}catch(e){e===sn&&(r[o]=1),t(e)}},n},function(t){return t[0]in r?void 0:[o,t[0],t[1]]}):ge(i,function(e){o=e[0];var n=new b,i=fe(e[1]);return n.next=function(){try{return i.next()}catch(e){e===sn&&(r[o]=1),t(e)}},n},function(t){return t in r?void 0:[o,t]})},Pe.prototype.edges_iter=Pe.prototype.j,Pe.prototype.X=function(t,e,n){return i(n)||(n=Xe),t in this.adj?L(this.adj[t],e,n):n},Pe.prototype.get_edge_data=Pe.prototype.X,Pe.prototype.na=function(){return ce(se(this.o(),function(t){return j(t[1])}))},Pe.prototype.adjacency_list=Pe.prototype.na,Pe.prototype.o=function(){return pe(this.adj)},Pe.prototype.adjacency_iter=Pe.prototype.o,Pe.prototype.l=function(t,e){return this.q(t)?this.m(t,e).next()[1]:ne(P(this.m(t,e)))},Pe.prototype.degree=Pe.prototype.l,Pe.prototype.m=function(t,e){var n;return n=t!=Xe?se(this.b(t),function(t){return[t,this.adj[t]]},this):pe(this.adj),e?se(n,function(t){var n=t[0];t=t[1];var i,o=0;for(i in t)o+=+L(t[i],e,1);return o+=+(n in t&&L(t[n],e,1)),[n,o]}):se(n,function(t){return[t[0],k(t[1])+ +(t[0]in t[1])]})},Pe.prototype.degree_iter=Pe.prototype.m,Pe.prototype.clear=function(){this.name(""),E(this.adj),E(this.node),E(this.graph)},Pe.prototype.clear=Pe.prototype.clear,Pe.prototype.copy=function(){return ye(this)},Pe.prototype.copy=Pe.prototype.copy,Pe.prototype.f=e(Qe),Pe.prototype.is_multigraph=Pe.prototype.f,Pe.prototype.d=e(Qe),Pe.prototype.is_directed=Pe.prototype.d,Pe.prototype.B=function(){var t=new Ae;return t.name(this.name()),t.i(this),t.a(function(){var t;return ge(this.o(),function(e){return t=e[0],pe(e[1])},function(e){return[t,e[0],ve(e[1])]})}.call(this)),t.graph=ve(this.graph),t.node=ve(this.node),t},Pe.prototype.to_directed=Pe.prototype.B,Pe.prototype.P=function(){return ye(this)},Pe.prototype.to_undirected=Pe.prototype.P,Pe.prototype.r=function(t){t=this.b(t);var e=new this.constructor,n=e.adj,i=this.adj;return re(t,function(t){var e={};n[t]=e,C(i[t],function(i,o){o in n&&(e[o]=i,n[o][t]=i)})}),re(e,function(t){e.node[t]=this.node[t]},this),e.graph=this.graph,e},Pe.prototype.subgraph=Pe.prototype.r,Pe.prototype.wa=function(){return rn(on(de(this.adj),function(t){return t[0]in t[1]}),function(t){return t[0]})},Pe.prototype.nodes_with_selfloops=Pe.prototype.wa,Pe.prototype.O=function(t){return t?rn(on(de(this.adj),function(t){return t[0]in t[1]}),function(t){var e=t[0];return[e,e,t[1][e]]}):rn(on(de(this.adj),function(t){return t[0]in t[1]}),function(t){return[t[0],t[0]]})},Pe.prototype.selfloop_edges=Pe.prototype.O,Pe.prototype.xa=function(){return this.O().length},Pe.prototype.number_of_selfloops=Pe.prototype.xa,Pe.prototype.size=function(t){var e=cn.n.apply(Xe,I(this.l(Xe,t)))/2;return t!=Xe?e:Math.floor(e)},Pe.prototype.size=Pe.prototype.size,Pe.prototype.D=function(t,e){return t==Xe?Math.floor(this.size()):e in this.adj[t]?1:0},Pe.prototype.number_of_edges=Pe.prototype.D,Pe.prototype.ka=function(t,e){var n=ce(t),i=n[0],n=se(f(n,1),function(t){return[i,t]});this.a(n,e)},Pe.prototype.add_star=Pe.prototype.ka,Pe.prototype.ja=function(t,e){var n=ce(t),n=y(f(n,0,n.length-1),f(n,1));this.a(n,e)},Pe.prototype.add_path=Pe.prototype.ja,Pe.prototype.ia=function(t,e){var n=ce(t),n=y(n,d(f(n,1),[n[0]]));this.a(n,e)},Pe.prototype.add_cycle=Pe.prototype.ia,Pe.prototype.b=function(e){if(e!=Xe)if(this.q(e))e=fe([""+e]);else{var n=this.adj,i=new b,o=ge(e,function(t){return t in n?""+t:void 0});i.next=function(){try{return o.next()}catch(e){e instanceof TypeError&&t(new Q("nbunch is not a node or a sequence of nodes")),t(e)}},e=i}else e=fe(this.adj);return e},Pe.prototype.nbunch_iter=Pe.prototype.b,h("jsnx.classes.DiGraph",Ae),h("jsnx.DiGraph",Ae),c(Ae,Pe),Ae.__name__="DiGraph",Ae.prototype.F=function(e,i){i!=Xe||(i={}),"object"!==n(i)&&t(new Q("The attr_dict argument must be an object.")),e in this.succ?R(this.node[e],i):(this.succ[e]={},this.pred[e]={},this.node[e]=i)},Ae.prototype.add_node=Ae.prototype.F,Ae.prototype.i=function(t,e){var n,i,o,s,a;e=e||{},re(fe(t),function(t){n=!(t in this.succ),r(t)?(i=t[0],o=t[1],i in this.succ?(a=this.node[i],R(a,e,o)):(this.succ[i]={},this.pred[i]={},s=F(e),R(s,o),this.node[i]=s)):n?(this.succ[t]={},this.pred[t]={},this.node[t]=F(e)):R(this.node[t],e)},this)},Ae.prototype.add_nodes_from=Ae.prototype.i,Ae.prototype.N=function(e){e in this.node||t(new Q("The node "+e+" is not in the graph"));var n=this.succ[e];O(this.node,e),C(n,function(t,n){O(this.pred[n],e)},this),O(this.succ,e),C(this.pred[e],function(t,n){O(this.succ[n],e)},this),O(this.pred,e)},Ae.prototype.remove_node=Ae.prototype.N,Ae.prototype.U=function(t){var e;re(t,function(t){t in this.succ&&(e=this.succ[t],O(this.node,t),C(e,function(e,n){O(this.pred[n],t)},this),O(this.succ,t),C(this.pred[t],function(e,n){O(this.succ[n],t)},this),O(this.pred,t))},this)},Ae.prototype.remove_nodes_from=Ae.prototype.U,Ae.prototype.h=function(e,i,o){o=o||{},"object"!==n(o)&&t(new Q("The attr_dict argument must be an object.")),e in this.succ||(this.succ[e]={},this.pred[e]={},this.node[e]={}),i in this.succ||(this.succ[i]={},this.pred[i]={},this.node[i]={});var r=L(this.adj[e],i,{});R(r,o),this.succ[e][i]=r,this.pred[i][e]=r},Ae.prototype.add_edge=Ae.prototype.h,Ae.prototype.a=function(e,i){i=i||{},"object"!==n(i)&&t(new Q("The attr_dict argument must be an object.")),re(e,function(e){var n,o,r,s=oe(e);3===s?(n=e[0],o=e[1],r=e[2]):2===s?(n=e[0],o=e[1],r={}):t(new Q("Edge tuple "+(""+e)+" must be a 2-tuple or 3-tuple.")),n in this.succ||(this.succ[n]={},this.pred[n]={},this.node[n]={}),o in this.succ||(this.succ[o]={},this.pred[o]={},this.node[o]={}),e=L(this.adj[n],o,{}),R(e,i,r),this.succ[n][o]=e,this.pred[o][n]=e},this)},Ae.prototype.add_edges_from=Ae.prototype.a,Ae.prototype.s=function(e,n){try{O(this.succ[e],n),O(this.pred[n],e)}catch(i){i instanceof TypeError&&t(new Q("The edge "+e+"-"+n+" is not in the graph")),t(i)}},Ae.prototype.remove_edge=Ae.prototype.s,Ae.prototype.A=function(t){re(t,function(t){var e=t[0];t=t[1],e in this.succ&&t in this.succ[e]&&(O(this.succ[e],t),O(this.pred[t],e))},this)},Ae.prototype.remove_edges_from=Ae.prototype.A,Ae.prototype.ta=function(t,e){return t in this.succ&&e in this.succ[t]},Ae.prototype.has_successor=Ae.prototype.ta,Ae.prototype.sa=function(t,e){return t in this.pred&&e in this.pred[t]},Ae.prototype.has_predecessor=Ae.prototype.sa,Ae.prototype.ga=function(e){return e in this.succ||t(new Q("The node "+e+" is not in the digraph.")),fe(this.succ[e])},Ae.prototype.successors_iter=Ae.prototype.ga,Ae.prototype.za=function(e){return e in this.pred||t(new Q("The node "+e+" is not in the digraph.")),fe(this.pred[e])},Ae.prototype.predecessors_iter=Ae.prototype.za,Ae.prototype.ba=function(e){return e in this.succ||t(new Q("The node "+e+" is not in the digraph.")),ce(this.succ[e])},Ae.prototype.successors=Ae.prototype.ba,Ae.prototype.ya=function(e){return e in this.succ||t(new Q("The node "+e+" is not in the digraph.")),ce(this.pred[e])},Ae.prototype.predecessors=Ae.prototype.ya,Ae.prototype.C=Ae.prototype.ba,Ae.prototype.neighbors=Ae.prototype.C,Ae.prototype.Y=Ae.prototype.ga,Ae.prototype.neighbors_iter=Ae.prototype.Y,Ae.prototype.j=function(t,e){l(t)&&(e=t,t=Xe);var n,i,o;return n=t!=Xe?se(this.b(t),function(t){return[t,this.adj[t]]},this):de(this.adj),e?ge(n,function(t){return i=t[0],o=t[1],pe(o)},function(t){return[i,t[0],t[1]]}):ge(n,function(t){return i=t[0],o=t[1],pe(o)},function(t){return[i,t[0]]})},Ae.prototype.edges_iter=Ae.prototype.j,Ae.prototype.T=Ae.prototype.j,Ae.prototype.out_edges_iter=Ae.prototype.T,Ae.prototype.$=Pe.prototype.p,Ae.prototype.out_edges=Ae.prototype.$,Ae.prototype.I=function(t,e){l(t)&&(e=t,t=Xe);var n,i;return n=t!=Xe?se(this.b(t),function(t){return[t,this.pred[t]]},this):de(this.pred),e?ge(n,function(t){return i=t[0],pe(t[1])},function(t){return[t[0],i,t[1]]}):ge(n,function(t){return i=t[0],pe(t[1])},function(t){return[t[0],i]})},Ae.prototype.in_edges_iter=Ae.prototype.I,Ae.prototype.H=function(t,e){return ce(this.I(t,e))},Ae.prototype.in_edges=Ae.prototype.H,Ae.prototype.m=function(t,e){var n;return n=t!=Xe?ae(se(this.b(t),function(t){return[t,this.succ[t]]},this),se(this.b(t),function(t){return[t,this.pred[t]]},this)):ae(pe(this.succ),pe(this.pred)),e?se(n,function(t){var n,i=t[0][1],o=t[1][1],r=0;for(n in i)r+=+L(i[n],e,1);for(n in o)r+=+L(o[n],e,1);return[t[0][0],r]}):se(n,function(t){return[t[0][0],oe(t[0][1])+oe(t[1][1])]})},Ae.prototype.degree_iter=Ae.prototype.m,Ae.prototype.G=function(t,e){var n;return n=t!=Xe?se(this.b(t),function(t){return[t,this.pred[t]]},this):pe(this.pred),e?se(n,function(t){var n,i=0,o=t[1];for(n in o)i+=+L(o[n],e,1);return[t[0],i]}):se(n,function(t){return[t[0],k(t[1])]})},Ae.prototype.in_degree_iter=Ae.prototype.G,Ae.prototype.M=function(t,e){var n;return n=t!=Xe?se(this.b(t),function(t){return[t,this.succ[t]]},this):pe(this.succ),e?se(n,function(t){var n,i=0,o=t[1];for(n in o)i+=+L(o[n],e,1);return[t[0],i]}):se(n,function(t){return[t[0],k(t[1])]})},Ae.prototype.out_degree_iter=Ae.prototype.M,Ae.prototype.da=function(t,e){return this.q(t)?this.G(t,e).next()[1]:ne(this.G(t,e))},Ae.prototype.in_degree=Ae.prototype.da,Ae.prototype.fa=function(t,e){return this.q(t)?this.M(t,e).next()[1]:ne(this.M(t,e))},Ae.prototype.out_degree=Ae.prototype.fa,Ae.prototype.clear=function(){E(this.succ),E(this.pred),E(this.node),E(this.graph)},Ae.prototype.clear=Ae.prototype.clear,Ae.prototype.f=e(Qe),Ae.prototype.is_multigraph=Ae.prototype.f,Ae.prototype.d=e(Ge),Ae.prototype.is_directed=Ae.prototype.d,Ae.prototype.B=function(){return ye(this)},Ae.prototype.to_directed=Ae.prototype.B,Ae.prototype.P=function(t){var e=new Pe;e.name(this.name()),e.i(this);var n,i=this.pred;return t?e.a(ge(this.o(),function(t){return n=t[0],pe(t[1])},function(t){return t[0]in i[n]?[n,t[0],ve(t[1])]:void 0})):e.a(ge(this.o(),function(t){return n=t[0],pe(t[1])},function(t){return[n,t[0],ve(t[1])]})),e.graph=ve(this.graph),e.node=ve(this.node),e},Ae.prototype.to_undirected=Ae.prototype.P,Ae.prototype.reverse=function(t){return(t=!i(t)||t)?(t=new this.constructor(Xe,{name:"Reverse of ("+this.name()+")"}),t.i(this),t.a(se(this.j(Ge),function(t){return[t[1],t[0],ve(t[2])]})),t.graph=ve(this.graph),t.node=ve(this.node)):(t=this.succ,this.succ=this.pred,this.pred=t,this.adj=this.succ,t=this),t},Ae.prototype.reverse=Ae.prototype.reverse,Ae.prototype.r=function(t){t=this.b(t);var e=new this.constructor,n=e.succ,i=e.pred,o=this.succ;return re(t,function(t){n[t]={},i[t]={}}),re(n,function(t){var e=n[t];C(o[t],function(o,r){r in n&&(e[r]=o,i[r][t]=o)})}),re(e,function(t){e.node[t]=this.node[t]},this),e.graph=this.graph,e},Ae.prototype.subgraph=Ae.prototype.r,c(Te,Pe),h("jsnx.classes.MultiGraph",Te),h("jsnx.MultiGraph",Te),Te.__name__="MultiGraph",Te.prototype.h=function(e,i,o,r){var s,l;if(o!=Xe&&!a(o)&&"number"!=typeof o&&(r=o,o=Xe),r=r||{},"object"!==n(r)&&t(new Q("The attr_dict argument must be an object.")),e in this.adj||(this.adj[e]={},this.node[e]={}),i in this.adj||(this.adj[i]={},this.node[i]={}),i in this.adj[e]){if(l=this.adj[e][i],o==Xe)for(o=k(l);o in l;)o+=1;s=L(l,o,{}),R(s,r),l[o]=s}else o!=Xe||(o=0),s={},R(s,r),l=B(o,s),this.adj[e][i]=l,this.adj[i][e]=l},Te.prototype.add_edge=Te.prototype.h,Te.prototype.a=function(e,i){i=i||{},"object"!==n(i)&&t(new Q("The attr_dict argument must be an object.")),re(e,function(e){var n,o,r=oe(e),s=Xe,a={};if(4===r?(n=e[0],o=e[1],s=e[2],a=e[3]):3===r?(n=e[0],o=e[1],a=e[2]):2===r?(n=e[0],o=e[1]):t(new Q("Edge tuple "+be(e)+" must be a 2-tuple, 3-tuple or 4-tuple.")),e=n in this.adj?L(this.adj[n],o,{}):{},s==Xe)for(s=k(e);s in e;)s+=1;e=L(e,s,{}),R(e,i,a),this.h(n,o,s,e)},this)},Te.prototype.add_edges_from=Te.prototype.a,Te.prototype.s=function(e,n,i){!(e in this.adj&&n in this.adj[e]||!t(new Q("The edge "+e+"-"+n+" is not in the graph")));var o=this.adj[e][n];i!=Xe?(i in o||t(new Q("The edge "+e+"-"+n+" with key "+i+" is not in the graph")),O(o,i)):O(o,M(o)),0===k(o)&&(O(this.adj[e],n),e!=n&&O(this.adj[n],e))},Te.prototype.remove_edge=Te.prototype.s,Te.prototype.A=function(e){re(e,function(e){try{this.s(e[0],e[1],e[2])}catch(n){n instanceof Q||t(n)}},this)},Te.prototype.remove_edges_from=Te.prototype.A,Te.prototype.S=function(t,e,n){return n!=Xe?t in this.adj&&e in this.adj[t]&&n in this.adj[t][e]:t in this.adj&&e in this.adj[t]},Te.prototype.has_edge=Te.prototype.S,Te.prototype.p=function(t,e,n){return P(this.j(t,e,n))},Te.prototype.edges=Te.prototype.p,Te.prototype.j=function(e,n,i){l(e)&&(l(n)&&(i=n),n=e,e=Xe);var o,r,s={};return e=e!=Xe?se(this.b(e),function(t){return[t,this.adj[t]]},this):pe(this.adj),n?ge(e,function(e){o=e[0];var n=new b,i=pe(e[1]);return n.next=function(){try{return i.next()}catch(e){e===sn&&(s[o]=1),t(e)}},n},function(t){return r=t[0],r in s?void 0:pe(t[1])},function(t){return i?[o,r,t[0],t[1]]:[o,r,t[1]]}):ge(e,function(e){o=e[0];var n=new b,i=pe(e[1]);return n.next=function(){try{return i.next()}catch(e){e===sn&&(s[o]=1),t(e)}},n},function(t){return r=t[0],r in s?void 0:pe(t[1])},function(t){return i?[o,r,t[0]]:[o,r]})},Te.prototype.edges_iter=Te.prototype.j,Te.prototype.X=function(t,e,n,o){return i(o)||(o=Xe),t in this.adj&&e in this.adj[t]?n!=Xe?L(this.adj[t][e],n,o):this.adj[t][e]:o},Te.prototype.get_edge_data=Te.prototype.X,Te.prototype.m=function(t,e){var n;return n=t!=Xe?se(this.b(t),function(t){return[t,this.adj[t]]},this):pe(this.adj),e!=Xe?S(n,function(t){var n=t[0];t=t[1];var i=0;return C(t,function(t){C(t,function(t){i+=L(t,e,1)})}),n in t&&C(t[n],function(t){i+=L(t,e,1)}),[n,i]}):S(n,function(t){var e=t[0];t=t[1];var n=0;return C(t,function(t){n+=k(t)}),[e,n+ +(e in t&&k(t[e]))]})},Te.prototype.degree_iter=Te.prototype.m,Te.prototype.f=e(Ge),Te.prototype.is_multigraph=Te.prototype.f,Te.prototype.d=e(Qe),Te.prototype.is_directed=Te.prototype.d,Te.prototype.B=function(){var t=new xe;return t.i(this),t.a(function(){var t,e;return ge(this.o(),function(e){return t=e[0],pe(e[1])},function(t){return e=t[0],pe(t[1])},function(n){return[t,e,n[0],ve(n[1])]})}.call(this)),t.graph=ve(this.graph),t.node=ve(this.node),t},Te.prototype.to_directed=Te.prototype.B,Te.prototype.O=function(t,e){var n=[];return t?e?C(this.adj,function(t,e){e in t&&C(t[e],function(t,i){n.push([e,e,i,t])})}):C(this.adj,function(t,e){e in t&&C(t[e],function(t){n.push([e,e,t])})}):e?C(this.adj,function(t,e){e in t&&C(t[e],function(t,i){n.push([e,e,i])})}):C(this.adj,function(t,e){e in t&&C(t[e],function(){n.push([e,e])})}),n},Te.prototype.selfloop_edges=Te.prototype.O,Te.prototype.D=function(t,e){return t==Xe?this.size():t in this.adj&&e in this.adj[t]?k(this.adj[t][e]):0},Te.prototype.number_of_edges=Te.prototype.D,Te.prototype.r=function(t){t=this.b(t);var e=new this.constructor,n=e.adj,i=this.adj;return w(t,function(t){var e={};n[t]=e,C(i[t],function(i,o){if(o in n){var r=F(i);e[o]=r,n[o][t]=r}})}),C(this.node,function(t,n){e.node[n]=t}),e.graph=this.graph,e},Te.prototype.subgraph=Te.prototype.r,c(xe,Ae);var dn,pn=xe.prototype,fn=Te.prototype;for(dn in fn)fn.hasOwnProperty(dn)&&"constructor"!==dn&&(pn[dn]=fn[dn]);h("jsnx.classes.MultiDiGraph",xe),h("jsnx.MultiDiGraph",xe),xe.__name__="MultiDiGraph",xe.prototype.h=function(e,i,o,r){var s,l;if(o!=Xe&&!a(o)&&"number"!=typeof o&&(r=o,o=Xe),r=r||{},"object"!==n(r)&&t(new Q("The attr_dict argument must be an object.")),e in this.succ||(this.succ[e]={},this.pred[e]={},this.node[e]={}),i in this.succ||(this.succ[i]={},this.pred[i]={},this.node[i]={}),i in this.succ[e]){if(l=this.adj[e][i],o==Xe)for(o=k(l);o in l;)o+=1;s=L(l,o,{}),R(s,r),l[o]=s}else o!=Xe||(o=0),s={},R(s,r),l=B(o,s),this.succ[e][i]=l,this.pred[i][e]=l},xe.prototype.add_edge=xe.prototype.h,xe.prototype.s=function(e,n,i){!(e in this.adj&&n in this.adj[e]||!t(new Q("The edge "+e+"-"+n+" is not in the graph")));var o=this.adj[e][n];i!=Xe?(i in o||t(new Q("The edge "+e+"-"+n+" with key "+i+" is not in the graph")),O(o,i)):O(o,M(o)),0===k(o)&&(O(this.succ[e],n),O(this.pred[n],e))},xe.prototype.remove_edge=xe.prototype.s,xe.prototype.j=function(t,e,n){l(t)&&(l(e)&&(n=e),e=t,t=Xe);var i,o;return t=t!=Xe?se(this.b(t),function(t){return[t,this.adj[t]]},this):de(this.adj),e?ge(t,function(t){return i=t[0],pe(t[1])},function(t){return o=t[0],pe(t[1])},function(t){return n?[i,o,t[0],t[1]]:[i,o,t[1]]}):ge(t,function(t){return i=t[0],pe(t[1])},function(t){return o=t[0],pe(t[1])},function(t){return n?[i,o,t[0]]:[i,o]})},xe.prototype.edges_iter=xe.prototype.j,xe.prototype.T=xe.prototype.j,xe.prototype.out_edges_iter=xe.prototype.T,xe.prototype.$=function(t,e,n){return P(this.T(t,e,n))},xe.prototype.out_edges=xe.prototype.$,xe.prototype.I=function(t,e,n){l(t)&&(e=t,t=Xe);var i,r;return t=o?se(this.b(t),function(t){return[t,this.pred[t]]},this):de(this.pred),e?ge(t,function(t){return i=t[0],pe(t[1])},function(t){return r=t[0],pe(t[1])},function(t){return n?[r,i,t[0],t[1]]:[r,i,t[1]]}):ge(t,function(t){return i=t[0],pe(t[1])},function(t){return r=t[0],pe(t[1])},function(t){return n?[r,i,t[0]]:[r,i]})},xe.prototype.in_edges_iter=xe.prototype.I,xe.prototype.H=function(t,e,n){return P(this.I(t,e,n))},xe.prototype.in_edges=xe.prototype.H,xe.prototype.m=function(t,e){var n;return n=t!=Xe?ae(S(this.b(t),function(t){return[t,this.succ[t]]},this),S(this.b(t),function(t){return[t,this.pred[t]]},this)):ae(pe(this.succ),pe(this.pred)),e!=Xe?se(n,function(t){var n=t[0][1],i=0;return C(t[1][1],function(t){C(t,function(t){i+=+L(t,e,1)})}),C(n,function(t){C(t,function(t){i+=+L(t,e,1)})}),[t[0][0],i]}):se(n,function(t){var e=0,n=0;return C(t[1][1],function(t){e+=oe(t)}),C(t[0][1],function(t){n+=oe(t)}),[t[0][0],e+n]})},xe.prototype.degree_iter=xe.prototype.m,xe.prototype.G=function(t,e){var n;return n=t!=Xe?se(this.b(t),function(t){return[t,this.pred[t]]},this):pe(this.pred),e!=Xe?se(n,function(t){var n=0;return C(t[1],function(t){C(t,function(t){n+=+L(t,e,1)})}),[t[0][0],n]}):se(n,function(t){var e=0;return C(t[1],function(t){e+=k(t)}),[t[0],e]})},xe.prototype.in_degree_iter=xe.prototype.G,xe.prototype.M=function(t,e){var n;return n=t!=Xe?se(this.b(t),function(t){return[t,this.succ[t]]},this):pe(this.succ),e!=Xe?se(n,function(t){var n=0;return C(t[1],function(t){C(t,function(t){n+=+L(t,e,1)})}),[t[0][0],n]}):se(n,function(t){var e=0;return C(t[1],function(t){e+=k(t)}),[t[0],e]})},xe.prototype.out_degree_iter=xe.prototype.M,xe.prototype.f=e(Ge),xe.prototype.is_multigraph=xe.prototype.f,xe.prototype.d=e(Ge),xe.prototype.is_directed=xe.prototype.d,xe.prototype.B=function(){return ye(this)},xe.prototype.to_directed=xe.prototype.B,xe.prototype.P=function(t){var e=new Te;e.name(this.name()),e.i(this);var n,i,o=this;return t?e.a(ge(this.o(),function(t){return n=t[0],pe(t[1])},function(t){return i=t[0],pe(t[1])},function(t){return o.S(i,n,t[0])?[n,i,t[0],ve(t[1])]:void 0})):e.a(ge(this.o(),function(t){return n=t[0],pe(t[1])},function(t){return i=t[0],pe(t[1])},function(t){return[n,i,t[0],ve(t[1])]})),e.graph=ve(this.graph),e.node=ve(this.node),e},xe.prototype.to_undirected=xe.prototype.P,xe.prototype.r=function(t){t=this.b(t);var e=new this.constructor,n=e.succ,i=e.pred,o=this.succ;return w(t,function(t){n[t]={},i[t]={}}),re(n,function(t){var e=n[t];C(o[t],function(o,r){if(r in n){var s=F(o);e[r]=s,i[r][t]=s}})}),re(e,function(t){e.node[t]=this.node[t]},this),e.graph=this.graph,e},xe.prototype.subgraph=xe.prototype.r,xe.prototype.reverse=function(t){return(t=!i(t)||t)?(t=new this.constructor(Xe,{name:"Reverse of ("+this.name()+")"}),t.i(this),t.a(S(this.j(Ge,Ge),function(t){return[t[1],t[0],t[2],ve(t[3])]})),t.graph=ve(this.graph),t.node=ve(this.node)):(t=this.succ,this.succ=this.pred,this.pred=t,this.adj=this.succ,t=this),t},xe.prototype.reverse=xe.prototype.reverse,h("jsnx.nodes",function(t){return t.z()}),h("jsnx.nodes_iter",function(t){return t.K()}),h("jsnx.edges",function(t,e){return t.p(e)}),h("jsnx.edges_iter",function(t,e){return t.j(e)}),h("jsnx.degree",function(t,e,n){return t.l(e,n)}),h("jsnx.neighbors",function(t,e){return t.C(e)}),h("jsnx.number_of_nodes",function(t){return t.L()}),h("jsnx.number_of_edges",function(t){return t.D()}),h("jsnx.density",function(t){var e=t.L(),n=t.D();return 0===n?0:t.d()?n/(e*(e-1)):2*n/(e*(e-1))}),h("jsnx.degree_histogram",function(t){t=I(t.l());for(var e=Math.max.apply(Math,t)+1,n=[],i=0;e>i;i++)n[i]=0;return nn(t,function(t){n[t]+=1}),n}),h("jsnx.is_directed",function(t){return t.d()}),h("jsnx.freeze",function(e){function n(){t(new Q("Frozen graph can't be modified"))}return e.F=n,e.i=n,e.N=n,e.U=n,e.h=n,e.a=n,e.s=n,e.A=n,e.clear=n,e.qa=Ge,e}),h("jsnx.is_frozen",function(t){return!!t.qa}),h("jsnx.subgraph",function(t,e){return t.r(e)}),h("jsnx.create_empty_copy",function(t,e){i(e)||(e=Ge);var n=new t.constructor;return e&&n.i(t),n}),h("jsnx.info",function(e,n){var i="";if(n!=Xe)e.q(n)||t(new Q("node "+n+" not in graph")),i=i+("Node "+n+" has the following properties:\n")+("Degree: "+e.l(n)+"\n"),i+="Neighbors: "+e.C(n).join(" ");else{var i=i+("Name: "+e.name()+"\n"),i=i+("Type: "+e.constructor.__name__+"\n"),i=i+("Number of nodes: "+e.L()+"\n"),i=i+("Number of edges: "+e.D()+"\n"),o=e.L();if(o>0)if(e.d())i+="Average in degree: "+(cn.n.apply(Xe,I(e.da()))/o).toFixed(4)+"\n",i+="Average out degree: "+(cn.n.apply(Xe,I(e.fa()))/o).toFixed(4);else var r=cn.n.apply(Xe,I(e.l())),i=i+("Average degree: "+(r/o).toFixed(4))}return i}),h("jsnx.set_node_attributes",function(t,e,n){C(n,function(n,i){t.Z[i][e]=n})}),h("jsnx.get_node_attributes",Ce),h("jsnx.set_edge_attributes",function(t,e,n){C(n,function(e,n){n=n.split(","),t.k(n[0])[n[1]]=e})}),Ce=function(t,e){var n={};return C(t.p(Ge),function(t){e in t[2]&&(n[[t[0],t[1]]]=t[2][e])}),n},h("jsnx.get_edge_attributes",{}.Ka);var gn={};h("jsnx.triangles",De),h("jsnx.average_clustering",function(t,e,n,i){2===arguments.length?a(e)?(n=e,e=Xe):l(e)&&(i=e,e=Xe):3===arguments.length&&l(n)&&(i=n,n=Xe),n!=Xe||(n=Xe),i!=Xe||(i=Ge);var o=I(Me(t,e,n));return i||(o=on(o,function(t){return t>0})),cn.n.apply(cn,o)/o.length}),h("jsnx.clustering",Me),h("jsnx.transitivity",function(t){var e=0,n=0;return w(ke(t),function(t){n+=t[1]*(t[1]-1),e+=t[2]}),0===e?0:e/n}),h("jsnx.square_clustering",function(t,e){var n=e==Xe?t:t.b(e),i={};return w(n,function(e){var n=i[e]=0;w(ue(j(t.k(e))),function(o){var r=o[0];o=o[1];var s=q(new W(j(t.k(r))),j(t.k(o)));s.remove(e),s=s.c(),i[e]+=s;var a=s+1,l=t.k(r);o in l&&(a+=1),n+=(k(t.k(r))-a)*(k(t.k(o))-a)+s}),n>0&&(i[e]/=n)}),t.q(e)?I(i)[0]:i}),h("jsnx.find_cliques",Ie),h("jsnx.find_cliques_recursive",function(t){var e={};w(t.o(),function(t){var n=new W(j(t[1]));n.remove(t[0]),e[t[0]]=n});t:{for(var n in e){t=Qe;break t}t=Ge}if(t)return[];t=new W(j(e)),n=new W;var i=[];return je(e,t,n,[],i),i}),h("jsnx.graph_clique_number",function(t,e){e!=Xe||(e=Ie(t));var n=0;return re(e,function(t){n=t.length>n?t.length:n}),n}),h("jsnx.graph_number_of_cliques",function(t,e){return e!=Xe||(e=Ie(t)),ce(e).length}),h("jsnx.number_of_cliques",Ee),h("jsnx.algorithms.isomorphism.could_be_isomorphic",Oe),h("jsnx.could_be_isomorphic",Oe),h("jsnx.algorithms.isomorphism.fast_could_be_isomorphic",Le),h("jsnx.fast_could_be_isomorphic",Le),h("jsnx.algorithms.isomorphism.faster_could_be_isomorphic",Fe),h("jsnx.faster_could_be_isomorphic",Fe),h("jsnx.is_valid_degree_sequence",Re),h("jsnx.is_valid_degree_sequence_havel_hakimi",Be),h("jsnx.is_valid_degree_sequence_erdos_gallai",Ne),h("jsnx.strongly_connected_components",$e),h("jsnx.simple_cycles",function(e){function n(t){function e(t){var n;for(c.remove(t);h[t].length>0;)n=h[t].pop(),c.contains(n)&&e(n)}var r,s,a=Qe,l=i.ba(t);for(p.push(t),c.add(t),r=0;l.length>r;r++)s=l[r],s===o?(a=p.slice(0),a.push(o),f.push(a),a=Ge):c.contains(s)||n(s)&&(a=Ge);if(a)e(t);else for(r=0;l.length>r;r++)s=l[r],en(h[s],t)>=0||h[s].push(t);return t!==p.pop()&&console.log("DANGER WILL ROBINSON!"),a}e.d()||t(new Q("simple_cycles() is not defined for undirected graphs."));var i,o,r,s,a,l,u,h={},c=new W,d=e.z(),p=[],f=[],g={};for(s=0;d.length>s;s++)h[d[s]]=[],g[d[s]]=s;for(r=0;d.length-1>r;)if(o=d[r],s=e.r(d.slice(r)),a=$e(s),0===a.length)r=d.length;else{for(i=u=l=Je,s=0;a.length>s;s++)for(r=0;a[s].length>r;r++)l===Je?(l=a[s][r],i=a[s],u=g[l]):u>g[a[s][r]]&&(l=a[s][r],i=a[s],u=g[l]);for(i=e.r(i),o=l,r=g[l],a=i.z(),s=0;a.length>s;s++)c.remove(a[s]),h[a[s]]=[];n(o),r++}return f}),h("jsnx.complete_graph",He),h("jsnx.cycle_graph",function(t,e){var n=Ue(t,e);return n.name("cycle_graph("+t+")"),t>1&&n.h(t-1,0),n}),h("jsnx.empty_graph",We),h("jsnx.null_graph",function(t){return t=We(0,t),t.name("null_graph()"),t}),h("jsnx.path_graph",Ue),h("jsnx.trivial_graph",function(t){return t=We(1,t),t.name("null_graph()"),t}),h("jsnx.fast_gnp_random_graph",function(t,e,n){n!=Xe||(n=Qe);var i=We(t);if(i.name("fast_gnp_random_graph("+t+","+e+")"),0>=e||e>=1)return qe(t,e,n);var o=1,r=-1;if(e=Math.log(1-e),n)for(i=Ae(i);t>o;){for(n=Math.log(1-Math.random()),r=r+1+Math.floor(n/e),o===r&&(r+=1);r>=t&&t>o;)r-=t,o+=1,o==r&&(r+=1);t>o&&i.h(o,r)}else for(;t>o;){for(n=Math.log(1-Math.random()),r=r+1+Math.floor(n/e);r>=o&&t>o;)r-=o,o+=1;t>o&&i.h(o,r)}return i}),h("jsnx.gnp_random_graph",qe),h("jsnx.binomial_graph",qe),h("jsnx.erdos_renyi_graph",qe),h("jsnx.havel_hakimi_graph",function(e,n){Re(e)||t(new Q("Invalid degree sequence")),n!=Xe&&(n.d()&&t(new Q("Directed Graph not supported")),n.f()&&t(new Q("Havel-Hakimi requires simple graph")));var i=e.length,o=We(i,n);if(0===i||0===Math.max.apply(Xe,e))return o;for(i=P(S(o,function(t){return[e[t],t]}));i.length>0;){if(i.sort(function(t,e){return t[0]!==e[0]?t[0]-e[0]:+t[1]-+e[1]}),0>i[0][0])return Qe;var r=i.pop();if(0===r[0])break;if(r[0]>i.length)return Qe;for(var s=i.length,a=s-r[0];s>a;a++)o.h(r[1],i[a][1]),i[a][0]-=1}return o.name("havel_hakimi_graph "+o.v()+" nodes "+o.size()+" edges"),o}),h("jsnx.relabel_nodes",ze),h("jsnx.convert_node_labels_to_integers",function(e,n,i,o){3===arguments.length&&l(i)?(o=i,i=Xe):2===arguments.length&&(l(n)?(o=n,n=Xe):a(n)&&(i=n,n=Xe)),n!=Xe||(n=0),i!=Xe||(i="default"),o!=Xe||(o=Ge);var r,s,u,h,c={};if("default"===i)for(r=e.z(),s=0,u=n,h=r.length;h>s;s++,u++)c[r[s]]=u;else if("sorted"===i)for(r=e.z(),r.sort(),s=0,u=n,h=r.length;h>s;s++,u++)c[r[s]]=u;else if("increasing degree"===i)for(r=P(e.m()),r.sort(function(t,e){return t[1]-e[1]}),s=0,u=n,h=r.length;h>s;s++,u++)c[r[s][0]]=u;else if("decreasing degree"===i)for(r=P(e.m()),r.sort(function(t,e){return e[1]-t[1]}),s=0,u=n,h=r.length;h>s;s++,u++)c[r[s][0]]=u;else t(new Q("Unkown node ordering: "+i));return s=ze(e,c),s.name("("+e.name()+")_with_int_labels"),o||(s.node_labels=c),s})}(),function(){var t;t=function(){function t(t,e){var n,i,o,r,s,a,l,u,h,c,d,p,f,g,m,v,y,b,_,w,S;for(l=t.length,o=[],a=[],n=[],i=[],r=[],u=[],s=c=0,b=l-1;b>=0?b>c:c>b;s=b>=0?++c:--c)o[s]=(e[s+1]-e[s])/(t[s+1]-t[s]),s>0&&(a[s]=(o[s-1]+o[s])/2);for(a[0]=o[0],a[l-1]=o[l-2],h=[],s=d=0,_=l-1;_>=0?_>d:d>_;s=_>=0?++d:--d)0===o[s]&&h.push(s);for(p=0,g=h.length;g>p;p++)s=h[p],a[s]=a[s+1]=0;for(s=f=0,w=l-1;w>=0?w>f:f>w;s=w>=0?++f:--f)n[s]=a[s]/o[s],i[s]=a[s+1]/o[s],r[s]=Math.pow(n[s],2)+Math.pow(i[s],2),u[s]=3/Math.sqrt(r[s]);for(h=[],s=v=0,S=l-1;S>=0?S>v:v>S;s=S>=0?++v:--v)r[s]>9&&h.push(s);for(y=0,m=h.length;m>y;y++)s=h[y],a[s]=u[s]*n[s]*o[s],a[s+1]=u[s]*i[s]*o[s];this.x=t.slice(0,l),this.y=e.slice(0,l),this.m=a}return t.prototype.interpolate=function(t){var e,n,i,o,r,s,a,l,u,h,c,d;for(s=c=d=this.x.length-2;(0>=d?0>=c:c>=0)&&!(t>=this.x[s]);s=0>=d?++c:--c);return e=this.x[s+1]-this.x[s],a=(t-this.x[s])/e,l=Math.pow(a,2),u=Math.pow(a,3),n=2*u-3*l+1,o=u-2*l+a,i=-2*u+3*l,r=u-l,h=n*this.y[s]+o*e*this.m[s]+i*this.y[s+1]+r*e*this.m[s+1]},t}(),window.MonotonicCubicSpline=t}.call(this),function(t,e,n,i){"use strict";t.widget("edible.musicWaveform",t.edible.waveform,{MAX_VOL:1.5,_create:function(){var t,e,n;this.options._graph=this._createGraph();var o=this.options._graph.nodes().slice(0).sort(function(t,e){return parseFloat(t)-parseFloat(e)});if(this.options._beatOrder=o.slice(0),this.options.currentBeats===i){if(this.options.currentBeats=o,console.log(this.options.currentBeats),0!==this.options.start||this.options.dur!==this.options.len){for(e=this.options.currentBeats.slice(0),this.options.currentBeats=[],n=0;e.length>n;n++)t=1e3*parseFloat(e[n]),t>=this.options.start&&this.options.start+this.options.len>t&&this.options.currentBeats.push(e[n]);
this.options.start=1e3*parseFloat(this.options.currentBeats[0])}}else this.options.start=1e3*parseFloat(this.options.currentBeats[0]);this._super("_create");var r=this;this.element.resizable({stop:function(t,e){var n=r.options.len,i=r.options.start,o=r._computePosFromResize(t,e);console.log("setting new len",o.len,"and start",o.start),r._updateCurrentBeatsFromResize(n,i,o.len,o.start),r._setOptions(o),r._refresh()}})},_updateCurrentBeatsFromResize:function(t,e,n,o){var r,s,a,l,u=this.options.currentBeats[0],h=this.options.currentBeats;if(o>e)return r=o-e,s=this._msToBeat(r),console.log("old BEATS",h),this.options.currentBeats=h.slice(s),console.log("new BEATS",h),i;if(e>o){if(r=e-o,a=1e3*parseFloat(u)-r,a>=0){for(l=this.options._beatOrder.indexOf(u),console.log("old BEATS",h);1e3*parseFloat(h[0])>a&&l>0;)h.unshift(this.options._beatOrder[--l]);return console.log("new BEATS",h),i}throw"RESIZED TOO FAR! CLEAN UP THE MUSIC RESIZE CODE, STEVE"}if(n>t){for(l=this.options._beatOrder.indexOf(h[h.length-1]),console.log("old BEATS (nl > ol)",h);o+n>1e3*parseFloat(h[h.length-1])&&this.options._beatOrder.length-1>l;)h.push(this.options._beatOrder[++l]);return console.log("new BEATS",h),i}return t>n?(console.log("old BEATS (nl < ol)",h),s=this._msToBeat(n),this.options.currentBeats=h.slice(0,s),console.log("new BEATS",h),i):i},waveformClass:function(){return"musicWaveform"},_updateBeatSet:function(){var t,e={},n=this.options.currentBeats;for(t=0;n.length>t;t++)e[n[t]]=!0;this.options._beatSet=e},_refresh:function(){this._super("_refresh"),this._updateBeatSet(),this.findLoops()},addLoop:function(e){var n,o,r,s,a=this.options.len,l=this.options.start,u=this.options.currentBeats,h=0,c=this.options._graph;if(this.options._simpleCycles!==i){for(n=this.options._simpleCycles[0],o=0;u.length>o;o++)if(u[o]===n[0]){r=o;break}return s=[r,1].concat(n),Array.prototype.splice.apply(this.options.currentBeats,s),t.each(n.slice(0,-1),function(t,e){h+=1e3*c.succ[e][n[t+1]].duration}),console.log("OLD LEN",a,"CYC LEN",h,"NEW LEN",a+h),this._setOptions({len:a+h}),"left"===e&&l-(this.options.len-a),this.options.hasOwnProperty("loopCallback")&&this.options.loopCallback(),i}},_linearCycles:function(){var t,e,n,i,o,r=this.options.currentBeats,s=this.options._graph.subgraph(r),a=this.options._beatOrder,l=this.options._beatSet,u=[];for(t=0;a.length>t;t++)if(n=a[t],n in l)for(e=t+1;a.length>e;e++)i=a[e],i in l&&n in s.succ[i]&&(o=a.slice(t,e+1),o.push(n),u.push(o));return u.sort(function(t,e){return t.length-e.length}),u},findLoops:function(){if(!this.options.hasOwnProperty("musicGraph"))return[];if(this.element.find(".loopControlLeft").remove(),this.element.find(".loopControlRight").remove(),!(Object.keys(this.options._beatSet).length>140)){this.options._graph;var e,o=this,r=this._linearCycles();console.log("cycles",r),r.length>0?(o.options._simpleCycles=r,e=n.createElement("div"),t(e).html('<i class="icon-repeat icon-white"></i>').addClass("loopControlRight").click(function(){return o.addLoop("right"),event.preventDefault(),!1}),o.element.append(e)):(o.options._simpleCycles=i,o.element.find(".loopControlLeft").remove(),o.element.find(".loopControlRight").remove())}},exportExtras:function(){this.options._dirty=!1;var t=this.options._mcanv.getContext("2d"),e=this.options.volume.x.slice(0),n=this.options.volume.y.slice(0),i=this.options.pxPerMs;return e.splice(0,0,0),e.push((t.canvas.width-1)/i),n.splice(0,0,n[0]),n.push(n[n.length-1]),{starts:this.options._exportStarts,durations:this.options._exportDurations,distances:this.options._exportDistances,volume:{x:e,y:n}}},slice:function(e){var i=this.element.offset(),o=e.pageX-i.left,r=n.createElement("div"),s=o/this.options.pxPerMs,a=this._msToBeat(s),l=this.options._beatToTime[a];console.log("beat index",a,"slice time",l);var u=t.extend(!0,{},this.options,{start:l,len:this.options.len-l}),h=this.options.currentBeats.slice(a);return u.currentBeats=h,console.log("new beats",h),t(r)[this.waveformClass()](u),this._setOptions({currentBeats:this.options.currentBeats.slice(0,a),len:l,_nextBeatHidden:this.options.currentBeats[a]}),{waveform:r,pos:l}},_msToBeat:function(e){if(!this.options.hasOwnProperty("_timeToBeat"))throw"No _timeToBeat in options";var n=this.options._timeToBeat,i=null,o=null;return t.each(n,function(t,n){(null==i||Math.abs(t-e)<Math.abs(i-e))&&(i=t,o=n)}),o},_drawWaveform:function(){if(!this.options.hasOwnProperty("_graph"))return this._super("_drawWaveform"),i;var e,o,r,s,a,l,u=this,h=this.options.data.length>0,c=this.options.data.length,d=c/this.options.dur,p=this.options.start*d,f=p+this.options.len*d,g=[],m=this.options._graph,v=this.options.currentBeats;console.log("CURRENT BEATS LEN",v.length,v);var y=0;this.options._timeToBeat={},this.options._beatToTime=[],this.options._exportStarts=[],this.options._exportDurations=[],this.options._exportDistances=[],v[0]===this.options._beatOrder[0]&&(u.options._timeToBeat[y]=0,u.options._exportStarts.push(0),u.options._exportDurations.push(parseFloat(v[0])),u.options._exportDistances.push(0),console.log("Using the intro",v[0]),o=1e3*parseFloat(v[0]),y+=o,h&&(f=parseInt(o*d),s=u.options.data.slice(0,f),g.push.apply(g,s))),t.each(v,function(t,n){if(t===v.length-1&&n===u.options._beatOrder[u.options._beatOrder.length-1])e=1e3*parseFloat(n),o=parseFloat(u.options.dur),r=o-e,a=parseFloat(u.options.dur)/1e3-parseFloat(n),l=0;else if(t===v.length-1)console.log("hanging final beat","len",u.options.len),e=1e3*parseFloat(n),r=u.options.len-y,0>r&&(r=0),a=r/1e3,o=e+r,console.log("current duration",y),console.log("start",e,"end",o),l=0;else{if(e=1e3*parseFloat(n),m.succ[n].hasOwnProperty(v[t+1]))a=m.succ[n][v[t+1]].duration,l=m.succ[n][v[t+1]].distance;else{var i=Object.keys(m.succ[n])[0];a=m.succ[n][i].duration,l=1}r=1e3*a,o=e+r}u.options._timeToBeat[y]=t,u.options._beatToTime[t]=y,u.options._exportStarts.push(parseFloat(n)),u.options._exportDurations.push(a),u.options._exportDistances.push(l),y+=r,h&&(p=parseInt(e*d),f=parseInt(o*d),s=u.options.data.slice(p,f),g.push.apply(g,s))}),this.options.len=y;var b=this.options._mcanv;t(b).attr("width",this.width()),this.element.find(".topBar").css("width",this.width());var _="#4BF2A7";b!==i&&(_=b.getContext("2d").createLinearGradient(0,0,0,parseInt(this.options.canvHeight,10)),_.addColorStop(0,"#333"),_.addColorStop(1,"#777")),h||(g=[]),new Waveform({canvas:b,data:g,innerColor:_,outerColor:"#eee",height:this.options.canvHeight,interpolate:!0,width:this.width()}),this.options._tmpCanv!==i&&this.options._tmpCanv.destroy();var w=n.createElement("canvas");t(w).appendTo("body"),this.options._tmpCanv=new EDIBLE.modules.MultiCanvas(w),this.options._tmpCanv.clone(b),this.options._tmpCanv.canvases.forEach(function(e){t(e).css("display","none")}),setTimeout(function(){u._drawVolume(!0)},0)},addVolumeMarker:function(t){var e,n=this.element.offset(),i=t.pageX-n.left,o=t.pageY-n.top-this.options.topBarHeight,r=i/this.options.pxPerMs,s=this.options._mcanv.getContext("2d"),a=this,l=function(t){return a.MAX_VOL-a.MAX_VOL*t/s.canvas.height},u=this.options.volume.x;for(e=0;u.length>e;e++)if(u[e]>r){u.splice(e,0,r),this.options.volume.y.splice(e,0,l(o));break}e===u.length&&(u.push(r),this.options.volume.y.push(l(o))),this._drawVolume(!0)},_drawVolume:function(e){var o=this;this.options._mcanv.clone(this.options._tmpCanv);var r=this.options._mcanv.getContext("2d");r.strokeStyle="#CFB52B",r.lineWidth=3,r.beginPath();var s,a=this.options.volume.x.slice(0),l=this.options.volume.y.slice(0),u=this.options.pxPerMs,h=(r.canvas.width-1)/u,c=!1;for(s=0;a.length>s;s++)if(a[s]>=h){c=!0;break}c&&(this.options.volume.x=a.slice(0,s),this.options.volume.y=l.slice(0,s)),a.splice(0,0,0),a.push((r.canvas.width-1)/u),l.splice(0,0,l[0]),l.push(l[l.length-1]);var d=function(t){return r.canvas.height-r.canvas.height*t/o.MAX_VOL},p=function(t){return t*u},f=a.map(p),g=l.map(d);r.moveTo(p(a[0]),d(l[0]));var s,m=new MonotonicCubicSpline(f,g),v=3;for(s=0;r.canvas.width>s;s+=v)r.lineTo(s,m.interpolate(s));if(r.stroke(),e!==i&&e){t(this.element).find(".volumeHandle").remove();var y,b=function(t,e){var n=e.position.left+4,i=e.position.top+4-o.options.topBarHeight,r=n/o.options.pxPerMs,s=o.options._mcanv.getContext("2d"),a=function(t){return o.MAX_VOL-o.MAX_VOL*t/s.canvas.height},l=e.helper.data("i"),u=!0;l>0&&o.options.volume.x[l-1]>=r&&(u=!1),o.options.volume.x.length-1>l&&r>=o.options.volume.x[l+1]&&(u=!1),u&&(o.options.volume.x[l]=r,o.options.volume.y[l]=a(i))};for(a=this.options.volume.x,l=this.options.volume.y,s=0;a.length>s;s++)y=n.createElement("div"),t(y).addClass("volumeHandle").data("vx",a[s]).data("vy",l[s]).data("i",s).css({left:p(a[s])-4,top:d(l[s])+this.options.topBarHeight-4}).appendTo(this.element).draggable({containment:t(this.element),drag:function(t,e){b(t,e),o._drawVolume(!1)},stop:function(t,e){b(t,e),o._drawVolume(!0)}})}},_createGraph:function(){if(!this.options.hasOwnProperty("musicGraph"))return i;var t=this.options.musicGraph,e=new jsnx.DiGraph;return e.add_nodes_from(t.nodes),console.log("nodes",e),e.add_edges_from(t.edges),console.log("with edges",e),e},_setOption:function(t,e){switch(this.options._dirty=!0,t){case"musicGraph":this.options.musicGraph=e,this.options._graph=this._createGraph();break;default:this.options[t]=e}this._super("_setOption",t,e)}})}(jQuery,window,document),function(t,e,n,i){"use strict";t.widget("edible.timeline",{options:{width:"1200px",tracks:4,wf:[],_dirtyWaveforms:[],pxPerMs:.05,sound:i,position:0,clickMode:"volume",linkGroups:[],_dirty:!0},_create:function(){var e=this;console.log("in timeline _create");var o,r=t("#trackTemplate").html();for(this.element.addClass("edible-timeline"),o=0;this.options.tracks>o;o++)this.element.append(_.template(r));this.element.css("height",95*this.options.tracks+"px"),this.element.find(".track").each(function(e){t(this).css("top",95*e+"px")}).droppable({accept:".edible-waveform",drop:function(n,o){var r=o.draggable,s=t(this);r.parent()!==s&&(r.appendTo(s),r.css("top",0)),t.each(e.options.wf,function(n,o){if(o.elt===r[0]){var a=o.pos;o.pos=e.pxToMs(r.position().left);var l=o.pos-a,u=e.msToPx(l);return t.each(e.element.find(".track"),function(t,e){return s[0]===e?(o.track=t,!1):i}),t.each(e.options.linkGroups,function(n,r){return-1!==r.indexOf(o.elt)?(t.each(e.options.wf,function(e,n){n.elt!==o.elt&&-1!==r.indexOf(n.elt)&&(n.pos+=l,t(n.elt).css("left","+="+u+"px"))}),!1):i}),i}})},hoverClass:"track-drop-hover"}).bind("click.edibletimeline",function(t){var n=e.element.offset(),o=t.pageX-n.left,r=e.element.scrollLeft(),s=(o+r)/e.options.pxPerMs;e._setOptions({position:s}),e.options.sound!==i&&e.options.sound.setPosition(s)}),this.element.css("height",this.element[0].scrollHeight+20+"px");var s=n.createElement("div");t(s).addClass("playhead").css("height",95*this.options.tracks+"px").appendTo(this.element),this.options._dirtyWaveforms=this.options.wf.slice(0),this._refresh()},_refresh:function(){var e=this;t.each(this.options._dirtyWaveforms,function(n,o){e.element.find(".track:eq("+o.track+")").append(o.elt),t(o.elt).css("left",e.msToPx(o.pos)),t(o.elt).wf("option","fixed")||t(o.elt).draggable({containment:".edible-timeline"}),t(o.elt).wf({pxPerMs:e.options.pxPerMs,changed:function(n,r){r[0].changed===i&&(o.pos=e.pxToMs(t(o.elt).position().left))},destroy:function(){var t;for(t=0;e.options.wf.length>t;t++)if(e.options.wf[t]===o){e.options.wf.splice(t,1),e._refresh();break}}})}),t.each(this.options.wf,function(n,i){t(i.elt).unbind("click.edibletimeline"),"split"===e.options.clickMode?t(i.elt).bind("click.edibletimeline",function(n){var o=t(this).wf("slice",n);console.log("POS OF NEW WF",i.pos+o.pos),console.log("POS OF OLD WF",i.pos),e.addWaveform({elt:o.waveform,track:i.track,pos:i.pos+o.pos}),console.log("POS OF OLD WF",i.pos)}):"volume"===e.options.clickMode&&t(i.elt).bind("click.edibletimeline",function(e){t(this).wf("addVolumeMarker",e)})}),this.options._dirtyWaveforms=[],this.element.width(this.options.width);var n;n=this.options.position*this.options.pxPerMs,this.element.find(".playhead").css("left",n+"px")},_destroy:function(){t.each(this.options.wf,function(e,n){t(n.elt).unbind(".edibletimeline").wf("destroy")}),this.element.removeClass("edible-timeline").html("")},addWaveform:function(t){this.options.wf.push(t),this.options._dirtyWaveforms.push(t),this._refresh()},msToPx:function(t){return parseFloat(t)*this.options.pxPerMs},pxToMs:function(t){return parseFloat(t)/this.options.pxPerMs},"export":function(){this.options._dirty=!1;var e=[];return t.each(this.options.wf,function(n,i){if(console.log("SCORE START",i.pos/1e3,"WF POS",i.pos),!t(i.elt).wf("option","mute")){var o=t(i.elt);e.push({globalVolume:o.wf("option","globalVolume"),waveformClass:o.wf("waveformClass"),extra:o.wf("exportExtras"),filename:o.wf("option","filename"),name:o.wf("option","name"),scoreStart:i.pos/1e3,wfStart:o.wf("option","start")/1e3,duration:o.wf("option","len")/1e3})}}),e},isDirty:function(){if(this.options._dirty)return!0;var e;for(e=0;this.options.wf.length>e;e++)if(t(wf.elt).wf("isDirty"))return!0;return!1},_setOptions:function(){this._superApply(arguments),this._refresh()},_setOption:function(t,e){switch(this.options._dirty=!0,t){case"pxPerMs":this.options._dirtyWaveforms=this.options.wf.slice(0),this.options[t]=e;break;default:this.options[t]=e}this._super("_setOption",t,e),this._refresh()}})}(jQuery,window,document),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}};window.Waveform=e=function(){function e(t){if(this.redraw=n(this.redraw,this),this.container=t.container,this.canvas=t.canvas,this.data=t.data||[],this.outerColor=t.outerColor||"transparent",this.innerColor=t.innerColor||"#000000",this.interpolate=!0,t.interpolate===!1&&(this.interpolate=!1),null==this.canvas){if(!this.container)throw"Either canvas or container option must be passed";this.canvas=this.createCanvas(this.container,t.width||this.container.clientWidth,t.height||this.container.clientHeight)}this.patchCanvasForIE(this.canvas),this.context=this.canvas.getContext("2d"),this.width=parseInt(this.context.canvas.width,10),this.height=parseInt(this.context.canvas.height,10),t.data&&this.update(t)}return e.name="Waveform",e.prototype.setData=function(t){return this.data=t},e.prototype.setDataInterpolated=function(t){return this.setData(this.interpolateArray(t,this.width))},e.prototype.setDataCropped=function(t){return this.setData(this.expandArray(t,this.width))},e.prototype.update=function(t){return null!=t.interpolate&&(this.interpolate=t.interpolate),this.interpolate===!1?this.setDataCropped(t.data):this.setDataInterpolated(t.data),this.redraw()},e.prototype.redraw=function(){var t,e,n,i,o,r,s,a;for(this.clear(),this.context.fillStyle=this.innerColor,n=this.height/2,e=0,s=this.data,a=[],o=0,r=s.length;r>o;o++)t=s[o],i=this.width/this.data.length,"function"==typeof this.innerColor&&(this.context.fillStyle=this.innerColor(e/this.width,t)),this.context.clearRect(i*e,n-n*t,i,2*n*t),this.context.fillRect(i*e,n-n*t,i,2*n*t),a.push(e++);return a},e.prototype.clear=function(){return this.context.fillStyle=this.outerColor,this.context.clearRect(0,0,this.width,this.height),this.context.fillRect(0,0,this.width,this.height)},e.prototype.patchCanvasForIE=function(t){var e;return window.G_vmlCanvasManager!==void 0?(t=window.G_vmlCanvasManager.initElement(t),e=t.getContext,t.getContext=function(){var n;return n=e.apply(t,arguments),t.getContext=e,n}):void 0},e.prototype.createCanvas=function(t,e,n){var i;return i=document.createElement("canvas"),t.appendChild(i),i.width=e,i.height=n,i},e.prototype.expandArray=function(t,e,n){var i,o,r,s;if(null==n&&(n=0),o=[],t.length>e)o=t.slice(t.length-e,t.length);else for(i=r=0,s=e-1;s>=0?s>=r:r>=s;i=s>=0?++r:--r)o[i]=t[i]||n;return o},e.prototype.linearInterpolate=function(t,e,n){return t+(e-t)*n},e.prototype.interpolateArray=function(t,e){var n,i,o,r,s,a,l;for(s=[],a=new Number((t.length-1)/(e-1)),s[0]=t[0],r=1;e-1>r;)l=r*a,o=new Number(Math.floor(l)).toFixed(),n=new Number(Math.ceil(l)).toFixed(),i=l-o,s[r]=this.linearInterpolate(t[o],t[n],i),r++;return s[e-1]=t[t.length-1],s},e.prototype.optionsForSyncedStream=function(t){var e,n;return null==t&&(t={}),e=!1,n=this,{whileplaying:this.redraw,whileloading:function(){var i;return e||(i=this,n.innerColor=function(e){return i.position/i.durationEstimate>e?t.playedColor||"rgba(255,  102, 0, 0.8)":i.bytesLoaded/i.bytesTotal>e?t.loadedColor||"rgba(0, 0, 0, 0.8)":t.defaultColor||"rgba(0, 0, 0, 0.4)"},e=!0),this.redraw}}},e.prototype.dataFromSoundCloudTrack=function(e){var n=this;return t.get("http://waveformjs.org/w",{url:e.waveform_url},function(t){return n.update({data:t})})},e}(),t=function(){var t,e,n,i,o,r,s,a,l,u;return s=function(t){var e,n,i;return i=document.createElement("script"),e=!1,i.src=t,i.async=!0,i.onload=i.onreadystatechange=function(){return e||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e=!0,i.onload=i.onreadystatechange=null,!i||!i.parentNode)?void 0:i.parentNode.removeChild(i)},n||(n=document.getElementsByTagName("head")[0]),n.appendChild(i)},n=function(t){return encodeURIComponent(t)},o=function(i,r,a,l){var h,c;c=-1===(i||"").indexOf("?")?"?":"&",r=r||{};for(h in r)r.hasOwnProperty(h)&&(c+=n(h)+"="+n(r[h])+"&");return o="json"+ ++e,u[o]=function(t){a(t);try{delete u[o]}catch(e){}return u[o]=null},s(i+c+(l||t.callbackName||"callback")+"="+o),o},l=function(t){var e;return e=t},e=0,i=void 0,a=void 0,r=void 0,u=this,t={},{get:o,init:l}}()}.call(this),function(t){function e(e){return t.less[e.split("/")[1]]}function n(){"development"===g.env?(g.optimization=0,g.watchTimer=setInterval(function(){g.watchMode&&o(function(t,e,n,i,o){e&&u(e.toCSS(),i,o.lastModified)})},g.poll)):g.optimization=3}function i(){for(var t=document.getElementsByTagName("style"),e=0;t.length>e;e++)t[e].type.match(P)&&new g.Parser({filename:document.location.href.replace(/#.*$/,""),dumpLineNumbers:g.dumpLineNumbers}).parse(t[e].innerHTML||"",function(n,i){var o=i.toCSS(),r=t[e];r.type="text/css",r.styleSheet?r.styleSheet.cssText=o:r.innerHTML=o})}function o(t,e){for(var n=0;g.sheets.length>n;n++)a(g.sheets[n],t,e,g.sheets.length-(n+1))}function r(t,e){var n,i,o,r,a=s(t),l=s(e),u="";if(a.hostPart!==l.hostPart)return"";for(i=Math.max(l.directories.length,a.directories.length),n=0;i>n&&l.directories[n]===a.directories[n];n++);for(r=l.directories.slice(n),o=a.directories.slice(n),n=0;r.length-1>n;n++)u+="../";for(n=0;o.length-1>n;n++)u+=o[n]+"/";return u}function s(t,e){var n,i,o=/^((?:[a-z-]+:)?\/\/(?:[^\/\?#]*\/)|([\/\\]))?((?:[^\/\\\?#]*[\/\\])*)([^\/\\\?#]*)([#\?].*)?$/,r=t.match(o),s={},a=[];if(!r)throw Error("Could not parse sheet href - '"+t+"'");if(!r[1]||r[2]){if(i=e.match(o),!i)throw Error("Could not parse page url - '"+e+"'");r[1]=i[1],r[2]||(r[3]=i[3]+r[3])}if(r[3])for(a=r[3].replace("\\","/").split("/"),n=0;a.length>n;n++)".."===a[n]&&n>0&&(a.splice(n-1,2),n-=2);return s.hostPart=r[1],s.directories=a,s.path=r[1]+a.join("/"),s.fileUrl=s.path+(r[4]||""),s.url=s.fileUrl+(r[5]||""),s}function a(e,n,i,o){var a,c=e.contents||{},p=e.files||{},m=s(e.href,t.location.href),v=m.url,y=_&&_.getItem(v),b=_&&_.getItem(v+":timestamp"),w={css:y,timestamp:b};a=g.relativeUrls?g.rootpath?e.entryPath?s(g.rootpath+r(m.path,e.entryPath)).path:g.rootpath:m.path:g.rootpath?g.rootpath:e.entryPath?e.entryPath:m.path,h(v,e.type,function(t,r){if(T+=t.replace(/@import .+?;/gi,""),!i&&w&&r&&new Date(r).valueOf()===new Date(w.timestamp).valueOf())u(w.css,e),n(null,null,t,e,{local:!0,remaining:o},v);else try{c[v]=t,new g.Parser({optimization:g.optimization,paths:[m.path],entryPath:e.entryPath||m.path,mime:e.type,filename:v,rootpath:a,relativeUrls:e.relativeUrls,contents:c,files:p,dumpLineNumbers:g.dumpLineNumbers}).parse(t,function(i,s){if(i)return f(i,v);try{n(i,s,t,e,{local:!1,lastModified:r,remaining:o},v),d(document.getElementById("less-error-message:"+l(v)))}catch(i){f(i,v)}})}catch(s){f(s,v)}},function(t,e){throw Error("Couldn't load "+e+" ("+t+")")})}function l(t){return t.replace(/^[a-z]+:\/\/?[^\/]+/,"").replace(/^\//,"").replace(/\.[a-zA-Z]+$/,"").replace(/[^\.\w-]+/g,"-").replace(/\./g,":")}function u(t,e,n){var i,o=e.href||"",r="less:"+(e.title||l(o));if(null===(i=document.getElementById(r))){i=document.createElement("style"),i.type="text/css",e.media&&(i.media=e.media),i.id=r;var s=e&&e.nextSibling||null;(s||document.getElementsByTagName("head")[0]).parentNode.insertBefore(i,s)}if(i.styleSheet)try{i.styleSheet.cssText=t}catch(a){throw Error("Couldn't reassign styleSheet.cssText.")}else(function(t){i.childNodes.length>0?i.firstChild.nodeValue!==t.nodeValue&&i.replaceChild(t,i.firstChild):i.appendChild(t)})(document.createTextNode(t));if(n&&_){p("saving "+o+" to cache.");try{_.setItem(o,t),_.setItem(o+":timestamp",n)}catch(a){p("failed to save")}}}function h(t,e,n,i){function o(e,n,i){e.status>=200&&300>e.status?n(e.responseText,e.getResponseHeader("Last-Modified")):"function"==typeof i&&i(e.status,t)}var r=c(),s=v?g.fileAsync:g.async;"function"==typeof r.overrideMimeType&&r.overrideMimeType("text/css"),r.open("GET",t,s),r.setRequestHeader("Accept",e||"text/x-less, text/css; q=0.9, */*; q=0.5"),r.send(null),v&&!g.fileAsync?0===r.status||r.status>=200&&300>r.status?n(r.responseText):i(r.status,t):s?r.onreadystatechange=function(){4==r.readyState&&o(r,n,i)}:o(r,n,i)}function c(){if(t.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){return p("browser doesn't support AJAX."),null}}function d(t){return t&&t.parentNode.removeChild(t)}function p(t){"development"==g.env&&"undefined"!=typeof console&&console.log("less: "+t)}function f(t,e){var n,i,o="less-error-message:"+l(e),r='<li><label>{line}</label><pre class="{class}">{content}</pre></li>',s=document.createElement("div"),a=[],h=t.filename||e,c=h.match(/([^\/]+(\?.*)?)$/)[1];s.id=o,s.className="less-error-message",i="<h3>"+(t.message||"There is an error in your .less file")+"</h3>"+'<p>in <a href="'+h+'">'+c+"</a> ";var d=function(t,e,n){t.extract[e]&&a.push(r.replace(/\{line\}/,parseInt(t.line)+(e-1)).replace(/\{class\}/,n).replace(/\{content\}/,t.extract[e]))};t.stack?i+="<br/>"+t.stack.split("\n").slice(1).join("<br/>"):t.extract&&(d(t,0,""),d(t,1,"line"),d(t,2,""),i+="on line "+t.line+", column "+(t.column+1)+":</p>"+"<ul>"+a.join("")+"</ul>"),s.innerHTML=i,u([".less-error-message ul, .less-error-message li {","list-style-type: none;","margin-right: 15px;","padding: 4px 0;","margin: 0;","}",".less-error-message label {","font-size: 12px;","margin-right: 15px;","padding: 4px 0;","color: #cc7777;","}",".less-error-message pre {","color: #dd6666;","padding: 4px 0;","margin: 0;","display: inline-block;","}",".less-error-message pre.line {","color: #ff0000;","}",".less-error-message h3 {","font-size: 20px;","font-weight: bold;","padding: 15px 0 5px 0;","margin: 0;","}",".less-error-message a {","color: #10a","}",".less-error-message .error {","color: red;","font-weight: bold;","padding-bottom: 2px;","border-bottom: 1px dashed red;","}"].join("\n"),{title:"error-message"}),s.style.cssText=["font-family: Arial, sans-serif","border: 1px solid #e00","background-color: #eee","border-radius: 5px","-webkit-border-radius: 5px","-moz-border-radius: 5px","color: #e00","padding: 15px","margin-bottom: 15px"].join(";"),"development"==g.env&&(n=setInterval(function(){document.body&&(document.getElementById(o)?document.body.replaceChild(s,document.getElementById(o)):document.body.insertBefore(s,document.body.firstChild),clearInterval(n))},10))}Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)||t instanceof Array}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var n=this.length>>>0,i=0;n>i;i++)i in this&&t.call(e,this[i],i,this)}),Array.prototype.map||(Array.prototype.map=function(t){for(var e=this.length>>>0,n=Array(e),i=arguments[1],o=0;e>o;o++)o in this&&(n[o]=t.call(i,this[o],o,this));return n}),Array.prototype.filter||(Array.prototype.filter=function(t){for(var e=[],n=arguments[1],i=0;this.length>i;i++)t.call(n,this[i])&&e.push(this[i]);return e}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e=this.length>>>0,n=0;if(0===e&&1===arguments.length)throw new TypeError;if(arguments.length>=2)var i=arguments[1];else for(;;){if(n in this){i=this[n++];break}if(++n>=e)throw new TypeError}for(;e>n;n++)n in this&&(i=t.call(null,i,this[n],n,this));return i}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length,n=arguments[1]||0;if(!e)return-1;if(n>=e)return-1;for(0>n&&(n+=e);e>n;n++)if(Object.prototype.hasOwnProperty.call(this,n)&&t===this[n])return n;return-1}),Object.keys||(Object.keys=function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}),String.prototype.trim||(String.prototype.trim=function(){return(this+"").replace(/^\s\s*/,"").replace(/\s\s*$/,"")});var g,m;"object"==typeof environment&&"[object Environment]"==={}.toString.call(environment)?(g=t===void 0?{}:t.less={},m=g.tree={},g.mode="rhino"):t===void 0?(g=exports,m=e("./tree"),g.mode="node"):(t.less===void 0&&(t.less={}),g=t.less,m=t.less.tree={},g.mode="browser"),g.Parser=function(t){function n(){w=A[_],S=b,T=b}function i(){A[_]=w,b=S,T=b}function o(){b>T&&(A[_]=A[_].slice(b-T),T=b)}function r(t){var e=t.charCodeAt(0);return 32===e||10===e||9===e}function s(t){var e,n;if(t instanceof Function)return t.call(x.parsers);if("string"==typeof t)e=y.charAt(b)===t?t:null,n=1,o();else{if(o(),!(e=t.exec(A[_])))return null;n=e[0].length}return e?(a(n),"string"==typeof e?e:1===e.length?e[0]:e):void 0}function a(t){for(var e=b,n=_,i=b+A[_].length,o=b+=t;i>b&&r(y.charAt(b));)b++;return A[_]=A[_].slice(t+(b-o)),T=b,0===A[_].length&&A.length-1>_&&_++,e!==b||n!==_}function l(t,e){var n=s(t);return n?n:(u(e||("string"==typeof t?"expected '"+t+"' got '"+y.charAt(b)+"'":"unexpected token")),void 0)}function u(t,e){var n=Error(t);throw n.index=b,n.type=e||"Syntax",n}function h(t){return"string"==typeof t?y.charAt(b)===t:t.test(A[_])?!0:!1}function c(t,e){return t.filename&&e.filename&&t.filename!==e.filename?x.imports.contents[t.filename]:y}function d(t,e){for(var n=t,i=-1;n>=0&&"\n"!==e.charAt(n);n--)i++;return{line:"number"==typeof t?(e.slice(0,t).match(/\n/g)||"").length:null,column:i}}function p(t){return"browser"===g.mode||"rhino"===g.mode?t.filename:e("path").resolve(t.filename)}function f(t,e,n){return{lineNumber:d(t,e).line+1,fileName:p(n)}}function v(t,e){var n=c(t,e),i=d(t.index,n),o=i.line,r=i.column,s=n.split("\n");this.type=t.type||"Syntax",this.message=t.message,this.filename=t.filename||e.filename,this.index=t.index,this.line="number"==typeof o?o+1:null,this.callLine=t.call&&d(t.call,n).line+1,this.callExtract=s[d(t.call,n).line],this.stack=t.stack,this.column=r,this.extract=[s[o-1],s[o],s[o+1]]}var y,b,_,w,S,P,A,T,x,t=t||{};t.contents||(t.contents={}),t.rootpath=t.rootpath||"",t.files||(t.files={});var C=function(){},D=this.imports={paths:t.paths||[],queue:[],files:t.files,contents:t.contents,mime:t.mime,error:null,push:function(e,n){var i=this;this.queue.push(e),g.Parser.importer(e,this.paths,function(t,o,r){i.queue.splice(i.queue.indexOf(e),1);var s=r in i.files;i.files[r]=o,t&&!i.error&&(i.error=t),n(t,o,s),0===i.queue.length&&C(i.error)},t)}};return this.env=t=t||{},this.optimization="optimization"in this.env?this.env.optimization:1,this.env.filename=this.env.filename||null,x={imports:D,parse:function(n,i){var o,r,a,l=null;if(b=_=T=P=0,y=n.replace(/\r\n/g,"\n"),y=y.replace(/^\uFEFF/,""),A=function(e){for(var n,i,o,r,s=0,a=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,u=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,h=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,c=0,d=e[0],p=0;y.length>p;)if(a.lastIndex=p,(n=a.exec(y))&&n.index===p&&(p+=n[0].length,d.push(n[0])),o=y.charAt(p),u.lastIndex=h.lastIndex=p,(n=h.exec(y))&&n.index===p)p+=n[0].length,d.push(n[0]);else if(i||"/"!==o||(r=y.charAt(p+1),"/"!==r&&"*"!==r||!(n=u.exec(y))||n.index!==p)){switch(o){case"{":if(!i){c++,d.push(o);break}case"}":if(!i){c--,d.push(o),e[++s]=d=[];break}case"(":if(!i){i=!0,d.push(o);break}case")":if(i){i=!1,d.push(o);break}default:d.push(o)}p++}else p+=n[0].length,d.push(n[0]);return 0!=c&&(l=new v({index:p-1,type:"Parse",message:c>0?"missing closing `}`":"missing opening `{`",filename:t.filename},t)),e.map(function(t){return t.join("")})}([[]]),l)return i(l,t);try{o=new m.Ruleset([],s(this.parsers.primary)),o.root=!0}catch(u){return i(new v(u,t))}if(o.toCSS=function(n){return function(i,o){var r,s=[];i=i||{},"object"==typeof o&&!Array.isArray(o)&&(o=Object.keys(o).map(function(t){var e=o[t];return e instanceof m.Value||(e instanceof m.Expression||(e=new m.Expression([e])),e=new m.Value([e])),new m.Rule("@"+t,e,!1,0)}),s=[new m.Ruleset(null,o)]);try{var a=n.call(this,{frames:s}).toCSS([],{compress:i.compress||!1,dumpLineNumbers:t.dumpLineNumbers})}catch(l){throw new v(l,t)}if(r=x.imports.error)throw r instanceof v?r:new v(r,t);return i.yuicompress&&"node"===g.mode?e("ycssmin").cssmin(a):i.compress?a.replace(/(\s)+/g,"$1"):a}}(o.eval),y.length-1>b){b=P,a=y.split("\n"),r=(y.slice(0,b).match(/\n/g)||"").length+1;for(var h=b,c=-1;h>=0&&"\n"!==y.charAt(h);h--)c++;l={type:"Parse",message:"Syntax Error on line "+r,index:b,filename:t.filename,line:r,column:c,extract:[a[r-2],a[r-1],a[r]]}}this.imports.queue.length>0?C=function(t){t=l||t,t?i(t):i(null,o)}:i(l,o)},parsers:{primary:function(){for(var t,e=[];(t=s(this.mixin.definition)||s(this.rule)||s(this.ruleset)||s(this.mixin.call)||s(this.comment)||s(this.directive))||s(/^[\s\n]+/)||s(/^;+/);)t&&e.push(t);return e},comment:function(){var t;if("/"===y.charAt(b))return"/"===y.charAt(b+1)?new m.Comment(s(/^\/\/.*/),!0):(t=s(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new m.Comment(t):void 0},entities:{quoted:function(){var t,e,n=b;return"~"===y.charAt(n)&&(n++,e=!0),'"'===y.charAt(n)||"'"===y.charAt(n)?(e&&s("~"),(t=s(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/))?new m.Quoted(t[0],t[1]||t[2],e):void 0):void 0},keyword:function(){var t;return(t=s(/^[_A-Za-z-][_A-Za-z0-9-]*/))?m.colors.hasOwnProperty(t)?new m.Color(m.colors[t].slice(1)):new m.Keyword(t):void 0},call:function(){var e,n,i,o,r=b;if(e=/^([\w-]+|%|progid:[\w\.]+)\(/.exec(A[_])){if(e=e[1],n=e.toLowerCase(),"url"===n)return null;if(b+=e.length,"alpha"===n&&(o=s(this.alpha),o!==void 0))return o;if(s("("),i=s(this.entities.arguments),s(")"))return e?new m.Call(e,i,r,t.filename):void 0}},arguments:function(){for(var t,e=[];(t=s(this.entities.assignment)||s(this.expression))&&(e.push(t),s(",")););return e},literal:function(){return s(this.entities.ratio)||s(this.entities.dimension)||s(this.entities.color)||s(this.entities.quoted)||s(this.entities.unicodeDescriptor)},assignment:function(){var t,e;return(t=s(/^\w+(?=\s?=)/i))&&s("=")&&(e=s(this.entity))?new m.Assignment(t,e):void 0},url:function(){var e;if("u"===y.charAt(b)&&s(/^url\(/))return e=s(this.entities.quoted)||s(this.entities.variable)||s(/^(?:(?:\\[\(\)'"])|[^\(\)'"])+/)||"",l(")"),new m.URL(null!=e.value||e instanceof m.Variable?e:new m.Anonymous(e),t.rootpath)},variable:function(){var e,n=b;return"@"===y.charAt(b)&&(e=s(/^@@?[\w-]+/))?new m.Variable(e,n,t.filename):void 0},variableCurly:function(){var e,n=b;return"@"===y.charAt(b)&&(e=s(/^@\{([\w-]+)\}/))?new m.Variable("@"+e[1],n,t.filename):void 0},color:function(){var t;return"#"===y.charAt(b)&&(t=s(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/))?new m.Color(t[1]):void 0},dimension:function(){var t,e=y.charCodeAt(b);if(!(e>57||43>e||47===e||44==e))return(t=s(/^([+-]?\d*\.?\d+)(px|%|em|pc|ex|in|deg|s|ms|pt|cm|mm|rad|grad|turn|dpi|dpcm|dppx|rem|vw|vh|vmin|vm|ch)?/))?new m.Dimension(t[1],t[2]):void 0},ratio:function(){var t,e=y.charCodeAt(b);if(!(e>57||48>e))return(t=s(/^(\d+\/\d+)/))?new m.Ratio(t[1]):void 0},unicodeDescriptor:function(){var t;return(t=s(/^U\+[0-9a-fA-F?]+(\-[0-9a-fA-F?]+)?/))?new m.UnicodeDescriptor(t[0]):void 0
},javascript:function(){var t,e,n=b;return"~"===y.charAt(n)&&(n++,e=!0),"`"===y.charAt(n)?(e&&s("~"),(t=s(/^`([^`]*)`/))?new m.JavaScript(t[1],b,e):void 0):void 0}},variable:function(){var t;return"@"===y.charAt(b)&&(t=s(/^(@[\w-]+)\s*:/))?t[1]:void 0},shorthand:function(){var t,e;if(h(/^[@\w.%-]+\/[@\w.-]+/))return n(),(t=s(this.entity))&&s("/")&&(e=s(this.entity))?new m.Shorthand(t,e):(i(),void 0)},mixin:{call:function(){var e,o,r,a,c,d,p,f,g,v,_=[],w=[],S=[],P=b,A=y.charAt(b),T=!1;if("."===A||"#"===A){for(n();e=s(/^[#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/);)_.push(new m.Element(o,e,b)),o=s(">");if(s("(")){for(d=[];a=s(this.expression);){if(c=null,v=a,1==a.value.length){var x=a.value[0];x instanceof m.Variable&&s(":")&&(d.length>0&&(p&&u("Cannot mix ; and , as delimiter types"),f=!0),v=l(this.expression),c=g=x.name)}d.push(v),S.push({name:c,value:v}),s(",")||(s(";")||p)&&(f&&u("Cannot mix ; and , as delimiter types"),p=!0,d.length>1&&(v=new m.Value(d)),w.push({name:g,value:v}),g=null,d=[],f=!1)}l(")")}return r=p?w:S,s(this.important)&&(T=!0),_.length>0&&(s(";")||h("}"))?new m.mixin.Call(_,r,P,t.filename,T):(i(),void 0)}},definition:function(){var t,e,o,r,a,u,c=[],d=!1;if(!("."!==y.charAt(b)&&"#"!==y.charAt(b)||h(/^[^{]*\}/))&&(n(),e=s(/^([#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+)\s*\(/))){t=e[1];do{if(s(this.comment),"."===y.charAt(b)&&s(/^\.{3}/)){d=!0,c.push({variadic:!0});break}if(!(r=s(this.entities.variable)||s(this.entities.literal)||s(this.entities.keyword)))break;if(r instanceof m.Variable)if(s(":"))a=l(this.expression,"expected expression"),c.push({name:r.name,value:a});else{if(s(/^\.{3}/)){c.push({name:r.name,variadic:!0}),d=!0;break}c.push({name:r.name})}else c.push({value:r})}while(s(",")||s(";"));if(s(")")||(P=b,i()),s(this.comment),s(/^when/)&&(u=l(this.conditions,"expected condition")),o=s(this.block),o)return new m.mixin.Definition(t,c,o,u,d);i()}}},entity:function(){return s(this.entities.literal)||s(this.entities.variable)||s(this.entities.url)||s(this.entities.call)||s(this.entities.keyword)||s(this.entities.javascript)||s(this.comment)},end:function(){return s(";")||h("}")},alpha:function(){var t;if(s(/^\(opacity=/i))return(t=s(/^\d+/)||s(this.entities.variable))?(l(")"),new m.Alpha(t)):void 0},element:function(){var t,e,n;return e=s(this.combinator),t=s(/^(?:\d+\.\d+|\d+)%/)||s(/^(?:[.#]?|:*)(?:[\w-]|[^\x00-\x9f]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/)||s("*")||s("&")||s(this.attribute)||s(/^\([^()@]+\)/)||s(/^[\.#](?=@)/)||s(this.entities.variableCurly),t||s("(")&&(n=s(this.entities.variableCurly)||s(this.entities.variable)||s(this.selector))&&s(")")&&(t=new m.Paren(n)),t?new m.Element(e,t,b):void 0},combinator:function(){var t=y.charAt(b);if(">"===t||"+"===t||"~"===t||"|"===t){for(b++;y.charAt(b).match(/\s/);)b++;return new m.Combinator(t)}return y.charAt(b-1).match(/\s/)?new m.Combinator(" "):new m.Combinator(null)},selector:function(){var t,e,n,i=[];if(s("("))return t=s(this.entity),s(")")?new m.Selector([new m.Element("",t,b)]):null;for(;(e=s(this.element))&&(n=y.charAt(b),i.push(e),"{"!==n&&"}"!==n&&";"!==n&&","!==n&&")"!==n););return i.length>0?new m.Selector(i):void 0},attribute:function(){var t,e,n,i="";if(s("[")&&((t=s(/^(?:[_A-Za-z0-9-]|\\.)+/)||s(this.entities.quoted))&&(i=(n=s(/^[|~*$^]?=/))&&(e=s(this.entities.quoted)||s(/^[\w-]+/))?[t,n,e.toCSS?e.toCSS():e].join(""):t),s("]")))return i?"["+i+"]":void 0},block:function(){var t;return s("{")&&(t=s(this.primary))&&s("}")?t:void 0},ruleset:function(){var e,o,r,a=[];for(n(),t.dumpLineNumbers&&(r=f(b,y,t));(e=s(this.selector))&&(a.push(e),s(this.comment),s(","));)s(this.comment);if(a.length>0&&(o=s(this.block))){var l=new m.Ruleset(a,o,t.strictImports);return t.dumpLineNumbers&&(l.debugInfo=r),l}P=b,i()},rule:function(){var t,e,o,r,a=y.charAt(b);if(n(),"."!==a&&"#"!==a&&"&"!==a&&(t=s(this.variable)||s(this.property))){if("@"!=t.charAt(0)&&(r=/^([^@+\/'"*`(;{}-]*);/.exec(A[_]))?(b+=r[0].length-1,e=new m.Anonymous(r[1])):e="font"===t?s(this.font):s(this.value),o=s(this.important),e&&s(this.end))return new m.Rule(t,e,o,S);P=b,i()}},"import":function(){var e,o,r=b;n();var a=s(/^@import(?:-(once))?\s+/);return a&&(e=s(this.entities.quoted)||s(this.entities.url))&&(o=s(this.mediaFeatures),s(";"))?new m.Import(e,D,o,"once"===a[1],r,t.rootpath):(i(),void 0)},mediaFeature:function(){var t,e,n=[];do if(t=s(this.entities.keyword))n.push(t);else if(s("(")){if(e=s(this.property),t=s(this.entity),!s(")"))return null;if(e&&t)n.push(new m.Paren(new m.Rule(e,t,null,b,!0)));else{if(!t)return null;n.push(new m.Paren(t))}}while(t);return n.length>0?new m.Expression(n):void 0},mediaFeatures:function(){var t,e=[];do if(t=s(this.mediaFeature)){if(e.push(t),!s(","))break}else if((t=s(this.entities.variable))&&(e.push(t),!s(",")))break;while(t);return e.length>0?e:null},media:function(){var e,n,i,o;return t.dumpLineNumbers&&(o=f(b,y,t)),s(/^@media/)&&(e=s(this.mediaFeatures),n=s(this.block))?(i=new m.Media(n,e),t.dumpLineNumbers&&(i.debugInfo=o),i):void 0},directive:function(){var e,o,r,a,l,u,h;if("@"===y.charAt(b)){if(o=s(this["import"])||s(this.media))return o;if(n(),e=s(/^@[a-z-]+/)){switch(a=e,"-"==e.charAt(1)&&e.indexOf("-",2)>0&&(a="@"+e.slice(e.indexOf("-",2)+1)),a){case"@font-face":l=!0;break;case"@viewport":case"@top-left":case"@top-left-corner":case"@top-center":case"@top-right":case"@top-right-corner":case"@bottom-left":case"@bottom-left-corner":case"@bottom-center":case"@bottom-right":case"@bottom-right-corner":case"@left-top":case"@left-middle":case"@left-bottom":case"@right-top":case"@right-middle":case"@right-bottom":l=!0;break;case"@page":case"@document":case"@supports":case"@keyframes":l=!0,u=!0;break;case"@namespace":h=!0}if(u&&(e+=" "+(s(/^[^{]+/)||"").trim()),l){if(r=s(this.block))return new m.Directive(e,r)}else if((o=h?s(this.expression):s(this.entity))&&s(";")){var c=new m.Directive(e,o);return t.dumpLineNumbers&&(c.debugInfo=f(b,y,t)),c}i()}}},font:function(){for(var t,e=[],n=[];t=s(this.shorthand)||s(this.entity);)n.push(t);if(e.push(new m.Expression(n)),s(","))for(;(t=s(this.expression))&&(e.push(t),s(",")););return new m.Value(e)},value:function(){for(var t,e=[];(t=s(this.expression))&&(e.push(t),s(",")););return e.length>0?new m.Value(e):void 0},important:function(){return"!"===y.charAt(b)?s(/^! *important/):void 0},sub:function(){var t;return s("(")&&(t=s(this.expression))&&s(")")?t:void 0},multiplication:function(){var t,e,n,i;if(t=s(this.operand)){for(;!h(/^\/[*\/]/)&&(n=s("/")||s("*"))&&(e=s(this.operand));)i=new m.Operation(n,[i||t,e]);return i||t}},addition:function(){var t,e,n,i;if(t=s(this.multiplication)){for(;(n=s(/^[-+]\s+/)||!r(y.charAt(b-1))&&(s("+")||s("-")))&&(e=s(this.multiplication));)i=new m.Operation(n,[i||t,e]);return i||t}},conditions:function(){var t,e,n,i=b;if(t=s(this.condition)){for(;s(",")&&(e=s(this.condition));)n=new m.Condition("or",n||t,e,i);return n||t}},condition:function(){var t,e,n,i,o=b,r=!1;return s(/^not/)&&(r=!0),l("("),(t=s(this.addition)||s(this.entities.keyword)||s(this.entities.quoted))?((i=s(/^(?:>=|=<|[<=>])/))?(e=s(this.addition)||s(this.entities.keyword)||s(this.entities.quoted))?n=new m.Condition(i,t,e,o,r):u("expected expression"):n=new m.Condition("=",t,new m.Keyword("true"),o,r),l(")"),s(/^and/)?new m.Condition("and",n,s(this.condition)):n):void 0},operand:function(){var t,e=y.charAt(b+1);"-"===y.charAt(b)&&("@"===e||"("===e)&&(t=s("-"));var n=s(this.sub)||s(this.entities.dimension)||s(this.entities.color)||s(this.entities.variable)||s(this.entities.call);return t?new m.Operation("*",[new m.Dimension(-1),n]):n},expression:function(){for(var t,e=[];t=s(this.addition)||s(this.entity);)e.push(t);return e.length>0?new m.Expression(e):void 0},property:function(){var t;return(t=s(/^(\*?-?[_a-z0-9-]+)\s*:/))?t[1]:void 0}}}},("browser"===g.mode||"rhino"===g.mode)&&(g.Parser.importer=function(t,e,n,i){!/^([a-z-]+:)?\//.test(t)&&e.length>0&&(t=e[0]+t),a({href:t,title:t,type:i.mime,contents:i.contents,files:i.files,rootpath:i.rootpath,entryPath:i.entryPath,relativeUrls:i.relativeUrls},function(t,o,r,s,a,l){t&&"function"==typeof i.errback?i.errback.call(null,l,e,n,i):n.call(null,t,o,l)},!0)}),function(t){function e(e){return t.functions.hsla(e.h,e.s,e.l,e.a)}function n(e,n){return e instanceof t.Dimension&&"%"==e.unit?parseFloat(e.value*n/100):i(e)}function i(e){if(e instanceof t.Dimension)return parseFloat("%"==e.unit?e.value/100:e.value);if("number"==typeof e)return e;throw{error:"RuntimeError",message:"color functions take numbers as parameters"}}function o(t){return Math.min(1,Math.max(0,t))}t.functions={rgb:function(t,e,n){return this.rgba(t,e,n,1)},rgba:function(e,o,r,s){var a=[e,o,r].map(function(t){return n(t,256)});return s=i(s),new t.Color(a,s)},hsl:function(t,e,n){return this.hsla(t,e,n,1)},hsla:function(t,e,n,o){function r(t){return t=0>t?t+1:t>1?t-1:t,1>6*t?a+6*(s-a)*t:1>2*t?s:2>3*t?a+6*(s-a)*(2/3-t):a}t=i(t)%360/360,e=i(e),n=i(n),o=i(o);var s=.5>=n?n*(e+1):n+e-n*e,a=2*n-s;return this.rgba(255*r(t+1/3),255*r(t),255*r(t-1/3),o)},hsv:function(t,e,n){return this.hsva(t,e,n,1)},hsva:function(t,e,n,o){t=360*(i(t)%360/360),e=i(e),n=i(n),o=i(o);var r,s;r=Math.floor(t/60%6),s=t/60-r;var a=[n,n*(1-e),n*(1-s*e),n*(1-(1-s)*e)],l=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return this.rgba(255*a[l[r][0]],255*a[l[r][1]],255*a[l[r][2]],o)},hue:function(e){return new t.Dimension(Math.round(e.toHSL().h))},saturation:function(e){return new t.Dimension(Math.round(100*e.toHSL().s),"%")},lightness:function(e){return new t.Dimension(Math.round(100*e.toHSL().l),"%")},red:function(e){return new t.Dimension(e.rgb[0])},green:function(e){return new t.Dimension(e.rgb[1])},blue:function(e){return new t.Dimension(e.rgb[2])},alpha:function(e){return new t.Dimension(e.toHSL().a)},luma:function(e){return new t.Dimension(Math.round(100*(.2126*(e.rgb[0]/255)+.7152*(e.rgb[1]/255)+.0722*(e.rgb[2]/255))*e.alpha),"%")},saturate:function(t,n){var i=t.toHSL();return i.s+=n.value/100,i.s=o(i.s),e(i)},desaturate:function(t,n){var i=t.toHSL();return i.s-=n.value/100,i.s=o(i.s),e(i)},lighten:function(t,n){var i=t.toHSL();return i.l+=n.value/100,i.l=o(i.l),e(i)},darken:function(t,n){var i=t.toHSL();return i.l-=n.value/100,i.l=o(i.l),e(i)},fadein:function(t,n){var i=t.toHSL();return i.a+=n.value/100,i.a=o(i.a),e(i)},fadeout:function(t,n){var i=t.toHSL();return i.a-=n.value/100,i.a=o(i.a),e(i)},fade:function(t,n){var i=t.toHSL();return i.a=n.value/100,i.a=o(i.a),e(i)},spin:function(t,n){var i=t.toHSL(),o=(i.h+n.value)%360;return i.h=0>o?360+o:o,e(i)},mix:function(e,n,i){i||(i=new t.Dimension(50));var o=i.value/100,r=2*o-1,s=e.toHSL().a-n.toHSL().a,a=((-1==r*s?r:(r+s)/(1+r*s))+1)/2,l=1-a,u=[e.rgb[0]*a+n.rgb[0]*l,e.rgb[1]*a+n.rgb[1]*l,e.rgb[2]*a+n.rgb[2]*l],h=e.alpha*o+n.alpha*(1-o);return new t.Color(u,h)},greyscale:function(e){return this.desaturate(e,new t.Dimension(100))},contrast:function(t,e,n,i){return t.rgb?(n===void 0&&(n=this.rgba(255,255,255,1)),e===void 0&&(e=this.rgba(0,0,0,1)),i=i===void 0?.43:i.value,i>(.2126*(t.rgb[0]/255)+.7152*(t.rgb[1]/255)+.0722*(t.rgb[2]/255))*t.alpha?n:e):null},e:function(e){return new t.Anonymous(e instanceof t.JavaScript?e.evaluated:e)},escape:function(e){return new t.Anonymous(encodeURI(e.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29"))},"%":function(e){for(var n=Array.prototype.slice.call(arguments,1),i=e.value,o=0;n.length>o;o++)i=i.replace(/%[sda]/i,function(t){var e=t.match(/s/i)?n[o].value:n[o].toCSS();return t.match(/[A-Z]$/)?encodeURIComponent(e):e});return i=i.replace(/%%/g,"%"),new t.Quoted('"'+i+'"',i)},unit:function(e,n){return new t.Dimension(e.value,n?n.toCSS():"")},round:function(t,e){var n=e===void 0?0:e.value;return this._math(function(t){return t.toFixed(n)},t)},ceil:function(t){return this._math(Math.ceil,t)},floor:function(t){return this._math(Math.floor,t)},_math:function(e,n){if(n instanceof t.Dimension)return new t.Dimension(e(parseFloat(n.value)),n.unit);if("number"==typeof n)return e(n);throw{type:"Argument",message:"argument must be a number"}},argb:function(e){return new t.Anonymous(e.toARGB())},percentage:function(e){return new t.Dimension(100*e.value,"%")},color:function(e){if(e instanceof t.Quoted)return new t.Color(e.value.slice(1));throw{type:"Argument",message:"argument must be a string"}},iscolor:function(e){return this._isa(e,t.Color)},isnumber:function(e){return this._isa(e,t.Dimension)},isstring:function(e){return this._isa(e,t.Quoted)},iskeyword:function(e){return this._isa(e,t.Keyword)},isurl:function(e){return this._isa(e,t.URL)},ispixel:function(e){return e instanceof t.Dimension&&"px"===e.unit?t.True:t.False},ispercentage:function(e){return e instanceof t.Dimension&&"%"===e.unit?t.True:t.False},isem:function(e){return e instanceof t.Dimension&&"em"===e.unit?t.True:t.False},_isa:function(e,n){return e instanceof n?t.True:t.False},multiply:function(t,e){var n=t.rgb[0]*e.rgb[0]/255,i=t.rgb[1]*e.rgb[1]/255,o=t.rgb[2]*e.rgb[2]/255;return this.rgb(n,i,o)},screen:function(t,e){var n=255-(255-t.rgb[0])*(255-e.rgb[0])/255,i=255-(255-t.rgb[1])*(255-e.rgb[1])/255,o=255-(255-t.rgb[2])*(255-e.rgb[2])/255;return this.rgb(n,i,o)},overlay:function(t,e){var n=128>t.rgb[0]?2*t.rgb[0]*e.rgb[0]/255:255-2*(255-t.rgb[0])*(255-e.rgb[0])/255,i=128>t.rgb[1]?2*t.rgb[1]*e.rgb[1]/255:255-2*(255-t.rgb[1])*(255-e.rgb[1])/255,o=128>t.rgb[2]?2*t.rgb[2]*e.rgb[2]/255:255-2*(255-t.rgb[2])*(255-e.rgb[2])/255;return this.rgb(n,i,o)},softlight:function(t,e){var n=e.rgb[0]*t.rgb[0]/255,i=n+t.rgb[0]*(255-(255-t.rgb[0])*(255-e.rgb[0])/255-n)/255;n=e.rgb[1]*t.rgb[1]/255;var o=n+t.rgb[1]*(255-(255-t.rgb[1])*(255-e.rgb[1])/255-n)/255;n=e.rgb[2]*t.rgb[2]/255;var r=n+t.rgb[2]*(255-(255-t.rgb[2])*(255-e.rgb[2])/255-n)/255;return this.rgb(i,o,r)},hardlight:function(t,e){var n=128>e.rgb[0]?2*e.rgb[0]*t.rgb[0]/255:255-2*(255-e.rgb[0])*(255-t.rgb[0])/255,i=128>e.rgb[1]?2*e.rgb[1]*t.rgb[1]/255:255-2*(255-e.rgb[1])*(255-t.rgb[1])/255,o=128>e.rgb[2]?2*e.rgb[2]*t.rgb[2]/255:255-2*(255-e.rgb[2])*(255-t.rgb[2])/255;return this.rgb(n,i,o)},difference:function(t,e){var n=Math.abs(t.rgb[0]-e.rgb[0]),i=Math.abs(t.rgb[1]-e.rgb[1]),o=Math.abs(t.rgb[2]-e.rgb[2]);return this.rgb(n,i,o)},exclusion:function(t,e){var n=t.rgb[0]+e.rgb[0]*(255-t.rgb[0]-t.rgb[0])/255,i=t.rgb[1]+e.rgb[1]*(255-t.rgb[1]-t.rgb[1])/255,o=t.rgb[2]+e.rgb[2]*(255-t.rgb[2]-t.rgb[2])/255;return this.rgb(n,i,o)},average:function(t,e){var n=(t.rgb[0]+e.rgb[0])/2,i=(t.rgb[1]+e.rgb[1])/2,o=(t.rgb[2]+e.rgb[2])/2;return this.rgb(n,i,o)},negation:function(t,e){var n=255-Math.abs(255-e.rgb[0]-t.rgb[0]),i=255-Math.abs(255-e.rgb[1]-t.rgb[1]),o=255-Math.abs(255-e.rgb[2]-t.rgb[2]);return this.rgb(n,i,o)},tint:function(t,e){return this.mix(this.rgb(255,255,255),t,e)},shade:function(t,e){return this.mix(this.rgb(0,0,0),t,e)}}}(e("./tree")),function(t){t.colors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(e("./tree")),function(t){t.Alpha=function(t){this.value=t},t.Alpha.prototype={toCSS:function(){return"alpha(opacity="+(this.value.toCSS?this.value.toCSS():this.value)+")"},eval:function(t){return this.value.eval&&(this.value=this.value.eval(t)),this}}}(e("../tree")),function(t){t.Anonymous=function(t){this.value=t.value||t},t.Anonymous.prototype={toCSS:function(){return this.value},eval:function(){return this},compare:function(t){if(!t.toCSS)return-1;var e=this.toCSS(),n=t.toCSS();return e===n?0:n>e?-1:1}}}(e("../tree")),function(t){t.Assignment=function(t,e){this.key=t,this.value=e},t.Assignment.prototype={toCSS:function(){return this.key+"="+(this.value.toCSS?this.value.toCSS():this.value)},eval:function(e){return this.value.eval?new t.Assignment(this.key,this.value.eval(e)):this}}}(e("../tree")),function(t){t.Call=function(t,e,n,i){this.name=t,this.args=e,this.index=n,this.filename=i},t.Call.prototype={eval:function(e){var n,i=this.args.map(function(t){return t.eval(e)});if(this.name in t.functions)try{if(n=t.functions[this.name].apply(t.functions,i),null!=n)return n}catch(o){throw{type:o.type||"Runtime",message:"error evaluating function `"+this.name+"`"+(o.message?": "+o.message:""),index:this.index,filename:this.filename}}return new t.Anonymous(this.name+"("+i.map(function(t){return t.toCSS(e)}).join(", ")+")")},toCSS:function(t){return this.eval(t).toCSS()}}}(e("../tree")),function(t){t.Color=function(t,e){this.rgb=Array.isArray(t)?t:6==t.length?t.match(/.{2}/g).map(function(t){return parseInt(t,16)}):t.split("").map(function(t){return parseInt(t+t,16)}),this.alpha="number"==typeof e?e:1},t.Color.prototype={eval:function(){return this},toCSS:function(){return 1>this.alpha?"rgba("+this.rgb.map(function(t){return Math.round(t)}).concat(this.alpha).join(", ")+")":"#"+this.rgb.map(function(t){return t=Math.round(t),t=(t>255?255:0>t?0:t).toString(16),1===t.length?"0"+t:t}).join("")},operate:function(e,n){var i=[];n instanceof t.Color||(n=n.toColor());for(var o=0;3>o;o++)i[o]=t.operate(e,this.rgb[o],n.rgb[o]);return new t.Color(i,this.alpha+n.alpha)},toHSL:function(){var t,e,n=this.rgb[0]/255,i=this.rgb[1]/255,o=this.rgb[2]/255,r=this.alpha,s=Math.max(n,i,o),a=Math.min(n,i,o),l=(s+a)/2,u=s-a;if(s===a)t=e=0;else{switch(e=l>.5?u/(2-s-a):u/(s+a),s){case n:t=(i-o)/u+(o>i?6:0);break;case i:t=(o-n)/u+2;break;case o:t=(n-i)/u+4}t/=6}return{h:360*t,s:e,l:l,a:r}},toARGB:function(){var t=[Math.round(255*this.alpha)].concat(this.rgb);return"#"+t.map(function(t){return t=Math.round(t),t=(t>255?255:0>t?0:t).toString(16),1===t.length?"0"+t:t}).join("")},compare:function(t){return t.rgb?t.rgb[0]===this.rgb[0]&&t.rgb[1]===this.rgb[1]&&t.rgb[2]===this.rgb[2]&&t.alpha===this.alpha?0:-1:-1}}}(e("../tree")),function(t){t.Comment=function(t,e){this.value=t,this.silent=!!e},t.Comment.prototype={toCSS:function(t){return t.compress?"":this.value},eval:function(){return this}}}(e("../tree")),function(t){t.Condition=function(t,e,n,i,o){this.op=t.trim(),this.lvalue=e,this.rvalue=n,this.index=i,this.negate=o},t.Condition.prototype.eval=function(t){var e,n=this.lvalue.eval(t),i=this.rvalue.eval(t),o=this.index,e=function(t){switch(t){case"and":return n&&i;case"or":return n||i;default:if(n.compare)e=n.compare(i);else{if(!i.compare)throw{type:"Type",message:"Unable to perform comparison",index:o};e=i.compare(n)}switch(e){case-1:return"<"===t||"=<"===t;case 0:return"="===t||">="===t||"=<"===t;case 1:return">"===t||">="===t}}}(this.op);return this.negate?!e:e}}(e("../tree")),function(t){t.Dimension=function(t,e){this.value=parseFloat(t),this.unit=e||null},t.Dimension.prototype={eval:function(){return this},toColor:function(){return new t.Color([this.value,this.value,this.value])},toCSS:function(){var t=this.value+this.unit;return t},operate:function(e,n){return new t.Dimension(t.operate(e,this.value,n.value),this.unit||n.unit)},compare:function(e){return e instanceof t.Dimension?e.value>this.value?-1:e.value<this.value?1:e.unit&&this.unit!==e.unit?-1:0:-1}}}(e("../tree")),function(t){t.Directive=function(e,n){this.name=e,Array.isArray(n)?(this.ruleset=new t.Ruleset([],n),this.ruleset.allowImports=!0):this.value=n},t.Directive.prototype={toCSS:function(t,e){return this.ruleset?(this.ruleset.root=!0,this.name+(e.compress?"{":" {\n  ")+this.ruleset.toCSS(t,e).trim().replace(/\n/g,"\n  ")+(e.compress?"}":"\n}\n")):this.name+" "+this.value.toCSS()+";\n"},eval:function(e){var n=this;return this.ruleset&&(e.frames.unshift(this),n=new t.Directive(this.name),n.ruleset=this.ruleset.eval(e),e.frames.shift()),n},variable:function(e){return t.Ruleset.prototype.variable.call(this.ruleset,e)},find:function(){return t.Ruleset.prototype.find.apply(this.ruleset,arguments)},rulesets:function(){return t.Ruleset.prototype.rulesets.apply(this.ruleset)}}}(e("../tree")),function(t){t.Element=function(e,n,i){this.combinator=e instanceof t.Combinator?e:new t.Combinator(e),this.value="string"==typeof n?n.trim():n?n:"",this.index=i},t.Element.prototype.eval=function(e){return new t.Element(this.combinator,this.value.eval?this.value.eval(e):this.value,this.index)},t.Element.prototype.toCSS=function(t){var e=this.value.toCSS?this.value.toCSS(t):this.value;return""==e&&"&"==this.combinator.value.charAt(0)?"":this.combinator.toCSS(t||{})+e},t.Combinator=function(t){this.value=" "===t?" ":t?t.trim():""},t.Combinator.prototype.toCSS=function(t){return{"":""," ":" ",":":" :","+":t.compress?"+":" + ","~":t.compress?"~":" ~ ",">":t.compress?">":" > ","|":t.compress?"|":" | "}[this.value]}}(e("../tree")),function(t){t.Expression=function(t){this.value=t},t.Expression.prototype={eval:function(e){return this.value.length>1?new t.Expression(this.value.map(function(t){return t.eval(e)})):1===this.value.length?this.value[0].eval(e):this},toCSS:function(t){return this.value.map(function(e){return e.toCSS?e.toCSS(t):""}).join(" ")}}}(e("../tree")),function(t){t.Import=function(e,n,i,o,r,s){var a=this;this.once=o,this.index=r,this._path=e,this.features=i&&new t.Value(i),this.rootpath=s,this.path=e instanceof t.Quoted?/(\.[a-z]*$)|([\?;].*)$/.test(e.value)?e.value:e.value+".less":e.value.value||e.value,this.css=/css([\?;].*)?$/.test(this.path),this.css||n.push(this.path,function(e,n,i){e&&(e.index=r),i&&a.once&&(a.skip=i),a.root=n||new t.Ruleset([],[])})},t.Import.prototype={toCSS:function(t){var e=this.features?" "+this.features.toCSS(t):"";return this.css?("string"==typeof this._path.value&&!/^(?:[a-z-]+:|\/)/.test(this._path.value)&&(this._path.value=this.rootpath+this._path.value),"@import "+this._path.toCSS()+e+";\n"):""},eval:function(e){var n;return this.features&&this.features.eval(e),this.skip?[]:this.css?this:(n=new t.Ruleset([],this.root.rules.slice(0)),n.evalImports(e),this.features?new t.Media(n.rules,this.features.value):n.rules)}}}(e("../tree")),function(t){t.JavaScript=function(t,e,n){this.escaped=n,this.expression=t,this.index=e},t.JavaScript.prototype={eval:function(e){var n,i=this,o={},r=this.expression.replace(/@\{([\w-]+)\}/g,function(n,o){return t.jsify(new t.Variable("@"+o,i.index).eval(e))});try{r=Function("return ("+r+")")}catch(s){throw{message:"JavaScript evaluation error: `"+r+"`",index:this.index}}for(var a in e.frames[0].variables())o[a.slice(1)]={value:e.frames[0].variables()[a].value,toJS:function(){return this.value.eval(e).toCSS()}};try{n=r.call(o)}catch(s){throw{message:"JavaScript evaluation error: '"+s.name+": "+s.message+"'",index:this.index}}return"string"==typeof n?new t.Quoted('"'+n+'"',n,this.escaped,this.index):Array.isArray(n)?new t.Anonymous(n.join(", ")):new t.Anonymous(n)}}}(e("../tree")),function(t){t.Keyword=function(t){this.value=t},t.Keyword.prototype={eval:function(){return this},toCSS:function(){return this.value},compare:function(e){return e instanceof t.Keyword?e.value===this.value?0:1:-1}},t.True=new t.Keyword("true"),t.False=new t.Keyword("false")}(e("../tree")),function(t){t.Media=function(e,n){var i=this.emptySelectors();this.features=new t.Value(n),this.ruleset=new t.Ruleset(i,e),this.ruleset.allowImports=!0},t.Media.prototype={toCSS:function(t,e){var n=this.features.toCSS(e);return this.ruleset.root=0===t.length||t[0].multiMedia,"@media "+n+(e.compress?"{":" {\n  ")+this.ruleset.toCSS(t,e).trim().replace(/\n/g,"\n  ")+(e.compress?"}":"\n}\n")},eval:function(e){e.mediaBlocks||(e.mediaBlocks=[],e.mediaPath=[]);var n=new t.Media([],[]);return this.debugInfo&&(this.ruleset.debugInfo=this.debugInfo,n.debugInfo=this.debugInfo),n.features=this.features.eval(e),e.mediaPath.push(n),e.mediaBlocks.push(n),e.frames.unshift(this.ruleset),n.ruleset=this.ruleset.eval(e),e.frames.shift(),e.mediaPath.pop(),0===e.mediaPath.length?n.evalTop(e):n.evalNested(e)},variable:function(e){return t.Ruleset.prototype.variable.call(this.ruleset,e)},find:function(){return t.Ruleset.prototype.find.apply(this.ruleset,arguments)},rulesets:function(){return t.Ruleset.prototype.rulesets.apply(this.ruleset)},emptySelectors:function(){var e=new t.Element("","&",0);return[new t.Selector([e])]},evalTop:function(e){var n=this;if(e.mediaBlocks.length>1){var i=this.emptySelectors();n=new t.Ruleset(i,e.mediaBlocks),n.multiMedia=!0}return delete e.mediaBlocks,delete e.mediaPath,n},evalNested:function(e){var n,i,o=e.mediaPath.concat([this]);for(n=0;o.length>n;n++)i=o[n].features instanceof t.Value?o[n].features.value:o[n].features,o[n]=Array.isArray(i)?i:[i];return this.features=new t.Value(this.permute(o).map(function(e){for(e=e.map(function(e){return e.toCSS?e:new t.Anonymous(e)}),n=e.length-1;n>0;n--)e.splice(n,0,new t.Anonymous("and"));return new t.Expression(e)})),new t.Ruleset([],[])},permute:function(t){if(0===t.length)return[];if(1===t.length)return t[0];for(var e=[],n=this.permute(t.slice(1)),i=0;n.length>i;i++)for(var o=0;t[0].length>o;o++)e.push([t[0][o]].concat(n[i]));return e},bubbleSelectors:function(e){this.ruleset=new t.Ruleset(e.slice(0),[this.ruleset])}}}(e("../tree")),function(t){t.mixin={},t.mixin.Call=function(e,n,i,o,r){this.selector=new t.Selector(e),this.arguments=n,this.index=i,this.filename=o,this.important=r},t.mixin.Call.prototype={eval:function(e){var n,i,o,r,s,a,l,u,h=[],c=!1;for(o=this.arguments&&this.arguments.map(function(t){return{name:t.name,value:t.value.eval(e)}}),r=0;e.frames.length>r;r++)if((n=e.frames[r].find(this.selector)).length>0){for(u=!0,s=0;n.length>s;s++){for(i=n[s],l=!1,a=0;e.frames.length>a;a++)if(!(i instanceof t.mixin.Definition)&&i===(e.frames[a].originalRuleset||e.frames[a])){l=!0;break}if(!l&&i.matchArgs(o,e)){if(!i.matchCondition||i.matchCondition(o,e))try{Array.prototype.push.apply(h,i.eval(e,o,this.important).rules)}catch(d){throw{message:d.message,index:this.index,filename:this.filename,stack:d.stack}}c=!0}}if(c)return h}throw u?{type:"Runtime",message:"No matching definition was found for `"+this.selector.toCSS().trim()+"("+(o?o.map(function(t){var e="";return t.name&&(e+=t.name+":"),e+=t.value.toCSS?t.value.toCSS():"???"}).join(", "):"")+")`",index:this.index,filename:this.filename}:{type:"Name",message:this.selector.toCSS().trim()+" is undefined",index:this.index,filename:this.filename}}},t.mixin.Definition=function(e,n,i,o,r){this.name=e,this.selectors=[new t.Selector([new t.Element(null,e)])],this.params=n,this.condition=o,this.variadic=r,this.arity=n.length,this.rules=i,this._lookups={},this.required=n.reduce(function(t,e){return!e.name||e.name&&!e.value?t+1:t},0),this.parent=t.Ruleset.prototype,this.frames=[]},t.mixin.Definition.prototype={toCSS:function(){return""},variable:function(t){return this.parent.variable.call(this,t)},variables:function(){return this.parent.variables.call(this)},find:function(){return this.parent.find.apply(this,arguments)},rulesets:function(){return this.parent.rulesets.apply(this)},evalParams:function(e,n,i,o){var r,s,a,l,u,h,c,d,p=new t.Ruleset(null,[]),f=this.params.slice(0);if(i)for(i=i.slice(0),a=0;i.length>a;a++)if(s=i[a],h=s&&s.name){for(c=!1,l=0;f.length>l;l++)if(!o[l]&&h===f[l].name){o[l]=s.value.eval(e),p.rules.unshift(new t.Rule(h,s.value.eval(e))),c=!0;break}if(c){i.splice(a,1),a--;continue}throw{type:"Runtime",message:"Named argument for "+this.name+" "+i[a].name+" not found"}}for(d=0,a=0;f.length>a;a++)if(!o[a]){if(s=i&&i[d],h=f[a].name)if(f[a].variadic&&i){for(r=[],l=d;i.length>l;l++)r.push(i[l].value.eval(e));p.rules.unshift(new t.Rule(h,new t.Expression(r).eval(e)))}else{if(u=s&&s.value)u=u.eval(e);else{if(!f[a].value)throw{type:"Runtime",message:"wrong number of arguments for "+this.name+" ("+i.length+" for "+this.arity+")"};u=f[a].value.eval(n)}p.rules.unshift(new t.Rule(h,u)),o[a]=u}if(f[a].variadic&&i)for(l=d;i.length>l;l++)o[l]=i[l].value.eval(e);d++}return p},eval:function(e,n,i){var o,r,s=[],a=this.frames.concat(e.frames),l=this.evalParams(e,{frames:a},n,s);return l.rules.unshift(new t.Rule("@arguments",new t.Expression(s).eval(e))),o=i?this.parent.makeImportant.apply(this).rules:this.rules.slice(0),r=new t.Ruleset(null,o).eval({frames:[this,l].concat(a)}),r.originalRuleset=this,r},matchCondition:function(t,e){return this.condition&&!this.condition.eval({frames:[this.evalParams(e,{frames:this.frames.concat(e.frames)},t,[])].concat(e.frames)})?!1:!0},matchArgs:function(t,e){var n,i=t&&t.length||0;if(!this.variadic){if(this.required>i)return!1;if(i>this.params.length)return!1;if(this.required>0&&i>this.params.length)return!1}n=Math.min(i,this.arity);for(var o=0;n>o;o++)if(!this.params[o].name&&!this.params[o].variadic&&t[o].value.eval(e).toCSS()!=this.params[o].value.eval(e).toCSS())return!1;return!0}}}(e("../tree")),function(t){t.Operation=function(t,e){this.op=t.trim(),this.operands=e},t.Operation.prototype.eval=function(e){var n,i=this.operands[0].eval(e),o=this.operands[1].eval(e);if(i instanceof t.Dimension&&o instanceof t.Color){if("*"!==this.op&&"+"!==this.op)throw{name:"OperationError",message:"Can't substract or divide a color from a number"};n=o,o=i,i=n}if(!i.operate)throw{name:"OperationError",message:"Operation on an invalid type"};return i.operate(this.op,o)},t.operate=function(t,e,n){switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n}}}(e("../tree")),function(t){t.Paren=function(t){this.value=t
},t.Paren.prototype={toCSS:function(t){return"("+this.value.toCSS(t)+")"},eval:function(e){return new t.Paren(this.value.eval(e))}}}(e("../tree")),function(t){t.Quoted=function(t,e,n,i){this.escaped=n,this.value=e||"",this.quote=t.charAt(0),this.index=i},t.Quoted.prototype={toCSS:function(){return this.escaped?this.value:this.quote+this.value+this.quote},eval:function(e){var n=this,i=this.value.replace(/`([^`]+)`/g,function(i,o){return new t.JavaScript(o,n.index,!0).eval(e).value}).replace(/@\{([\w-]+)\}/g,function(i,o){var r=new t.Variable("@"+o,n.index).eval(e);return r instanceof t.Quoted?r.value:r.toCSS()});return new t.Quoted(this.quote+i+this.quote,i,this.escaped,this.index)},compare:function(t){if(!t.toCSS)return-1;var e=this.toCSS(),n=t.toCSS();return e===n?0:n>e?-1:1}}}(e("../tree")),function(t){t.Ratio=function(t){this.value=t},t.Ratio.prototype={toCSS:function(){return this.value},eval:function(){return this}}}(e("../tree")),function(t){t.Rule=function(e,n,i,o,r){this.name=e,this.value=n instanceof t.Value?n:new t.Value([n]),this.important=i?" "+i.trim():"",this.index=o,this.inline=r||!1,this.variable="@"===e.charAt(0)?!0:!1},t.Rule.prototype.toCSS=function(t){return this.variable?"":this.name+(t.compress?":":": ")+this.value.toCSS(t)+this.important+(this.inline?"":";")},t.Rule.prototype.eval=function(e){return new t.Rule(this.name,this.value.eval(e),this.important,this.index,this.inline)},t.Rule.prototype.makeImportant=function(){return new t.Rule(this.name,this.value,"!important",this.index,this.inline)},t.Shorthand=function(t,e){this.a=t,this.b=e},t.Shorthand.prototype={toCSS:function(t){return this.a.toCSS(t)+"/"+this.b.toCSS(t)},eval:function(){return this}}}(e("../tree")),function(t){t.Ruleset=function(t,e,n){this.selectors=t,this.rules=e,this._lookups={},this.strictImports=n},t.Ruleset.prototype={eval:function(e){var n,i=this.selectors&&this.selectors.map(function(t){return t.eval(e)}),o=new t.Ruleset(i,this.rules.slice(0),this.strictImports);o.originalRuleset=this,o.root=this.root,o.allowImports=this.allowImports,this.debugInfo&&(o.debugInfo=this.debugInfo),e.frames.unshift(o),(o.root||o.allowImports||!o.strictImports)&&o.evalImports(e);for(var r=0;o.rules.length>r;r++)o.rules[r]instanceof t.mixin.Definition&&(o.rules[r].frames=e.frames.slice(0));for(var s=e.mediaBlocks&&e.mediaBlocks.length||0,r=0;o.rules.length>r;r++)o.rules[r]instanceof t.mixin.Call&&(n=o.rules[r].eval(e),o.rules.splice.apply(o.rules,[r,1].concat(n)),r+=n.length-1,o.resetCache());for(var a,r=0;o.rules.length>r;r++)a=o.rules[r],a instanceof t.mixin.Definition||(o.rules[r]=a.eval?a.eval(e):a);if(e.frames.shift(),e.mediaBlocks)for(var r=s;e.mediaBlocks.length>r;r++)e.mediaBlocks[r].bubbleSelectors(i);return o},evalImports:function(e){var n,i;for(n=0;this.rules.length>n;n++)this.rules[n]instanceof t.Import&&(i=this.rules[n].eval(e),"number"==typeof i.length?(this.rules.splice.apply(this.rules,[n,1].concat(i)),n+=i.length-1):this.rules.splice(n,1,i),this.resetCache())},makeImportant:function(){return new t.Ruleset(this.selectors,this.rules.map(function(t){return t.makeImportant?t.makeImportant():t}),this.strictImports)},matchArgs:function(t){return!t||0===t.length},resetCache:function(){this._rulesets=null,this._variables=null,this._lookups={}},variables:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(e,n){return n instanceof t.Rule&&n.variable===!0&&(e[n.name]=n),e},{})},variable:function(t){return this.variables()[t]},rulesets:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(e){return e instanceof t.Ruleset||e instanceof t.mixin.Definition})},find:function(e,n){n=n||this;var i,o=[],r=e.toCSS();return r in this._lookups?this._lookups[r]:(this.rulesets().forEach(function(r){if(r!==n)for(var s=0;r.selectors.length>s;s++)if(i=e.match(r.selectors[s])){e.elements.length>r.selectors[s].elements.length?Array.prototype.push.apply(o,r.find(new t.Selector(e.elements.slice(1)),n)):o.push(r);break}}),this._lookups[r]=o)},toCSS:function(e,n){var i,o,r,s=[],a=[],l=[],u=[],h=[];this.root||this.joinSelectors(h,e,this.selectors);for(var c=0;this.rules.length>c;c++)if(r=this.rules[c],r.rules||r instanceof t.Media)u.push(r.toCSS(h,n));else if(r instanceof t.Directive){var d=r.toCSS(h,n);if("@charset"===r.name){if(n.charset){r.debugInfo&&(u.push(t.debugInfo(n,r)),u.push(new t.Comment("/* "+d.replace(/\n/g,"")+" */\n").toCSS(n)));continue}n.charset=!0}u.push(d)}else r instanceof t.Comment?r.silent||(this.root?u.push(r.toCSS(n)):a.push(r.toCSS(n))):r.toCSS&&!r.variable?a.push(r.toCSS(n)):r.value&&!r.variable&&a.push(""+r.value);if(u=u.join(""),this.root)s.push(a.join(n.compress?"":"\n"));else if(a.length>0){o=t.debugInfo(n,this),i=h.map(function(t){return t.map(function(t){return t.toCSS(n)}).join("").trim()}).join(n.compress?",":",\n");for(var c=a.length-1;c>=0;c--)-1===l.indexOf(a[c])&&l.unshift(a[c]);a=l,s.push(o+i+(n.compress?"{":" {\n  ")+a.join(n.compress?"":"\n  ")+(n.compress?"}":"\n}\n"))}return s.push(u),s.join("")+(n.compress?"\n":"")},joinSelectors:function(t,e,n){for(var i=0;n.length>i;i++)this.joinSelector(t,e,n[i])},joinSelector:function(e,n,i){var o,r,s,a,l,u,h,c,d,p,f,g,m,v,y;for(o=0;i.elements.length>o;o++)u=i.elements[o],"&"===u.value&&(a=!0);if(a){for(v=[],l=[[]],o=0;i.elements.length>o;o++)if(u=i.elements[o],"&"!==u.value)v.push(u);else{for(y=[],v.length>0&&this.mergeElementsOnToSelectors(v,l),r=0;l.length>r;r++)if(h=l[r],0==n.length)h.length>0&&(h[0].elements=h[0].elements.slice(0),h[0].elements.push(new t.Element(u.combinator,"",0))),y.push(h);else for(s=0;n.length>s;s++)c=n[s],d=[],p=[],g=!0,h.length>0?(d=h.slice(0),m=d.pop(),f=new t.Selector(m.elements.slice(0)),g=!1):f=new t.Selector([]),c.length>1&&(p=p.concat(c.slice(1))),c.length>0&&(g=!1,f.elements.push(new t.Element(u.combinator,c[0].elements[0].value,0)),f.elements=f.elements.concat(c[0].elements.slice(1))),g||d.push(f),d=d.concat(p),y.push(d);l=y,v=[]}for(v.length>0&&this.mergeElementsOnToSelectors(v,l),o=0;l.length>o;o++)e.push(l[o])}else if(n.length>0)for(o=0;n.length>o;o++)e.push(n[o].concat(i));else e.push([i])},mergeElementsOnToSelectors:function(e,n){var i,o;if(0==n.length)return n.push([new t.Selector(e)]),void 0;for(i=0;n.length>i;i++)o=n[i],o.length>0?o[o.length-1]=new t.Selector(o[o.length-1].elements.concat(e)):o.push(new t.Selector(e))}}}(e("../tree")),function(t){t.Selector=function(t){this.elements=t},t.Selector.prototype.match=function(t){var e,n,i,o,r=this.elements,s=r.length;if(e=t.elements.slice(t.elements.length&&"&"===t.elements[0].value?1:0),n=e.length,i=Math.min(s,n),0===n||n>s)return!1;for(o=0;i>o;o++)if(r[o].value!==e[o].value)return!1;return!0},t.Selector.prototype.eval=function(e){return new t.Selector(this.elements.map(function(t){return t.eval(e)}))},t.Selector.prototype.toCSS=function(t){return this._css?this._css:(this._css=""===this.elements[0].combinator.value?" ":"",this._css+=this.elements.map(function(e){return"string"==typeof e?" "+e.trim():e.toCSS(t)}).join(""),this._css)}}(e("../tree")),function(t){t.UnicodeDescriptor=function(t){this.value=t},t.UnicodeDescriptor.prototype={toCSS:function(){return this.value},eval:function(){return this}}}(e("../tree")),function(t){t.URL=function(t,e){this.value=t,this.rootpath=e},t.URL.prototype={toCSS:function(){return"url("+this.value.toCSS()+")"},eval:function(e){var n,i=this.value.eval(e);return"string"==typeof i.value&&!/^(?:[a-z-]+:|\/)/.test(i.value)&&(n=this.rootpath,i.quote||(n=n.replace(/[\(\)'"\s]/g,function(t){return"\\"+t})),i.value=n+i.value),new t.URL(i,this.rootpath)}}}(e("../tree")),function(t){t.Value=function(t){this.value=t,this.is="value"},t.Value.prototype={eval:function(e){return 1===this.value.length?this.value[0].eval(e):new t.Value(this.value.map(function(t){return t.eval(e)}))},toCSS:function(t){return this.value.map(function(e){return e.toCSS(t)}).join(t.compress?",":", ")}}}(e("../tree")),function(t){t.Variable=function(t,e,n){this.name=t,this.index=e,this.file=n},t.Variable.prototype={eval:function(e){var n,i,o=this.name;if(0==o.indexOf("@@")&&(o="@"+new t.Variable(o.slice(1)).eval(e).value),this.evaluating)throw{type:"Name",message:"Recursive variable definition for "+o,filename:this.file,index:this.index};if(this.evaluating=!0,n=t.find(e.frames,function(t){return(i=t.variable(o))?i.value.eval(e):void 0}))return this.evaluating=!1,n;throw{type:"Name",message:"variable "+o+" is undefined",filename:this.file,index:this.index}}}}(e("../tree")),function(t){t.debugInfo=function(e,n){var i="";if(e.dumpLineNumbers&&!e.compress)switch(e.dumpLineNumbers){case"comments":i=t.debugInfo.asComment(n);break;case"mediaquery":i=t.debugInfo.asMediaQuery(n);break;case"all":i=t.debugInfo.asComment(n)+t.debugInfo.asMediaQuery(n)}return i},t.debugInfo.asComment=function(t){return"/* line "+t.debugInfo.lineNumber+", "+t.debugInfo.fileName+" */\n"},t.debugInfo.asMediaQuery=function(t){return"@media -sass-debug-info{filename{font-family:"+("file://"+t.debugInfo.fileName).replace(/[\/:.]/g,"\\$&")+"}line{font-family:\\00003"+t.debugInfo.lineNumber+"}}\n"},t.find=function(t,e){for(var n,i=0;t.length>i;i++)if(n=e.call(t,t[i]))return n;return null},t.jsify=function(t){return Array.isArray(t.value)&&t.value.length>1?"["+t.value.map(function(t){return t.toCSS(!1)}).join(", ")+"]":t.toCSS(!1)}}(e("./tree"));var v=/^(file|chrome(-extension)?|resource|qrc|app):/.test(location.protocol);if(g.env=g.env||("127.0.0.1"==location.hostname||"0.0.0.0"==location.hostname||"localhost"==location.hostname||location.port.length>0||v?"development":"production"),g.async=g.async||!1,g.fileAsync=g.fileAsync||!1,g.poll=g.poll||(v?1e3:1500),g.functions)for(var y in g.functions)g.tree.functions[y]=g.functions[y];var b=/!dumpLineNumbers:(comments|mediaquery|all)/.exec(location.hash);b&&(g.dumpLineNumbers=b[1]),g.watch=function(){return g.watchMode||(g.env="development",n()),this.watchMode=!0},g.unwatch=function(){return clearInterval(g.watchTimer),this.watchMode=!1},/!watch/.test(location.hash)&&g.watch();var _=null;if("development"!=g.env)try{_=t.localStorage===void 0?null:t.localStorage}catch(w){}var S=document.getElementsByTagName("link"),P=/^text\/(x-)?less$/;g.sheets=[];for(var A=0;S.length>A;A++)("stylesheet/less"===S[A].rel||S[A].rel.match(/stylesheet/)&&S[A].type.match(P))&&g.sheets.push(S[A]);var T="";g.modifyVars=function(t){var e=T;for(name in t)e+=("@"===name.slice(0,1)?"":"@")+name+": "+(";"===t[name].slice(-1)?t[name]:t[name]+";");(new g.Parser).parse(e,function(t,e){u(e.toCSS(),g.sheets[g.sheets.length-1])})},g.refresh=function(t){var e,n;e=n=new Date,o(function(t,i,o,r,s){s.local?p("loading "+r.href+" from cache."):(p("parsed "+r.href+" successfully."),u(i.toCSS(),r,s.lastModified)),p("css for "+r.href+" generated in "+(new Date-n)+"ms"),0===s.remaining&&p("css generated in "+(new Date-e)+"ms"),n=new Date},t),i()},g.refreshStyles=i,g.refresh("development"===g.env),"function"==typeof define&&define.amd&&define("less",[],function(){return g})}(window),function(){var t,e,n,i,o=function(t,e){return function(){return t.apply(e,arguments)}},r=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},s=[].slice;t=jQuery,e=!1,n=function(){function n(e,n,i,r){var s,a=this;this.tam=e,this.name=n,this.speaker=i,this.adjustSelection=o(this.adjustSelection,this),null==r&&(r={}),this.locked="locked"in r?r.locked:!1,this.el=t('<div>\n<div class="emContainerTAM">\n    <div class="emphasisTAM"></div>\n</div>\n<div class="hlContainerTAM">\n    <div class="highlightsTAM"></div>\n</div>\n<div class="taContainerTAM">\n    <textarea class="txtAreaTAM" name="area'+n+'"></textarea>\n</div>\n<div class="overlayContainerTAM">\n    <div class="overlaysTAM"></div>\n</div>\n</div>'),this.hlContainer=this.el.find(".hlContainerTAM"),this.highlights=this.el.find(".highlightsTAM"),this.emContainer=this.el.find(".emContainerTAM"),this.emphasis=this.el.find(".emphasisTAM"),this.overlayContainer=this.el.find(".overlayContainerTAM"),this.overlays=this.el.find(".overlaysTAM"),this.taContainer=this.el.find(".taContainerTAM"),this.area=this.el.find(".txtAreaTAM"),s=[this.area,this.hlContainer,this.highlights,this.emContainer,this.emphasis,this.overlayContainer,this.overlays,this.taContainer],this.$containers=t(_.map(s,function(t){return t[0]})),this.area.bind("copy",function(){return a.tam.processCopy(a)}).bind("cut",function(t){return console.log("Cut not supported at this time"),t.preventDefault(),!1}).bind("paste",function(t){return a.locked?t.preventDefault():a.tam.processPaste(a,a.area.val())}).keypress(function(t){return t.which>=32&&t.preventDefault,!1}).keydown(function(e){var n;switch(e.which){case 8:return e.preventDefault(),a.locked||a.tam.processDelete(a,"backward"),!1;case 46:return e.preventDefault(),a.locked||a.tam.processDelete(a,"forward"),!1;case 37:case 38:case 39:case 40:if(e.shiftKey)return _.defer(a.snapSelectionToWord);break;case 13:return e.preventDefault();case 90:return!1;case 190:if(e.preventDefault(),!a.locked)return a.addPeriod();break;case 69:return e.preventDefault(),a.insertEmphasisPoint();case 87:return n=a.tam.tas.indexOf(a),n>0&&(a.tam.tas[n-1].area.setSelection(0),a.tam.lastFocused=a.tam.tas[n-1],a.tam.container.stop().scrollTo(t(a.tam.tas[n-1].area),200,{offset:-200})),e.preventDefault();case 83:return n=a.tam.tas.indexOf(a),a.tam.tas.length>n+1&&(a.tam.tas[n+1].area.setSelection(0),a.tam.lastFocused=a.tam.tas[n+1],a.tam.container.stop().scrollTo(t(a.tam.tas[n+1].area),200,{offset:-200})),e.preventDefault()}}).bind("mousemove",function(){}).bind("mouseup",this.adjustSelection),this.overlays.bind("mouseup",this.adjustSelection)}return n.prototype.adjustSelection=function(){var t,e,n,i;return this.tam.lastFocused=this,this.snapSelectionToWord(),e=this.area.getSelection(),i=this.rangeIndices(e.start,e.end),n=i[0],t=i[1],this.tam.highlightWordsInWaveform(n,t,this)},n.prototype._renderWord=function(t,e,n,i){var o,s,a;return null==n&&(n=""),null==i&&(i=""),o=[".","?","!"],s='."',a=t.word[t.word.length-1],r.call(o,a)>=0||t.word.slice(-2)===s?e?""+n+t.word+i+"\n":""+n+t.word+i+"<br />":""+n+t.word+i+" "},n.prototype.updateWords=function(t){var n,i,o,s=this;return e&&console.log("UPDATE WORDS"),t&&(this.words=t),o=this._renderWord,n=["UH","UM","AH"],i=_.reduce(this.words,function(t,e){var i;return i=e.alignedWord,r.call(n,i)>=0&&(e.emph=!0),""+t+o(e,!0)},""),this.val(i),this.tam.dirtyTas.push(this),this.refresh(),_.defer(function(){return 0===s.words.length&&1!==s.tam.tas.length?s.tam.removeTA(s):void 0})},n.prototype.height=function(){return this.area.height()},n.prototype.val=function(t){return this.area.val(t)},n.prototype.refresh=function(){return e&&console.log("SA REFRESH"),this.updatePos(),this.adjustHeight()},n.prototype.adjustHeight=function(){var t;return e&&console.log("ADJUST HEIGHT OF",this),this.area.height("20px"),t=this.area.prop("scrollHeight")+"px",this.$containers.height(t),t},n.prototype.snapSelectionToWord=function(){var t,e,n,i,o,s,a,l,u,h;if(i=this.area.getSelection(),console.log(i),t=!1,e=!1,0!==i.length){if(/^\s+$/.exec(i.text)&&this.area.collapseSelection(),s=this.area.val(),o=[" ","\n"],i.length>0){for(;a=s.charAt(i.start),r.call(o,a)>=0&&(e=!0,i.start+1<i.end);)this.area.setSelection(i.start+1,i.end),i=this.area.getSelection();for(;l=s.charAt(i.start-1),0>r.call(o,l)&&""!==s.charAt(i.start-1)&&n!==i.length&&!e;)n=i.length,this.area.setSelection(i.start-1,i.end),i=this.area.getSelection();for(;u=s.charAt(i.end-1),r.call(o,u)>=0&&(t=!0,i.start<i.end-1);)this.area.setSelection(i.start,i.end-1),i=this.area.getSelection();for(;h=s.charAt(i.end),0>r.call(o,h)&&""!==s.charAt(i.end)&&n!==i.length&&!t;)n=i.length,this.area.setSelection(i.start,i.end+1),i=this.area.getSelection()}return console.log("end of snap",i)}},n.prototype.insertEmphasisPoint=function(){var t,e;return TAAPP.use("addEmphasisPoint"),this.selectWord("backward"),t=this.area.getSelection(),this.area.setSelection(t.end),e=this.range(t.start,t.end)[0],e.emphasisPoint=!0,this.tam.dirtyTas.push(this),this.tam.refresh()},n.prototype.selectWord=function(t){var e,n,i,o,s,a;if(null==t&&(t="backward"),i=this.area.getSelection().start,o=this.area.val(),n=[" ","\n"],"backward"===t){for(e=i-1;s=o.charAt(e),r.call(n,s)>=0&&""!==o.charAt(e);)e-=1;this.area.setSelection(e,i)}else if("forward"===t){for(e=i+2;a=o.charAt(e),r.call(n,a)>=0&&""!==o.charAt(e);)e+=1;this.area.setSelection(i,e)}return this.snapSelectionToWord()},n.prototype.updatePos=function(){var t;return t=this.name,_.each(this.words,function(e,n,i){return i[n].taPos=this.total,i[n].taIdx=t,this.total+=e.word.length+1},{total:0})},n.prototype.rangeIndices=function(t,e){var n,i,o,r,s,a,l,u,h,c;for(h=this.words,i=s=0,l=h.length;l>s;i=++s)if(r=h[i],r.taPos>=t){o=i;break}for(c=this.words,i=a=0,u=c.length;u>a;i=++a)r=c[i],e>r.taPos&&(n=i);return[o,n]},n.prototype.range=function(t,e){var n,i,o,r,s,a;if(null==e){for(a=this.words,i=r=0,s=a.length;s>r;i=++r)if(o=a[i],o.taPos>=t){n=o.taPos;break}return[n,i]}return _.filter(this.words,function(n){return n.taPos>=t&&e>n.taPos})},n.prototype.addPeriod=function(){var t,e,n,i,o,s,a,l,u,h=this;return TAAPP.use("addPeriod"),console.log("Adding a period"),l=this.area.getSelection(),a=this.range(l.end),0!==a[1]?(s=a[1]-1,console.log("adding period to word",this.words[s]),0>r.call(this.words[s].word,".")&&(this.words[s].word+="."),n=this.tam.breathInds[this.speaker],u=_.sortBy(n,function(t){return-h.tam.words[t].likelihood}),e=u[Math.floor(Math.random()*u.length)],t=[e],(TAAPP!==void 0&&null!==TAAPP?TAAPP.speech:void 0)in TAAPP.roomTone&&(i="{gp-0.02}",o="{gp-0.05}",t=[i,e,o]),this.tam.insertWords(t,a.end,this)):void 0},n.prototype.highlightWords=function(t,e){var n,i;return i=this._renderWord,n=_.reduce(this.words,function(n,o,r){var s,a;return s="",a="",r!==t||r!==e-1&&null!=e?r===t?s="<span class='hl'>":r===e-1&&(a="</span>"):(s="<span class='hl'>",a="</span>"),""+n+i(o,!1,s,a)},""),this.highlights.html(n)},n.prototype.emphasizeWords=function(){var t,e,n,i=this;return t=[-1],n=this._renderWord,e=_.reduce(this.words,function(t,e,o){var r,s,a,l;return r="",s="",null!=e.origPos&&e.origPos-1!==i[0]&&(r+="<span class='editLocation'>",s+="</span>"),null!=e.emph&&e.emph&&(r+="<span class='emph'>",s+="</span>"),null!=e.emphasisPoint&&e.emphasisPoint&&(r+="<span class='ePt'>",s+="</span>"),"sp"===e.alignedWord||"gp"===e.alignedWord?(r+="<span class='pause'>",s+="</span>"):"{BR}"===e.alignedWord?(r+="<span class='breath'>",s+="</span>"):(e.alignedWord===(null!=(a=i.words[o-1])?a.alignedWord:void 0)||(null!=(l=i.words[o+1])?l.alignedWord:void 0)===e.alignedWord)&&(r+="<span class='repeatedWord'>",s+="</span>"),i[0]=e.origPos,""+t+n(e,!1,r,s)},"",t),this.emphasis.html(e)},n.prototype.insertDupeOverlays=function(n,i){var o,r,s,a,l,u,h,c,d,p,f,g,m;return e&&console.log("SA INSERT DUPE OVERLAYS",this),o=this.overlays,s={dupeOrder:[],bounds:[]},u=[],c=i.firsts,h=i.starts,p=this.tam.taIndexSpan[this.tam.tas.indexOf(this)],a='<span class="dropdown overlay">\n    <span class="dropdown-toggle">',l='    </span>\n    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">\n        <li class="disabled"><a><%= header %></a></li>\n        <% _.each(dupes[dupeIdx], function (elt) { %>\n            <li><span \n                   class="dupeOpt"\n                   tabindex="-1">\n                   <i class="icon-play dupePlayButton"></i>\n                   <div style="position:relative; display:inline-block">\n                   <span class="copyButton"><%= elt[1] %></span>\n                   </div>\n                </span>\n            </li>\n        <% }) %>\n    </ul>\n</span>',f=this._renderWord,d=this.locked,r=_.reduce(this.words,function(t,e,i,o){var r,s,u,p,g,m,v;if(u=c.indexOf(e.origPos),m="",v="",-1!==u){for(g=i,s=h[u],r=s.idxInDupes;o.length>g&&o[g].origPos>=s.dElt[0][0]&&o[g].origPos<=s.dElt[0][1];)g+=1;this.dupeOrder.push(r),this.bounds.push([i,g-1]),m=a,p=d?"Similar sentences (click to copy)":"Similar sentences",v=_.template(l,{header:p,dupeIdx:r,dupes:n})}return("sp"===e.alignedWord||"gp"===e.alignedWord)&&(m+="<span class='pauseOverlay'>",v+="</span>"),"{BR}"===e.alignedWord&&(m+="<span class='breathOverlay'>",v+="</span>"),""+t+f(e,!1,m,v)},"",s),o.html(r),g=this,m=this.area.width(),this.area.unbind(".tam").bind("click.tam",function(){return console.log("clicked on the box"),t(".dropdown.open").removeClass("open")}),o.find(".dropdown-toggle").dropdown().each(function(e){var i,o,r,a,l;return a=t(this).offset(),o=g.area.offset(),i=n[s.dupeOrder[e]],l=s.bounds[e][0],r=s.bounds[e][1],t(this).click(function(){return TAAPP.use("viewSimilarSentences"),console.log("start",l,"end",r),g.area.setSelection(g.words[l].taPos,g.words[r].taPos+g.words[r].word.length)}).next(".dropdown-menu").css({left:""+(-a.left+o.left+10)+"px",width:""+(m-20)+"px"}).find("span.dupeOpt").each(function(e){var n,o,s;return d?(t(this).closest(".dropdown").addClass("open"),n=function(){s=[];for(var t=o=i[e][0][0],n=i[e][0][1];n>=o?n>=t:t>=n;n>=o?t++:t--)s.push(t);return s}.apply(this),t(this).find(".copyButton").attr("data-clipboard-text",g.tam.generateCopyTextFromIndices(n)).zclip({path:"static/swf/ZeroClipboard.swf",copy:g.tam.generateCopyTextFromIndices(n),afterCopy:function(){return g.area.focus(),console.log("COPPY",t(this).closest(".dropdown")),t(this).closest(".dropdown").removeClass("open")}}),t(this).find(".zclip").css({top:"-4px"}),t(this).closest(".dropdown").removeClass("open")):t(this).click(function(){var t;return TAAPP.use("replaceSentence"),t=g.replaceWords(l,r,i[e][0][0],i[e][0][1]),g.area.setSelection(t[0],t[1]),!1}),t(this).find(".dupePlayButton").click(function(n){var o,r;return TAAPP.use("playSimilarSentence"),r=g.tam.words[i[e][0][0]].start,o=g.tam.words[i[e][0][1]].end,TAAPP.origSound.play({from:1e3*r,to:1e3*o,onstop:function(){return t(this).closest(".dropdown").hasClass("open")?g.area.focus():void 0}}),n.stopPropagation()})})})},n.prototype.replaceWords=function(t,e,n,i){return this.tam.replaceWords(t,e,n,i,this,this.words[t].taPos)},n}(),i=function(){function i(e,n,i,o,r){var s,a,l,u,h,c=this;this.el=e,this.speakers=n,this.words=i,this.current=o,null==r&&(r={}),this.locked="locked"in r?r.locked:!1,this.textAlignedWfs="wfs"in r?r.wfs:null,this.headerTable=t(document.createElement("table")).attr("width","100%").appendTo(this.el),this.container=t(document.createElement("div")).css({"overflow-x":"hidden","overflow-y":"auto"}).appendTo(this.el),this.table=t(document.createElement("table")).attr("width","100%").appendTo(this.container),a=t(document.createElement("tr")).appendTo(this.headerTable),_.each(this.speakers,function(e){var n;return n=document.createElement("th"),t(n).html(e).width(""+100/c.speakers.length+"%").appendTo(a)}),this.tas=[],this.taIndexSpan=[],this.areas=[],this.dirtyTas=[],this.draw(),this.breathInds={},h=this.speakers;for(l=0,u=h.length;u>l;l++)s=h[l],this.breathInds[s]=[];_.each(this.words,function(t,e){var n;if("{BR}"===t.alignedWord){for(n=e;c.words.length>n&&!("speaker"in c.words[n]);)n++;if(n===c.words.length)return;if("speaker"in c.words[n])return c.breathInds[c.words[n].speaker].push(e)}}),this.el.scrollTo(0)}return i.prototype._tr=function(e){var n;return n=t(document.createElement("tr")),_.each(this.speakers,function(){var e;return e=t(document.createElement("td")),n.append(e)}),n.find("td").width(""+100/this.speakers.length+"%"),null!=e?0===e?n.prependTo(this.table):n.insertAfter(this.table.find("tr").eq(e-1)):n.appendTo(this.table),n},i.prototype._newScriptArea=function(t,e,i){var o;return o=new n(this,t,e,{locked:this.locked}),null!=i?(this.tas.splice(i,0,o),this.areas.splice(i,0,o.area)):(this.tas.push(o),this.areas.push(o.area)),o.el},i.prototype.refresh=function(){var n,i,o,r,s;for(e&&console.log("TAM REFRESH"),this.dirtyTas=_.uniq(this.dirtyTas),s=this.tas,n=o=0,r=s.length;r>o;n=++o)i=s[n],i.name=n;return this.updatePos(),this.adjustHeight(),this.emphasizeWords(),this.insertDupeOverlays(this.dupes,this.dupeInfo),null!=this.textAlignedWfs&&t(_.values(this.textAlignedWfs)).textAlignedWaveform({currentWords:this.current}),this.dirtyTas=[]},i.prototype.adjustHeight=function(t){var n,i,o,r,s;for(e&&console.log("ADJUST HEIGHT OF TAM"),null==t&&(t=!1),o=t?this.tas:this.dirtyTas,r=0,s=o.length;s>r;r++)i=o[r],n=i.adjustHeight(),i.el.closest("tr").height(n);return console.log("container height",window.innerHeight-this.el.offset().top-50),this.container.height(window.innerHeight-this.el.offset().top-50),console.log("el height",window.innerHeight-this.el.offset().top-50),this.el.height(window.innerHeight-this.el.offset().top-50)},i.prototype.draw=function(){var t,e,n=this;return this.table.find("tr").remove(),e=this.speakers[0],t=0,this.taIndexSpan=[0],_.each(this.current,function(i,o){var r,s;return 0===o?(r=0,s=n._tr(),s.find("td").eq(r).append(n._newScriptArea(t++,e))):null!=i.speaker&&i.speaker!==e?(n.taIndexSpan.push(o),r=n.speakers.indexOf(i.speaker),s=n._tr(),s.find("td").eq(r).append(n._newScriptArea(t++,i.speaker)),e=i.speaker):void 0}),_.each(this.taIndexSpan,function(t,e){var i;return i=e===n.taIndexSpan.length-1?n.current.slice(t):n.current.slice(t,n.taIndexSpan[e+1]),n.tas[e].updateWords(i)}),this.dirtyTas=this.tas.slice(0),this.refresh(),this.lastFocused=this.tas[0]},i.prototype.pruneByTAPos=function(t,n,i){var o;return e&&console.log("PRUNE BY TA POS"),o=[],_.each(i.words,function(e,i){return e.taPos>=t&&n>e.taPos?o.push(i):void 0}),console.log("prune by TA",o[0],_.last(o)),this.pruneByTAIndex(o[0],_.last(o)+1,i)},i.prototype.pruneByTAIndex=function(t,n,i,o){var r,s;return e&&console.log("PRUNE BY TA INDEX"),null==o&&(o=!0),s=this.tas.indexOf(i),r=this.taIndexSpan[s],this.pruneCurrent(t+r,n+r,o)},i.prototype.pruneCurrent=function(t,n,i){var o,r,s,a,l,u,h,c;for(e&&console.log("PRUNE CURRENT"),null==i&&(i=!0),o=this.current.splice(t,n-t),console.log("start",t,"end",n,"cutwords",o),a=o[0].taIdx,s=this.tas[a],console.log("taIndex",a,"ta",s),c=this.tas,r=u=0,h=c.length;h>u;r=++u)l=c[r],r>a&&(this.taIndexSpan[r]-=n-t);return a===this.tas.length-1?s.updateWords(this.current.slice(this.taIndexSpan[a])):(console.log("Prune current, updating ta with words",this.taIndexSpan[a],this.taIndexSpan[a+1]-1),s.updateWords(this.current.slice(this.taIndexSpan[a],this.taIndexSpan[a+1]))),i?this.refresh():void 0},i.prototype.pruneAll=function(){var t,e,n,i;for(i=this.tas,e=0,n=i.length;n>e;e++)t=i[e],t.updateWords([]);return this.current.splice(0,this.current.length),this.refresh()},i.prototype.highlightWordsInWaveform=function(e,n,i){var o,r,s,a,l,u,h,c;if(null!=this.textAlignedWfs&&(o=this.taIndexSpan[this.tas.indexOf(i)],(null!=(l=this.highlightedWordsRange)?l[0]:void 0)!==o+e||(null!=(u=this.highlightedWordsRange)?u[1]:void 0)!==o+n)){for(this.highlightedWordsRange=[o+e,o+n],t(this.textAlignedWfs[i.speaker]).textAlignedWaveform({highlightedWordsRange:this.highlightedWordsRange}),h=this.speakers,c=[],s=0,a=h.length;a>s;s++)r=h[s],r!==i.speaker?c.push(t(this.textAlignedWfs[r]).textAlignedWaveform({highlightedWordsRange:void 0})):c.push(void 0);return c}},i.prototype.highlightWords=function(t,e){var n,i,o,r,s,a,l,u,h,c,d,p,f,g,m,v;if(-1!==t){if(!((null!=(f=this.currentHighlight)?f[0]:void 0)>t&&t+3>(null!=(g=this.currentHighlight)?g[0]:void 0))){for(this.currentHighlight=[t,e],m=this.tas,n=l=0,c=m.length;c>l&&(s=m[n],!(this.taIndexSpan[n]>t));n=++l);for(0!==n?(s=this.tas[n-1],o=this.taIndexSpan[n-1]):(s=this.tas[0],o=this.taIndexSpan[0]),v=this.tas,u=0,d=v.length;d>u;u++)r=v[u],r.highlights.html("");return null!=e&&(i=e-o),s.highlightWords(t-o,i)}}else for(this.currentHighlight=void 0,p=this.tas,a=0,h=p.length;h>a;a++)s=p[a],s.highlights.html("")},i.prototype.emphasizeWords=function(){var t,e,n,i,o;for(i=this.dirtyTas,o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push(t.emphasizeWords());return o},i.prototype.updatePos=function(){var t,e,n,i,o,r,s,a,l,u;for(this.highlightWords(-1),t=0,this.taIndexSpan=[],a=this.tas,e=i=0,r=a.length;r>i;e=++i)n=a[e],n.name=e,this.taIndexSpan.push(t),t+=n.words.length;for(l=this.dirtyTas,u=[],o=0,s=l.length;s>o;o++)n=l[o],u.push(n.updatePos());return u},i.prototype.clean=function(t){var e,n,i,o,r,s,a,l,u,h,c,d,p,f,g,m;for(h=this.tas.indexOf(t),r=this.taIndexSpan[h],l=[],s=[],u=[],m=t.words,n=f=0,g=m.length;g>f;n=++f)d=m[n],null!=d.speaker&&d.speaker!==i&&(l.push(n),u.push(d.speaker),s.push(d.speaker===t.speaker),i=d.speaker);return 1===s.length&&s[0]?(this.refresh(),void 0):1!==s.length||s[0]?2===s.length&&s[0]?(p=t.words.slice(l[1]),h===this.tas.length-1?(console.log("New row"),e=this.speakers.indexOf(u[1]),c=this._tr(h+1),c.find("td").eq(e).append(this._newScriptArea(this.tas.length,u[1],h+1)),t.updateWords(t.words.slice(0,l[1])),this.tas[this.tas.length-1].updateWords(p),this.tas[this.tas.length-1].area.setSelection(0,0),this.refresh()):this.tas[h+1].speaker===u[1]?(console.log("Inserting in next row"),console.log(this.tas,h),o=this.tas[h+1],t.updateWords(t.words.slice(0,l[1])),o.updateWords(p.concat(o.words)),o.area.setSelection(0,0),this.refresh()):window.alert("should not get here (right wrong pattern)"),console.log("CLEAN: @tas",this.tas,"taIndexSpan",this.taIndexSpan),void 0):2===s.length&&s[1]?(p=t.words.slice(0,l[1]),0===h?(console.log("New row (wrong right)"),e=this.speakers.indexOf(u[0]),c=this._tr(0),c.find("td").eq(e).append(this._newScriptArea(this.tas.length,u[0],0)),t.updateWords(t.words.slice(l[1])),this.tas[0].updateWords(p)):this.tas[h-1].speaker===u[0]?(a=this.tas[h-1],t.updateWords(t.words.slice(l[1])),a.updateWords(a.words.concat(p))):window.alert("should not get here (wrong right pattern)"),t.area.setSelection(0,0),this.refresh(),void 0):(3===s.length&&(p=t.words.slice(0),e=this.speakers.indexOf(u[1]),c=this._tr(h+1),c.find("td").eq(e).append(this._newScriptArea(this.tas.length,u[1],h+1)),e=this.speakers.indexOf(u[2]),c=this._tr(h+2),c.find("td").eq(e).append(this._newScriptArea(this.tas.length,u[2],h+2)),t.updateWords(p.slice(0,l[1])),this.tas[h+1].updateWords(p.slice(l[1],l[2])),this.tas[h+2].updateWords(p.slice(l[2])),this.refresh(),this.tas[h+1].area.setSelection(0,0)),void 0):(p=t.words.slice(0),e=this.speakers.indexOf(i),t.speaker=i,t.el.closest("tr").find("td").eq(e).append(t.el),this.refresh(),void 0)},i.prototype.processDelete=function(t,n){var i,o,s,a,l;for(TAAPP.use("delete"),e&&console.log("PROCESSDELETE"),window.TAAPP.sound&&window.TAAPP.sound.stop(),t.snapSelectionToWord(),o=t.area.getSelection(),0===o.length&&t.selectWord(n,!0),o=t.area.getSelection(),i=o.end,a=t.area.val(),s=[" ","\n"];l=a.charAt(i),r.call(s,l)>=0;)i+=1;return console.log("calling prune by ta pos with start",o.start,"end",i),this.pruneByTAPos(o.start,i,t),t.area.setSelection(o.start,o.start)},i.prototype.insertEmphasisPoint=function(t){return null==t&&(t=this.lastFocused),t.insertEmphasisPoint()},i.prototype.insertWords=function(t,e,n){var i,o,r,s,a,l,u,h,c,d,p,f,g,m;for(console.log("INSERT WORDS",t,"POS",e,"TA",n),null==n&&(n=this.lastFocused),null==e&&(e=n.area.getSelection().start),u=this.tas.indexOf(n),l=this.taIndexSpan[u],g=n.words,s=d=0,f=g.length;f>d&&(h=g[s],!(h.taPos>=e));s=++d)s===n.words.length-1&&(s=n.words.length);for(o={first:void 0,last:void 0,words:this.words},_.isArray(t)||(t=[t]),c=_.map(t,function(t){var e,n,i;return"{gp"===(""+t).split("-")[0]?(e=clone(TAAPP.roomTone[TAAPP.speech]),e.word=t,e.pauseLength=parseFloat(t.split("-")[1]),null==(n=this.first)&&(this.first=e),this.last=e,e):(e=clone(this.words[t]),null==(i=this.first)&&(this.first=e),this.last=e,e)},o),i=[s+l,0].concat(c),Array.prototype.splice.apply(this.current,i),r=p=0,m=this.tas.length;m>=0?m>p:p>m;r=m>=0?++p:--p)r>u&&(this.taIndexSpan[r]+=c.length);return this.dirtyTas.push(n),u===this.tas.length-1?n.updateWords(this.current.slice(this.taIndexSpan[u])):n.updateWords(this.current.slice(this.taIndexSpan[u],this.taIndexSpan[u+1])),this.clean(n),this.refresh(),a=o.last.taPos+o.last.word.length,n.area.setSelection(a,a),this.current.indexOf(o.first)
},i.prototype.processPaste=function(t,e){var n=this;return TAAPP.use("paste"),_.defer(function(){var i,o,s,a,l,u,h,c,d,p,f,g,m,v,y,b,_,w,S,P,A;if(h=/(?:\[(\d+|gp),(e?)\]([^|]+)\|)/g,o=!1,c=[],i=t.area.val(),p=t.area.getSelection(),f=[" ","\n"],0!==e.length-i.length+p.start&&(S=e.charAt(e.length-i.length+p.start),0>r.call(f,S))&&(P=e.charAt(e.length-i.length+p.start-1),0>r.call(f,P)))return console.log("couldn't paste",e.length,i.length,p.start),t.area.val(e),n.refresh(),void 0;for(s=0,l=[];d=h.exec(i);)o=!0,"gp"===d[1]?c.push(d[3]):c.push(parseInt(d[1],10)),"e"===d[2]&&l.push(s),s+=1;if(o){for(u=n.insertWords(c,e.length-i.length+p.start,t),m=0,b=l.length;b>m;m++)a=l[m],n.current[u+a].emphasisPoint=!0;for(v=0,_=l.length;_>v;v++)for(a=l[v],A=n.tas,g=y=0,w=A.length;w>y;g=++y)t=A[g],a>=n.taIndexSpan[g]&&n.taIndexSpan[g]+t.words.length>a&&n.dirtyTas.push(t);return 0!==l.length&&n.refresh(),console.log("taindexspan after clean",n.taIndexSpan),void 0}return t.area.val(e),n.refresh()})},i.prototype.generateCopyTextFromIndices=function(t){var e,n,i,o=this;return i=function(){var n,i,o;for(o=[],n=0,i=t.length;i>n;n++)e=t[n],o.push(this.current[e]);return o}.call(this),n=_.reduce(i,function(t,e){var n,i,r,s,a;if("gp"===e.alignedWord)return t+"[gp]"+e.word+"|";for(a=o.words,n=r=0,s=a.length;s>r&&(i=a[n],i.start!==e.start||i.end!==e.end);n=++r);return""+t+"["+n+"]"+e.word+"|"},"")},i.prototype.processCopy=function(e){var n,i,o,r,s,a=this;return TAAPP.use("copy"),r=window.getSelection(),i=document.createElement("div"),o=e.area.getSelection(),s=e.range(o.start,o.end),n=_.reduce(s,function(t,e){var n,i,o,r,s,l;if(n="","emphasisPoint"in e&&e.emphasisPoint&&(n="e"),"gp"===e.alignedWord)return""+t+"[gp,"+n+"]"+e.word+"|";for(l=a.words,i=r=0,s=l.length;s>r&&(o=l[i],o.start!==e.start||o.end!==e.end);i=++r);return""+t+"["+i+","+n+"]"+e.word+"|"},""),t(i).css({position:"absolute",left:"-99999px"}).html(n).appendTo("body"),r.selectAllChildren(i),_.defer(function(){return t(i).remove()})},i.prototype.processCut=function(t){var e,n,i,o,r=this;return i=t.area.getSelection(),o=t.range(i.start,i.end),n=t.area.val(),e=_.reduce(o,function(t,e){var n,i,o,s,a;if("gp"===e.alignedWord)return t+"[gp]"+e.word+"|";for(a=r.words,n=o=0,s=a.length;s>o&&(i=a[n],i.start!==e.start||i.end!==e.end);n=++o);return""+t+"["+n+"]"+e.word+"|"},""),n=n.slice(0,i.start)+e+n.slice(i.end+1),t.area.val(n).setSelection(i.start,i.start+e.length)},i.prototype.insertDupeOverlays=function(t,n,i){var o,r,s,a,l,u,h,c,d,p,f,g;if(this.dupes=t,this.dupeInfo=n,e&&console.log("INSERT DUPE OVERLAYS"),null==i&&(i=!1),e&&console.log("DIRTY:",this.dirtyTas),null!=this.dupes){if(i){for(c=this.tas,r=0,l=c.length;l>r;r++)o=c[r],o.insertDupeOverlays(this.dupes,this.dupeInfo);for(d=this.tas,f=[],s=0,u=d.length;u>s;s++)o=d[s],f.push(o.adjustHeight());return f}for(p=this.dirtyTas,g=[],a=0,h=p.length;h>a;a++)o=p[a],g.push(o.insertDupeOverlays(this.dupes,this.dupeInfo));return g}},i.prototype.replaceWords=function(t,e,n,i,o,r){return this.pruneByTAIndex(t,e+1,o),this.insertWords(_.range(n,i+1),r,o)},i.prototype.removeTA=function(t){var e;return console.log("INDEX",this.tas.indexOf(t,"REMOVING TA",t)),e=this.tas.indexOf(t),this.tas.splice(e,1),this.taIndexSpan.splice(e,1),this.table.find("tr").eq(e).remove(),console.log("TA",t,"taIndex",e,"@TAS",this.tas),0!==e&&this.tas.length>e&&this.tas[e-1].speaker===this.tas[e].speaker&&(console.log("### combining 2 text areas"),this.tas[e-1].updateWords(this.tas[e-1].words.concat(this.tas[e].words)),this.removeTA(this.tas[e])),Array.prototype.push.apply(this.dirtyTas,this.tas.slice(e)),this.refresh()},i.prototype.log=function(){var t,e;return e=arguments.length>=1?s.call(arguments,0):[],t=["[TAM]"].concat(e),console.log.apply(console,t)},i}(),window.TextAreaManager=i}.call(this);var TAAPP=TAAPP||{},clone=function(t){var e=t instanceof Array?[]:{};for(i in t)e[i]=t[i]&&"object"==typeof t[i]?clone(t[i]):t[i];return e};soundManager.setup({url:"static/swf/soundmanager2_flash9.swf",flashVersion:9,useFlashBlock:!1,flashLoadTimeout:15e3,useHighPerformance:!0}),TAAPP.state={speechReauthor:{},speechSampleRate:44100,timelineHeight:100,timelineWidth:2e3},TAAPP.spinner=new Spinner({lines:13,length:26,width:9,radius:35,corners:1,rotate:0,color:"#0f82f5",speed:.8,trail:52,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"200px",left:"auto"}),TAAPP.bestBreathIndices=function(){var t=_.min(_.filter(TAAPP.words,function(t){return t.hasOwnProperty("breathLen")}),function(t){return t.breathLen}),e=[t.origPos];return"sp"===TAAPP.words[t.origPos+1].alignedWord&&e.push(t.origPos+1),e},TAAPP.allBreathIndices=function(){var t,e=_.filter(TAAPP.words,function(t){return"{BR}"===t.alignedWord}),n=[],i=[];for(t=0;e.length>t;t++)i=[e[t].origPos],e[t].origPos+1<TAAPP.words.length&&"sp"===TAAPP.words[e[t].origPos+1].alignedWord&&i.push(i[0]+1),e[t].origPos-1>=0&&"sp"===TAAPP.words[e[t].origPos-1].alignedWord&&i.splice(0,0,e[t].origPos-1),n.push(i),i=[];return n},TAAPP.randomBreathIndices=function(){var t=_.filter(TAAPP.words,function(t){return t.hasOwnProperty("breathLen")}),e=t[Math.floor(Math.random()*t.length)],n=[e.origPos];return"sp"===TAAPP.words[e.origPos+1].alignedWord&&n.push(e.origPos+1),n},TAAPP._createBreathDropdown=function(){var t=TAAPP.allBreathIndices(),e=_.template($("#breathDropdownTemplate").html());$(".breathDropdown").append(e({breaths:t})).find(".breathPlayButton").each(function(e){$(this).click(function(n){var i=TAAPP.words[t[e][0]].start,o=TAAPP.words[_.last(t[e])].end;TAAPP.origSound.play({from:1e3*i,to:1e3*o}),n.stopPropagation()})}),$(".breathDropdown").find(".copyButton").each(function(e){$(this).click(function(){TAAPP.use("insertBreath"),TAAPP.TAManager.insertWords(t[e])})})},TAAPP.insertBreath=function(){var t=TAAPP.randomBreathIndices();TAAPP.TAManager.insertWords(t)},TAAPP.globalBreathFill=function(){var t=/[\.:!\?]$/,e=[];_.each(TAAPP.current,function(n,i,o){if(null!==t.exec(n.word))for(;++i<o.length&&"{BR}"!==o[i].alignedWord;)if("gp"!==o[i].alignedWord&&"sp"!==o[i].alignedWord){e.push(i);break}});var n=0;_.each(e,function(t){var e=TAAPP.randomBreathIndices(),i=_.map(e,function(t){return TAAPP.words[t]}),o=[t+n,0].concat(i);n+=i.length,Array.prototype.splice.apply(TAAPP.current,o)}),TAAPP.updateTextArea(),TAAPP.updatePos()},TAAPP.generateAudio=function(){TAAPP.state.speechReauthor={words:TAAPP.current},TAAPP.state.exportedTimeline=TAAPP.$timeline.timeline("export"),console.log("exported timeline",TAAPP.state.exportedTimeline),TAAPP.spinner.spin($("body")[0]),$.ajax({url:"reauthor",type:"POST",dataType:"json",contentType:"json",data:JSON.stringify(TAAPP.state),success:function(t){var e=void 0;void 0!==TAAPP.sound&&(e=TAAPP.sound.position,TAAPP.sound.destruct()),TAAPP.sound=TAAPP.createSound(t,e),TAAPP.spinner.stop()},error:function(){TAAPP.spinner.stop()}})},TAAPP.createSound=function(t,e){return soundManager.createSound({id:"speech",url:t.url+"?r="+parseInt(1e4*Math.random()),autoPlay:!1,autoLoad:!0,onplay:function(){$(".playBtn").html('<i class="icon-pause icon-white"></i>')},onresume:function(){$(".playBtn").html('<i class="icon-pause icon-white"></i>').removeClass("btn-success").addClass("btn-warning")},onpause:function(){$(".playBtn").html('<i class="icon-play icon-white"></i>').removeClass("btn-warning").addClass("btn-success")},onload:function(){TAAPP.timing=t.timing,_.each(t.timing,function(t,e){var n=1e3*t;this.onPosition(n,function(){TAAPP.TAManager.highlightWords(e)})},this);var n=1e3*(_.last(t.timing)+2);this.onPosition(n,function(){TAAPP.TAManager.highlightWords(-1)}),TAAPP.$timeline.timeline({sound:this}),void 0!==e&&this.duration>=e&&this.setPosition(e),this.play()},onfinish:function(){TAAPP.TAManager.highlightWords(-1),TAAPP.$timeline.timeline("option","position",0)},whileplaying:function(){TAAPP.$timeline.timeline("option","position",this.position)}})},TAAPP.adjustHeight=function(){var t=window.innerHeight-$("#editorRow").offset().top-50;$("#musicLibrary").height(t+"px"),TAAPP.TAManager.adjustHeight(),TAAPP.hasOwnProperty("sliders")&&TAAPP.sliders.each(function(){$(this).tabSlideOut("refresh")}),TAAPP.RawTAManager.adjustHeight(!0),TAAPP.hasOwnProperty("sliders")&&TAAPP.sliders.each(function(){$(this).tabSlideOut("refresh")})},TAAPP.playFromSelection=function(){var t,e=TAAPP.ta.getSelection(),n=TAAPP.currentRange(e.start),i=TAAPP.timing.length-1;for(console.log(n),console.log(TAAPP.timing),t=0;TAAPP.timing.length>t;t++)if(TAAPP.timing[t][0]>=n[1]){i=t-1;break}console.log(1e3*TAAPP.timing[i][1]),TAAPP.sound.stop(),TAAPP.sound.setPosition(1e3*TAAPP.timing[i][1]),TAAPP.sound.play()},TAAPP.roomTone={sedaris:{start:32.837,end:34.118,word:"{gpause}",alignedWord:"gp"},bullw:{start:123.429,end:124.388,word:"{gpause}",alignedWord:"gp"},"bullw-full":{start:315.638,end:316.095,word:"{gpause}",alignedWord:"gp"},scorerickard:{start:19.53,end:19.851,word:"{gpause}",alignedWord:"gp"},teleclip:{start:0,end:.557,word:"{gpause}",alignedWord:"gp"},bluesmobile:{start:333.334,end:334.249,word:"{gpause}",alignedWord:"gp"},photoshop:{start:747.588,end:748,word:"{gpause}",alignedWord:"gp"},obama:{start:996.424,end:1001.143,word:"{gpause}",alignedWord:"gp"},memo:{start:8.1,end:8.489,word:"{gpause}",alignedWord:"gp"},"bluesmobile-interview":{start:394.417,end:394.941,word:"{gpause}",alignedWord:"gp"}},TAAPP.underlayWizard=function(t){var e=function(t){TAAPP.current[t];var e=7>t?t:7,n=7>TAAPP.current-t?TAAPP.current-t:7,i=TAAPP.current.slice(t-e,t+1),o=_.reduce(i,function(t,e){return t+=" "+e.word},""),r=TAAPP.current.slice(t+1,t+n+1),s=_.reduce(r,function(t,e){return t+=" "+e.word},"");return[o,s]};e(t),$("#underlayE1Select").html('<option value=""></option>'),$("#underlayE2Select").html('<option value=""></option>'),_.each(TAAPP.current,function(n,i){if(n.hasOwnProperty("emphasisPoint")&&n.emphasisPoint){var o=e(i),r=document.createElement("option");$(r).val(i).html("<i>..."+o[0]+' <span class="ePtModalMarker">*</span> '+o[1]+"...</i>").appendTo("#underlayE1Select"),$("#underlayE2Select").append($.clone(r)),i===t&&$(r).prop("selected",!0)}});var n=function(t){t=parseInt(t,10),console.log("DISABLE IDX",t),$("#underlayE2Select option").each(function(e,n){console.log("idx",parseInt($(n).val(),10)),t>=parseInt($(n).val(),10)?$(n).prop("disabled",!0).prop("selected",!1):$(n).prop("disabled",!1)}).closest("select").trigger("liszt:updated")};n($("#underlayE1Select").val()),$("#underlayE2Select").trigger("liszt:updated"),$("#underlayE1Select").trigger("liszt:updated").unbind(".underlayWizard").bind("change.underlayWizard",function(){var t=$("#underlayE1Select").val();n(t)}),$("#underlayE2Select").chosen({allow_single_deselect:!0}),$("#underlayModal").modal("show")},TAAPP.createUnderlay=function(t,e,n){console.log("In create underlay. Word index",t);var i=_.reduce(TAAPP.current.slice(0,t+1),function(t,e){return void 0!==e.pauseLength?t+e.pauseLength:t+e.end-e.start},0);console.log("Speech length",i);var o=function(t){TAAPP.use("createSimpleUnderlay");var n=500,o=t[0],r=1e3*o-n,s=TAAPP.songInfo[e],a=r-15e3;15>i&&(a+=1e3*(15-i)),0>a&&(a=0);var l=r+21e3;l>s.dur&&(l=s.dur);var u=[0,3e3,r-a-500,r-a+500,r-a+5e3,r-a+6e3,l-a-3500,l-a-500],h=[0,.15,.15,.75,.75,.15,.15,0],c=document.createElement("div");$(c).musicWaveform({data:s.wfData,name:s.name,filename:s.path,dur:s.dur,len:l-a,start:a,musicGraph:s.graph,volume:{x:u,y:h},loopCallback:function(){TAAPP.use("addLoop")}}),TAAPP.$timeline.timeline("addWaveform",{elt:c,track:TAAPP.speakers.length,pos:1e3*i+a-r}),TAAPP.updateMusicVolumeDropdown()},r=function(o){TAAPP.use("createConstrainedUnderlay");var r,s,a,l=TAAPP.current[t],u=TAAPP.TAManager.tas[l.taIdx],h=TAAPP.current[t].taPos+TAAPP.current[t].word.length;if(TAAPP.TAManager.insertWords(["{gp-"+o.solo1+"}"],h,u),r=TAAPP.current[n+1],s=TAAPP.TAManager.tas[r.taIdx],a=TAAPP.current[n+1].taPos+TAAPP.current[n+1].word.length,TAAPP.TAManager.insertWords(["{gp-"+o.solo2+"}"],a,s),o.before>0)var c=_.map([0,3,o.before-1,o.before,o.before+o.solo1-1.5,o.before+o.solo1-.5,o.before+o.solo1+o.middle-1,o.before+o.solo1+o.middle,o.before+o.solo1+o.middle+o.solo2-1.5,o.before+o.solo1+o.middle+o.solo2-.5,o.total-3.5,o.total-.5],function(t){return 1e3*t}),d=[0,.15,.15,.75,.75,.15,.15,.75,.75,.15,.15,0];else var c=_.map([0,o.solo1-1.5,o.solo1-.5,o.solo1+o.middle-1,o.solo1+o.middle,o.solo1+o.middle+o.solo2-1.5,o.solo1+o.middle+o.solo2-.5,o.total-3.5,o.total-.5],function(t){return 1e3*t}),d=[.75,.75,.15,.15,.75,.75,.15,.15,0];var p=TAAPP.songInfo[e],f=document.createElement("div");$(f).musicWaveform({data:p.wfData,name:p.name,filename:p.path,dur:p.dur,len:1e3*o.total,currentBeats:o.beats,musicGraph:p.graph,volume:{x:c,y:d},loopCallback:function(){TAAPP.use("addLoop")}}),TAAPP.$timeline.timeline("addWaveform",{elt:f,track:TAAPP.speakers.length,pos:1e3*(i-o.before+.5)}),TAAPP.updateMusicVolumeDropdown()};if(TAAPP.spinner.spin($("body")[0]),void 0===n){if(TAAPP.songInfo[e].hasOwnProperty("changepoints"))o(TAAPP.songInfo[e].changepoints),TAAPP.spinner.stop();else{var s=TAAPP.songInfo[e].basename;$.getJSON("changepoints/"+s,function(t){TAAPP.songInfo[e].changepoints=t.changepoints,o(t.changepoints),TAAPP.spinner.stop()})}for(var a=TAAPP.current.slice(t+1),l=0;"sp"===a[0].alignedWord||"{BR}"===a[0].alignedWord||"gp"===a[0].alignedWord;){l+=1;var u=a.splice(0,1)[0];console.log("REMOVED",u),TAAPP.TAManager.pruneCurrent(t+1,t+2,!1)}var h=TAAPP.current[t],c=TAAPP.TAManager.tas[h.taIdx],d=TAAPP.current[t].taPos+TAAPP.current[t].word.length;TAAPP.TAManager.insertWords(["{gp-6}"],d,c)}else{for(var p=TAAPP.current.slice(t+1,n+1),l=0;"sp"===p[0].alignedWord||"{BR}"===p[0].alignedWord||"gp"===p[0].alignedWord;){l+=1;var u=p.splice(0,1)[0];console.log("REMOVED",u),TAAPP.TAManager.pruneCurrent(t+1,t+2,!1)}n-=l;for(var a=TAAPP.current.slice(n+1);"sp"===a[0].alignedWord||"{BR}"===a[0].alignedWord||"gp"===a[0].alignedWord;){l+=1;var u=a.splice(0,1)[0];console.log("REMOVED2",u),TAAPP.TAManager.pruneCurrent(n+1,n+2,!1)}l>0&&TAAPP.TAManager.refresh();var f=_.reduce(p,function(t,e){return e.hasOwnProperty("pauseLength")&&void 0!==e.pauseLength?t+e.pauseLength:t+e.end-e.start},0),g=15.5;g>i&&(g=i);var s=TAAPP.songInfo[e].basename;$.getJSON("underlayRetarget/"+s+"/"+f+"/"+g+"/15.0",function(t){r(t),TAAPP.spinner.stop()})}},TAAPP.buildWaveform=function(t,e){var n=[];if("textaligned"===e)console.log("SPEAKERS",TAAPP.speakers),_.each(TAAPP.speakers,function(e){var i=document.createElement("div");console.log("creating text aligned waveform"),$(i).textAlignedWaveform({dur:t.duration,len:t.duration,filename:t.url,name:"Speech - "+e,currentWords:TAAPP.current,emphasisPointFunc:TAAPP.underlayWizard}),TAAPP.currentWaveforms[e]=i,TAAPP.TAManager.textAlignedWfs=TAAPP.currentWaveforms,n.push(i)});else{var i=document.createElement("div");$(i).waveform({dur:t.duration,len:t.duration,name:t.id}),n.push(i)}return console.log("in buildWaveform",i),1===TAAPP.speakers.length?$.getJSON("static/wfData/"+TAAPP.speech+"44.wav.json",function(t){$(n).wf({data:t.mid})}):_.each(TAAPP.speakers,function(t,e){$.getJSON("static/wfData/"+TAAPP.speech+"44-"+t+".wav.json",function(t){$(n[e]).wf({data:t.mid})})}),n},TAAPP.origSoundURL=function(){return void 0!==TAAPP.env&&"production"===TAAPP.env?"http://d1qv8gm47dmlns.cloudfront.net/mp3s/"+TAAPP.speech+".mp3":"static/"+TAAPP.speech+".mp3"},TAAPP.loadOriginal=function(){var t={url:TAAPP.origSoundURL(),id:"orig",autoLoad:!0,onload:function(){console.log("loaded original sound");var t=TAAPP.buildWaveform(this,"textaligned"),e=$.map(t,function(t,e){return{elt:t,track:e,pos:0}});TAAPP.$timeline.timeline({tracks:TAAPP.speakers.length+1,pxPerMs:.005,width:"100%",wf:e,linkGroups:[t]}),console.log("calling adjust height after timeline creation"),TAAPP.adjustHeight()},autoPlay:!1};void 0===TAAPP.origSound?soundManager.onready(function(){TAAPP.origSound=soundManager.createSound(t)}):(TAAPP.origSound.destruct(),TAAPP.origSound=soundManager.createSound(t))},TAAPP.use=function(t){TAAPP.state.usageData.hasOwnProperty(t)&&void 0!==TAAPP.state.usageData[t]?TAAPP.state.usageData[t]+=1:TAAPP.state.usageData[t]=1},TAAPP.reset=function(){TAAPP.state.usageData={},TAAPP.state.speechAudio=TAAPP.speech+"44.wav",TAAPP.sound&&(TAAPP.sound.destruct(),TAAPP.sound=void 0),TAAPP.current=void 0,TAAPP.timing=void 0,TAAPP.dupes=void 0,TAAPP.currentWaveforms={};try{$(".timeline").timeline("destroy")}catch(t){}TAAPP.$timeline=$(".timeline"),$(".TAManager").html(""),TAAPP.TAManager=void 0,$(".rawTAManager").html(""),TAAPP.RawTAManager=void 0,$(".breathDropdown").html(""),$(".dupeList").html(""),TAAPP.state.outfile=TAAPP.speech+"-"+TAAPP.outfile,$(".dlLink").prop("href","download/"+TAAPP.state.outfile),$.getJSON("alignment/"+TAAPP.speech,function(t){var e=t.words;TAAPP.state.speechText=t.speechText,TAAPP.words=e,_.each(TAAPP.words,function(t,e){t.origPos=e}),TAAPP.current=clone(TAAPP.words),TAAPP.speakers=_.chain(TAAPP.words).map(function(t){return t.speaker}).filter(function(t){return!_.isUndefined(t)}).uniq().value(),TAAPP.TAManager=new TextAreaManager($(".TAManager"),TAAPP.speakers,TAAPP.words,TAAPP.current),TAAPP.updateDupes(),TAAPP._createBreathDropdown(),TAAPP.loadOriginal()})},TAAPP.updateDupes=function(){$.ajax({url:"dupes",type:"POST",dataType:"json",contentType:"json",data:JSON.stringify(TAAPP.state),success:function(t){TAAPP.dupes=t,TAAPP._preprocessDupes(),TAAPP.RawTAManager=new TextAreaManager($(".rawTAManager"),TAAPP.speakers,TAAPP.words,clone(TAAPP.current)),TAAPP.TAManager.insertDupeOverlays(TAAPP.dupes,TAAPP.dupeInfo,!0),TAAPP.RawTAManager.insertDupeOverlays(TAAPP.dupes,TAAPP.dupeInfo,!0)}})},TAAPP._preprocessDupes=function(){var t=_.flatten(_.compact(_.map(TAAPP.dupes,function(t,e){return 1!==t.length?_.map(t,function(n){return{firstWord:n[0][0],dupe:t,dElt:n,idxInDupes:e}}):!1}))),e=_.pluck(t,"firstWord");TAAPP.dupeInfo={starts:t,firsts:e}},TAAPP.drawScript=function(){_.each(TAAPP.dupes,function(t,e){var n=document.createElement("button"),i=document.createElement("button"),o=document.createElement("div");$(n).html('<i class="icon-play icon-white"></i>').addClass("btn btn-success").prop("type","button"),$(i).html('<i class="icon-plus icon-white"></i>').addClass("btn btn-primary"),$(o).addClass("scriptLine");var r=TAAPP.words[t[0][0][1]],s="";if(r.hasOwnProperty("speaker")&&(s=r.speaker+": "),1===t.length){$(n).click(function(){TAAPP.origSound.play({from:1e3*TAAPP.words[t[0][0][0]].start,to:1e3*TAAPP.words[t[0][0][1]].end})}),$(i).click(function(){var e=t[0][0];TAAPP.TAManager.insertWords(_.range(e[0],e[1]+1))});var a=document.createElement("div");$(a).addClass("btn-group").append(n).append(i);var l=document.createElement("span");$(l).text(s+t[0][1]).addClass("scriptLineText"),$(o).append(a).append(l),$(".dupeList").append(o)}else{var u=_.map(t,function(t,e){var n=document.createElement("option");return $(n).val(e).text(t[1]),n}),h=document.createElement("select");$(n).click(function(){var e=$(h).val(),n=t[e][0],i=TAAPP.words[n[0]].start,o=TAAPP.words[n[1]].end;TAAPP.origSound.play({from:1e3*i,to:1e3*o})}),$(i).click(function(){var e=$(h).val(),n=t[e][0];TAAPP.TAManager.insertWords(_.range(n[0],n[1]+1))}),$(h).append(u).prop("name","dupe"+e).addClass("span10"),$(o).addClass("input-prepend").append(n).append(i).append(h),$(".dupeList").append(o)}}),TAAPP.adjustHeight()},TAAPP.reauthor=function(){TAAPP.sound&&TAAPP.sound.pause(),TAAPP.TAManager.highlightWords(-1),TAAPP.generateAudio()},TAAPP.rewind=function(){TAAPP.sound&&TAAPP.sound.setPosition(0)},TAAPP.togglePlay=function(){!TAAPP.sound||1!==TAAPP.sound.playState&&TAAPP.$timeline.timeline("isDirty")?TAAPP.reauthor():TAAPP.sound.togglePause()},TAAPP._timelineClickMode="marker",TAAPP.toggleMode=function(t){"split"===t&&"split"===TAAPP._timelineClickMode?TAAPP._timelineClickMode="marker":"split"===t&&"split"!==TAAPP._timelineClickMode&&(TAAPP._timelineClickMode="split"),TAAPP.$timeline.timeline({clickMode:TAAPP._timelineClickMode})},TAAPP._zoom=function(t){var e=TAAPP.$timeline.timeline("option","pxPerMs");TAAPP.$timeline.timeline({pxPerMs:e*t})},TAAPP.zoomIn=function(){TAAPP._zoom(2)},TAAPP.zoomOut=function(){TAAPP._zoom(.5)},TAAPP.songInfo={},TAAPP.addSongToTimeline=function(t){var e=TAAPP.songInfo[t],n=document.createElement("div");$(n).musicWaveform({data:e.wfData,name:e.name,filename:e.path,dur:e.dur,len:e.dur,musicGraph:e.graph,loopCallback:function(){TAAPP.use("addLoop")}});var i=TAAPP.$timeline.timeline("option","tracks");TAAPP.$timeline.timeline("addWaveform",{elt:n,track:i-1,pos:0}),TAAPP.updateMusicVolumeDropdown()},TAAPP.updateMusicVolumeDropdown=function(){var t=TAAPP.$timeline.timeline("option","wf"),e=$("#musicVolumeItemTemplate").html();$(".musicVolumeDropdown").html(""),_.each(t,function(t){var n=$(t.elt);if("musicWaveform"===n.wf("waveformClass")){var i=TAAPP.songInfo[n.wf("option","name")];console.log("SONG INFO",i,n.wf("option","name"));var o=_.template(e,i);$(o).appendTo(".musicVolumeDropdown").find(".musicVolumeSlider").slider({range:"min",value:$(t.elt).wf("option","globalVolume"),min:0,max:1,step:.01,slide:function(t,e){n.wf("option","globalVolume",e.value)}})}})},TAAPP.addSongToLibrary=function(t){var e=$("#songLibraryTemplate").html();TAAPP.songInfo[t.name]=t,$(_.template(e,{name:t.name,title:t.title,artist:t.artist})).appendTo(".musicLibrary table").find("button").click(function(){TAAPP.addSongToTimeline($(this).attr("data-song-name"))});var n=$("#underlaySongTemplate").html(),i=$(_.template(n,{name:t.name,title:t.title,artist:t.artist})).appendTo("#underlaySongSelect");1===$("#underlaySongSelect option").length&&i.prop("selected",!0),$("#underlaySongSelect").trigger("liszt:updated")},TAAPP.uploadSong=function(t){var e=new FormData(t);return TAAPP.spinner.spin($("body")[0]),$.ajax({url:"uploadSong",type:"POST",success:function(e){$(t).find('[data-dismiss="fileupload"]').trigger("click"),TAAPP.addSongToLibrary(e),TAAPP.spinner.stop()},error:function(){TAAPP.spinner.stop()},data:e,cache:!1,contentType:!1,processData:!1}),!1},TAAPP.loadSite=function(){$("#underlayE2Select").chosen({allow_single_deselect:!0}),$("#underlayE1Select").chosen(),$("#underlaySongSelect").chosen(),$(".gPause").click(function(){TAAPP.use("insertPause");var t=clone(TAAPP.roomTone[TAAPP.speech]);return t.pauseLength=parseFloat($(".gpLen").val()),t.word="{gp-"+t.pauseLength+"}",TAAPP.TAManager.insertWords([t.word]),!1}),$(".genLink").click(TAAPP.reauthor),$(".playBtn").click(TAAPP.togglePlay),$(".rewindBtn").click(TAAPP.rewind),$(".zoomInBtn").click(TAAPP.zoomIn),$(".zoomOutBtn").click(TAAPP.zoomOut),$(".razorBtn").click(function(){$(this).toggleClass("buttonActive"),TAAPP.toggleMode("split")}),$("#songUploadForm").submit(function(){return TAAPP.uploadSong($("#songUploadForm")[0]),!1}),$(".clearWords").click(function(){TAAPP.TAManager.pruneAll()}),$(".emphPt").click(function(){TAAPP.TAManager.insertEmphasisPoint()}),$(".createUnderlayBtn").click(function(){var t=parseInt($("#underlayE1Select").val(),10),e=$("#underlaySongSelect").val(),n=$("#underlayE2Select").val();""===e||void 0===e||isNaN(t)||void 0===t||(""===n?TAAPP.createUnderlay(t,e):TAAPP.createUnderlay(t,e,parseInt(n,10)))}),$(window).resize(function(){TAAPP.adjustHeight(),TAAPP.TAManager.insertDupeOverlays(TAAPP.dupes,TAAPP.dupeInfo,!0)}),TAAPP._commandKey=!1,$(document).keydown(function(t){32===t.which?TAAPP.togglePlay():13===t.which?TAAPP.reauthor():85===t.which?TAAPP.underlayWizard():82===t.which?$(".origSliderHandle").trigger("click"):70===t.which?TAAPP._commandKey||$(".browserSliderHandle").trigger("click"):(91===t.which||93===t.which)&&(TAAPP._commandKey=!0)}),$(document).keyup(function(t){(91===t.which||93===t.which)&&(TAAPP._commandKey=!1)}),$("#editorRow"),TAAPP.sliders=$(".tabSlider"),$(".origSlider").tabSlideOut({tabHandle:".origSliderHandle",tabLocation:"right",speed:300,action:"click",topPos:"0px",leftPos:"20px",pathToTabImage:"static/img/origSlider.png",imageHeight:"200px",imageWidth:"20px",height:function(){return $("#editorRow").height()},topReferenceElement:$("#editorRow")}),$(".browserSlider").tabSlideOut({tabHandle:".browserSliderHandle",tabLocation:"right",speed:300,action:"click",topPos:"220px",leftPos:"20px",pathToTabImage:"static/img/musicBrowserSlider.png",imageHeight:"200px",imageWidth:"20px",topReferenceElement:$("#editorRow"),height:function(){return $("#editorRow").height()}})},TAAPP.newProject=function(t){void 0===t?(TAAPP.speech=$("select[name=speechSelect]").val(),history.pushState({speech:TAAPP.speech},null,"?speech="+TAAPP.speech)):TAAPP.speech=t,TAAPP.reset()},window.onpopstate=function(t){null!=t.state&&(TAAPP.speech=t.state.speech,""===TAAPP.speech?$("#setupModal").modal("show"):($("#setupModal").modal("hide"),TAAPP.reset()))},$(function(){$("#speechSelect").chosen(),TAAPP.outfile=Math.random().toString(36).substring(12);var t=getParameterByName("speech");history.replaceState({speech:t},null,null),$(document).on("keydown","input",function(t){t.stopPropagation()}),$("#setupModal").modal({show:""===t}).find(".createProjectBtn").click(function(){TAAPP.newProject()}),""!==t&&TAAPP.newProject(t),TAAPP.loadSite()}),function(X,l,n){var L=function(h){var j=function(e){function o(t,e){var i=j.defaults.columns,o=t.aoColumns.length,i=h.extend({},j.models.oColumn,i,{sSortingClass:t.oClasses.sSortable,sSortingClassJUI:t.oClasses.sSortJUI,nTh:e?e:l.createElement("th"),sTitle:i.sTitle?i.sTitle:e?e.innerHTML:"",aDataSort:i.aDataSort?i.aDataSort:[o],mData:i.mData?i.oDefaults:o});t.aoColumns.push(i),t.aoPreSearchCols[o]===n||null===t.aoPreSearchCols[o]?t.aoPreSearchCols[o]=h.extend({},j.models.oSearch):(i=t.aoPreSearchCols[o],i.bRegex===n&&(i.bRegex=!0),i.bSmart===n&&(i.bSmart=!0),i.bCaseInsensitive===n&&(i.bCaseInsensitive=!0)),m(t,o,null)}function m(t,e,i){var o=t.aoColumns[e];i!==n&&null!==i&&(i.mDataProp&&!i.mData&&(i.mData=i.mDataProp),i.sType!==n&&(o.sType=i.sType,o._bAutoType=!1),h.extend(o,i),p(o,i,"sWidth","sWidthOrig"),i.iDataSort!==n&&(o.aDataSort=[i.iDataSort]),p(o,i,"aDataSort"));var r=o.mRender?Q(o.mRender):null,s=Q(o.mData);o.fnGetData=function(t,e){var n=s(t,e);return o.mRender&&e&&""!==e?r(n,e,t):n},o.fnSetData=L(o.mData),t.oFeatures.bSort||(o.bSortable=!1),!o.bSortable||-1==h.inArray("asc",o.asSorting)&&-1==h.inArray("desc",o.asSorting)?(o.sSortingClass=t.oClasses.sSortableNone,o.sSortingClassJUI=""):-1==h.inArray("asc",o.asSorting)&&-1==h.inArray("desc",o.asSorting)?(o.sSortingClass=t.oClasses.sSortable,o.sSortingClassJUI=t.oClasses.sSortJUI):-1!=h.inArray("asc",o.asSorting)&&-1==h.inArray("desc",o.asSorting)?(o.sSortingClass=t.oClasses.sSortableAsc,o.sSortingClassJUI=t.oClasses.sSortJUIAscAllowed):-1==h.inArray("asc",o.asSorting)&&-1!=h.inArray("desc",o.asSorting)&&(o.sSortingClass=t.oClasses.sSortableDesc,o.sSortingClassJUI=t.oClasses.sSortJUIDescAllowed)}function k(t){if(!1===t.oFeatures.bAutoWidth)return!1;da(t);for(var e=0,n=t.aoColumns.length;n>e;e++)t.aoColumns[e].nTh.style.width=t.aoColumns[e].sWidth}function G(t,e){var n=r(t,"bVisible");return"number"==typeof n[e]?n[e]:null}function R(t,e){var n=r(t,"bVisible"),n=h.inArray(e,n);return-1!==n?n:null}function t(t){return r(t,"bVisible").length}function r(t,e){var n=[];return h.map(t.aoColumns,function(t,i){t[e]&&n.push(i)}),n}function B(t){for(var e=j.ext.aTypes,n=e.length,i=0;n>i;i++){var o=e[i](t);if(null!==o)return o}return"string"}function u(t,e){for(var n=e.split(","),i=[],o=0,r=t.aoColumns.length;r>o;o++)for(var s=0;r>s;s++)if(t.aoColumns[o].sName==n[s]){i.push(s);break}return i}function M(t){for(var e="",n=0,i=t.aoColumns.length;i>n;n++)e+=t.aoColumns[n].sName+",";return e.length==i?"":e.slice(0,-1)}function ta(t,e,n,i){var r,s,a,l,u;if(e)for(r=e.length-1;r>=0;r--){var c=e[r].aTargets;for(h.isArray(c)||D(t,1,"aTargets must be an array of targets, not a "+typeof c),s=0,a=c.length;a>s;s++)if("number"==typeof c[s]&&c[s]>=0){for(;t.aoColumns.length<=c[s];)o(t);i(c[s],e[r])}else if("number"==typeof c[s]&&0>c[s])i(t.aoColumns.length+c[s],e[r]);else if("string"==typeof c[s])for(l=0,u=t.aoColumns.length;u>l;l++)("_all"==c[s]||h(t.aoColumns[l].nTh).hasClass(c[s]))&&i(l,e[r])}if(n)for(r=0,t=n.length;t>r;r++)i(r,n[r])}function H(t,e){var n;n=h.isArray(e)?e.slice():h.extend(!0,{},e);var i=t.aoData.length,o=h.extend(!0,{},j.models.oRow);o._aData=n,t.aoData.push(o);for(var r,o=0,s=t.aoColumns.length;s>o;o++)n=t.aoColumns[o],"function"==typeof n.fnRender&&n.bUseRendered&&null!==n.mData?F(t,i,o,S(t,i,o)):F(t,i,o,v(t,i,o)),n._bAutoType&&"string"!=n.sType&&(r=v(t,i,o,"type"),null!==r&&""!==r&&(r=B(r),null===n.sType?n.sType=r:n.sType!=r&&"html"!=n.sType&&(n.sType="string")));return t.aiDisplayMaster.push(i),t.oFeatures.bDeferRender||ea(t,i),i}function ua(t){var e,n,i,o,r,s,a;if(t.bDeferLoading||null===t.sAjaxSource)for(e=t.nTBody.firstChild;e;){if("TR"==e.nodeName.toUpperCase())for(n=t.aoData.length,e._DT_RowIndex=n,t.aoData.push(h.extend(!0,{},j.models.oRow,{nTr:e})),t.aiDisplayMaster.push(n),r=e.firstChild,i=0;r;)s=r.nodeName.toUpperCase(),("TD"==s||"TH"==s)&&(F(t,n,i,h.trim(r.innerHTML)),i++),r=r.nextSibling;e=e.nextSibling}for(o=T(t),i=[],e=0,n=o.length;n>e;e++)for(r=o[e].firstChild;r;)s=r.nodeName.toUpperCase(),("TD"==s||"TH"==s)&&i.push(r),r=r.nextSibling;for(n=0,o=t.aoColumns.length;o>n;n++){a=t.aoColumns[n],null===a.sTitle&&(a.sTitle=a.nTh.innerHTML);var l,u,c=a._bAutoType,d="function"==typeof a.fnRender,p=null!==a.sClass,f=a.bVisible;if(c||d||p||!f)for(s=0,e=t.aoData.length;e>s;s++)r=t.aoData[s],l=i[s*o+n],c&&"string"!=a.sType&&(u=v(t,s,n,"type"),""!==u&&(u=B(u),null===a.sType?a.sType=u:a.sType!=u&&"html"!=a.sType&&(a.sType="string"))),a.mRender?l.innerHTML=v(t,s,n,"display"):a.mData!==n&&(l.innerHTML=v(t,s,n,"display")),d&&(u=S(t,s,n),l.innerHTML=u,a.bUseRendered&&F(t,s,n,u)),p&&(l.className+=" "+a.sClass),f?r._anHidden[n]=null:(r._anHidden[n]=l,l.parentNode.removeChild(l)),a.fnCreatedCell&&a.fnCreatedCell.call(t.oInstance,l,v(t,s,n,"display"),r._aData,s,n)}if(0!==t.aoRowCreatedCallback.length)for(e=0,n=t.aoData.length;n>e;e++)r=t.aoData[e],A(t,"aoRowCreatedCallback",null,[r.nTr,r._aData,e])}function I(t,e){return e._DT_RowIndex!==n?e._DT_RowIndex:null}function fa(t,e,n){for(var e=J(t,e),i=0,t=t.aoColumns.length;t>i;i++)if(e[i]===n)return i;return-1}function Y(t,e,n,i){for(var o=[],r=0,s=i.length;s>r;r++)o.push(v(t,e,i[r],n));return o}function v(t,e,i,o){var r=t.aoColumns[i];if((i=r.fnGetData(t.aoData[e]._aData,o))===n)return t.iDrawError!=t.iDraw&&null===r.sDefaultContent&&(D(t,0,"Requested unknown parameter "+("function"==typeof r.mData?"{mData function}":"'"+r.mData+"'")+" from the data source for row "+e),t.iDrawError=t.iDraw),r.sDefaultContent;if(null===i&&null!==r.sDefaultContent)i=r.sDefaultContent;else if("function"==typeof i)return i();return"display"==o&&null===i?"":i}function F(t,e,n,i){t.aoColumns[n].fnSetData(t.aoData[e]._aData,i)}function Q(t){if(null===t)return function(){return null};if("function"==typeof t)return function(e,n,i){return t(e,n,i)};if("string"==typeof t&&(-1!==t.indexOf(".")||-1!==t.indexOf("["))){var e=function(t,i,o){var r,s=o.split(".");if(""!==o){var a=0;for(r=s.length;r>a;a++){if(o=s[a].match(U)){s[a]=s[a].replace(U,""),""!==s[a]&&(t=t[s[a]]),r=[],s.splice(0,a+1);for(var s=s.join("."),a=0,l=t.length;l>a;a++)r.push(e(t[a],i,s));t=o[0].substring(1,o[0].length-1),t=""===t?r:r.join(t);break}if(null===t||t[s[a]]===n)return n;t=t[s[a]]}}return t};return function(n,i){return e(n,i,t)}}return function(e){return e[t]}}function L(t){if(null===t)return function(){};if("function"==typeof t)return function(e,n){t(e,"set",n)};if("string"==typeof t&&(-1!==t.indexOf(".")||-1!==t.indexOf("["))){var e=function(t,i,o){var r,s,o=o.split("."),a=0;for(s=o.length-1;s>a;a++){if(r=o[a].match(U)){o[a]=o[a].replace(U,""),t[o[a]]=[],r=o.slice(),r.splice(0,a+1),s=r.join(".");for(var l=0,u=i.length;u>l;l++)r={},e(r,i[l],s),t[o[a]].push(r);return}(null===t[o[a]]||t[o[a]]===n)&&(t[o[a]]={}),t=t[o[a]]}t[o[o.length-1].replace(U,"")]=i};return function(n,i){return e(n,i,t)}}return function(e,n){e[t]=n
}}function Z(t){for(var e=[],n=t.aoData.length,i=0;n>i;i++)e.push(t.aoData[i]._aData);return e}function ga(t){t.aoData.splice(0,t.aoData.length),t.aiDisplayMaster.splice(0,t.aiDisplayMaster.length),t.aiDisplay.splice(0,t.aiDisplay.length),y(t)}function ha(t,e){for(var n=-1,i=0,o=t.length;o>i;i++)t[i]==e?n=i:t[i]>e&&t[i]--;-1!=n&&t.splice(n,1)}function S(t,e,n){var i=t.aoColumns[n];return i.fnRender({iDataRow:e,iDataColumn:n,oSettings:t,aData:t.aoData[e]._aData,mDataProp:i.mData},v(t,e,n,"display"))}function ea(t,e){var n,i=t.aoData[e];if(null===i.nTr){i.nTr=l.createElement("tr"),i.nTr._DT_RowIndex=e,i._aData.DT_RowId&&(i.nTr.id=i._aData.DT_RowId),i._aData.DT_RowClass&&(i.nTr.className=i._aData.DT_RowClass);for(var o=0,r=t.aoColumns.length;r>o;o++){var s=t.aoColumns[o];n=l.createElement(s.sCellType),n.innerHTML="function"!=typeof s.fnRender||s.bUseRendered&&null!==s.mData?v(t,e,o,"display"):S(t,e,o),null!==s.sClass&&(n.className=s.sClass),s.bVisible?(i.nTr.appendChild(n),i._anHidden[o]=null):i._anHidden[o]=n,s.fnCreatedCell&&s.fnCreatedCell.call(t.oInstance,n,v(t,e,o,"display"),i._aData,e,o)}A(t,"aoRowCreatedCallback",null,[i.nTr,i._aData,e])}}function va(t){var e,n,i;if(0!==h("th, td",t.nTHead).length)for(e=0,i=t.aoColumns.length;i>e;e++)n=t.aoColumns[e].nTh,n.setAttribute("role","columnheader"),t.aoColumns[e].bSortable&&(n.setAttribute("tabindex",t.iTabIndex),n.setAttribute("aria-controls",t.sTableId)),null!==t.aoColumns[e].sClass&&h(n).addClass(t.aoColumns[e].sClass),t.aoColumns[e].sTitle!=n.innerHTML&&(n.innerHTML=t.aoColumns[e].sTitle);else{var o=l.createElement("tr");for(e=0,i=t.aoColumns.length;i>e;e++)n=t.aoColumns[e].nTh,n.innerHTML=t.aoColumns[e].sTitle,n.setAttribute("tabindex","0"),null!==t.aoColumns[e].sClass&&h(n).addClass(t.aoColumns[e].sClass),o.appendChild(n);h(t.nTHead).html("")[0].appendChild(o),V(t.aoHeader,t.nTHead)}if(h(t.nTHead).children("tr").attr("role","row"),t.bJUI)for(e=0,i=t.aoColumns.length;i>e;e++){n=t.aoColumns[e].nTh,o=l.createElement("div"),o.className=t.oClasses.sSortJUIWrapper,h(n).contents().appendTo(o);var r=l.createElement("span");r.className=t.oClasses.sSortIcon,o.appendChild(r),n.appendChild(o)}if(t.oFeatures.bSort)for(e=0;t.aoColumns.length>e;e++)!1!==t.aoColumns[e].bSortable?ia(t,t.aoColumns[e].nTh,e):h(t.aoColumns[e].nTh).addClass(t.oClasses.sSortableNone);if(""!==t.oClasses.sFooterTH&&h(t.nTFoot).children("tr").children("th").addClass(t.oClasses.sFooterTH),null!==t.nTFoot)for(n=N(t,null,t.aoFooter),e=0,i=t.aoColumns.length;i>e;e++)n[e]&&(t.aoColumns[e].nTf=n[e],t.aoColumns[e].sClass&&h(n[e]).addClass(t.aoColumns[e].sClass))}function W(t,e,i){var o,r,s,a,l=[],u=[],h=t.aoColumns.length;for(i===n&&(i=!1),o=0,r=e.length;r>o;o++){for(l[o]=e[o].slice(),l[o].nTr=e[o].nTr,s=h-1;s>=0;s--)!t.aoColumns[s].bVisible&&!i&&l[o].splice(s,1);u.push([])}for(o=0,r=l.length;r>o;o++){if(t=l[o].nTr)for(;s=t.firstChild;)t.removeChild(s);for(s=0,e=l[o].length;e>s;s++)if(a=h=1,u[o][s]===n){for(t.appendChild(l[o][s].cell),u[o][s]=1;l[o+h]!==n&&l[o][s].cell==l[o+h][s].cell;)u[o+h][s]=1,h++;for(;l[o][s+a]!==n&&l[o][s].cell==l[o][s+a].cell;){for(i=0;h>i;i++)u[o+i][s+a]=1;a++}l[o][s].cell.rowSpan=h,l[o][s].cell.colSpan=a}}}function x(e){var i=A(e,"aoPreDrawCallback","preDraw",[e]);if(-1!==h.inArray(!1,i))E(e,!1);else{var o,r,i=[],s=0,a=e.asStripeClasses.length;if(o=e.aoOpenRows.length,e.bDrawing=!0,e.iInitDisplayStart!==n&&-1!=e.iInitDisplayStart&&(e._iDisplayStart=e.oFeatures.bServerSide?e.iInitDisplayStart:e.iInitDisplayStart>=e.fnRecordsDisplay()?0:e.iInitDisplayStart,e.iInitDisplayStart=-1,y(e)),e.bDeferLoading)e.bDeferLoading=!1,e.iDraw++;else if(e.oFeatures.bServerSide){if(!e.bDestroying&&!wa(e))return}else e.iDraw++;if(0!==e.aiDisplay.length){var u=e._iDisplayStart;for(r=e._iDisplayEnd,e.oFeatures.bServerSide&&(u=0,r=e.aoData.length);r>u;u++){var c=e.aoData[e.aiDisplay[u]];null===c.nTr&&ea(e,e.aiDisplay[u]);var d=c.nTr;if(0!==a){var p=e.asStripeClasses[s%a];c._sRowStripe!=p&&(h(d).removeClass(c._sRowStripe).addClass(p),c._sRowStripe=p)}if(A(e,"aoRowCallback",null,[d,e.aoData[e.aiDisplay[u]]._aData,s,u]),i.push(d),s++,0!==o)for(c=0;o>c;c++)if(d==e.aoOpenRows[c].nParent){i.push(e.aoOpenRows[c].nTr);break}}}else i[0]=l.createElement("tr"),e.asStripeClasses[0]&&(i[0].className=e.asStripeClasses[0]),o=e.oLanguage,a=o.sZeroRecords,1!=e.iDraw||null===e.sAjaxSource||e.oFeatures.bServerSide?o.sEmptyTable&&0===e.fnRecordsTotal()&&(a=o.sEmptyTable):a=o.sLoadingRecords,o=l.createElement("td"),o.setAttribute("valign","top"),o.colSpan=t(e),o.className=e.oClasses.sRowEmpty,o.innerHTML=ja(e,a),i[s].appendChild(o);if(A(e,"aoHeaderCallback","header",[h(e.nTHead).children("tr")[0],Z(e),e._iDisplayStart,e.fnDisplayEnd(),e.aiDisplay]),A(e,"aoFooterCallback","footer",[h(e.nTFoot).children("tr")[0],Z(e),e._iDisplayStart,e.fnDisplayEnd(),e.aiDisplay]),s=l.createDocumentFragment(),o=l.createDocumentFragment(),e.nTBody){if(a=e.nTBody.parentNode,o.appendChild(e.nTBody),!e.oScroll.bInfinite||!e._bInitComplete||e.bSorted||e.bFiltered)for(;o=e.nTBody.firstChild;)e.nTBody.removeChild(o);for(o=0,r=i.length;r>o;o++)s.appendChild(i[o]);e.nTBody.appendChild(s),null!==a&&a.appendChild(e.nTBody)}A(e,"aoDrawCallback","draw",[e]),e.bSorted=!1,e.bFiltered=!1,e.bDrawing=!1,e.oFeatures.bServerSide&&(E(e,!1),e._bInitComplete||$(e))}}function aa(t){t.oFeatures.bSort?O(t,t.oPreviousSearch):t.oFeatures.bFilter?K(t,t.oPreviousSearch):(y(t),x(t))}function xa(t){var e=h("<div></div>")[0];t.nTable.parentNode.insertBefore(e,t.nTable),t.nTableWrapper=h('<div id="'+t.sTableId+'_wrapper" class="'+t.oClasses.sWrapper+'" role="grid"></div>')[0],t.nTableReinsertBefore=t.nTable.nextSibling;for(var n,i,o,r,s,a,l,u=t.nTableWrapper,c=t.sDom.split(""),d=0;c.length>d;d++){if(i=0,o=c[d],"<"==o){if(r=h("<div></div>")[0],s=c[d+1],"'"==s||'"'==s){for(a="",l=2;c[d+l]!=s;)a+=c[d+l],l++;"H"==a?a=t.oClasses.sJUIHeader:"F"==a&&(a=t.oClasses.sJUIFooter),-1!=a.indexOf(".")?(s=a.split("."),r.id=s[0].substr(1,s[0].length-1),r.className=s[1]):"#"==a.charAt(0)?r.id=a.substr(1,a.length-1):r.className=a,d+=l}u.appendChild(r),u=r}else if(">"==o)u=u.parentNode;else if("l"==o&&t.oFeatures.bPaginate&&t.oFeatures.bLengthChange)n=ya(t),i=1;else if("f"==o&&t.oFeatures.bFilter)n=za(t),i=1;else if("r"==o&&t.oFeatures.bProcessing)n=Aa(t),i=1;else if("t"==o)n=Ba(t),i=1;else if("i"==o&&t.oFeatures.bInfo)n=Ca(t),i=1;else if("p"==o&&t.oFeatures.bPaginate)n=Da(t),i=1;else if(0!==j.ext.aoFeatures.length)for(r=j.ext.aoFeatures,l=0,s=r.length;s>l;l++)if(o==r[l].cFeature){(n=r[l].fnInit(t))&&(i=1);break}1==i&&null!==n&&("object"!=typeof t.aanFeatures[o]&&(t.aanFeatures[o]=[]),t.aanFeatures[o].push(n),u.appendChild(n))}e.parentNode.replaceChild(t.nTableWrapper,e)}function V(t,e){var n,i,o,r,s,a,l,u,c,d,p=h(e).children("tr");for(t.splice(0,t.length),o=0,a=p.length;a>o;o++)t.push([]);for(o=0,a=p.length;a>o;o++)for(n=p[o],i=n.firstChild;i;){if("TD"==i.nodeName.toUpperCase()||"TH"==i.nodeName.toUpperCase()){for(u=1*i.getAttribute("colspan"),c=1*i.getAttribute("rowspan"),u=u&&0!==u&&1!==u?u:1,c=c&&0!==c&&1!==c?c:1,r=0,s=t[o];s[r];)r++;for(l=r,d=1===u?!0:!1,s=0;u>s;s++)for(r=0;c>r;r++)t[o+r][l+s]={cell:i,unique:d},t[o+r].nTr=n}i=i.nextSibling}}function N(t,e,n){var i=[];n||(n=t.aoHeader,e&&(n=[],V(n,e)));for(var e=0,o=n.length;o>e;e++)for(var r=0,s=n[e].length;s>r;r++)!n[e][r].unique||i[r]&&t.bSortCellsTop||(i[r]=n[e][r].cell);return i}function wa(t){if(t.bAjaxDataGet){t.iDraw++,E(t,!0);var e=Ea(t);return ka(t,e),t.fnServerData.call(t.oInstance,t.sAjaxSource,e,function(e){Fa(t,e)},t),!1}return!0}function Ea(t){var e,n,i,o,r=t.aoColumns.length,s=[];for(s.push({name:"sEcho",value:t.iDraw}),s.push({name:"iColumns",value:r}),s.push({name:"sColumns",value:M(t)}),s.push({name:"iDisplayStart",value:t._iDisplayStart}),s.push({name:"iDisplayLength",value:!1!==t.oFeatures.bPaginate?t._iDisplayLength:-1}),i=0;r>i;i++)e=t.aoColumns[i].mData,s.push({name:"mDataProp_"+i,value:"function"==typeof e?"function":e});if(!1!==t.oFeatures.bFilter)for(s.push({name:"sSearch",value:t.oPreviousSearch.sSearch}),s.push({name:"bRegex",value:t.oPreviousSearch.bRegex}),i=0;r>i;i++)s.push({name:"sSearch_"+i,value:t.aoPreSearchCols[i].sSearch}),s.push({name:"bRegex_"+i,value:t.aoPreSearchCols[i].bRegex}),s.push({name:"bSearchable_"+i,value:t.aoColumns[i].bSearchable});if(!1!==t.oFeatures.bSort){var a=0;for(e=null!==t.aaSortingFixed?t.aaSortingFixed.concat(t.aaSorting):t.aaSorting.slice(),i=0;e.length>i;i++)for(n=t.aoColumns[e[i][0]].aDataSort,o=0;n.length>o;o++)s.push({name:"iSortCol_"+a,value:n[o]}),s.push({name:"sSortDir_"+a,value:e[i][1]}),a++;for(s.push({name:"iSortingCols",value:a}),i=0;r>i;i++)s.push({name:"bSortable_"+i,value:t.aoColumns[i].bSortable})}return s}function ka(t,e){A(t,"aoServerParams","serverParams",[e])}function Fa(t,e){if(e.sEcho!==n){if(1*e.sEcho<t.iDraw)return;t.iDraw=1*e.sEcho}(!t.oScroll.bInfinite||t.oScroll.bInfinite&&(t.bSorted||t.bFiltered))&&ga(t),t._iRecordsTotal=parseInt(e.iTotalRecords,10),t._iRecordsDisplay=parseInt(e.iTotalDisplayRecords,10);var i,o=M(t),o=e.sColumns!==n&&""!==o&&e.sColumns!=o;o&&(i=u(t,e.sColumns));for(var r=Q(t.sAjaxDataProp)(e),s=0,a=r.length;a>s;s++)if(o){for(var l=[],h=0,c=t.aoColumns.length;c>h;h++)l.push(r[s][i[h]]);H(t,l)}else H(t,r[s]);t.aiDisplay=t.aiDisplayMaster.slice(),t.bAjaxDataGet=!1,x(t),t.bAjaxDataGet=!0,E(t,!1)}function za(t){var e=t.oPreviousSearch,n=t.oLanguage.sSearch,n=-1!==n.indexOf("_INPUT_")?n.replace("_INPUT_",'<input type="text" />'):""===n?'<input type="text" />':n+' <input type="text" />',i=l.createElement("div");return i.className=t.oClasses.sFilter,i.innerHTML="<label>"+n+"</label>",t.aanFeatures.f||(i.id=t.sTableId+"_filter"),n=h('input[type="text"]',i),i._DT_Input=n[0],n.val(e.sSearch.replace('"',"&quot;")),n.bind("keyup.DT",function(){for(var n=t.aanFeatures.f,i=""===this.value?"":this.value,o=0,r=n.length;r>o;o++)n[o]!=h(this).parents("div.dataTables_filter")[0]&&h(n[o]._DT_Input).val(i);i!=e.sSearch&&K(t,{sSearch:i,bRegex:e.bRegex,bSmart:e.bSmart,bCaseInsensitive:e.bCaseInsensitive})}),n.attr("aria-controls",t.sTableId).bind("keypress.DT",function(t){return 13==t.keyCode?!1:void 0}),i}function K(t,e,n){var i=t.oPreviousSearch,o=t.aoPreSearchCols,r=function(t){i.sSearch=t.sSearch,i.bRegex=t.bRegex,i.bSmart=t.bSmart,i.bCaseInsensitive=t.bCaseInsensitive};if(t.oFeatures.bServerSide)r(e);else{for(Ga(t,e.sSearch,n,e.bRegex,e.bSmart,e.bCaseInsensitive),r(e),e=0;t.aoPreSearchCols.length>e;e++)Ha(t,o[e].sSearch,e,o[e].bRegex,o[e].bSmart,o[e].bCaseInsensitive);Ia(t)}t.bFiltered=!0,h(t.oInstance).trigger("filter",t),t._iDisplayStart=0,y(t),x(t),la(t,0)}function Ia(t){for(var e=j.ext.afnFiltering,n=r(t,"bSearchable"),i=0,o=e.length;o>i;i++)for(var s=0,a=0,l=t.aiDisplay.length;l>a;a++){var u=t.aiDisplay[a-s];e[i](t,Y(t,u,"filter",n),u)||(t.aiDisplay.splice(a-s,1),s++)}}function Ha(t,e,n,i,o,r){if(""!==e)for(var s=0,e=ma(e,i,o,r),i=t.aiDisplay.length-1;i>=0;i--)o=Ja(v(t,t.aiDisplay[i],n,"filter"),t.aoColumns[n].sType),e.test(o)||(t.aiDisplay.splice(i,1),s++)}function Ga(t,e,n,i,o,r){if(i=ma(e,i,o,r),o=t.oPreviousSearch,n||(n=0),0!==j.ext.afnFiltering.length&&(n=1),0>=e.length)t.aiDisplay.splice(0,t.aiDisplay.length),t.aiDisplay=t.aiDisplayMaster.slice();else if(t.aiDisplay.length==t.aiDisplayMaster.length||o.sSearch.length>e.length||1==n||0!==e.indexOf(o.sSearch))for(t.aiDisplay.splice(0,t.aiDisplay.length),la(t,1),e=0;t.aiDisplayMaster.length>e;e++)i.test(t.asDataSearch[e])&&t.aiDisplay.push(t.aiDisplayMaster[e]);else for(e=n=0;t.asDataSearch.length>e;e++)i.test(t.asDataSearch[e])||(t.aiDisplay.splice(e-n,1),n++)}function la(t,e){if(!t.oFeatures.bServerSide){t.asDataSearch=[];for(var n=r(t,"bSearchable"),i=1===e?t.aiDisplayMaster:t.aiDisplay,o=0,s=i.length;s>o;o++)t.asDataSearch[o]=na(t,Y(t,i[o],"filter",n))}}function na(t,e){var n=e.join("  ");return-1!==n.indexOf("&")&&(n=h("<div>").html(n).text()),n.replace(/[\n\r]/g," ")}function ma(t,e,n,i){return n?(t=e?t.split(" "):oa(t).split(" "),t="^(?=.*?"+t.join(")(?=.*?")+").*$",RegExp(t,i?"i":"")):(t=e?t:oa(t),RegExp(t,i?"i":""))}function Ja(t,e){return"function"==typeof j.ext.ofnSearch[e]?j.ext.ofnSearch[e](t):null===t?"":"html"==e?t.replace(/[\r\n]/g," ").replace(/<.*?>/g,""):"string"==typeof t?t.replace(/[\r\n]/g," "):t}function oa(t){return t.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),"\\$1")}function Ca(t){var e=l.createElement("div");return e.className=t.oClasses.sInfo,t.aanFeatures.i||(t.aoDrawCallback.push({fn:Ka,sName:"information"}),e.id=t.sTableId+"_info"),t.nTable.setAttribute("aria-describedby",t.sTableId+"_info"),e}function Ka(t){if(t.oFeatures.bInfo&&0!==t.aanFeatures.i.length){var e,n=t.oLanguage,i=t._iDisplayStart+1,o=t.fnDisplayEnd(),r=t.fnRecordsTotal(),s=t.fnRecordsDisplay();for(e=0===s?n.sInfoEmpty:n.sInfo,s!=r&&(e+=" "+n.sInfoFiltered),e+=n.sInfoPostFix,e=ja(t,e),null!==n.fnInfoCallback&&(e=n.fnInfoCallback.call(t.oInstance,t,i,o,r,s,e)),t=t.aanFeatures.i,n=0,i=t.length;i>n;n++)h(t[n]).html(e)}}function ja(t,e){var n=t.fnFormatNumber(t._iDisplayStart+1),i=t.fnDisplayEnd(),i=t.fnFormatNumber(i),o=t.fnRecordsDisplay(),o=t.fnFormatNumber(o),r=t.fnRecordsTotal(),r=t.fnFormatNumber(r);return t.oScroll.bInfinite&&(n=t.fnFormatNumber(1)),e.replace(/_START_/g,n).replace(/_END_/g,i).replace(/_TOTAL_/g,o).replace(/_MAX_/g,r)}function ba(t){var e,n,i=t.iInitDisplayStart;if(!1===t.bInitialised)setTimeout(function(){ba(t)},200);else{for(xa(t),va(t),W(t,t.aoHeader),t.nTFoot&&W(t,t.aoFooter),E(t,!0),t.oFeatures.bAutoWidth&&da(t),e=0,n=t.aoColumns.length;n>e;e++)null!==t.aoColumns[e].sWidth&&(t.aoColumns[e].nTh.style.width=q(t.aoColumns[e].sWidth));t.oFeatures.bSort?O(t):t.oFeatures.bFilter?K(t,t.oPreviousSearch):(t.aiDisplay=t.aiDisplayMaster.slice(),y(t),x(t)),null===t.sAjaxSource||t.oFeatures.bServerSide?t.oFeatures.bServerSide||(E(t,!1),$(t)):(n=[],ka(t,n),t.fnServerData.call(t.oInstance,t.sAjaxSource,n,function(n){var o=""!==t.sAjaxDataProp?Q(t.sAjaxDataProp)(n):n;for(e=0;o.length>e;e++)H(t,o[e]);t.iInitDisplayStart=i,t.oFeatures.bSort?O(t):(t.aiDisplay=t.aiDisplayMaster.slice(),y(t),x(t)),E(t,!1),$(t,n)},t))}}function $(t,e){t._bInitComplete=!0,A(t,"aoInitComplete","init",[t,e])}function pa(t){var e=j.defaults.oLanguage;!t.sEmptyTable&&t.sZeroRecords&&"No data available in table"===e.sEmptyTable&&p(t,t,"sZeroRecords","sEmptyTable"),!t.sLoadingRecords&&t.sZeroRecords&&"Loading..."===e.sLoadingRecords&&p(t,t,"sZeroRecords","sLoadingRecords")}function ya(t){if(t.oScroll.bInfinite)return null;var e,n,i='<select size="1" '+('name="'+t.sTableId+'_length"')+">",o=t.aLengthMenu;if(2==o.length&&"object"==typeof o[0]&&"object"==typeof o[1])for(e=0,n=o[0].length;n>e;e++)i+='<option value="'+o[0][e]+'">'+o[1][e]+"</option>";else for(e=0,n=o.length;n>e;e++)i+='<option value="'+o[e]+'">'+o[e]+"</option>";return i+="</select>",o=l.createElement("div"),t.aanFeatures.l||(o.id=t.sTableId+"_length"),o.className=t.oClasses.sLength,o.innerHTML="<label>"+t.oLanguage.sLengthMenu.replace("_MENU_",i)+"</label>",h('select option[value="'+t._iDisplayLength+'"]',o).attr("selected",!0),h("select",o).bind("change.DT",function(){var i=h(this).val(),o=t.aanFeatures.l;for(e=0,n=o.length;n>e;e++)o[e]!=this.parentNode&&h("select",o[e]).val(i);t._iDisplayLength=parseInt(i,10),y(t),t.fnDisplayEnd()==t.fnRecordsDisplay()&&(t._iDisplayStart=t.fnDisplayEnd()-t._iDisplayLength,0>t._iDisplayStart&&(t._iDisplayStart=0)),-1==t._iDisplayLength&&(t._iDisplayStart=0),x(t)}),h("select",o).attr("aria-controls",t.sTableId),o}function y(t){t._iDisplayEnd=!1===t.oFeatures.bPaginate?t.aiDisplay.length:t._iDisplayStart+t._iDisplayLength>t.aiDisplay.length||-1==t._iDisplayLength?t.aiDisplay.length:t._iDisplayStart+t._iDisplayLength}function Da(t){if(t.oScroll.bInfinite)return null;var e=l.createElement("div");return e.className=t.oClasses.sPaging+t.sPaginationType,j.ext.oPagination[t.sPaginationType].fnInit(t,e,function(t){y(t),x(t)}),t.aanFeatures.p||t.aoDrawCallback.push({fn:function(t){j.ext.oPagination[t.sPaginationType].fnUpdate(t,function(t){y(t),x(t)})},sName:"pagination"}),e}function qa(t,e){var n=t._iDisplayStart;if("number"==typeof e)t._iDisplayStart=e*t._iDisplayLength,t._iDisplayStart>t.fnRecordsDisplay()&&(t._iDisplayStart=0);else if("first"==e)t._iDisplayStart=0;else if("previous"==e)t._iDisplayStart=t._iDisplayLength>=0?t._iDisplayStart-t._iDisplayLength:0,0>t._iDisplayStart&&(t._iDisplayStart=0);else if("next"==e)t._iDisplayLength>=0?t._iDisplayStart+t._iDisplayLength<t.fnRecordsDisplay()&&(t._iDisplayStart+=t._iDisplayLength):t._iDisplayStart=0;else if("last"==e)if(t._iDisplayLength>=0){var i=parseInt((t.fnRecordsDisplay()-1)/t._iDisplayLength,10)+1;t._iDisplayStart=(i-1)*t._iDisplayLength}else t._iDisplayStart=0;else D(t,0,"Unknown paging action: "+e);return h(t.oInstance).trigger("page",t),n!=t._iDisplayStart}function Aa(t){var e=l.createElement("div");return t.aanFeatures.r||(e.id=t.sTableId+"_processing"),e.innerHTML=t.oLanguage.sProcessing,e.className=t.oClasses.sProcessing,t.nTable.parentNode.insertBefore(e,t.nTable),e}function E(t,e){if(t.oFeatures.bProcessing)for(var n=t.aanFeatures.r,i=0,o=n.length;o>i;i++)n[i].style.visibility=e?"visible":"hidden";h(t.oInstance).trigger("processing",[t,e])}function Ba(t){if(""===t.oScroll.sX&&""===t.oScroll.sY)return t.nTable;var e=l.createElement("div"),n=l.createElement("div"),i=l.createElement("div"),o=l.createElement("div"),r=l.createElement("div"),s=l.createElement("div"),a=t.nTable.cloneNode(!1),u=t.nTable.cloneNode(!1),c=t.nTable.getElementsByTagName("thead")[0],d=0===t.nTable.getElementsByTagName("tfoot").length?null:t.nTable.getElementsByTagName("tfoot")[0],p=t.oClasses;return n.appendChild(i),r.appendChild(s),o.appendChild(t.nTable),e.appendChild(n),e.appendChild(o),i.appendChild(a),a.appendChild(c),null!==d&&(e.appendChild(r),s.appendChild(u),u.appendChild(d)),e.className=p.sScrollWrapper,n.className=p.sScrollHead,i.className=p.sScrollHeadInner,o.className=p.sScrollBody,r.className=p.sScrollFoot,s.className=p.sScrollFootInner,t.oScroll.bAutoCss&&(n.style.overflow="hidden",n.style.position="relative",r.style.overflow="hidden",o.style.overflow="auto"),n.style.border="0",n.style.width="100%",r.style.border="0",i.style.width=""!==t.oScroll.sXInner?t.oScroll.sXInner:"100%",a.removeAttribute("id"),a.style.marginLeft="0",t.nTable.style.marginLeft="0",null!==d&&(u.removeAttribute("id"),u.style.marginLeft="0"),i=h(t.nTable).children("caption"),i.length>0&&(i=i[0],"top"===i._captionSide?a.appendChild(i):"bottom"===i._captionSide&&d&&u.appendChild(i)),""!==t.oScroll.sX&&(n.style.width=q(t.oScroll.sX),o.style.width=q(t.oScroll.sX),null!==d&&(r.style.width=q(t.oScroll.sX)),h(o).scroll(function(){n.scrollLeft=this.scrollLeft,null!==d&&(r.scrollLeft=this.scrollLeft)})),""!==t.oScroll.sY&&(o.style.height=q(t.oScroll.sY)),t.aoDrawCallback.push({fn:La,sName:"scrolling"}),t.oScroll.bInfinite&&h(o).scroll(function(){!t.bDrawing&&0!==h(this).scrollTop()&&h(this).scrollTop()+h(this).height()>h(t.nTable).height()-t.oScroll.iLoadGap&&t.fnDisplayEnd()<t.fnRecordsDisplay()&&(qa(t,"next"),y(t),x(t))}),t.nScrollHead=n,t.nScrollFoot=r,e}function La(t){var e,n,i,o,r,s,a,l,u=t.nScrollHead.getElementsByTagName("div")[0],c=u.getElementsByTagName("table")[0],d=t.nTable.parentNode,p=[],f=[],g=null!==t.nTFoot?t.nScrollFoot.getElementsByTagName("div")[0]:null,m=null!==t.nTFoot?g.getElementsByTagName("table")[0]:null,v=t.oBrowser.bScrollOversize,y=function(t){a=t.style,a.paddingTop="0",a.paddingBottom="0",a.borderTopWidth="0",a.borderBottomWidth="0",a.height=0};h(t.nTable).children("thead, tfoot").remove(),e=h(t.nTHead).clone()[0],t.nTable.insertBefore(e,t.nTable.childNodes[0]),i=t.nTHead.getElementsByTagName("tr"),o=e.getElementsByTagName("tr"),null!==t.nTFoot&&(r=h(t.nTFoot).clone()[0],t.nTable.insertBefore(r,t.nTable.childNodes[1]),s=t.nTFoot.getElementsByTagName("tr"),r=r.getElementsByTagName("tr")),""===t.oScroll.sX&&(d.style.width="100%",u.parentNode.style.width="100%");var b=N(t,e);for(e=0,n=b.length;n>e;e++)l=G(t,e),b[e].style.width=t.aoColumns[l].sWidth;null!==t.nTFoot&&C(function(t){t.style.width=""},r),t.oScroll.bCollapse&&""!==t.oScroll.sY&&(d.style.height=d.offsetHeight+t.nTHead.offsetHeight+"px"),e=h(t.nTable).outerWidth(),""===t.oScroll.sX?(t.nTable.style.width="100%",v&&(h("tbody",d).height()>d.offsetHeight||"scroll"==h(d).css("overflow-y"))&&(t.nTable.style.width=q(h(t.nTable).outerWidth()-t.oScroll.iBarWidth))):""!==t.oScroll.sXInner?t.nTable.style.width=q(t.oScroll.sXInner):e==h(d).width()&&h(d).height()<h(t.nTable).height()?(t.nTable.style.width=q(e-t.oScroll.iBarWidth),h(t.nTable).outerWidth()>e-t.oScroll.iBarWidth&&(t.nTable.style.width=q(e))):t.nTable.style.width=q(e),e=h(t.nTable).outerWidth(),C(y,o),C(function(t){p.push(q(h(t).width()))},o),C(function(t,e){t.style.width=p[e]},i),h(o).height(0),null!==t.nTFoot&&(C(y,r),C(function(t){f.push(q(h(t).width()))},r),C(function(t,e){t.style.width=f[e]},s),h(r).height(0)),C(function(t,e){t.innerHTML="",t.style.width=p[e]},o),null!==t.nTFoot&&C(function(t,e){t.innerHTML="",t.style.width=f[e]},r),e>h(t.nTable).outerWidth()?(i=d.scrollHeight>d.offsetHeight||"scroll"==h(d).css("overflow-y")?e+t.oScroll.iBarWidth:e,v&&(d.scrollHeight>d.offsetHeight||"scroll"==h(d).css("overflow-y"))&&(t.nTable.style.width=q(i-t.oScroll.iBarWidth)),d.style.width=q(i),t.nScrollHead.style.width=q(i),null!==t.nTFoot&&(t.nScrollFoot.style.width=q(i)),""===t.oScroll.sX?D(t,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."):""!==t.oScroll.sXInner&&D(t,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")):(d.style.width=q("100%"),t.nScrollHead.style.width=q("100%"),null!==t.nTFoot&&(t.nScrollFoot.style.width=q("100%"))),""===t.oScroll.sY&&v&&(d.style.height=q(t.nTable.offsetHeight+t.oScroll.iBarWidth)),""!==t.oScroll.sY&&t.oScroll.bCollapse&&(d.style.height=q(t.oScroll.sY),v=""!==t.oScroll.sX&&t.nTable.offsetWidth>d.offsetWidth?t.oScroll.iBarWidth:0,t.nTable.offsetHeight<d.offsetHeight&&(d.style.height=q(t.nTable.offsetHeight+v))),v=h(t.nTable).outerWidth(),c.style.width=q(v),u.style.width=q(v),c=h(t.nTable).height()>d.clientHeight||"scroll"==h(d).css("overflow-y"),u.style.paddingRight=c?t.oScroll.iBarWidth+"px":"0px",null!==t.nTFoot&&(m.style.width=q(v),g.style.width=q(v),g.style.paddingRight=c?t.oScroll.iBarWidth+"px":"0px"),h(d).scroll(),(t.bSorted||t.bFiltered)&&(d.scrollTop=0)}function C(t,e,n){for(var i,o,r=0,s=0,a=e.length;a>s;){for(i=e[s].firstChild,o=n?n[s].firstChild:null;i;)1===i.nodeType&&(n?t(i,o,r):t(i,r),r++),i=i.nextSibling,o=n?o.nextSibling:null;s++}}function Ma(t,e){if(!t||null===t||""===t)return 0;e||(e=l.body);var n,i=l.createElement("div");return i.style.width=q(t),e.appendChild(i),n=i.offsetWidth,e.removeChild(i),n}function da(t){var e,n,i,o=0,r=0,s=t.aoColumns.length,a=h("th",t.nTHead),u=t.nTable.getAttribute("width");for(i=t.nTable.parentNode,n=0;s>n;n++)t.aoColumns[n].bVisible&&(r++,null!==t.aoColumns[n].sWidth&&(e=Ma(t.aoColumns[n].sWidthOrig,i),null!==e&&(t.aoColumns[n].sWidth=q(e)),o++));if(s==a.length&&0===o&&r==s&&""===t.oScroll.sX&&""===t.oScroll.sY)for(n=0;t.aoColumns.length>n;n++)e=h(a[n]).width(),null!==e&&(t.aoColumns[n].sWidth=q(e));else{for(o=t.nTable.cloneNode(!1),n=t.nTHead.cloneNode(!0),r=l.createElement("tbody"),e=l.createElement("tr"),o.removeAttribute("id"),o.appendChild(n),null!==t.nTFoot&&(o.appendChild(t.nTFoot.cloneNode(!0)),C(function(t){t.style.width=""},o.getElementsByTagName("tr"))),o.appendChild(r),r.appendChild(e),r=h("thead th",o),0===r.length&&(r=h("tbody tr:eq(0)>td",o)),a=N(t,n),n=r=0;s>n;n++){var c=t.aoColumns[n];c.bVisible&&null!==c.sWidthOrig&&""!==c.sWidthOrig?a[n-r].style.width=q(c.sWidthOrig):c.bVisible?a[n-r].style.width="":r++}for(n=0;s>n;n++)t.aoColumns[n].bVisible&&(r=Na(t,n),null!==r&&(r=r.cloneNode(!0),""!==t.aoColumns[n].sContentPadding&&(r.innerHTML+=t.aoColumns[n].sContentPadding),e.appendChild(r)));if(i.appendChild(o),""!==t.oScroll.sX&&""!==t.oScroll.sXInner?o.style.width=q(t.oScroll.sXInner):""!==t.oScroll.sX?(o.style.width="",h(o).width()<i.offsetWidth&&(o.style.width=q(i.offsetWidth))):""!==t.oScroll.sY?o.style.width=q(i.offsetWidth):u&&(o.style.width=q(u)),o.style.visibility="hidden",Oa(t,o),s=h("tbody tr:eq(0)",o).children(),0===s.length&&(s=N(t,h("thead",o)[0])),""!==t.oScroll.sX){for(n=r=i=0;t.aoColumns.length>n;n++)t.aoColumns[n].bVisible&&(i=null===t.aoColumns[n].sWidthOrig?i+h(s[r]).outerWidth():i+(parseInt(t.aoColumns[n].sWidth.replace("px",""),10)+(h(s[r]).outerWidth()-h(s[r]).width())),r++);o.style.width=q(i),t.nTable.style.width=q(i)}for(n=r=0;t.aoColumns.length>n;n++)t.aoColumns[n].bVisible&&(i=h(s[r]).width(),null!==i&&i>0&&(t.aoColumns[n].sWidth=q(i)),r++);s=h(o).css("width"),t.nTable.style.width=-1!==s.indexOf("%")?s:q(h(o).outerWidth()),o.parentNode.removeChild(o)}u&&(t.nTable.style.width=q(u))}function Oa(t,e){""===t.oScroll.sX&&""!==t.oScroll.sY?(h(e).width(),e.style.width=q(h(e).outerWidth()-t.oScroll.iBarWidth)):""!==t.oScroll.sX&&(e.style.width=q(h(e).outerWidth()))}function Na(t,e){var n=Pa(t,e);if(0>n)return null;if(null===t.aoData[n].nTr){var i=l.createElement("td");return i.innerHTML=v(t,n,e,""),i}return J(t,n)[e]}function Pa(t,e){for(var n=-1,i=-1,o=0;t.aoData.length>o;o++){var r=v(t,o,e,"display")+"",r=r.replace(/<.*?>/g,"");r.length>n&&(n=r.length,i=o)}return i}function q(t){if(null===t)return"0px";if("number"==typeof t)return 0>t?"0px":t+"px";var e=t.charCodeAt(t.length-1);return 48>e||e>57?t:t+"px"}function Qa(){var t=l.createElement("p"),e=t.style;e.width="100%",e.height="200px",e.padding="0px";var n=l.createElement("div"),e=n.style;return e.position="absolute",e.top="0px",e.left="0px",e.visibility="hidden",e.width="200px",e.height="150px",e.padding="0px",e.overflow="hidden",n.appendChild(t),l.body.appendChild(n),e=t.offsetWidth,n.style.overflow="scroll",t=t.offsetWidth,e==t&&(t=n.clientWidth),l.body.removeChild(n),e-t}function O(t,e){var i,o,r,s,a,l,u=[],c=[],d=j.ext.oSort,p=t.aoData,f=t.aoColumns,g=t.oLanguage.oAria;if(!t.oFeatures.bServerSide&&(0!==t.aaSorting.length||null!==t.aaSortingFixed)){for(u=null!==t.aaSortingFixed?t.aaSortingFixed.concat(t.aaSorting):t.aaSorting.slice(),i=0;u.length>i;i++)if(o=u[i][0],r=R(t,o),s=t.aoColumns[o].sSortDataType,j.ext.afnSortData[s])if(a=j.ext.afnSortData[s].call(t.oInstance,t,o,r),a.length===p.length)for(r=0,s=p.length;s>r;r++)F(t,r,o,a[r]);else D(t,0,"Returned data sort array (col "+o+") is the wrong length");for(i=0,o=t.aiDisplayMaster.length;o>i;i++)c[t.aiDisplayMaster[i]]=i;var m,b=u.length;for(i=0,o=p.length;o>i;i++)for(r=0;b>r;r++)for(m=f[u[r][0]].aDataSort,a=0,l=m.length;l>a;a++)s=f[m[a]].sType,s=d[(s?s:"string")+"-pre"],p[i]._aSortData[m[a]]=s?s(v(t,i,m[a],"sort")):v(t,i,m[a],"sort");t.aiDisplayMaster.sort(function(t,e){var n,i,o,r,s;for(n=0;b>n;n++)for(s=f[u[n][0]].aDataSort,i=0,o=s.length;o>i;i++)if(r=f[s[i]].sType,r=d[(r?r:"string")+"-"+u[n][1]](p[t]._aSortData[s[i]],p[e]._aSortData[s[i]]),0!==r)return r;return d["numeric-asc"](c[t],c[e])})}for((e===n||e)&&!t.oFeatures.bDeferRender&&P(t),i=0,o=t.aoColumns.length;o>i;i++)s=f[i].sTitle.replace(/<.*?>/g,""),r=f[i].nTh,r.removeAttribute("aria-sort"),r.removeAttribute("aria-label"),f[i].bSortable?u.length>0&&u[0][0]==i?(r.setAttribute("aria-sort","asc"==u[0][1]?"ascending":"descending"),r.setAttribute("aria-label",s+("asc"==(f[i].asSorting[u[0][2]+1]?f[i].asSorting[u[0][2]+1]:f[i].asSorting[0])?g.sSortAscending:g.sSortDescending))):r.setAttribute("aria-label",s+("asc"==f[i].asSorting[0]?g.sSortAscending:g.sSortDescending)):r.setAttribute("aria-label",s);t.bSorted=!0,h(t.oInstance).trigger("sort",t),t.oFeatures.bFilter?K(t,t.oPreviousSearch,1):(t.aiDisplay=t.aiDisplayMaster.slice(),t._iDisplayStart=0,y(t),x(t))}function ia(t,e,n,i){Ra(e,{},function(e){if(!1!==t.aoColumns[n].bSortable){var o=function(){var i,o;if(e.shiftKey){for(var r=!1,s=0;t.aaSorting.length>s;s++)if(t.aaSorting[s][0]==n){r=!0,i=t.aaSorting[s][0],o=t.aaSorting[s][2]+1,t.aoColumns[i].asSorting[o]?(t.aaSorting[s][1]=t.aoColumns[i].asSorting[o],t.aaSorting[s][2]=o):t.aaSorting.splice(s,1);break}!1===r&&t.aaSorting.push([n,t.aoColumns[n].asSorting[0],0])}else 1==t.aaSorting.length&&t.aaSorting[0][0]==n?(i=t.aaSorting[0][0],o=t.aaSorting[0][2]+1,t.aoColumns[i].asSorting[o]||(o=0),t.aaSorting[0][1]=t.aoColumns[i].asSorting[o],t.aaSorting[0][2]=o):(t.aaSorting.splice(0,t.aaSorting.length),t.aaSorting.push([n,t.aoColumns[n].asSorting[0],0]));O(t)};t.oFeatures.bProcessing?(E(t,!0),setTimeout(function(){o(),t.oFeatures.bServerSide||E(t,!1)},0)):o(),"function"==typeof i&&i(t)}})}function P(t){var e,n,i,o,r,s=t.aoColumns.length,a=t.oClasses;for(e=0;s>e;e++)t.aoColumns[e].bSortable&&h(t.aoColumns[e].nTh).removeClass(a.sSortAsc+" "+a.sSortDesc+" "+t.aoColumns[e].sSortingClass);for(n=null!==t.aaSortingFixed?t.aaSortingFixed.concat(t.aaSorting):t.aaSorting.slice(),e=0;t.aoColumns.length>e;e++)if(t.aoColumns[e].bSortable){for(r=t.aoColumns[e].sSortingClass,o=-1,i=0;n.length>i;i++)if(n[i][0]==e){r="asc"==n[i][1]?a.sSortAsc:a.sSortDesc,o=i;break}h(t.aoColumns[e].nTh).addClass(r),t.bJUI&&(r=h("span."+a.sSortIcon,t.aoColumns[e].nTh),r.removeClass(a.sSortJUIAsc+" "+a.sSortJUIDesc+" "+a.sSortJUI+" "+a.sSortJUIAscAllowed+" "+a.sSortJUIDescAllowed),r.addClass(-1==o?t.aoColumns[e].sSortingClassJUI:"asc"==n[o][1]?a.sSortJUIAsc:a.sSortJUIDesc))}else h(t.aoColumns[e].nTh).addClass(t.aoColumns[e].sSortingClass);if(r=a.sSortColumn,t.oFeatures.bSort&&t.oFeatures.bSortClasses){for(t=J(t),o=[],e=0;s>e;e++)o.push("");for(e=0,i=1;n.length>e;e++)a=parseInt(n[e][0],10),o[a]=r+i,3>i&&i++;r=RegExp(r+"[123]");var l;for(e=0,n=t.length;n>e;e++)a=e%s,i=t[e].className,l=o[a],a=i.replace(r,l),a!=i?t[e].className=h.trim(a):l.length>0&&-1==i.indexOf(l)&&(t[e].className=i+" "+l)}}function ra(t){if(t.oFeatures.bStateSave&&!t.bDestroying){var e,n;e=t.oScroll.bInfinite;var i={iCreate:(new Date).getTime(),iStart:e?0:t._iDisplayStart,iEnd:e?t._iDisplayLength:t._iDisplayEnd,iLength:t._iDisplayLength,aaSorting:h.extend(!0,[],t.aaSorting),oSearch:h.extend(!0,{},t.oPreviousSearch),aoSearchCols:h.extend(!0,[],t.aoPreSearchCols),abVisCols:[]};for(e=0,n=t.aoColumns.length;n>e;e++)i.abVisCols.push(t.aoColumns[e].bVisible);A(t,"aoStateSaveParams","stateSaveParams",[t,i]),t.fnStateSave.call(t.oInstance,t,i)}}function Sa(t,e){if(t.oFeatures.bStateSave){var n=t.fnStateLoad.call(t.oInstance,t);if(n){var i=A(t,"aoStateLoadParams","stateLoadParams",[t,n]);if(-1===h.inArray(!1,i)){for(t.oLoadedState=h.extend(!0,{},n),t._iDisplayStart=n.iStart,t.iInitDisplayStart=n.iStart,t._iDisplayEnd=n.iEnd,t._iDisplayLength=n.iLength,t.aaSorting=n.aaSorting.slice(),t.saved_aaSorting=n.aaSorting.slice(),h.extend(t.oPreviousSearch,n.oSearch),h.extend(!0,t.aoPreSearchCols,n.aoSearchCols),e.saved_aoColumns=[],i=0;n.abVisCols.length>i;i++)e.saved_aoColumns[i]={},e.saved_aoColumns[i].bVisible=n.abVisCols[i];A(t,"aoStateLoaded","stateLoaded",[t,n])}}}}function s(t){for(var e=0;j.settings.length>e;e++)if(j.settings[e].nTable===t)return j.settings[e];return null}function T(t){for(var e=[],t=t.aoData,n=0,i=t.length;i>n;n++)null!==t[n].nTr&&e.push(t[n].nTr);return e}function J(t,e){var i,o,r,s,a,l,u=[];o=0;var h=t.aoData.length;for(e!==n&&(o=e,h=e+1),r=o;h>r;r++)if(l=t.aoData[r],null!==l.nTr){for(o=[],i=l.nTr.firstChild;i;)s=i.nodeName.toLowerCase(),("td"==s||"th"==s)&&o.push(i),i=i.nextSibling;for(s=i=0,a=t.aoColumns.length;a>s;s++)t.aoColumns[s].bVisible?u.push(o[s-i]):(u.push(l._anHidden[s]),i++)}return u}function D(t,e,n){if(t=null===t?"DataTables warning: "+n:"DataTables warning (table id = '"+t.sTableId+"'): "+n,0===e){if("alert"!=j.ext.sErrMode)throw Error(t);alert(t)}else X.console&&console.log&&console.log(t)}function p(t,e,i,o){o===n&&(o=i),e[i]!==n&&(t[o]=e[i])}function Ta(t,n){var i,o;for(o in n)n.hasOwnProperty(o)&&(i=n[o],"object"==typeof e[o]&&null!==i&&!1===h.isArray(i)?h.extend(!0,t[o],i):t[o]=i);
return t}function Ra(t,e,n){h(t).bind("click.DT",e,function(e){t.blur(),n(e)}).bind("keypress.DT",e,function(t){13===t.which&&n(t)}).bind("selectstart.DT",function(){return!1})}function z(t,e,n,i){n&&t[e].push({fn:n,sName:i})}function A(t,e,n,i){for(var e=t[e],o=[],r=e.length-1;r>=0;r--)o.push(e[r].fn.apply(t.oInstance,i));return null!==n&&h(t.oInstance).trigger(n,i),o}function Ua(t){var e=h('<div style="position:absolute; top:0; left:0; height:1px; width:1px; overflow:hidden"><div style="position:absolute; top:1px; left:1px; width:100px; overflow:scroll;"><div id="DT_BrowserTest" style="width:100%; height:10px;"></div></div></div>')[0];l.body.appendChild(e),t.oBrowser.bScrollOversize=100===h("#DT_BrowserTest",e)[0].offsetWidth?!0:!1,l.body.removeChild(e)}function Va(t){return function(){var e=[s(this[j.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return j.ext.oApi[t].apply(this,e)}}var U=/\[.*?\]$/,Wa=X.JSON?JSON.stringify:function(t){var e=typeof t;if("object"!==e||null===t)return"string"===e&&(t='"'+t+'"'),t+"";var n,i,o=[],r=h.isArray(t);for(n in t)i=t[n],e=typeof i,"string"===e?i='"'+i+'"':"object"===e&&null!==i&&(i=Wa(i)),o.push((r?"":'"'+n+'":')+i);return(r?"[":"{")+o+(r?"]":"}")};this.$=function(t,e){var n,i,o,r=[];i=s(this[j.ext.iApiIndex]);var a=i.aoData,l=i.aiDisplay,u=i.aiDisplayMaster;if(e||(e={}),e=h.extend({},{filter:"none",order:"current",page:"all"},e),"current"==e.page)for(n=i._iDisplayStart,i=i.fnDisplayEnd();i>n;n++)(o=a[l[n]].nTr)&&r.push(o);else if("current"==e.order&&"none"==e.filter)for(n=0,i=u.length;i>n;n++)(o=a[u[n]].nTr)&&r.push(o);else if("current"==e.order&&"applied"==e.filter)for(n=0,i=l.length;i>n;n++)(o=a[l[n]].nTr)&&r.push(o);else if("original"==e.order&&"none"==e.filter)for(n=0,i=a.length;i>n;n++)(o=a[n].nTr)&&r.push(o);else if("original"==e.order&&"applied"==e.filter)for(n=0,i=a.length;i>n;n++)o=a[n].nTr,-1!==h.inArray(n,l)&&o&&r.push(o);else D(i,1,"Unknown selection options");return r=h(r),n=r.filter(t),r=r.find(t),h([].concat(h.makeArray(n),h.makeArray(r)))},this._=function(t,e){var n,i,o=[],r=this.$(t,e);for(n=0,i=r.length;i>n;n++)o.push(this.fnGetData(r[n]));return o},this.fnAddData=function(t,e){if(0===t.length)return[];var i,o=[],r=s(this[j.ext.iApiIndex]);if("object"==typeof t[0]&&null!==t[0])for(var a=0;t.length>a;a++){if(i=H(r,t[a]),-1==i)return o;o.push(i)}else{if(i=H(r,t),-1==i)return o;o.push(i)}return r.aiDisplay=r.aiDisplayMaster.slice(),(e===n||e)&&aa(r),o},this.fnAdjustColumnSizing=function(t){var e=s(this[j.ext.iApiIndex]);k(e),t===n||t?this.fnDraw(!1):(""!==e.oScroll.sX||""!==e.oScroll.sY)&&this.oApi._fnScrollDraw(e)},this.fnClearTable=function(t){var e=s(this[j.ext.iApiIndex]);ga(e),(t===n||t)&&x(e)},this.fnClose=function(t){for(var e=s(this[j.ext.iApiIndex]),n=0;e.aoOpenRows.length>n;n++)if(e.aoOpenRows[n].nParent==t)return(t=e.aoOpenRows[n].nTr.parentNode)&&t.removeChild(e.aoOpenRows[n].nTr),e.aoOpenRows.splice(n,1),0;return 1},this.fnDeleteRow=function(t,e,i){var o,r,a=s(this[j.ext.iApiIndex]),t="object"==typeof t?I(a,t):t,l=a.aoData.splice(t,1);for(o=0,r=a.aoData.length;r>o;o++)null!==a.aoData[o].nTr&&(a.aoData[o].nTr._DT_RowIndex=o);return o=h.inArray(t,a.aiDisplay),a.asDataSearch.splice(o,1),ha(a.aiDisplayMaster,t),ha(a.aiDisplay,t),"function"==typeof e&&e.call(this,a,l),a._iDisplayStart>=a.fnRecordsDisplay()&&(a._iDisplayStart-=a._iDisplayLength,0>a._iDisplayStart&&(a._iDisplayStart=0)),(i===n||i)&&(y(a),x(a)),l},this.fnDestroy=function(t){var i,o,r=s(this[j.ext.iApiIndex]),a=r.nTableWrapper.parentNode,l=r.nTBody,t=t===n?!1:t;if(r.bDestroying=!0,A(r,"aoDestroyCallback","destroy",[r]),!t)for(i=0,o=r.aoColumns.length;o>i;i++)!1===r.aoColumns[i].bVisible&&this.fnSetColumnVis(i,!0);for(h(r.nTableWrapper).find("*").andSelf().unbind(".DT"),h("tbody>tr>td."+r.oClasses.sRowEmpty,r.nTable).parent().remove(),r.nTable!=r.nTHead.parentNode&&(h(r.nTable).children("thead").remove(),r.nTable.appendChild(r.nTHead)),r.nTFoot&&r.nTable!=r.nTFoot.parentNode&&(h(r.nTable).children("tfoot").remove(),r.nTable.appendChild(r.nTFoot)),r.nTable.parentNode.removeChild(r.nTable),h(r.nTableWrapper).remove(),r.aaSorting=[],r.aaSortingFixed=[],P(r),h(T(r)).removeClass(r.asStripeClasses.join(" ")),h("th, td",r.nTHead).removeClass([r.oClasses.sSortable,r.oClasses.sSortableAsc,r.oClasses.sSortableDesc,r.oClasses.sSortableNone].join(" ")),r.bJUI&&(h("th span."+r.oClasses.sSortIcon+", td span."+r.oClasses.sSortIcon,r.nTHead).remove(),h("th, td",r.nTHead).each(function(){var t=h("div."+r.oClasses.sSortJUIWrapper,this),e=t.contents();h(this).append(e),t.remove()})),!t&&r.nTableReinsertBefore?a.insertBefore(r.nTable,r.nTableReinsertBefore):t||a.appendChild(r.nTable),i=0,o=r.aoData.length;o>i;i++)null!==r.aoData[i].nTr&&l.appendChild(r.aoData[i].nTr);if(!0===r.oFeatures.bAutoWidth&&(r.nTable.style.width=q(r.sDestroyWidth)),o=r.asDestroyStripes.length)for(t=h(l).children("tr"),i=0;o>i;i++)t.filter(":nth-child("+o+"n + "+i+")").addClass(r.asDestroyStripes[i]);for(i=0,o=j.settings.length;o>i;i++)j.settings[i]==r&&j.settings.splice(i,1);e=r=null},this.fnDraw=function(t){var e=s(this[j.ext.iApiIndex]);!1===t?(y(e),x(e)):aa(e)},this.fnFilter=function(t,e,i,o,r,a){var u=s(this[j.ext.iApiIndex]);if(u.oFeatures.bFilter)if((i===n||null===i)&&(i=!1),(o===n||null===o)&&(o=!0),(r===n||null===r)&&(r=!0),(a===n||null===a)&&(a=!0),e===n||null===e){if(K(u,{sSearch:t+"",bRegex:i,bSmart:o,bCaseInsensitive:a},1),r&&u.aanFeatures.f)for(e=u.aanFeatures.f,i=0,o=e.length;o>i;i++)try{e[i]._DT_Input!=l.activeElement&&h(e[i]._DT_Input).val(t)}catch(c){h(e[i]._DT_Input).val(t)}}else h.extend(u.aoPreSearchCols[e],{sSearch:t+"",bRegex:i,bSmart:o,bCaseInsensitive:a}),K(u,u.oPreviousSearch,1)},this.fnGetData=function(t,e){var i=s(this[j.ext.iApiIndex]);if(t!==n){var o=t;if("object"==typeof t){var r=t.nodeName.toLowerCase();"tr"===r?o=I(i,t):"td"===r&&(o=I(i,t.parentNode),e=fa(i,o,t))}return e!==n?v(i,o,e,""):i.aoData[o]!==n?i.aoData[o]._aData:null}return Z(i)},this.fnGetNodes=function(t){var e=s(this[j.ext.iApiIndex]);return t!==n?e.aoData[t]!==n?e.aoData[t].nTr:null:T(e)},this.fnGetPosition=function(t){var e=s(this[j.ext.iApiIndex]),n=t.nodeName.toUpperCase();return"TR"==n?I(e,t):"TD"==n||"TH"==n?(n=I(e,t.parentNode),t=fa(e,n,t),[n,R(e,t),t]):null},this.fnIsOpen=function(t){for(var e=s(this[j.ext.iApiIndex]),n=0;e.aoOpenRows.length>n;n++)if(e.aoOpenRows[n].nParent==t)return!0;return!1},this.fnOpen=function(e,n,i){var o=s(this[j.ext.iApiIndex]),r=T(o);if(-1!==h.inArray(e,r)){this.fnClose(e);var r=l.createElement("tr"),a=l.createElement("td");return r.appendChild(a),a.className=i,a.colSpan=t(o),"string"==typeof n?a.innerHTML=n:h(a).html(n),n=h("tr",o.nTBody),-1!=h.inArray(e,n)&&h(r).insertAfter(e),o.aoOpenRows.push({nTr:r,nParent:e}),r}},this.fnPageChange=function(t,e){var i=s(this[j.ext.iApiIndex]);qa(i,t),y(i),(e===n||e)&&x(i)},this.fnSetColumnVis=function(e,i,o){var r,a,l,u,h=s(this[j.ext.iApiIndex]),c=h.aoColumns,d=h.aoData;if(c[e].bVisible!=i){if(i){for(r=a=0;e>r;r++)c[r].bVisible&&a++;if(u=a>=t(h),!u)for(r=e;c.length>r;r++)if(c[r].bVisible){l=r;break}for(r=0,a=d.length;a>r;r++)null!==d[r].nTr&&(u?d[r].nTr.appendChild(d[r]._anHidden[e]):d[r].nTr.insertBefore(d[r]._anHidden[e],J(h,r)[l]))}else for(r=0,a=d.length;a>r;r++)null!==d[r].nTr&&(l=J(h,r)[e],d[r]._anHidden[e]=l,l.parentNode.removeChild(l));for(c[e].bVisible=i,W(h,h.aoHeader),h.nTFoot&&W(h,h.aoFooter),r=0,a=h.aoOpenRows.length;a>r;r++)h.aoOpenRows[r].nTr.colSpan=t(h);(o===n||o)&&(k(h),x(h)),ra(h)}},this.fnSettings=function(){return s(this[j.ext.iApiIndex])},this.fnSort=function(t){var e=s(this[j.ext.iApiIndex]);e.aaSorting=t,O(e)},this.fnSortListener=function(t,e,n){ia(s(this[j.ext.iApiIndex]),t,e,n)},this.fnUpdate=function(t,e,i,o,a){var l=s(this[j.ext.iApiIndex]),e="object"==typeof e?I(l,e):e;if(h.isArray(t)&&i===n)for(l.aoData[e]._aData=t.slice(),i=0;l.aoColumns.length>i;i++)this.fnUpdate(v(l,e,i),e,i,!1,!1);else if(h.isPlainObject(t)&&i===n)for(l.aoData[e]._aData=h.extend(!0,{},t),i=0;l.aoColumns.length>i;i++)this.fnUpdate(v(l,e,i),e,i,!1,!1);else{F(l,e,i,t);var t=v(l,e,i,"display"),u=l.aoColumns[i];null!==u.fnRender&&(t=S(l,e,i),u.bUseRendered&&F(l,e,i,t)),null!==l.aoData[e].nTr&&(J(l,e)[i].innerHTML=t)}return i=h.inArray(e,l.aiDisplay),l.asDataSearch[i]=na(l,Y(l,e,"filter",r(l,"bSearchable"))),(a===n||a)&&k(l),(o===n||o)&&aa(l),0},this.fnVersionCheck=j.ext.fnVersionCheck,this.oApi={_fnExternApiFunc:Va,_fnInitialise:ba,_fnInitComplete:$,_fnLanguageCompat:pa,_fnAddColumn:o,_fnColumnOptions:m,_fnAddData:H,_fnCreateTr:ea,_fnGatherData:ua,_fnBuildHead:va,_fnDrawHead:W,_fnDraw:x,_fnReDraw:aa,_fnAjaxUpdate:wa,_fnAjaxParameters:Ea,_fnAjaxUpdateDraw:Fa,_fnServerParams:ka,_fnAddOptionsHtml:xa,_fnFeatureHtmlTable:Ba,_fnScrollDraw:La,_fnAdjustColumnSizing:k,_fnFeatureHtmlFilter:za,_fnFilterComplete:K,_fnFilterCustom:Ia,_fnFilterColumn:Ha,_fnFilter:Ga,_fnBuildSearchArray:la,_fnBuildSearchRow:na,_fnFilterCreateSearch:ma,_fnDataToSearch:Ja,_fnSort:O,_fnSortAttachListener:ia,_fnSortingClasses:P,_fnFeatureHtmlPaginate:Da,_fnPageChange:qa,_fnFeatureHtmlInfo:Ca,_fnUpdateInfo:Ka,_fnFeatureHtmlLength:ya,_fnFeatureHtmlProcessing:Aa,_fnProcessingDisplay:E,_fnVisibleToColumnIndex:G,_fnColumnIndexToVisible:R,_fnNodeToDataIndex:I,_fnVisbleColumns:t,_fnCalculateEnd:y,_fnConvertToWidth:Ma,_fnCalculateColumnWidths:da,_fnScrollingWidthAdjust:Oa,_fnGetWidestNode:Na,_fnGetMaxLenString:Pa,_fnStringToCss:q,_fnDetectType:B,_fnSettingsFromNode:s,_fnGetDataMaster:Z,_fnGetTrNodes:T,_fnGetTdNodes:J,_fnEscapeRegex:oa,_fnDeleteIndex:ha,_fnReOrderIndex:u,_fnColumnOrdering:M,_fnLog:D,_fnClearTable:ga,_fnSaveState:ra,_fnLoadState:Sa,_fnCreateCookie:function(a,b,c,d,e){var f=new Date;f.setTime(f.getTime()+1e3*c);var c=X.location.pathname.split("/"),a=a+"_"+c.pop().replace(/[\/:]/g,"").toLowerCase(),g;if(null!==e?(g="function"==typeof h.parseJSON?h.parseJSON(b):eval("("+b+")"),b=e(a,g,f.toGMTString(),c.join("/")+"/")):b=a+"="+encodeURIComponent(b)+"; expires="+f.toGMTString()+"; path="+c.join("/")+"/",a=l.cookie.split(";"),e=b.split(";")[0].length,f=[],e+l.cookie.length+10>4096){for(var j=0,o=a.length;o>j;j++)if(-1!=a[j].indexOf(d)){var k=a[j].split("=");try{(g=eval("("+decodeURIComponent(k[1])+")"))&&g.iCreate&&f.push({name:k[0],time:g.iCreate})}catch(m){}}for(f.sort(function(t,e){return e.time-t.time});e+l.cookie.length+10>4096;){if(0===f.length)return;d=f.pop(),l.cookie=d.name+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+c.join("/")+"/"}}l.cookie=b},_fnReadCookie:function(t){for(var e=X.location.pathname.split("/"),t=t+"_"+e[e.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",e=l.cookie.split(";"),n=0;e.length>n;n++){for(var i=e[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}return null},_fnDetectHeader:V,_fnGetUniqueThs:N,_fnScrollBarWidth:Qa,_fnApplyToChildren:C,_fnMap:p,_fnGetRowData:Y,_fnGetCellData:v,_fnSetCellData:F,_fnGetObjectDataFn:Q,_fnSetObjectDataFn:L,_fnApplyColumnDefs:ta,_fnBindAction:Ra,_fnExtend:Ta,_fnCallbackReg:z,_fnCallbackFire:A,_fnJsonString:Wa,_fnRender:S,_fnNodeToColumnIndex:fa,_fnInfoMacros:ja,_fnBrowserDetect:Ua,_fnGetColumns:r},h.extend(j.ext.oApi,this.oApi);for(var sa in j.ext.oApi)sa&&(this[sa]=Va(sa));var ca=this;return this.each(function(){var t,i,r,s=0;i=this.getAttribute("id");var a=!1,u=!1;if("table"!=this.nodeName.toLowerCase())D(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);else{for(s=0,t=j.settings.length;t>s;s++){if(j.settings[s].nTable==this){if(e===n||e.bRetrieve)return j.settings[s].oInstance;if(e.bDestroy){j.settings[s].oInstance.fnDestroy();break}return D(j.settings[s],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy"),void 0}if(j.settings[s].sTableId==this.id){j.settings.splice(s,1);break}}(null===i||""===i)&&(this.id=i="DataTables_Table_"+j.ext._oExternConfig.iNextUnique++);var c=h.extend(!0,{},j.models.oSettings,{nTable:this,oApi:ca.oApi,oInit:e,sDestroyWidth:h(this).width(),sInstance:i,sTableId:i});if(j.settings.push(c),c.oInstance=1===ca.length?ca:h(this).dataTable(),e||(e={}),e.oLanguage&&pa(e.oLanguage),e=Ta(h.extend(!0,{},j.defaults),e),p(c.oFeatures,e,"bPaginate"),p(c.oFeatures,e,"bLengthChange"),p(c.oFeatures,e,"bFilter"),p(c.oFeatures,e,"bSort"),p(c.oFeatures,e,"bInfo"),p(c.oFeatures,e,"bProcessing"),p(c.oFeatures,e,"bAutoWidth"),p(c.oFeatures,e,"bSortClasses"),p(c.oFeatures,e,"bServerSide"),p(c.oFeatures,e,"bDeferRender"),p(c.oScroll,e,"sScrollX","sX"),p(c.oScroll,e,"sScrollXInner","sXInner"),p(c.oScroll,e,"sScrollY","sY"),p(c.oScroll,e,"bScrollCollapse","bCollapse"),p(c.oScroll,e,"bScrollInfinite","bInfinite"),p(c.oScroll,e,"iScrollLoadGap","iLoadGap"),p(c.oScroll,e,"bScrollAutoCss","bAutoCss"),p(c,e,"asStripeClasses"),p(c,e,"asStripClasses","asStripeClasses"),p(c,e,"fnServerData"),p(c,e,"fnFormatNumber"),p(c,e,"sServerMethod"),p(c,e,"aaSorting"),p(c,e,"aaSortingFixed"),p(c,e,"aLengthMenu"),p(c,e,"sPaginationType"),p(c,e,"sAjaxSource"),p(c,e,"sAjaxDataProp"),p(c,e,"iCookieDuration"),p(c,e,"sCookiePrefix"),p(c,e,"sDom"),p(c,e,"bSortCellsTop"),p(c,e,"iTabIndex"),p(c,e,"oSearch","oPreviousSearch"),p(c,e,"aoSearchCols","aoPreSearchCols"),p(c,e,"iDisplayLength","_iDisplayLength"),p(c,e,"bJQueryUI","bJUI"),p(c,e,"fnCookieCallback"),p(c,e,"fnStateLoad"),p(c,e,"fnStateSave"),p(c.oLanguage,e,"fnInfoCallback"),z(c,"aoDrawCallback",e.fnDrawCallback,"user"),z(c,"aoServerParams",e.fnServerParams,"user"),z(c,"aoStateSaveParams",e.fnStateSaveParams,"user"),z(c,"aoStateLoadParams",e.fnStateLoadParams,"user"),z(c,"aoStateLoaded",e.fnStateLoaded,"user"),z(c,"aoRowCallback",e.fnRowCallback,"user"),z(c,"aoRowCreatedCallback",e.fnCreatedRow,"user"),z(c,"aoHeaderCallback",e.fnHeaderCallback,"user"),z(c,"aoFooterCallback",e.fnFooterCallback,"user"),z(c,"aoInitComplete",e.fnInitComplete,"user"),z(c,"aoPreDrawCallback",e.fnPreDrawCallback,"user"),c.oFeatures.bServerSide&&c.oFeatures.bSort&&c.oFeatures.bSortClasses?z(c,"aoDrawCallback",P,"server_side_sort_classes"):c.oFeatures.bDeferRender&&z(c,"aoDrawCallback",P,"defer_sort_classes"),e.bJQueryUI?(h.extend(c.oClasses,j.ext.oJUIClasses),e.sDom===j.defaults.sDom&&"lfrtip"===j.defaults.sDom&&(c.sDom='<"H"lfr>t<"F"ip>')):h.extend(c.oClasses,j.ext.oStdClasses),h(this).addClass(c.oClasses.sTable),(""!==c.oScroll.sX||""!==c.oScroll.sY)&&(c.oScroll.iBarWidth=Qa()),c.iInitDisplayStart===n&&(c.iInitDisplayStart=e.iDisplayStart,c._iDisplayStart=e.iDisplayStart),e.bStateSave&&(c.oFeatures.bStateSave=!0,Sa(c,e),z(c,"aoDrawCallback",ra,"state_save")),null!==e.iDeferLoading&&(c.bDeferLoading=!0,s=h.isArray(e.iDeferLoading),c._iRecordsDisplay=s?e.iDeferLoading[0]:e.iDeferLoading,c._iRecordsTotal=s?e.iDeferLoading[1]:e.iDeferLoading),null!==e.aaData&&(u=!0),""!==e.oLanguage.sUrl?(c.oLanguage.sUrl=e.oLanguage.sUrl,h.getJSON(c.oLanguage.sUrl,null,function(t){pa(t),h.extend(!0,c.oLanguage,e.oLanguage,t),ba(c)}),a=!0):h.extend(!0,c.oLanguage,e.oLanguage),null===e.asStripeClasses&&(c.asStripeClasses=[c.oClasses.sStripeOdd,c.oClasses.sStripeEven]),t=c.asStripeClasses.length,c.asDestroyStripes=[],t){for(i=!1,r=h(this).children("tbody").children("tr:lt("+t+")"),s=0;t>s;s++)r.hasClass(c.asStripeClasses[s])&&(i=!0,c.asDestroyStripes.push(c.asStripeClasses[s]));i&&r.removeClass(c.asStripeClasses.join(" "))}if(i=[],s=this.getElementsByTagName("thead"),0!==s.length&&(V(c.aoHeader,s[0]),i=N(c)),null===e.aoColumns)for(r=[],s=0,t=i.length;t>s;s++)r.push(null);else r=e.aoColumns;for(s=0,t=r.length;t>s;s++)e.saved_aoColumns!==n&&e.saved_aoColumns.length==t&&(null===r[s]&&(r[s]={}),r[s].bVisible=e.saved_aoColumns[s].bVisible),o(c,i?i[s]:null);for(ta(c,e.aoColumnDefs,r,function(t,e){m(c,t,e)}),s=0,t=c.aaSorting.length;t>s;s++){c.aaSorting[s][0]>=c.aoColumns.length&&(c.aaSorting[s][0]=0);var d=c.aoColumns[c.aaSorting[s][0]];for(c.aaSorting[s][2]===n&&(c.aaSorting[s][2]=0),e.aaSorting===n&&c.saved_aaSorting===n&&(c.aaSorting[s][1]=d.asSorting[0]),i=0,r=d.asSorting.length;r>i;i++)if(c.aaSorting[s][1]==d.asSorting[i]){c.aaSorting[s][2]=i;break}}if(P(c),Ua(c),s=h(this).children("caption").each(function(){this._captionSide=h(this).css("caption-side")}),t=h(this).children("thead"),0===t.length&&(t=[l.createElement("thead")],this.appendChild(t[0])),c.nTHead=t[0],t=h(this).children("tbody"),0===t.length&&(t=[l.createElement("tbody")],this.appendChild(t[0])),c.nTBody=t[0],c.nTBody.setAttribute("role","alert"),c.nTBody.setAttribute("aria-live","polite"),c.nTBody.setAttribute("aria-relevant","all"),t=h(this).children("tfoot"),0===t.length&&s.length>0&&(""!==c.oScroll.sX||""!==c.oScroll.sY)&&(t=[l.createElement("tfoot")],this.appendChild(t[0])),t.length>0&&(c.nTFoot=t[0],V(c.aoFooter,c.nTFoot)),u)for(s=0;e.aaData.length>s;s++)H(c,e.aaData[s]);else ua(c);c.aiDisplay=c.aiDisplayMaster.slice(),c.bInitialised=!0,!1===a&&ba(c)}}),ca=null,this};j.fnVersionCheck=function(t){for(var e=function(t,e){for(;e>t.length;)t+="0";return t},n=j.ext.sVersion.split("."),t=t.split("."),i="",o="",r=0,s=t.length;s>r;r++)i+=e(n[r],3),o+=e(t[r],3);return parseInt(i,10)>=parseInt(o,10)},j.fnIsDataTable=function(t){for(var e=j.settings,n=0;e.length>n;n++)if(e[n].nTable===t||e[n].nScrollHead===t||e[n].nScrollFoot===t)return!0;return!1},j.fnTables=function(t){var e=[];return jQuery.each(j.settings,function(n,i){(!t||!0===t&&h(i.nTable).is(":visible"))&&e.push(i.nTable)}),e},j.version="1.9.4",j.settings=[],j.models={},j.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:j.fnVersionCheck,iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},oJUIClasses:{},oPagination:{},oSort:{},sVersion:j.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}},j.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},j.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],_sRowStripe:""},j.models.oColumn={aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:!0,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},j.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollAutoCss:!0,bScrollCollapse:!1,bScrollInfinite:!1,bServerSide:!1,bSort:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(t){if(1e3>t)return t;for(var e=t+"",t=e.split(""),n="",e=e.length,i=0;e>i;i++)0===i%3&&0!==i&&(n=this.oLanguage.sInfoThousands+n),n=t[e-i-1]+n;return n},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:function(t,e,n,i){i.jqXHR=h.ajax({url:t,data:e,success:function(t){t.sError&&i.oApi._fnLog(i,0,t.sError),h(i.oInstance).trigger("xhr",[i,t]),n(t)},dataType:"json",cache:!1,type:i.sServerMethod,error:function(t,e){"parsererror"==e&&i.oApi._fnLog(i,0,"DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},fnServerParams:null,fnStateLoad:function(e){var e=this.oApi._fnReadCookie(e.sCookiePrefix+e.sInstance),j;try{j="function"==typeof h.parseJSON?h.parseJSON(e):eval("("+e+")")}catch(m){j=null}return j},fnStateLoadParams:null,fnStateLoaded:null,fnStateSave:function(t,e){this.oApi._fnCreateCookie(t.sCookiePrefix+t.sInstance,this.oApi._fnJsonString(e),t.iCookieDuration,t.sCookiePrefix,t.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:h.extend({},j.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"},j.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bUseRendered:!0,bVisible:!0,fnCreatedCell:null,fnRender:null,iDataSort:-1,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},j.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1},aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},fnRecordsDisplay:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},fnDisplayEnd:function(){return this.oFeatures.bServerSide?!1===this.oFeatures.bPaginate||-1==this._iDisplayLength?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null},j.ext=h.extend(!0,{},j.models.ext),h.extend(j.ext.oStdClasses,{sTable:"dataTable",sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"",sJUIHeader:"",sJUIFooter:""}),h.extend(j.ext.oJUIClasses,j.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollFoot:"dataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default",sJUIHeader:"fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix",sJUIFooter:"fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}),h.extend(j.ext.oPagination,{two_button:{fnInit:function(t,e,n){var i=t.oLanguage.oPaginate,o=function(e){t.oApi._fnPageChange(t,e.data.action)&&n(t)},i=t.bJUI?'<a class="'+t.oClasses.sPagePrevDisabled+'" tabindex="'+t.iTabIndex+'" role="button"><span class="'+t.oClasses.sPageJUIPrev+'"></span></a><a class="'+t.oClasses.sPageNextDisabled+'" tabindex="'+t.iTabIndex+'" role="button"><span class="'+t.oClasses.sPageJUINext+'"></span></a>':'<a class="'+t.oClasses.sPagePrevDisabled+'" tabindex="'+t.iTabIndex+'" role="button">'+i.sPrevious+'</a><a class="'+t.oClasses.sPageNextDisabled+'" tabindex="'+t.iTabIndex+'" role="button">'+i.sNext+"</a>";h(e).append(i);var r=h("a",e),i=r[0],r=r[1];t.oApi._fnBindAction(i,{action:"previous"},o),t.oApi._fnBindAction(r,{action:"next"},o),t.aanFeatures.p||(e.id=t.sTableId+"_paginate",i.id=t.sTableId+"_previous",r.id=t.sTableId+"_next",i.setAttribute("aria-controls",t.sTableId),r.setAttribute("aria-controls",t.sTableId))},fnUpdate:function(t){if(t.aanFeatures.p)for(var e,n=t.oClasses,i=t.aanFeatures.p,o=0,r=i.length;r>o;o++)(e=i[o].firstChild)&&(e.className=0===t._iDisplayStart?n.sPagePrevDisabled:n.sPagePrevEnabled,e=e.nextSibling,e.className=t.fnDisplayEnd()==t.fnRecordsDisplay()?n.sPageNextDisabled:n.sPageNextEnabled)}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(t,e,n){var i=t.oLanguage.oPaginate,o=t.oClasses,r=function(e){t.oApi._fnPageChange(t,e.data.action)&&n(t)};h(e).append('<a  tabindex="'+t.iTabIndex+'" class="'+o.sPageButton+" "+o.sPageFirst+'">'+i.sFirst+'</a><a  tabindex="'+t.iTabIndex+'" class="'+o.sPageButton+" "+o.sPagePrevious+'">'+i.sPrevious+'</a><span></span><a tabindex="'+t.iTabIndex+'" class="'+o.sPageButton+" "+o.sPageNext+'">'+i.sNext+'</a><a tabindex="'+t.iTabIndex+'" class="'+o.sPageButton+" "+o.sPageLast+'">'+i.sLast+"</a>");var s=h("a",e),i=s[0],o=s[1],a=s[2],s=s[3];t.oApi._fnBindAction(i,{action:"first"},r),t.oApi._fnBindAction(o,{action:"previous"},r),t.oApi._fnBindAction(a,{action:"next"},r),t.oApi._fnBindAction(s,{action:"last"},r),t.aanFeatures.p||(e.id=t.sTableId+"_paginate",i.id=t.sTableId+"_first",o.id=t.sTableId+"_previous",a.id=t.sTableId+"_next",s.id=t.sTableId+"_last")},fnUpdate:function(t,e){if(t.aanFeatures.p){var n,i,o=j.ext.oPagination.iFullNumbersShowPages,r=Math.floor(o/2),s=Math.ceil(t.fnRecordsDisplay()/t._iDisplayLength),a=Math.ceil(t._iDisplayStart/t._iDisplayLength)+1,l="",u=t.oClasses,c=t.aanFeatures.p,d=function(i){t.oApi._fnBindAction(this,{page:i+n-1},function(n){t.oApi._fnPageChange(t,n.data.page),e(t),n.preventDefault()})};for(-1===t._iDisplayLength?a=r=n=1:o>s?(n=1,r=s):r>=a?(n=1,r=o):a>=s-r?(n=s-o+1,r=s):(n=a-Math.ceil(o/2)+1,r=n+o-1),o=n;r>=o;o++)l+=a!==o?'<a tabindex="'+t.iTabIndex+'" class="'+u.sPageButton+'">'+t.fnFormatNumber(o)+"</a>":'<a tabindex="'+t.iTabIndex+'" class="'+u.sPageButtonActive+'">'+t.fnFormatNumber(o)+"</a>";for(o=0,r=c.length;r>o;o++)i=c[o],i.hasChildNodes()&&(h("span:eq(0)",i).html(l).children("a").each(d),i=i.getElementsByTagName("a"),i=[i[0],i[1],i[i.length-2],i[i.length-1]],h(i).removeClass(u.sPageButton+" "+u.sPageButtonActive+" "+u.sPageButtonStaticDisabled),h([i[0],i[1]]).addClass(1==a?u.sPageButtonStaticDisabled:u.sPageButton),h([i[2],i[3]]).addClass(0===s||a===s||-1===t._iDisplayLength?u.sPageButtonStaticDisabled:u.sPageButton))}}}}),h.extend(j.ext.oSort,{"string-pre":function(t){return"string"!=typeof t&&(t=null!==t&&t.toString?""+t:""),t.toLowerCase()},"string-asc":function(t,e){return e>t?-1:t>e?1:0},"string-desc":function(t,e){return e>t?1:t>e?-1:0},"html-pre":function(t){return t.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(t,e){return e>t?-1:t>e?1:0},"html-desc":function(t,e){return e>t?1:t>e?-1:0},"date-pre":function(t){return t=Date.parse(t),(isNaN(t)||""===t)&&(t=Date.parse("01/01/1970 00:00:00")),t},"date-asc":function(t,e){return t-e},"date-desc":function(t,e){return e-t},"numeric-pre":function(t){return"-"==t||""===t?0:1*t},"numeric-asc":function(t,e){return t-e},"numeric-desc":function(t,e){return e-t}}),h.extend(j.ext.aTypes,[function(t){if("number"==typeof t)return"numeric";if("string"!=typeof t)return null;var e,n=!1;if(e=t.charAt(0),-1=="0123456789-".indexOf(e))return null;for(var i=1;t.length>i;i++){if(e=t.charAt(i),-1=="0123456789.".indexOf(e))return null;if("."==e){if(n)return null;n=!0}}return"numeric"},function(t){var e=Date.parse(t);return null!==e&&!isNaN(e)||"string"==typeof t&&0===t.length?"date":null},function(t){return"string"==typeof t&&-1!=t.indexOf("<")&&-1!=t.indexOf(">")?"html":null}]),h.fn.DataTable=j,h.fn.dataTable=j,h.fn.dataTableSettings=j.settings,h.fn.dataTableExt=j.ext};"function"==typeof define&&define.amd?define(["jquery"],L):jQuery&&!jQuery.fn.dataTable&&L(jQuery)}(window,document),$.fn.dataTableExt.oApi.fnPagingInfo=function(t){return{iStart:t._iDisplayStart,iEnd:t.fnDisplayEnd(),iLength:t._iDisplayLength,iTotal:t.fnRecordsTotal(),iFilteredTotal:t.fnRecordsDisplay(),iPage:Math.ceil(t._iDisplayStart/t._iDisplayLength),iTotalPages:Math.ceil(t.fnRecordsDisplay()/t._iDisplayLength)}},$.extend($.fn.dataTableExt.oPagination,{bootstrap:{fnInit:function(t,e,n){var i=t.oLanguage.oPaginate,o=function(e){e.preventDefault(),t.oApi._fnPageChange(t,e.data.action)&&n(t)};$(e).addClass("pagination").append('<ul><li class="prev disabled"><a href="#">&larr; '+i.sPrevious+"</a></li>"+'<li class="next disabled"><a href="#">'+i.sNext+" &rarr; </a></li>"+"</ul>");var r=$("a",e);$(r[0]).bind("click.DT",{action:"previous"},o),$(r[1]).bind("click.DT",{action:"next"},o)},fnUpdate:function(t,e){var n,i,o,r,s,a=5,l=t.oInstance.fnPagingInfo(),u=t.aanFeatures.p,h=Math.floor(a/2);for(a>l.iTotalPages?(r=1,s=l.iTotalPages):h>=l.iPage?(r=1,s=a):l.iPage>=l.iTotalPages-h?(r=l.iTotalPages-a+1,s=l.iTotalPages):(r=l.iPage-h+1,s=r+a-1),n=0,iLen=u.length;iLen>n;n++){for($("li:gt(0)",u[n]).filter(":not(:last)").remove(),i=r;s>=i;i++)o=i==l.iPage+1?'class="active"':"",$("<li "+o+'><a href="#">'+i+"</a></li>").insertBefore($("li:last",u[n])[0]).bind("click",function(n){n.preventDefault(),t._iDisplayStart=(parseInt($("a",this).text(),10)-1)*l.iLength,e(t)
});0===l.iPage?$("li:first",u[n]).addClass("disabled"):$("li:first",u[n]).removeClass("disabled"),l.iPage===l.iTotalPages-1||0===l.iTotalPages?$("li:last",u[n]).addClass("disabled"):$("li:last",u[n]).removeClass("disabled")}}}}),Animator.prototype={setOptions:function(t){this.options=Animator.applyDefaults({interval:20,duration:400,onComplete:function(){},onStep:function(){},transition:Animator.tx.easeInOut},t)},seekTo:function(t){this.seekFromTo(this.state,t)},seekFromTo:function(t,e){this.target=Math.max(0,Math.min(1,e)),this.state=Math.max(0,Math.min(1,t)),this.lastTime=(new Date).getTime(),this.intervalId||(this.intervalId=window.setInterval(this.timerDelegate,this.options.interval))},jumpTo:function(t){this.target=this.state=Math.max(0,Math.min(1,t)),this.propagate()},toggle:function(){this.seekTo(1-this.target)},addSubject:function(t,e){return this.subjects[this.subjects.length]=t,this.subjectScopes[this.subjectScopes.length]=e,this},clearSubjects:function(){this.subjects=[],this.subjectScopes=[]},propagate:function(){for(var t=this.options.transition(this.state),e=0;this.subjects.length>e;e++)this.subjects[e].setState?this.subjects[e].setState(t):this.subjects[e].apply(this.subjectScopes[e],[t])},onTimerEvent:function(){var t=(new Date).getTime(),e=t-this.lastTime;this.lastTime=t;var n=e/this.options.duration*(this.state<this.target?1:-1);Math.abs(n)>=Math.abs(this.state-this.target)?this.state=this.target:this.state+=n;try{this.propagate()}finally{this.options.onStep.call(this),this.target==this.state&&(window.clearInterval(this.intervalId),this.intervalId=null,this.options.onComplete.call(this))}},play:function(){this.seekFromTo(0,1)},reverse:function(){this.seekFromTo(1,0)},inspect:function(){for(var t="#<Animator:\n",e=0;this.subjects.length>e;e++)t+=this.subjects[e].inspect();return t+=">"}},Animator.applyDefaults=function(t,e){e=e||{};var n,i={};for(n in t)i[n]=void 0!==e[n]?e[n]:t[n];return i},Animator.makeArray=function(t){if(null==t)return[];if(!t.length)return[t];for(var e=[],n=0;t.length>n;n++)e[n]=t[n];return e},Animator.camelize=function(t){var e=t.split("-");if(1==e.length)return e[0];for(var n=0==t.indexOf("-")?e[0].charAt(0).toUpperCase()+e[0].substring(1):e[0],i=1,o=e.length;o>i;i++){var r=e[i];n+=r.charAt(0).toUpperCase()+r.substring(1)}return n},Animator.apply=function(t,e,n){return e instanceof Array?new Animator(n).addSubject(new CSSStyleSubject(t,e[0],e[1])):new Animator(n).addSubject(new CSSStyleSubject(t,e))},Animator.makeEaseIn=function(t){return function(e){return Math.pow(e,2*t)}},Animator.makeEaseOut=function(t){return function(e){return 1-Math.pow(1-e,2*t)}},Animator.makeElastic=function(t){return function(e){return e=Animator.tx.easeInOut(e),(1-Math.cos(e*Math.PI*t))*(1-e)+e}},Animator.makeADSR=function(t,e,n,i){return null==i&&(i=.5),function(o){return t>o?o/t:e>o?1-(o-t)/(e-t)*(1-i):n>o?i:i*(1-(o-n)/(1-n))}},Animator.makeBounce=function(t){var e=Animator.makeElastic(t);return function(t){return t=e(t),1>=t?t:2-t}},Animator.tx={easeInOut:function(t){return-Math.cos(t*Math.PI)/2+.5},linear:function(t){return t},easeIn:Animator.makeEaseIn(1.5),easeOut:Animator.makeEaseOut(1.5),strongEaseIn:Animator.makeEaseIn(2.5),strongEaseOut:Animator.makeEaseOut(2.5),elastic:Animator.makeElastic(1),veryElastic:Animator.makeElastic(3),bouncy:Animator.makeBounce(1),veryBouncy:Animator.makeBounce(3)},NumericalStyleSubject.prototype={setState:function(t){var e=this.getStyle(t);"opacity"==this.property&&0==t?"hidden":"";for(var n=0,i=0;this.els.length>i;i++){try{this.els[i].style[this.property]=e}catch(o){if("fontWeight"!=this.property)throw o}if(n++>20)return}},getStyle:function(t){return t=this.from+(this.to-this.from)*t,"filter"==this.property?"alpha(opacity="+Math.round(100*t)+")":"opacity"==this.property?t:Math.round(t)+this.units},inspect:function(){return"	"+this.property+"("+this.from+this.units+" to "+this.to+this.units+")\n"}},ColorStyleSubject.prototype={expandColor:function(t){var e,n,i,o;return(e=ColorStyleSubject.parseColor(t))?(n=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16),[n,i,o]):(window.DEBUG&&alert("Invalid colour: '"+t+"'"),void 0)},getValueForState:function(t,e){return Math.round(this.from[t]+(this.to[t]-this.from[t])*e)},setState:function(t){for(var e="#"+ColorStyleSubject.toColorPart(this.getValueForState(0,t))+ColorStyleSubject.toColorPart(this.getValueForState(1,t))+ColorStyleSubject.toColorPart(this.getValueForState(2,t)),n=0;this.els.length>n;n++)this.els[n].style[this.property]=e},inspect:function(){return"	"+this.property+"("+this.origFrom+" to "+this.origTo+")\n"}},ColorStyleSubject.parseColor=function(t){var e,n="#";if(e=ColorStyleSubject.parseColor.rgbRe.exec(t)){for(var i,o=1;3>=o;o++)i=Math.max(0,Math.min(255,parseInt(e[o]))),n+=ColorStyleSubject.toColorPart(i);return n}if(e=ColorStyleSubject.parseColor.hexRe.exec(t)){if(3==e[1].length){for(var o=0;3>o;o++)n+=e[1].charAt(o)+e[1].charAt(o);return n}return"#"+e[1]}return!1},ColorStyleSubject.toColorPart=function(t){t>255&&(t=255);var e=t.toString(16);return 16>t?"0"+e:e},ColorStyleSubject.parseColor.rgbRe=/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i,ColorStyleSubject.parseColor.hexRe=/^\#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,DiscreteStyleSubject.prototype={setState:function(t){for(var e=0;this.els.length>e;e++)this.els[e].style[this.property]=this.threshold>=t?this.from:this.to},inspect:function(){return"	"+this.property+"("+this.from+" to "+this.to+" @ "+this.threshold+")\n"}},CSSStyleSubject.prototype={parseStyle:function(t,e){var n={};if(-1!=t.indexOf(":"))for(var i=t.split(";"),o=0;i.length>o;o++){var r=CSSStyleSubject.ruleRe.exec(i[o]);r&&(n[r[1]]=r[2])}else{var s,a,l;l=e.className,e.className=t;for(var o=0;CSSStyleSubject.cssProperties.length>o;o++)s=CSSStyleSubject.cssProperties[o],a=CSSStyleSubject.getStyle(e,s),null!=a&&(n[s]=a);e.className=l}return n},setState:function(t){for(var e=0;this.subjects.length>e;e++)this.subjects[e].setState(t)},inspect:function(){for(var t="",e=0;this.subjects.length>e;e++)t+=this.subjects[e].inspect();return t}},CSSStyleSubject.getStyle=function(t,e){var n;return document.defaultView&&document.defaultView.getComputedStyle&&(n=document.defaultView.getComputedStyle(t,"").getPropertyValue(e))?n:(e=Animator.camelize(e),t.currentStyle&&(n=t.currentStyle[e]),n||t.style[e])},CSSStyleSubject.ruleRe=/^\s*([a-zA-Z\-]+)\s*:\s*(\S(.+\S)?)\s*$/,CSSStyleSubject.numericalRe=/^-?\d+(?:\.\d+)?(%|[a-zA-Z]{2})?$/,CSSStyleSubject.discreteRe=/^\w+$/,CSSStyleSubject.cssProperties=["azimuth","background","background-attachment","background-color","background-image","background-position","background-repeat","border-collapse","border-color","border-spacing","border-style","border-top","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width","border-width","bottom","clear","clip","color","content","cursor","direction","display","elevation","empty-cells","css-float","font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","height","left","letter-spacing","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-top","margin-right","margin-bottom","margin-left","max-height","max-width","min-height","min-width","orphans","outline","outline-color","outline-style","outline-width","overflow","padding","padding-top","padding-right","padding-bottom","padding-left","pause","position","right","size","table-layout","text-align","text-decoration","text-indent","text-shadow","text-transform","top","vertical-align","visibility","white-space","width","word-spacing","z-index","opacity","outline-offset","overflow-x","overflow-y"],AnimatorChain.prototype={setOptions:function(t){this.options=Animator.applyDefaults({resetOnPlay:!0},t)},play:function(){if(this.forwards=!0,this.current=-1,this.options.resetOnPlay)for(var t=0;this.animators.length>t;t++)this.animators[t].jumpTo(0);this.advance()},reverse:function(){if(this.forwards=!1,this.current=this.animators.length,this.options.resetOnPlay)for(var t=0;this.animators.length>t;t++)this.animators[t].jumpTo(1);this.advance()},toggle:function(){this.forwards?this.seekTo(0):this.seekTo(1)},listenTo:function(t){var e=t.options.onComplete,n=this;t.options.onComplete=function(){e&&e.call(t),n.advance()}},advance:function(){if(this.forwards){if(null==this.animators[this.current+1])return;this.current++,this.animators[this.current].play()}else{if(null==this.animators[this.current-1])return;this.current--,this.animators[this.current].reverse()}},seekTo:function(t){0>=t?(this.forwards=!1,this.animators[this.current].seekTo(0)):(this.forwards=!0,this.animators[this.current].seekTo(1))}},Accordion.prototype={setOptions:function(t){this.options=Object.extend({sections:null,getActivator:function(t){return document.getElementById(t.getAttribute("activator"))},shift:0,initialSection:0,rememberance:!0,animatorOptions:{}},t||{})},show:function(t){for(var e=0;this.ans.length>e;e++)this.ans[e].seekTo(e>t?1:0);this.options.rememberance&&(document.location.hash=this.rememberanceTexts[t])}};var MBAPP={};MBAPP.COLS={PIVOT:1,SORTER:10,CLIP:0,tPIVOT:1,tSORTER:10},MBAPP.featureColumn={valence:4,arousal:5,mode:6,tempo:7,danceability:8,tagCategories:9,hiddenTags:10,tags:11,sorter:12};var SOUND_ID="";$.extend($.fn.dataTableExt.oStdClasses,{sWrapper:"dataTables_wrapper form-inline"}),$.extend($.fn.dataTableExt.oStdClasses,{sSortAsc:"header headerSortDown",sSortDesc:"header headerSortUp",sSortable:"header"}),$.fn.dataTableExt.afnSortData.magic=function(t,e){console.log("IN HERE, oSettings",t,"iColumn",e);var n=[];return $("td:eq("+(e-1)+")",t.oApi._fnGetTrNodes(t)).each(function(){n.push($(this).text())}),n},MBAPP.fnRangeFiltering=function(t,e,n){return function(i,o){var r=1*$(e).html(),s=1*$(n).html(),a="-"==o[t]?0:1*o[t];return""==r&&""==s?!0:""==r&&s>a?!0:a>r&&""==s?!0:a>r&&s>a?!0:!1}},MBAPP.validIDs="all",MBAPP.fnPivotValidIDs=function(){var t=[];if($("#constraintButtons").find("button").each(function(){$(this).hasClass("active")&&t.push($(this).attr("data-constraint"))}),0===t.length)return MBAPP.validIDs="all",void 0;var e=$("#pivot").attr("data-pivot-song-id");return""===e||void 0===e?(MBAPP.validIDs="all",void 0):(q="?c="+JSON.stringify(t)+"&song_id="+e,$.ajax({url:"/musicbrowser/constrained"+q,async:!1,dataType:"json",success:function(t){MBAPP.validIDs=t.songs,console.log(t.query);var e=t.sorter,n=MBAPP.oTable.fnGetData();$.each(n,function(t,n){var i=parseInt($(n.song_id).attr("data-song-id"),10),o=MBAPP.validIDs.indexOf(i);-1===o?MBAPP.oTable.fnUpdate("",t,MBAPP.featureColumn.sorter,!1):MBAPP.oTable.fnUpdate(e[o],t,MBAPP.featureColumn.sorter,!1)})}}),void 0)},MBAPP.fnPivotFiltering=function(t,e){if("all"===MBAPP.validIDs)return!0;var n=/\d+/,i=n.exec(e[MBAPP.COLS.tPIVOT]),o=i[0];return-1!==MBAPP.validIDs.indexOf(parseInt(o))?!0:!1},$.fn.dataTableExt.afnFiltering.push(MBAPP.fnRangeFiltering(MBAPP.featureColumn.tempo,"#tempoAmountLo","#tempoAmountHi"),MBAPP.fnRangeFiltering(MBAPP.featureColumn.valence,"#valenceAmountLo","#valenceAmountHi"),MBAPP.fnRangeFiltering(MBAPP.featureColumn.arousal,"#arousalAmountLo","#arousalAmountHi"),MBAPP.fnPivotFiltering),MBAPP.oTable=void 0,MBAPP.loadedSongs={},MBAPP.activateLinks=function(){$(".brPlayBtn").bind("click",function(t){var e=$(this).attr("data-file-name");if(e in MBAPP.loadedSongs&&1===MBAPP.loadedSongs[e].playState)return MBAPP.loadedSongs[e].stop(),t.preventDefault(),void 0;for(var n in MBAPP.loadedSongs)MBAPP.loadedSongs.hasOwnProperty(n)&&MBAPP.loadedSongs[n].stop();var i=$(this);return e in MBAPP.loadedSongs?MBAPP.loadedSongs[e].play():MBAPP.loadedSongs[e]=soundManager.createSound({id:e,url:$(this).attr("href"),autoLoad:!0,autoPlay:!1,onload:function(){this.setPosition(3e3),this.play()},onstop:function(){MBAPP.showPlayButton(i)},onplay:function(){MBAPP.showStopButton(i)},onfinish:function(){MBAPP.showPlayButton(i)}}),t.preventDefault(),!1})},MBAPP.showPlayButton=function(t){$(t).html("<i class='icon-play'></i>")},MBAPP.showStopButton=function(t){$(t).html("<i class='icon-stop'></i>")},MBAPP.showHide=function(t){var e=MBAPP.featureColumn[t],n=MBAPP.oTable.fnSettings().aoColumns[e].bVisible;MBAPP.oTable.fnSetColumnVis(e,!n)},MBAPP.loadTable=function(){MBAPP.oTable=$("#browser").dataTable({fnDrawCallback:function(){void 0!==soundManager&&soundManager.onready(function(){soundManager.stopAll()})},fnInitComplete:function(){$("#filterPivot").click(function(){MBAPP.fnPivotValidIDs(),MBAPP.oTable.fnDraw(),MBAPP.oTable.fnSort([[0,"asc"]])}),$("#removePivot").click(function(){$("#pivot").html("None"),$("#pivot").attr("data-pivot-song-id",""),MBAPP.validIDs="all",MBAPP.oTable.fnDraw()}),MBAPP.showHide("tags"),MBAPP.showHide("hiddenTags"),MBAPP.activateLinks(),$("div.dataTables_wrapper").height()},bProcessing:!0,bPaginate:!1,bAutoWidth:!1,sPaginationType:"bootstrap",sAjaxSource:"static/musicbrowser/json/browser.json",sDom:"<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",aoColumns:[{mDataProp:"filename",iDataSort:MBAPP.featureColumn.sorter,sWidth:"1px",fnRender:function(t,e){var n='<button class="btn brAddBtn" data-file-name="'+e+'"><i class="icon-plus"></i></button>',i='<a href="static/musicbrowser/mp3s/browser/context/'+e+'.mp3" class="btn brPlayBtn" data-file-name="'+e+'"><i class="icon-play"></i></a>';return'<div class="btn-group">'+i+n+"</div>"},fnCreatedCell:function(t){$(t).find(".brAddBtn").click(function(){var t=$(this).attr("data-file-name")+".mp3";t=encodeURIComponent(t),$.get("uploadSong?filename="+t,function(t){TAAPP.addSongToLibrary(t)})})}},{mDataProp:"song_id",iDataSort:MBAPP.featureColumn.sorter,sWidth:"1px",fnRender:function(t,e){var n='<button data-song-id="'+e+'" class="btn"><i class="icon-similar"></i></button>';return n},fnCreatedCell:function(t,e,n){n.song_id;var i=$(t).find("button").attr("data-song-id");$(t).find("button").click(function(){$("#pivot").html('"'+n.title+'" - '+n.artist),$("#pivot").attr("data-pivot-song-id",i),MBAPP.fnPivotValidIDs(),MBAPP.oTable.fnDraw(),MBAPP.oTable.fnSort([[0,"asc"]])})}},{mDataProp:"title"},{mDataProp:"artist"},{mDataProp:"valence",bVisible:!1},{mDataProp:"arousal",bVisible:!1},{mDataProp:"mode",bVisible:!1},{mDataProp:"tempo",bVisible:!1},{mDataProp:"danceability",bVisible:!1},{mDataProp:"categories",bVisible:!1,fnRender:function(t,e){return e.join(", ")}},{mDataProp:"tags",bVisible:!0},{mDataProp:"tags",bVisible:!0,fnRender:function(t,e){var n=e.join(", ");return""!==n?'<div title="'+n+'">(Hover)</div>':"<div></div>"},fnCreatedCell:function(t){$(t).children().first().tooltip({position:{my:"right top+15",at:"right center"}})}},{mDataProp:"sorter",bVisible:!1,sSortDataType:"magic",sType:"numeric"}]})},$(document).ready(function(){MBAPP.loadTable(),$("#constraintButtons button").click(function(){$(this).button("toggle")}),$("#browserToggleButtons button").click(function(){$(this).button("toggle");var t=$(this).data("colToggle");MBAPP.showHide(t)})}),MBAPP.generalSlide=function(t,e){return function(n,i){$(t).html(i.values[0]),$(e).html(i.values[1]),MBAPP.oTable.fnDraw()}},MBAPP.sliderTextInit=function(t,e,n){$(e).html($(t).slider("values",0)),$(n).html($(t).slider("values",1))},$(function(){$("#tempoSlider").slider({range:!0,max:250,min:0,values:[0,250],slide:MBAPP.generalSlide("#tempoAmountLo","#tempoAmountHi"),change:MBAPP.generalSlide("#tempoAmountLo","#tempoAmountHi")}),MBAPP.sliderTextInit("#tempoSlider","#tempoAmountLo","#tempoAmountHi"),$("#valenceSlider").slider({range:!0,max:200,min:-200,values:[-200,200],slide:MBAPP.generalSlide("#valenceAmountLo","#valenceAmountHi"),change:MBAPP.generalSlide("#valenceAmountLo","#valenceAmountHi")}),MBAPP.sliderTextInit("#valenceSlider","#valenceAmountLo","#valenceAmountHi"),$("#arousalSlider").slider({range:!0,max:200,min:-200,values:[-200,200],slide:MBAPP.generalSlide("#arousalAmountLo","#arousalAmountHi"),change:MBAPP.generalSlide("#arousalAmountLo","#arousalAmountHi")}),MBAPP.sliderTextInit("#arousalSlider","#arousalAmountLo","#arousalAmountHi"),$("#coarseVAFilter button").click(function(){return $(this).hasClass("active")?($("#valenceSlider").slider("option","values",[-200,200]),$("#arousalSlider").slider("option","values",[-200,200]),$(this).removeClass("active"),void 0):(1==$(this).attr("value")?($("#valenceSlider").slider("option","values",[-5,200]),$("#arousalSlider").slider("option","values",[-5,200])):2==$(this).attr("value")?($("#valenceSlider").slider("option","values",[-200,5]),$("#arousalSlider").slider("option","values",[-5,200])):3==$(this).attr("value")?($("#valenceSlider").slider("option","values",[-200,5]),$("#arousalSlider").slider("option","values",[-200,5])):4==$(this).attr("value")&&($("#valenceSlider").slider("option","values",[-5,200]),$("#arousalSlider").slider("option","values",[-200,5])),$(this).button("toggle"),void 0)})}),MBAPP.tree,MBAPP.points,MBAPP.songData,$(function(){MBAPP.findNearest=function(t,e){var n=e.indexOf(t),i=MBAPP.tree.nearest(MBAPP.points[n],6);i=i.sort(function(t,e){return t[1]-e[1]});for(var o="<div>",r=0;i.length>r;r++)for(var s=0;MBAPP.songData.length>s;s++)if(MBAPP.songData[s].title===i[r][0].title&&MBAPP.songData[s].artist===i[r][0].artist){var a=MBAPP.songData[s].filename;o+='<div class="ui360"><a href="static/musicbrowser/mp3s/browser/context/'+a+'.mp3" class="sm2_button">'+a+" ("+i[r][1].toPrecision(3)+")</a></div>"}o+="</div>",$(".nearest").html(o),void 0!==soundManager&&(soundManager.reboot(),$.getScript("static/musicbrowser/js/360player.js",function(){}))},MBAPP.reloadFeatures=function(t){$.getJSON(t,function(t){MBAPP.points=t;var e=["c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","c10","c11","c12"],n=function(t,e){for(var n=["c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","c10","c11","c12"],i=0,o=0;n.length>o;o++)i+=Math.pow(t[n[o]]-e[n[o]],2);return Math.sqrt(i)};MBAPP.tree=new kdTree(MBAPP.points,n,e);var i=[];for(x in MBAPP.points)i.push(MBAPP.points[x].artist+" - "+MBAPP.points[x].title);var o=$(".typeahead").val();-1!==i.indexOf(o)&&MBAPP.findNearest(o,i),$(".typeahead").typeahead({source:i,onselect:function(t){MBAPP.findNearest(t,i)}})})};var t="mfccs",e={mfccs:"static/musicbrowser/json/changepoints_mfccs.json",wmfccs:"static/musicbrowser/json/changepoints_mfccs_whitened.json"};$(".featureType").find("button").bind("click",function(){"mfccs"===$(this).prop("id")?t="mfccs":"wmfccs"===$(this).prop("id")&&(t="wmfccs"),$(".nearest").html(""),MBAPP.reloadFeatures(e[t])}),MBAPP.reloadFeatures(e[t]),$.getJSON("static/musicbrowser/json/browser.json",function(t){MBAPP.songData=t.aaData})});